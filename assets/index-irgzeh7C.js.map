{"version":3,"file":"index-irgzeh7C.js","sources":["../../components/Header.tsx","../../components/ModuleCard.tsx","../../components/ModuleView.tsx","../../components/modules/BudgetModule.tsx","../../components/icons/Icons.tsx","../../components/modules/SalaryModule.tsx","../../components/modules/RightsModule.tsx","../../components/modules/investmentData.ts","../../components/modules/InterestModule.tsx","../../components/modules/OverdraftModule.tsx","../../services/geminiService.ts","../../components/modules/ExpensesModule.tsx","../../components/modules/ResearchModule.tsx","../../components/FinalExam.tsx","../../components/modules/LinksModule.tsx","../../components/modules/SelfEmployedModule.tsx","../../components/ProgramCard.tsx","../../components/LandingPage.tsx","../../components/MainLandingPage.tsx","../../components/InstructorsPage.tsx","../../components/parents/FinancialParentGuide.tsx","../../components/ParentsPage.tsx","../../components/LoginPage.tsx","../../components/modules/StoryOfMoneyModule.tsx","../../components/modules/MoneyAndMeModule.tsx","../../components/modules/HowMuchCostModule.tsx","../../components/modules/MonopoliesModule.tsx","../../components/modules/SmartConsumerismModule.tsx","../../components/modules/RelationshipsMoneyModule.tsx","../../components/modules/HowToEarnModule.tsx","../../components/modules/TimeManagementModule.tsx","../../components/modules/PublicSpeakingModule.tsx","../../components/modules/BuildBusinessModule.tsx","../../components/modules/HatsarModelModule.tsx","../../components/modules/FutureManagersChallengeModule.tsx","../../components/modules/kisonim/WhereMoneyComesFromModule.tsx","../../components/modules/kisonim/NeedsVsWantsModule.tsx","../../components/modules/kisonim/SavingsAdventureModule.tsx","../../components/modules/kisonim/MagicStoreModule.tsx","../../components/modules/kisonim/JarBankModule.tsx","../../components/modules/kisonim/WorldTourModule.tsx","../../components/modules/kisonim/AdSecretsModule.tsx","../../components/modules/kisonim/EarningMissionsModule.tsx","../../components/modules/kisonim/ColorfulMarketModule.tsx","../../components/modules/kisonim/CoinsVsBillsModule.tsx","../../components/modules/kisonim/PowerOfGivingModule.tsx","../../components/modules/kisonim/SmallDecisionsModule.tsx","../../App.tsx","../../index.tsx"],"sourcesContent":["import React from 'react';\n\nconst Header: React.FC = () => {\n  return (\n    <header className=\"flex flex-col items-center justify-center text-center px-2\">\n      <div className=\"relative inline-block\">\n        <div className=\"flex items-center font-display font-bold text-4xl sm:text-6xl lg:text-7xl\">\n          <span className=\"text-brand-dark-blue bg-brand-white px-2 sm:px-3 py-1 rounded-lg border-2 border-gray-200\">חכם</span>\n          <div className=\"relative ml-1 sm:ml-2\">\n            <span className=\"text-brand-dark-blue z-10 relative\">בכיס</span>\n            <div className=\"absolute -inset-2 bg-brand-light-blue rounded-xl transform -skew-x-6 z-0\"></div>\n            <div className=\"absolute top-0 right-[-8px] sm:right-[-10px] text-lg sm:text-2xl text-brand-teal font-bold z-20\">₪</div>\n          </div>\n        </div>\n      </div>\n      <p className=\"text-brand-magenta text-lg sm:text-2xl font-display font-bold mt-2 sm:mt-3 tracking-wide\">\n        חינוך פיננסי חוויתי\n      </p>\n    </header>\n  );\n};\n\nexport default Header;","import React from 'react';\n\ninterface ModuleCardProps {\n  title: string;\n  description: string;\n  icon: React.ComponentType<{ className?: string }>;\n  onClick: () => void;\n  isVisited: boolean;\n  completionGoal?: string;\n}\n\nconst ModuleCard: React.FC<ModuleCardProps> = ({ title, description, icon: Icon, onClick, isVisited, completionGoal }) => {\n  return (\n    <div\n      onClick={onClick}\n      className=\"bg-white/60 backdrop-blur-lg p-6 rounded-3xl border border-white/50 hover:border-brand-light-blue/50 transition-all duration-300 cursor-pointer flex flex-col items-start shadow-lg hover:shadow-xl hover:shadow-brand-light-blue/20 transform hover:-translate-y-1.5\"\n    >\n      <div className=\"bg-brand-light-blue p-3 rounded-full mb-4 shadow-md shadow-brand-light-blue/30\">\n        <Icon className=\"w-8 h-8 text-white\" />\n      </div>\n      <div className=\"flex items-start gap-2 w-full\">\n        <h3 className=\"text-2xl sm:text-4xl font-bold font-display text-brand-dark-blue mb-2 break-words\">{title}</h3>\n        {isVisited && (\n            <div className=\"bg-green-500/80 rounded-full p-1 mb-2 animate-fade-in\" title=\"נצפה\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                </svg>\n            </div>\n        )}\n      </div>\n      <p className=\"text-lg sm:text-2xl text-brand-dark-blue/90 flex-grow\">{description}</p>\n      {completionGoal && (\n        <div className=\"mt-4 p-3 bg-brand-teal/10 rounded-lg text-base sm:text-xl text-brand-teal font-semibold border border-brand-teal/20 w-full\">\n          <span className=\"font-bold\">🎯 יעד להשלמה:</span> {completionGoal}\n        </div>\n      )}\n      <div className=\"mt-4 text-lg sm:text-2xl text-brand-teal font-bold flex items-center group\">\n        <span>התחל ללמוד</span>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2 transform transition-transform duration-300 group-hover:-translate-x-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M12.293 5.293a1 1 0 011.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L10 8.586l2.293-2.293z\" clipRule=\"evenodd\" transform=\"rotate(-90 10 10)\" />\n        </svg>\n      </div>\n    </div>\n  );\n};\n\nexport default ModuleCard;","import React from 'react';\n\ninterface ModuleViewProps {\n  title: string;\n  onBack: () => void;\n  children: React.ReactNode;\n}\n\nconst ModuleView: React.FC<ModuleViewProps> = ({ title, onBack, children }) => {\n  return (\n    <div className=\"bg-white/50 backdrop-blur-xl border border-white/30 rounded-4xl p-4 sm:p-10 animate-fade-in shadow-2xl\">\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8\">\n        <h2 className=\"text-3xl sm:text-5xl font-bold font-display text-brand-light-blue break-words\">{title}</h2>\n        <button\n          onClick={onBack}\n          className=\"w-full sm:w-auto bg-brand-magenta hover:bg-pink-700 text-white font-bold py-2.5 sm:py-3 px-6 sm:px-8 text-base sm:text-xl rounded-full flex items-center justify-center transition-colors duration-300\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n          </svg>\n          <span>חזרה</span>\n        </button>\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n};\n\nexport default ModuleView;","import React, { useState, useMemo, useEffect, ChangeEvent, useCallback, useRef } from 'react';\nimport type { BudgetItem, Character } from '../../types';\nimport ModuleView from '../ModuleView';\nimport { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip as RechartsTooltip } from 'recharts';\n\n// Add type declarations for the new libraries\ndeclare const html2canvas: (element: HTMLElement, options?: any) => Promise<HTMLCanvasElement>;\ndeclare const jspdf: { jsPDF: new (options?: any) => any };\n\n\ninterface BudgetModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst characters: Character[] = [\n    { \n        name: 'דניאל', \n        salary: 12000, \n        avatar: 'https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=400',\n        description: 'אחראי משמרת בן 22, גר בהרצליה'\n    },\n    { \n        name: 'יובל', \n        salary: 12800, \n        avatar: 'https://images.pexels.com/photos/18580665/pexels-photo-18580665.jpeg?auto=compress&cs=tinysrgb&w=400',\n        description: 'מאמנת כושר בת 25, גרה בפתח תקווה'\n    },\n    { \n        name: 'רוני', \n        salary: 13500, \n        avatar: 'https://images.pexels.com/photos/1040881/pexels-photo-1040881.jpeg?auto=compress&cs=tinysrgb&w=400',\n        description: 'מדריך קומיקס בן 26, גר בתל אביב'\n    },\n    { \n        name: 'מאיה', \n        salary: 14000, \n        avatar: 'https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&w=400',\n        description: 'מתכנתת מתחילה, בת 23, גרה בתל אביב'\n    },\n    { \n        name: 'איתן', \n        salary: 11500, \n        avatar: 'https://images.pexels.com/photos/18580633/pexels-photo-18580633.jpeg?auto=compress&cs=tinysrgb&w=400',\n        description: 'סטודנט בן 21, עובד בחנות בגדים בירושלים'\n    },\n];\n\nconst initialExpenses: (BudgetItem & { task?: React.ReactNode })[] = [\n    { id: 1, category: 'שכירות', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על שכירות ב<b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>היעזרו ב<b className=\"font-bold\">שאלון ההכוונה</b> כדי להבין איזו דירה אתם צריכים.</li>\n            <li>כנסו לאתר יד 2 דרך ה<b className=\"font-bold\">קישור לאתר</b> וחפשו את הדירה המתאימה.</li>\n            <li>מלאו את פרטי הדירה בכפתור <b className=\"font-bold\">מלאו את פרטי הדירה</b>.</li>\n        </ol>\n    )},\n    { id: 2, category: 'קניות בסופר', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right\">\n            <li>למדו על קניות בסופר דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>בחרו רשת שיווק בה תרצו לערוך <b className=\"font-bold\">רשימת קניות חודשית</b>.</li>\n            <li>כנסו לאתר הרשת דרך כפתור <b className=\"font-bold\">בחרו רשת</b>.</li>\n            <li>ערכו רשימת קניות חודשית שמספיקה לאדם אחד.</li>\n            <li>הזינו את הסכום שקיבלתם ב<b className=\"font-bold\">תיבת הסכום</b>.</li>\n        </ol>\n    )},\n    { id: 3, category: 'חשבונות', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על סוגי החשבונות השונים דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>לחצו על כפתור ה<b className=\"font-bold\">מחשבון</b> כדי לפתוח את שאלון הערכת ההוצאות.</li>\n            <li>ענו על השאלות לגבי הרגלי הצריכה שלכם.</li>\n            <li>המחשבון יספק הערכה חודשית. לחצו \"עדכן תקציב\" כדי להזין את הסכום.</li>\n        </ol>\n    )},\n    { id: 4, category: 'בילויים ומסעדות', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על הוצאת הבילויים דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>דמיינו שאתם בגיל של הדמות שלכם.</li>\n            <li>היעזרו ב<b className=\"font-bold\">מחשבון</b> לבחירת סוגי הבילויים שהייתם בוחרים.</li>\n            <li>ב<b className=\"font-bold\">מחשבון</b>, תזינו כמה לדעתכם הבילויים שלכם עולים וכמה פעמים בחודש תבלו.\n                <br/>\n                *אם יש בילוי אחר שלא רשום - הוסיפו אותו בקטגוריית \"<b className=\"font-bold\">אחר</b>\".\n            </li>\n            <li>לבסוף, לחצו על <b className=\"font-bold\">עדכן תקציב</b>.</li>\n        </ol>\n    )},\n    { id: 5, category: 'חסכון והשקעות', amount: 0, task: (\n        <ul className=\"list-disc list-inside text-right\">\n            <li>קבעו באמצעות הסרגל איזה אחוז מההכנסה תרצו לחסוך.</li>\n        </ul>\n    )},\n    { id: 6, category: 'נייד', amount: 0, task: (\n         <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על חבילות סלולר דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>כנסו לאתר \"כמה זה?\" דרך כפתור ה<b className=\"font-bold\">קישור לאתר</b>.</li>\n            <li>בחרו את חבילת הסלולר המתאימה והמשתלמת בעבורכם.</li>\n            <li>רשמו את הסכום החודשי ב<b className=\"font-bold\">תיבת הסכום</b>.</li>\n            <li>ב<b className=\"font-bold\">תיבת ההערות</b>, רשמו את ספק החבילה ופרטים עיקריים על החבילה.</li>\n        </ol>\n    )},\n    { id: 7, category: 'מנויים', amount: 0, task: (\n         <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על המנויים השונים דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>לחצו על <b className=\"font-bold\">כפתור הבחירה</b> ובחרו את המנויים שתרצו (לפחות 2).</li>\n            <li>הסכום והמנויים יתעדכנו אוטומטית.</li>\n        </ol>\n    )},\n    { id: 8, category: 'בלת\"מים', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו מהם בלת\"מים דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>לחצו על <b className=\"font-bold\">כפתור הבחירה</b>.</li>\n            <li>בחרו קלף שמאחוריו בלת\"ם.</li>\n            <li>הסכום והפרטים יתעדכנו אוטומטית.</li>\n        </ol>\n    )},\n    { id: 9, category: 'רכב - קנייה', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על הוצאות רכב דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>בצעו את שאלון ההכוונה כדי לקבל הכוונה על הרכב אותו אתם צריכים.</li>\n            <li>כנסו לאתר יד 2 דרך הכפתור <b className=\"font-bold\">קישור לאתר</b> ובחרו את הרכב המתאים לכם.</li>\n            <li>בצעו את הרכישה בכפתור ביצוע הרכישה על ידי מילוי פרטי הרכב.</li>\n            <li>*שימו לב שיש לכם אפשרות לחלוקת הקנייה לתשלומים.</li>\n        </ol>\n    )},\n    { id: 10, category: 'רכב- ביטוח', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על סוגי הביטוח דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>כנסו לאתר \"חובה\" דרך כפתור ה<b className=\"font-bold\">קישור לאתר</b>.</li>\n            <li>מלאו את פרטי הרכב והנהג שלב אחרי שלב.</li>\n            <li>* היעזרו בהסבר שבכפתור הנחיות למילוי.</li>\n            <li>בחרו את הצעת הביטוח המשתלמת ביותר.</li>\n            <li>רשמו את המחיר ב<b className=\"font-bold\">תיבת הסכום</b> ואת הפרטים העיקריים ב<b className=\"font-bold\">תיבת ההערות</b>.</li>\n        </ol>\n    )},\n    { id: 11, category: 'רכב- אגרות', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו מהן אגרות רישוי דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>עלות האגרה <b className=\"font-bold\">חושבה אוטומטית</b>.</li>\n        </ol>\n    )},\n    { id: 12, category: 'רכב- דלק', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על הוצאת דלק דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>עלות הדלק <b className=\"font-bold\">חושבה אוטומטית</b> לפי צריכת הדלק של הרכב ונסיעה חודשית ממוצעת.</li>\n        </ol>\n    )},\n    { id: 13, category: 'רכב - טיפולים', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על טיפולי רכב דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>בררו כמה עולה טיפול 10,000 והיעזרו ב<b className=\"font-bold\">מחשבון</b> לחישוב עלות הטיפולים.</li>\n            <li>לאחר שתלחצו על <b className=\"font-bold\">עדכן תקציב</b>, הסכום והפרטים יוזנו אוטומטית.</li>\n        </ol>\n    )},\n    { id: 14, category: 'הוצאות ביגוד', amount: 0, task: (\n        <ol className=\"list-decimal list-inside text-right space-y-2\">\n            <li>למדו על הוצאות ביגוד דרך <b className=\"font-bold\">אייקון המידע</b>.</li>\n            <li>בחרו רשת ביגוד בעזרת כפתור <b className=\"font-bold\">בחרו רשת</b>.</li>\n            <li>באתר הרשת, צרו לעצמכם מלתחה לשנה שלמה.</li>\n            <li>הזינו את הסכום ב<b className=\"font-bold\">תיבת הסכום</b>.</li>\n        </ol>\n    )},\n];\n\nconst calculateIncomeTax = (salary: number, characterName: string): number => {\n    let tax = 0;\n    const brackets = [\n        { upTo: 7010, rate: 0.10 },\n        { upTo: 10060, rate: 0.14 },\n        { upTo: 16150, rate: 0.20 },\n        { upTo: 22440, rate: 0.31 },\n        { upTo: 46690, rate: 0.35 },\n        { upTo: 60130, rate: 0.47 },\n        { upTo: Infinity, rate: 0.50 },\n    ];\n\n    let processedSalary = 0;\n\n    for (const bracket of brackets) {\n        const previousBracketLimit = processedSalary;\n        if (salary > previousBracketLimit) {\n            const taxableAmountInBracket = Math.min(salary - previousBracketLimit, bracket.upTo - previousBracketLimit);\n            tax += taxableAmountInBracket * bracket.rate;\n            processedSalary += taxableAmountInBracket;\n        } else {\n            break;\n        }\n    }\n\n    const CREDIT_POINT_VALUE = 242; // For 2024\n    let creditPoints = 2.25; // Default for male characters (דניאל, רוני)\n    if (characterName === 'יובל' || characterName === 'מאיה') {\n        creditPoints = 2.75; // For female characters\n    }\n    const taxCredit = creditPoints * CREDIT_POINT_VALUE;\n\n    const finalTax = tax - taxCredit;\n    \n    return finalTax > 0 ? finalTax : 0;\n};\n\nconst salaryDeductions = (salary: number, characterName: string): (BudgetItem & { isDeduction: boolean })[] => {\n    const incomeTax = calculateIncomeTax(salary, characterName);\n\n    // Bituach Leumi & Mas Briut calculation updated according to the official rates\n    // published by the National Insurance Institute of Israel for 2024.\n    // Source: https://www.btl.gov.il/Insurance/Rates/Pages/%D7%9C%D7%A2%D7%95%D7%91%D7%93%D7%99%D7%9D%20%D7%A9%D7%9B%D7%99%D7%A8%D7%99%D7%9D.aspx\n    let bituachLeumi = 0;\n    let masBriut = 0;\n    \n    const lowerBracketLimit = 7522; \n    const upperBracketLimit = 49030;\n\n    if (salary <= lowerBracketLimit) {\n        // Reduced rates on income up to 60% of the average wage\n        bituachLeumi = salary * 0.004; // 0.40%\n        masBriut = salary * 0.031; // 3.10%\n    } else {\n        // Calculate for the part up to the lower bracket\n        let lowerPartAmount = lowerBracketLimit;\n        bituachLeumi += lowerPartAmount * 0.004;\n        masBriut += lowerPartAmount * 0.031;\n\n        // Calculate for the part above the lower bracket up to the upper bracket\n        let upperPartAmount = Math.min(salary, upperBracketLimit) - lowerBracketLimit;\n        bituachLeumi += upperPartAmount * 0.07; // 7.00%\n        masBriut += upperPartAmount * 0.05; // 5.00%\n\n        // Income above the upper bracket is not subject to these deductions.\n    }\n    \n    const pension = salary * 0.065; // Example rate remains as an approximation\n\n    return [\n        { id: 100, category: 'מס הכנסה', amount: parseFloat(incomeTax.toFixed(2)), isDeduction: true },\n        { id: 101, category: 'ביטוח לאומי', amount: parseFloat(bituachLeumi.toFixed(2)), isDeduction: true },\n        { id: 102, category: 'מס בריאות', amount: parseFloat(masBriut.toFixed(2)), isDeduction: true },\n        { id: 103, category: 'הפרשה לפנסיה', amount: parseFloat(pension.toFixed(2)), isDeduction: true },\n    ];\n};\n\n\nconst COLORS = ['#00b1a6', '#01b2cf', '#d52963', '#f59e0b', '#10b981', '#6366f1', '#f472b6', '#8b5cf6', '#34d399', '#fbbf24', '#a3e635', '#22d3ee'];\n\nconst categoryLinks: { [key: string]: string } = {\n    'שכירות': 'https://www.yad2.co.il/realestate/rent',\n    'נייד': 'https://www.kamaze.co.il/',\n    'רכב - קנייה': 'https://www.yad2.co.il/vehicles/private-cars',\n    'רכב- ביטוח': 'https://www.hova.co.il/third-party-insurance/calc/',\n    'מס הכנסה': \"https://secapp.taxes.gov.il/srsimulatorNZ/#/simulatorMasHachnasah\",\n    'ביטוח לאומי': \"https://www.btl.gov.il/Simulators/Pages/BituahCalculator.aspx\",\n    'מס בריאות': \"https://www.btl.gov.il/Simulators/Pages/BituahCalculator.aspx\",\n};\n\nconst placeholders: Record<string, string> = {\n    'נייד': 'ספק (הוט מובייל/סלקום..), תוכנית',\n    'רכב- ביטוח': 'רשמו את שם חברת הביטוח וסוג הביטוח',\n};\n\nconst termExplanations: Record<string, string> = {\n    'שכר ברוטו': 'זהו השכר הכולל שלך לפני כל הניכויים. הוא כולל את שכר היסוד, שעות נוספות, בונוסים ותוספות אחרות.',\n    'ניכויים': 'אלו סכומים שהמעסיק שלך מוריד משכר הברוטו שלך על פי חוק (כמו מסים וביטוחים) לפני שהכסף מגיע אליך.',\n    'מס הכנסה': 'מס המוטל על הכנסתך. מחושב לפי מדרגות מס ומופחת על ידי נקודות זיכוי אישיות.',\n    'ביטוח לאומי': 'תשלום חובה למוסד לביטוח לאומי, המבטח אותך במקרים של אבטלה, פגיעה בעבודה, נכות, ומממן קצבאות.',\n    'מס בריאות': 'תשלום חובה המממן את מערכת הבריאות הציבורית ומאפשר לך לקבל שירותים רפואיים מקופת החולים.',\n    'הפרשה לפנסיה': 'חיסכון חובה לגיל פרישה. חלק מהסכום מופרש על ידך וחלק על ידי המעסיק.',\n};\n\nconst categoryExplanations: { [key: string]: { title: string; content: React.ReactNode } } = {\n    'שכירות': {\n        title: 'הסבר על שכירות',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>שכירת דירה היא הוצאה גדולה וצעד חשוב לעצמאות. כשחושבים על זה, כדאי לקחת בחשבון כמה דברים:</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>מיקום:</strong> דירה קרובה ללימודים או לעבודה יכולה לחסוך לכם הרבה כסף וזמן על נסיעות.</li>\n                    <li><strong>שותפים:</strong> לגור עם שותפים זה לא רק כיף, זה גם מקטין משמעותית את שכר הדירה והחשבונות לכל אחד.</li>\n                    <li><strong>חוזה שכירות:</strong> זהו מסמך משפטי שקובע את הכללים בין השוכר לבעל הדירה. חשוב להבין מה כתוב בו, למשל מי אחראי לתיקונים ומה כלול במחיר.</li>\n                </ul>\n            </div>\n        )\n    },\n    'חשבונות': {\n        title: 'הסבר על חשבונות',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>מעבר לשכר הדירה, ישנם עוד מספר תשלומים חודשיים או דו-חודשיים שצריך להכיר:</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>ארנונה:</strong> מס עירוני המשולם לרשות המקומית.</li>\n                    <li><strong>חשמל:</strong> תשלום לחברת החשמל לפי צריכה.</li>\n                    <li><strong>מים:</strong> תשלום לתאגיד המים המקומי לפי צריכה.</li>\n                    <li><strong>ועד בית:</strong> תשלום חודשי לכיסוי הוצאות התחזוקה של הבניין.</li>\n                    <li><strong>גז:</strong> תשלום עבור צריכת גז לבישול וחימום מים.</li>\n                </ul>\n            </div>\n        )\n    },\n    'נייד': {\n        title: 'הסבר על חבילת סלולר',\n        content: (\n            <div className=\"text-right space-y-2\">\n                 <p>השוואת חבילות סלולר היא דרך חכמה לחסוך כסף. הנה כמה דברים שכדאי לבדוק:</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>חבילת גלישה:</strong> בדקו כמה ג'יגה (GB) אתם באמת צריכים בחודש.</li>\n                    <li><strong>שיחות והודעות:</strong> רוב החבילות היום כוללות שיחות והודעות ללא הגבלה.</li>\n                    <li><strong>שיחות לחו\"ל:</strong> בדקו אם החבילה כוללת דקות שיחה למדינות שאתם צריכים.</li>\n                    <li><strong>מחיר קבוע:</strong> ודאו שהמחיר המוצע אינו \"מבצע\" זמני שעולה משמעותית לאחר שנה.</li>\n                </ul>\n                 <p className=\"mt-2 font-bold\">השתמשו באתרי השוואת מחירים כמו \"כמה זה?\" כדי למצוא את העסקה הטובה ביותר!</p>\n            </div>\n        )\n    },\n    'חסכון והשקעות': {\n        title: 'הסבר על חיסכון והשקעות',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>חיסכון הוא הרגל חשוב בניהול כספים נכון. זהו כסף שאתם שמים בצד היום כדי להשתמש בו בעתיד.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>למה לחסוך?</strong> למטרות גדולות (כמו טיול, לימודים), למקרי חירום, או פשוט כדי לבנות ביטחון כלכלי.</li>\n                    <li><strong>מה זו השקעה?</strong> השקעה היא שימוש בכסף שחסכתם כדי \"להעסיק\" אותו ולייצר עוד כסף (למשל, בשוק ההון). השקעה טומנת בחובה סיכון, אך גם פוטנציאל לרווח גבוה יותר מחיסכון רגיל.</li>\n                    <li><strong>כלל אצבע:</strong> מומלץ לחסוך לפחות 10% מההכנסה הפנויה שלכם בכל חודש.</li>\n                </ul>\n            </div>\n        )\n    },\n    'בלת\"מים': {\n        title: 'הסבר על בלת\"מ',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>בלת\"מ הוא קיצור של \"בלתי מתוכנן\". אלו הן כל ההוצאות שלא ציפינו להן, והן יכולות להפתיע אותנו בכל רגע.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>דוגמאות:</strong> דוח חנייה, תיקון פתאומי של המחשב או הטלפון, טיפול שיניים דחוף, מתנה לאירוע ששכחנו ממנו.</li>\n                    <li><strong>למה זה חשוב?</strong> אם לא נהיה מוכנים, הוצאות כאלה יכולות להכניס אותנו למינוס. לכן, חשוב לשים בצד סכום קטן בכל חודש ל\"קרן חירום\" שתעזור לנו להתמודד עם הפתעות.</li>\n                </ul>\n            </div>\n        )\n    },\n    'בילויים ומסעדות': {\n        title: 'הסבר על בילויים ומסעדות',\n        content: (\n             <div className=\"text-right space-y-2\">\n                <p>קטגוריה זו כוללת את כל הכסף שאנחנו מוציאים על הנאות ופנאי. זוהי דוגמה ל\"הוצאה משתנה\", כלומר, הוצאה שיש לנו שליטה עליה ואפשר להתאים אותה לתקציב.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>מה כלול?</strong> יציאות עם חברים, מסעדות, בתי קפה, סרטים, הופעות, מסיבות וכל תחביב אחר שעולה כסף.</li>\n                    <li><strong>המפתח לחיסכון:</strong> מכיוון שזו הוצאה גמישה, זה המקום הראשון שבו אפשר לקצץ אם רוצים לחסוך כסף למטרה אחרת.</li>\n                    <li><strong>טיפ:</strong> תכננו מראש כמה אתם רוצים להוציא על בילויים כל חודש. זה יעזור לכם ליהנות בלי לחרוג מהתקציב.</li>\n                </ul>\n            </div>\n        )\n    },\n    'קניות בסופר': {\n        title: 'הסבר על קניות בסופר',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>קניות בסופר הן הוצאה גדולה שאפשר לנהל בחוכמה. היא כוללת לא רק אוכל, אלא גם מוצרי ניקיון, טואלטיקה ועוד.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>תכנון מראש:</strong> הדרך הטובה ביותר לחסוך היא להכין רשימת קניות ולהיצמד אליה.</li>\n                    <li><strong>לא קונים רעבים:</strong> כשרעבים, קונים יותר דברים לא מתוכננים.</li>\n                    <li><strong>השוואת מחירים:</strong> שימו לב למחירים ליחידת מידה (ל-100 גרם / 1 ליטר) כדי למצוא את העסקה המשתלמת באמת.</li>\n                </ul>\n            </div>\n        )\n    },\n    'מנויים': {\n        title: 'הסבר על מנויים',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>מנויים הם תשלומים חודשיים קבועים עבור שירותים. קל לשכוח מהם, והסכומים הקטנים האלה יכולים להצטבר לסכום גדול.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>דוגמאות:</strong> נטפליקס, ספוטיפיי, חדר כושר, מנוי למגזין, אפליקציות שונות.</li>\n                    <li><strong>בדיקה תקופתית:</strong> מומלץ לעבור על רשימת המנויים שלכם פעם בכמה חודשים ולוודא שאתם עדיין משתמשים ונהנים מכולם.</li>\n                    <li><strong>ביטול קל:</strong> אל תהססו לבטל מנויים שאתם לא משתמשים בהם. זה כסף קל לחיסכון!</li>\n                </ul>\n            </div>\n        )\n    },\n    'רכב - קנייה': {\n        title: 'הסבר על קניית רכב',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>כשקונים רכב, לרוב לא משלמים את כל הסכום בבת אחת. סעיף זה מייצג את התשלום החודשי על הרכב (הלוואה או ליסינג).</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>עלות כוללת:</strong> זכרו שההוצאה על רכב לא מסתכמת רק בתשלום החודשי. יש להוסיף ביטוח, דלק, טיפולים ואגרות.</li>\n                    <li><strong>ירידת ערך:</strong> רכב הוא נכס שערכו יורד במהירות. חשוב לקחת זאת בחשבון בעת הרכישה.</li>\n                    <li><strong>תכנון:</strong> לפני שקונים רכב, חשוב לוודא שההוצאה החודשית על הרכב מתאימה לתקציב הכללי שלכם.</li>\n                </ul>\n            </div>\n        )\n    },\n    'הוצאות ביגוד': {\n        title: 'הסבר על הוצאות ביגוד',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>הוצאות על ביגוד והנעלה הן הוצאות משתנות. יש לנו שליטה מלאה על הסכום שאנו מוציאים בקטגוריה זו.</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>צורך מול רצון:</strong> חשוב להבדיל בין בגד שאנחנו באמת צריכים (למשל, מעיל לחורף) לבין בגד שאנחנו פשוט רוצים כי הוא אופנתי.</li>\n                    <li><strong>תכנון תקציב:</strong> הגדירו מראש סכום חודשי או עונתי שאתם מקצים לקניות בגדים. זה יעזור לכם להימנע מקניות אימפולסיביות.</li>\n                    <li><strong>מבצעי סוף עונה:</strong> דרך מצוינת לחסוך היא לקנות בגדים מחוץ לעונה או לחכות למבצעי סוף עונה.</li>\n                </ul>\n            </div>\n        )\n    },\n    'רכב- ביטוח': {\n        title: 'הסבר על ביטוח רכב',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>ביטוח רכב הוא חובה והוצאה משמעותית. קיימים 3 סוגים עיקריים:</p>\n                <ul className=\"list-disc list-inside pr-4\">\n                    <li><strong>ביטוח חובה:</strong> מכסה נזקי גוף (פציעות) בלבד. חובה על פי חוק.</li>\n                    <li><strong>ביטוח צד ג':</strong> מכסה נזקים לרכוש של אחרים (למשל, רכב אחר).</li>\n                    <li><strong>ביטוח מקיף:</strong> כולל חובה, צד ג', וגם מכסה נזקים לרכב שלך (תאונה, גניבה וכו').</li>\n                </ul>\n                 <p className=\"font-bold mt-2\">חשוב להשוות מחירים בין חברות הביטוח השונות!</p>\n            </div>\n        )\n    },\n    'רכב- אגרות': {\n        title: 'הסבר על אגרות רכב',\n        content: (\n             <div className=\"text-right space-y-2\">\n                <p>אגרת רישוי (או \"טסט\") היא תשלום חובה שנתי שכל בעל רכב בישראל חייב לשלם למשרד התחבורה.</p>\n                <p>גובה האגרה נקבע בעיקר לפי שווי הרכב כשהיה חדש, ופוחת עם השנים. יש לחלק את הסכום השנתי ב-12 כדי לקבל את העלות החודשית.</p>\n            </div>\n        )\n    },\n     'רכב- דלק': {\n        title: 'הסבר על עלות דלק',\n        content: (\n             <div className=\"text-right space-y-2\">\n                <p>עלות הדלק היא הוצאה משתנה ותלויה בכמה אתם נוסעים ובצריכת הדלק של הרכב שלכם (ק\"מ לליטר).</p>\n                <p>החישוב מתבצע כך: (סה\"כ ק\"מ בחודש / צריכת דלק) * מחיר ליטר דלק.</p>\n            </div>\n        )\n    },\n    'רכב - טיפולים': {\n        title: 'הסבר על טיפולי רכב',\n        content: (\n            <div className=\"text-right space-y-2\">\n                <p>טיפול שוטף (כמו \"טיפול 10,000\") חיוני לשמירה על תקינות ובטיחות הרכב. הוא כולל החלפת שמנים, פילטרים ובדיקת מערכות חיוניות.</p>\n                <p>מומלץ לשים בצד סכום חודשי קבוע לכיסוי עלויות הטיפולים השוטפים ותיקונים בלתי צפויים.</p>\n            </div>\n        )\n    }\n};\n\n// Tooltip component to reduce repetition\nconst Tooltip: React.FC<{ title: string; content: React.ReactNode }> = ({ title, content }) => (\n    <div className=\"relative group flex items-center\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-500 cursor-pointer\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n      <div className=\"absolute bottom-full right-1/2 translate-x-1/2 mb-2 w-96 bg-brand-dark-blue text-white text-2xl rounded-lg p-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-50 shadow-lg text-right\">\n        <p className=\"font-bold\">{title}</p>\n        {typeof content === 'string' ? <p>{content}</p> : content}\n        <div className=\"absolute top-full left-1/2 -ml-2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-brand-dark-blue\"></div>\n      </div>\n    </div>\n);\n  \nconst UnforeseenEventModal: React.FC<{ onClose: () => void; onResult: (result: { label: string; value: number }) => void; style?: React.CSSProperties }> = ({ onClose, onResult, style }) => {\n    const events = [\n        { label: 'דוח חנייה (-100)', value: 100 },\n        { label: 'שובר קניות (+100)', value: -100 },\n        { label: 'חתונה של חבר (-600)', value: 600 },\n        { label: 'מתנה מסבתא (+550)', value: -550 },\n        { label: 'החזר מס (+400)', value: -400 },\n        { label: 'תשלום לביטוח לאומי (-300)', value: 300 },\n    ];\n\n    const [shuffledEvents, setShuffledEvents] = useState<(typeof events)[0][]>([]);\n    const [flippedIndex, setFlippedIndex] = useState<number | null>(null);\n\n    useEffect(() => {\n        setShuffledEvents([...events].sort(() => Math.random() - 0.5));\n    }, []);\n\n    const handleCardClick = (index: number) => {\n        if (flippedIndex !== null) return;\n        setFlippedIndex(index);\n        const selectedEvent = shuffledEvents[index];\n        onResult(selectedEvent);\n    };\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-2xl shadow-2xl text-center\">\n                <h3 className=\"text-2xl font-bold mb-2 text-brand-light-blue\">הפתעה!</h3>\n                <p className=\"text-brand-dark-blue/90 mb-6\">בחיים כמו בחיים לפעמים נופלות עלינו הוצאות והפתעות, ליחצו על אחד הקלפים וגלו את שלכם.</p>\n                \n                <div className=\"grid grid-cols-3 gap-4\" style={{ perspective: '1000px' }}>\n                    {shuffledEvents.map((event, index) => (\n                        <div\n                            key={index}\n                            onClick={() => handleCardClick(index)}\n                            className={`relative w-full h-48 cursor-pointer transition-transform duration-700 ${flippedIndex === index ? '[transform:rotateY(180deg)]' : ''}`}\n                            style={{ transformStyle: 'preserve-3d' }}\n                        >\n                            {/* Card Front (Facedown) */}\n                            <div className=\"absolute w-full h-full bg-brand-teal rounded-lg flex items-center justify-center\" style={{ backfaceVisibility: 'hidden' }}>\n                                <span className=\"text-white text-5xl font-bold\">?</span>\n                            </div>\n                            {/* Card Back (Faceup) */}\n                            <div className=\"absolute w-full h-full bg-gray-100 rounded-lg flex flex-col items-center justify-center p-4 border-2 border-brand-teal\" style={{ transform: 'rotateY(180deg)', backfaceVisibility: 'hidden' }}>\n                                <p className=\"font-bold text-lg\">{event.label.split('(')[0].trim()}</p>\n                                <p className={`text-2xl font-bold ${event.value > 0 ? 'text-brand-magenta' : 'text-green-500'}`}>\n                                    {event.value > 0 ? `-${event.value.toLocaleString()} ₪` : `+${(-event.value).toLocaleString()} ₪`}\n                                </p>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n                \n                {flippedIndex !== null && <p className=\"font-bold text-xl mt-4 animate-fade-in\">התקציב עודכן!</p>}\n                \n                <button \n                    onClick={onClose} \n                    className=\"mt-6 w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-4 rounded-lg transition-colors\">\n                    סגור\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst CarQuestionnaireModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => {\n    const [step, setStep] = useState(0);\n    const [answers, setAnswers] = useState<Record<number, string>>({});\n    const [results, setResults] = useState<{\n        price: string;\n        consumption: string;\n        type: string;\n        year: string;\n        reliability: string;\n    } | null>(null);\n\n    const questions = [\n        { question: \"מה התקציב החודשי הכולל שלך לרכב (תשלומים, ביטוח, דלק)?\", options: [\"עד 1,500 ₪\", \"1,500 - 2,500 ₪\", \"מעל 2,500 ₪\"] },\n        { question: \"כמה אנשים בדרך כלל תיסע איתם ברכב?\", options: [\"לרוב לבד או עם עוד מישהו\", \"3-4 אנשים\", \"5 אנשים או יותר\"] },\n        { question: \"מה סדר העדיפויות שלך ברכישת רכב?\", options: [\"אמינות ושקט נפשי, גם אם המחיר גבוה יותר\", \"המחיר הזול ביותר, גם אם יידרשו תיקונים\"] },\n        { question: \"מה יותר חשוב לך בנסיעה?\", options: [\"חיסכון בדלק, גם אם הרכב פחות חזק\", \"ביצועים וכוח, גם אם צריכת הדלק גבוהה\"] },\n        { question: \"למה הרכב ישמש אותך בעיקר?\", options: [\"נסיעות עירוניות קצרות\", \"נסיעות ארוכות וטיולים\", \"גם וגם, שימוש מעורב\"] }\n    ];\n\n    const handleAnswer = (qIndex: number, answer: string) => {\n        const newAnswers = { ...answers, [qIndex]: answer };\n        setAnswers(newAnswers);\n\n        if (qIndex < questions.length - 1) {\n            setStep(qIndex + 1);\n        } else {\n            // Calculate results based on all answers\n            const priceResult = newAnswers[0] === 'עד 1,500 ₪' ? \"עד 40,000 ₪\" : newAnswers[0] === '1,500 - 2,500 ₪' ? \"40,000 - 80,000 ₪\" : \"מעל 80,000 ₪\";\n            const typeResult = newAnswers[1] === '5 אנשים או יותר' ? \"רכב גדול / 7 מקומות\" : newAnswers[1] === '3-4 אנשים' ? \"רכב משפחתי\" : \"רכב קטן / סופר-מיני\";\n            const reliabilityResult = newAnswers[2] === 'אמינות ושקט נפשי, גם אם המחיר גבוה יותר' ? \"רכבים חדשים ואמינים יותר (לרוב יפניים/קוריאניים)\" : \"רכבים ישנים יותר, שעלולים לדרוש תחזוקה\";\n            const yearResult = newAnswers[2] === 'אמינות ושקט נפשי, גם אם המחיר גבוה יותר' ? \"5 שנים ומטה\" : \"מעל 7 שנים\";\n            const consumptionResult = newAnswers[3] === 'חיסכון בדלק, גם אם הרכב פחות חזק' ? \"מעל 15 ק\\\"מ/ליטר\" : \"סביב 12-15 ק\\\"מ/ליטר\";\n            \n            setResults({\n                price: priceResult,\n                type: typeResult,\n                reliability: reliabilityResult,\n                year: yearResult,\n                consumption: consumptionResult\n            });\n            setStep(qIndex + 1);\n        }\n    };\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl\">\n                {step < questions.length ? (\n                    <>\n                        <h3 className=\"text-2xl font-bold mb-6 text-brand-light-blue\">שאלון התאמת רכב ({step + 1}/{questions.length})</h3>\n                        <p className=\"text-xl font-semibold mb-4\">{questions[step].question}</p>\n                        <div className=\"space-y-3\">\n                            {questions[step].options.map(opt => (\n                                <button key={opt} onClick={() => handleAnswer(step, opt)} className=\"w-full bg-gray-100 hover:bg-gray-200 p-4 rounded-lg text-lg text-right transition-colors\">\n                                    {opt}\n                                </button>\n                            ))}\n                        </div>\n                        <button onClick={onClose} className=\"mt-6 w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-4 rounded-lg transition-colors\">\n                            סגור\n                        </button>\n                    </>\n                ) : (\n                    <div className=\"text-center\">\n                        <h3 className=\"text-2xl font-bold mb-4 text-brand-teal\">המלצת החיפוש שלך:</h3>\n                        <div className=\"space-y-3 text-lg bg-gray-50 p-6 rounded-xl\">\n                            <p><strong>סוג הרכב:</strong> {results?.type}</p>\n                            <p><strong>טווח מחיר:</strong> {results?.price}</p>\n                            <p><strong>שנתון מומלץ:</strong> {results?.year}</p>\n                            <p><strong>צריכת דלק מומלצת:</strong> {results?.consumption}</p>\n                            <p><strong>דגש בחיפוש:</strong> {results?.reliability}</p>\n                            <p className=\"text-sm mt-2 pt-2 border-t border-gray-300\">\n                                - שאר הקריטריונים כמו: יד, קילומטראז ודגם ישפיעו על המחיר ועליכם למצוא את הבחירה הכי מתשלמת.\n                            </p>\n                        </div>\n                        <p className=\"mt-4\">השתמשו בנתונים האלה כדי להתחיל את החיפוש באתר \"יד2\"!</p>\n                        <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst RentQuestionnaireModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => {\n    const [step, setStep] = useState(0);\n    const [answers, setAnswers] = useState<Record<number, string>>({});\n    const [results, setResults] = useState<{\n        budget: string;\n        size: string;\n        locationType: string;\n        features: string;\n    } | null>(null);\n\n    const questions = [\n        { \n            question: \"מהו התקציב החודשי הריאלי שתרצו להקדיש לשכר דירה?\", \n            note: \"מומלץ שההוצאה על דיור לא תעלה על 35% מההכנסה נטו.\",\n            options: [\"עד 3,000 ₪ (חסכוני)\", \"3,000 - 4,500 ₪ (סטנדרטי)\", \"מעל 4,500 ₪ (מפנק)\"] \n        },\n        { \n            question: \"איך תעדיפו לגור?\", \n            options: [\"לבד (פרטיות מלאה, יקר יותר)\", \"עם שותף/ה אחד/ת (איזון בין עלויות לפרטיות)\", \"עם 2 שותפים או יותר (הכי חסכוני)\"] \n        },\n        { \n            question: \"מה הכי חשוב לכם במיקום הדירה?\", \n            options: [\"קרבה למרכזי בילוי ותחבורה ציבורית\", \"שכונה שקטה עם פארקים ושטחים ירוקים\", \"המחיר הנמוך ביותר, גם אם זה רחוק מהמרכז\"] \n        },\n        { \n            question: \"על מה לא תוכלו לוותר בדירה?\", \n            options: [\"חייב/ת מרפסת שמש\", \"חייבת להיות משופצת ומודרנית\", \"שתהיה מרוהטת (אפילו חלקית)\", \"העיקר המחיר, לא קריטי לי כלום\"] \n        }\n    ];\n\n    const handleAnswer = (qIndex: number, answer: string) => {\n        const newAnswers = { ...answers, [qIndex]: answer };\n        setAnswers(newAnswers);\n\n        if (qIndex < questions.length - 1) {\n            setStep(qIndex + 1);\n        } else {\n            // Calculate results\n            const sizeResult = newAnswers[1].includes('לבד') ? \"דירת יחיד / 2 חדרים\" : newAnswers[1].includes('אחד/ת') ? \"דירת 3 חדרים\" : \"דירת 4+ חדרים\";\n            const locationTypeResult = newAnswers[2].includes('בילוי') ? \"אזור עירוני ותוסס\" : newAnswers[2].includes('שקטה') ? \"שכונה ירוקה ורגועה\" : \"אזור משתלם כלכלית\";\n            const featuresResult = newAnswers[3].includes('העיקר המחיר') ? \"התמקדו במחיר הנמוך ביותר\" : `חפשו דירות עם דגש על: ${newAnswers[3].split(' ')[1]}`;\n            \n            setResults({\n                budget: newAnswers[0],\n                size: sizeResult,\n                locationType: locationTypeResult,\n                features: featuresResult,\n            });\n            setStep(qIndex + 1);\n        }\n    };\n    \n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl\">\n                {step < questions.length ? (\n                    <>\n                        <h3 className=\"text-2xl font-bold mb-2 text-brand-light-blue\">שאלון התאמת דירה ({step + 1}/{questions.length})</h3>\n                        <p className=\"text-xl font-semibold mb-2\">{questions[step].question}</p>\n                        {questions[step].note && <p className=\"text-sm text-gray-600 mb-4\">{questions[step].note}</p>}\n                        <div className=\"space-y-3\">\n                            {questions[step].options.map(opt => (\n                                <button key={opt} onClick={() => handleAnswer(step, opt)} className=\"w-full bg-gray-100 hover:bg-gray-200 p-4 rounded-lg text-lg text-right transition-colors\">\n                                    {opt}\n                                </button>\n                            ))}\n                        </div>\n                         <button onClick={onClose} className=\"mt-6 w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-4 rounded-lg transition-colors\">\n                            סגור\n                        </button>\n                    </>\n                ) : (\n                    <div className=\"text-center\">\n                        <h3 className=\"text-2xl font-bold mb-4 text-brand-teal\">המלצת החיפוש שלך:</h3>\n                        <div className=\"space-y-3 text-lg bg-gray-50 p-6 rounded-xl text-right\">\n                            <p><strong>🏠 סוג דירה:</strong> {results?.size}</p>\n                            <p><strong>💰 תקציב מומלץ:</strong> {results?.budget}</p>\n                            <p><strong>📍 אופי השכונה:</strong> {results?.locationType}</p>\n                            <p><strong>✨ דגשים לחיפוש:</strong> {results?.features}</p>\n                        </div>\n                        <p className=\"mt-4\">השתמשו בנתונים האלה כדי להתחיל את החיפוש באתר \"יד2\"!</p>\n                        <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור והמשך</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\n\nconst SupermarketModal: React.FC<{\n    onClose: () => void;\n    onSelect: (name: string) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSelect, style }) => {\n    const supermarkets = [\n        { name: 'רמי לוי', url: 'https://www.rami-levy.co.il/' },\n        { name: 'שופרסל', url: 'https://www.shufersal.co.il/' },\n        { name: 'ויקטורי', url: 'https://www.victory.co.il/' },\n        { name: 'חצי חינם', url: 'https://shop.hazi-hinam.co.il/' },\n    ];\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-xs shadow-2xl text-center\">\n                <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">בחר רשת שיווק</h3>\n                <div className=\"flex flex-col gap-3\">\n                    {supermarkets.map(s => (\n                        <a\n                            key={s.name}\n                            href={s.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            onClick={() => {\n                                onSelect(s.name);\n                                onClose();\n                            }}\n                            className=\"block w-full bg-brand-teal hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors\"\n                        >\n                            {s.name}\n                        </a>\n                    ))}\n                </div>\n                <button\n                    onClick={onClose}\n                    className=\"mt-6 w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-4 rounded-lg transition-colors\">\n                    סגור\n                </button>\n            </div>\n        </div>\n    );\n};\n\nconst ClothingStoreModal: React.FC<{\n    onClose: () => void;\n    onSelect: (name: string) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSelect, style }) => {\n    const stores = [\n        { name: 'Terminal X', url: 'https://www.terminalx.com/' },\n        { name: 'Zara', url: 'https://www.zara.com/il/' },\n        { name: 'H&M', url: 'https://www2.hm.com/he_il/index.html' },\n        { name: 'Castro', url: 'https://www.castro.com/' },\n        { name: 'Fox', url: 'https://www.fox.co.il/' },\n    ];\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-xs shadow-2xl text-center\">\n                <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">בחר רשת ביגוד</h3>\n                <div className=\"flex flex-col gap-3\">\n                    {stores.map(s => (\n                        <a\n                            key={s.name}\n                            href={s.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            onClick={() => onSelect(s.name)}\n                            className=\"block w-full bg-brand-teal hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors\"\n                        >\n                            {s.name}\n                        </a>\n                    ))}\n                </div>\n                <button\n                    onClick={onClose}\n                    className=\"mt-6 w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-4 rounded-lg transition-colors\">\n                    סגור\n                </button>\n            </div>\n        </div>\n    );\n};\n\n\nconst subscriptionOptions = [\n    { name: 'מנוי לחדר כושר', price: 250 },\n    { name: 'מנוי לנטפליקס', price: 55 },\n    { name: 'מנוי לבריכה', price: 300 },\n    { name: 'מנוי לקורס דיגיטלי', price: 100 },\n    { name: 'מנוי לגוגל', price: 12 },\n    { name: 'מנוי לכלי בינה מלאכותית', price: 75 },\n    { name: 'מנוי לקופת חולים', price: 40 },\n];\n\nconst SubscriptionsModal: React.FC<{\n    onClose: () => void;\n    onSave: (total: number, selectedNames: string[]) => void;\n    initialSelected: string[];\n    setInitialSelected: (selected: string[]) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSave, initialSelected, setInitialSelected, style }) => {\n    const [currentOptions, setCurrentOptions] = useState(subscriptionOptions);\n    const [selected, setSelected] = useState<string[]>(initialSelected);\n    const [newSubName, setNewSubName] = useState('');\n    const [newSubPrice, setNewSubPrice] = useState('');\n\n\n    const handleToggle = (name: string) => {\n        const newSelected = selected.includes(name) ? selected.filter(item => item !== name) : [...selected, name];\n        setSelected(newSelected);\n        setInitialSelected(newSelected);\n    };\n\n    const handleSave = () => {\n        const total = selected.reduce((sum, name) => {\n            const sub = currentOptions.find(s => s.name === name);\n            return sum + (sub ? sub.price : 0);\n        }, 0);\n        onSave(total, selected);\n    };\n\n    const handleAddSubscription = () => {\n        if (newSubName.trim() && newSubPrice && !isNaN(Number(newSubPrice)) && Number(newSubPrice) > 0) {\n            const newSub = { name: newSubName, price: Number(newSubPrice) };\n            if (!currentOptions.some(opt => opt.name === newSubName)) {\n                setCurrentOptions(prev => [...prev, newSub]);\n            }\n            setNewSubName('');\n            setNewSubPrice('');\n        }\n    };\n    \n    const canSave = selected.length >= 2;\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-md shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">בחירת מנויים</h3>\n                <p className=\"mb-4 text-brand-dark-blue/80\">בחרו לפחות 2 מנויים מהרשימה:</p>\n                <div className=\"space-y-3 max-h-60 overflow-y-auto pr-2\">\n                    {currentOptions.map(sub => (\n                        <label key={sub.name} className=\"flex items-center p-3 bg-gray-100 rounded-lg cursor-pointer hover:bg-gray-200\">\n                            <input\n                                type=\"checkbox\"\n                                checked={selected.includes(sub.name)}\n                                onChange={() => handleToggle(sub.name)}\n                                className=\"h-5 w-5 rounded border-gray-300 text-brand-teal focus:ring-brand-teal\"\n                            />\n                            <span className=\"mr-3 text-lg\">{sub.name}</span>\n                            <span className=\"mr-auto font-mono text-gray-600\">({sub.price} ₪)</span>\n                        </label>\n                    ))}\n                </div>\n                 <div className=\"mt-4 pt-4 border-t border-gray-300\">\n                    <h4 className=\"font-semibold mb-2\">הוספת מנוי חדש:</h4>\n                    <div className=\"flex flex-col sm:flex-row gap-2\">\n                        <input \n                            type=\"text\" \n                            placeholder=\"שם המנוי\" \n                            value={newSubName} \n                            onChange={(e) => setNewSubName(e.target.value)}\n                            className=\"w-full p-2 border rounded-md\"\n                        />\n                        <input \n                            type=\"number\" \n                            placeholder=\"מחיר (₪)\" \n                            value={newSubPrice} \n                            onChange={(e) => setNewSubPrice(e.target.value)}\n                            className=\"w-full sm:w-28 p-2 border rounded-md\"\n                        />\n                        <button onClick={handleAddSubscription} className=\"bg-gray-200 hover:bg-gray-300 p-2 rounded-md font-bold\">הוסף</button>\n                    </div>\n                </div>\n                <div className=\"mt-6 flex flex-col gap-2\">\n                     <button \n                        onClick={handleSave} \n                        disabled={!canSave}\n                        className=\"w-full bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-4 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                     >\n                        חשב סכומים\n                    </button>\n                    <button onClick={onClose} className=\"w-full bg-gray-300 hover:bg-gray-400 font-bold py-2 px-4 rounded-lg\">\n                        ביטול\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst LicenseFeeExplanationModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => (\n    <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n        <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl text-center\">\n            <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">מהי אגרת רישוי?</h3>\n            <div className=\"text-lg text-right space-y-3\">\n                <p>אגרת רישוי (או \"טסט\") היא תשלום חובה שנתי שכל בעל רכב בישראל חייב לשלם למשרד התחבורה.</p>\n                <p>התשלום מאפשר לרכב לנוע בכבישי הארץ באופן חוקי לשנה הקרובה, לאחר שעבר את מבחן הרישוי השנתי.</p>\n                <p><strong>איך מחושב גובה האגרה?</strong> גובה האגרה נקבע בעיקר לפי שווי הרכב כשהיה חדש (\"מחיר לצרכן\"). ככל שהרכב היה יקר יותר, כך האגרה תהיה גבוהה יותר. עם זאת, גובה האגרה פוחת עם השנים ככל שהרכב מתיישן.</p>\n            </div>\n            <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור</button>\n        </div>\n    </div>\n);\n\nconst FuelCostExplanationModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => (\n    <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n        <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl text-center\">\n            <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">איך חושבה עלות הדלק?</h3>\n            <div className=\"text-lg text-right space-y-3\">\n                <p>עלות הדלק החודשית מחושבת על בסיס שלושה נתונים:</p>\n                <ul className=\"list-disc list-inside space-y-2 pr-4\">\n                    <li><strong>נסיעה חודשית ממוצעת:</strong> הנחנו נסיעה של 1,500 ק\"מ בחודש.</li>\n                    <li><strong>צריכת הדלק של הרכב:</strong> הנתון שהזנתם בחלון \"ביצוע הרכישה\" (בק\"מ לליטר).</li>\n                    <li><strong>מחיר הדלק:</strong> הנחנו מחיר ממוצע של 7.5 ש\"ח לליטר.</li>\n                </ul>\n                <p className=\"font-bold pt-2 border-t mt-2\">הנוסחה היא: (1,500 ק\"מ / צריכת דלק) * 7.5 ש\"ח.</p>\n            </div>\n            <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור</button>\n        </div>\n    </div>\n);\n\nconst ExplanationModal: React.FC<{ title: string; content: React.ReactNode; onClose: () => void; style?: React.CSSProperties }> = ({ title, content, onClose, style }) => (\n    <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n        <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl text-center\">\n            <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">{title}</h3>\n            <div className=\"text-lg text-right space-y-3\">{content}</div>\n            <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור</button>\n        </div>\n    </div>\n);\n\n\nconst CarPurchaseModal: React.FC<{\n    onClose: () => void;\n    onPurchaseComplete: (details: { monthlyPayment: number; note: string; fuelConsumption: string; year: string; price: string; adLink: string; }) => void;\n    details: any;\n    setDetails: (details: any) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onPurchaseComplete, details, setDetails, style }) => {\n    \n    const { model, adLink, year, km, fuelConsumption, hand, licensePlate, price, payments } = details;\n    \n    const setField = (field: string, value: any) => {\n        setDetails({ ...details, [field]: value });\n    };\n\n    const [validationError, setValidationError] = useState('');\n    const [kmWarning, setKmWarning] = useState('');\n    const [priceWarning, setPriceWarning] = useState('');\n    const [monthlyPayment, setMonthlyPayment] = useState<number | null>(null);\n\n    const getEstimatedPrice = (yearNum: number, kmNum: number) => {\n        if (isNaN(yearNum) || yearNum < 1990) return 0;\n        const age = new Date().getFullYear() - yearNum;\n        return Math.max(0, 120000 - (age * 7000) - (kmNum * 0.2));\n    };\n\n    useEffect(() => {\n        const yearNum = parseInt(year);\n        const kmNum = parseInt(km);\n        if (!isNaN(yearNum) && !isNaN(kmNum) && yearNum < new Date().getFullYear()) {\n            const age = new Date().getFullYear() - yearNum;\n            const avgKmPerYear = age > 0 ? kmNum / age : kmNum;\n            if (avgKmPerYear > 18000) {\n                setKmWarning(`שימו לב: ממוצע הקילומטראז' לשנה (${Math.round(avgKmPerYear).toLocaleString()} ק\"מ) גבוה מהממוצע הארצי (כ-18,000 ק\"מ).`);\n            } else {\n                setKmWarning('');\n            }\n        } else {\n            setKmWarning('');\n        }\n    }, [km, year]);\n\n    useEffect(() => {\n        const yearNum = parseInt(year);\n        const kmNum = parseInt(km);\n        const priceNum = parseFloat(price);\n        if (!isNaN(yearNum) && !isNaN(kmNum) && !isNaN(priceNum)) {\n            const estimatedPrice = getEstimatedPrice(yearNum, kmNum);\n            if (estimatedPrice > 0 && priceNum > estimatedPrice * 1.1) { \n                setPriceWarning(`שימו לב: המחיר המבוקש גבוה ממחיר המחירון המשוער (כ-${Math.round(estimatedPrice).toLocaleString()} ₪)`);\n            } else {\n                setPriceWarning('');\n            }\n        } else {\n            setPriceWarning('');\n        }\n    }, [price, year, km]);\n\n    useEffect(() => {\n        const priceNum = parseFloat(price);\n        if (!isNaN(priceNum) && priceNum > 0) {\n            if (payments === 0) {\n                setMonthlyPayment(priceNum);\n            } else {\n                const years = payments / 12;\n                const annualInterestRate = 0.03 + (years * 0.002);\n                const totalInterest = priceNum * annualInterestRate * years;\n                const totalCost = priceNum + totalInterest;\n                setMonthlyPayment(totalCost / payments);\n            }\n        } else {\n            setMonthlyPayment(null);\n        }\n    }, [price, payments]);\n    \n    const allFieldsFilled = !!(model && adLink && year && km && fuelConsumption && hand && price);\n\n    const handleConfirmPurchase = () => {\n        if (!allFieldsFilled) {\n            setValidationError('יש למלא את כל השדות כדי להמשיך.');\n            setTimeout(() => setValidationError(''), 3000);\n            return;\n        }\n\n        if (monthlyPayment === null || isNaN(monthlyPayment)) {\n            setValidationError(\"אנא מלאו את מחיר הרכב.\");\n            setTimeout(() => setValidationError(''), 3000);\n            return;\n        }\n\n        const paymentNote = payments > 0 ? `(${payments} תשלומים)` : '(תשלום מלא)';\n        const note = `דגם: ${model}, שנה: ${year}, ק\"מ: ${km}, יד: ${hand}, צריכה: 1/${fuelConsumption}, ${licensePlate ? `רישוי: ${licensePlate}, ` : ''}מחיר: ${price}₪ ${paymentNote}.`;\n        onPurchaseComplete({\n            monthlyPayment: payments > 0 ? Math.round(monthlyPayment) : 0,\n            note: note,\n            fuelConsumption: fuelConsumption,\n            year: year,\n            price: price,\n            adLink: adLink,\n        });\n        onClose();\n    };\n    \n    const renderField = (name: string, label: string, placeholder: string, value: string, setter: (val: string) => void, type = \"text\", warning?: string) => (\n         <div>\n            <label className=\"font-medium text-sm text-gray-700\">{label}</label>\n            <input type={type} value={value} onChange={e => setter(e.target.value)} placeholder={placeholder} className=\"w-full mt-1 bg-white p-2 rounded-lg border border-gray-300\" />\n            {warning && <p className=\"text-red-500 text-xs mt-1\">{warning}</p>}\n        </div>\n    )\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-2xl shadow-2xl overflow-y-auto max-h-[90vh]\">\n                 <h3 className=\"text-2xl font-bold mb-6 text-center\">ביצוע רכישת רכב</h3>\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {renderField(\"model\", \"דגם*\", \"לדוגמא: מיצובישי לנסר\", model, (v) => setField('model', v))}\n                    {renderField(\"year\", \"שנת ייצור*\", \"רשמו את שנת ייצור הרכב\", year, (v) => setField('year', v), \"number\")}\n                    <div className=\"md:col-span-2\">\n                        {renderField(\"adLink\", \"קישור למודעה*\", \"הדביקו כאן את הקישור\", adLink, (v) => setField('adLink', v), \"url\")}\n                    </div>\n                    {renderField(\"km\", \"קילומטראז'*\", 'כמה ק\"מ נסעו ברכב סה\"כ', km, (v) => setField('km', v), \"number\", kmWarning)}\n                    <div>\n                        <label className=\"font-medium text-sm text-gray-700\">צריכת דלק* (כמה ק\"מ לליטר)</label>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                            <span className=\"p-2 bg-gray-100 rounded-lg border border-gray-300\">1 ליטר</span>\n                            <span>/</span>\n                            <input type=\"number\" value={fuelConsumption} onChange={e => setField('fuelConsumption', e.target.value)} placeholder={'ק\"מ'} className=\"w-full bg-white p-2 rounded-lg border border-gray-300\" />\n                        </div>\n                    </div>\n                    {renderField(\"hand\", \"יד*\", \"איזו יד הרכב\", hand, (v) => setField('hand', v), \"number\")}\n                    {renderField(\"licensePlate\", \"מספר לוחית רישוי\", \"אופציונלי\", licensePlate, (v) => setField('licensePlate', v))}\n                    {renderField(\"price\", \"מחיר*\", \"כמה עולה הרכב\", price, (v) => setField('price', v), \"number\", priceWarning)}\n                    \n                    <div className=\"md:col-span-2\">\n                        <label className=\"font-medium text-sm text-gray-700\">חלוקה לתשלומים ({payments > 0 ? `${payments} חודשים` : 'תשלום מלא'})</label>\n                        <input type=\"range\" min=\"0\" max=\"60\" step=\"12\" value={payments} onChange={e => setField('payments', Number(e.target.value))} className=\"w-full mt-2\"/>\n                         {payments > 0 && (\n                            <div className=\"text-sm text-yellow-800 bg-yellow-100/70 p-2 rounded-md mt-2 border border-yellow-300\">\n                                <strong>הערה חינוכית:</strong> פריסה לתשלומים לרוב כוללת ריבית, מה שמייקר את העלות הכוללת של הרכב. זוהי התחייבות כלכלית ארוכת טווח שיש לקחת בחשבון.\n                            </div>\n                        )}\n                    </div>\n                 </div>\n                 \n                 {monthlyPayment !== null && (\n                    <div className=\"mt-6 p-4 bg-gray-100 rounded-lg text-center\">\n                        <h4 className=\"font-bold text-lg\">{payments > 0 ? 'תשלום חודשי (כולל ריבית):' : 'סכום לתשלום מלא:'}</h4>\n                        <p className=\"font-bold text-2xl text-brand-teal\">{payments > 0 ? `${Math.round(monthlyPayment)} ₪` : `${parseFloat(price).toLocaleString()} ₪`}</p>\n                    </div>\n                 )}\n                 <div className=\"mt-6 flex flex-col gap-2\">\n                    <button \n                        onClick={handleConfirmPurchase} \n                        className={`w-full text-white font-bold py-3 px-4 rounded-lg transition-colors ${!allFieldsFilled ? 'bg-gray-400 cursor-not-allowed' : 'bg-brand-teal hover:bg-teal-600'}`}>\n                        עדכן תקציב\n                    </button>\n                    {validationError && <p className=\"text-red-500 text-sm mt-1 text-center\">{validationError}</p>}\n                    <button onClick={onClose} className=\"w-full bg-gray-300 hover:bg-gray-400 font-bold py-2 px-4 rounded-lg\">ביטול</button>\n                 </div>\n            </div>\n        </div>\n    );\n};\n\nconst InsuranceExplanationModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => {\n    const [slideIndex, setSlideIndex] = useState(0);\n\n    const slides = [\n        {\n            title: \"ביטוחי רכב\",\n            content: \"קיימים 3 סוגי ביטוחים עיקריים לרכב. בואו נבין מה כל אחד מהם מכסה.\"\n        },\n        {\n            title: \"ביטוח חובה\",\n            content: \"כשמו כן הוא - חובה על פי חוק. מכסה נזקי גוף (פציעות) לנהג, לנוסעים ולהולכי רגל. הוא לא מכסה נזק לרכב שלך או לרכב אחר.\"\n        },\n        {\n            title: \"ביטוח צד ג'\",\n            content: \"ביטוח רשות (לא חובה). מכסה נזקים שגרמת לרכוש של מישהו אחר (הצד השלישי), למשל, לרכב אחר בתאונה.\"\n        },\n        {\n            title: \"ביטוח מקיף\",\n            content: \"ביטוח רשות והיקר ביותר. הוא כולל בתוכו גם ביטוח חובה וגם צד ג', ובנוסף מכסה נזקים לרכב שלך (מתאונה, גניבה, שריפה וכו').\"\n        },\n        {\n            title: \"מה משפיע על מחיר הביטוח?\",\n            content: \"המחיר (פרמיה) נקבע לפי: גיל הנהג, ותק הנהיגה, עבר ביטוחי (תאונות), סוג הרכב, גילו ואמצעי המיגון שמותקנים בו.\"\n        },\n        {\n            title: \"מהי השתתפות עצמית?\",\n            content: \"הסכום הראשוני שאתה תשלם מכיסך במקרה של תביעה. ככל שההשתתפות העצמית גבוהה יותר, כך מחיר הביטוח (הפרמיה) בדרך כלל נמוך יותר.\"\n        },\n        {\n            title: \"מה חשוב לבדוק?\",\n            content: \"לפני שבוחרים ביטוח, חשוב להשוות מחירים, לבדוק את גובה הכיסוי, את סכום ההשתתפות העצמית ואת איכות השירות של חברת הביטוח.\"\n        }\n    ];\n\n    const currentSlide = slides[slideIndex];\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl text-center\">\n                <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">{currentSlide.title}</h3>\n                <div className=\"min-h-[120px] flex items-center justify-center\">\n                    <p className=\"text-lg\">{currentSlide.content}</p>\n                </div>\n                <div className=\"flex justify-between items-center mt-6\">\n                    <button onClick={() => setSlideIndex(s => s - 1)} disabled={slideIndex === 0} className=\"bg-gray-300 py-2 px-4 rounded-lg disabled:opacity-50\">הקודם</button>\n                    <span>{slideIndex + 1} / {slides.length}</span>\n                    {slideIndex < slides.length - 1 ? (\n                        <button onClick={() => setSlideIndex(s => s + 1)} className=\"bg-brand-teal text-white py-2 px-4 rounded-lg\">הבא</button>\n                    ) : (\n                        <button onClick={onClose} className=\"bg-brand-magenta text-white py-2 px-4 rounded-lg\">סיום</button>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst CarMaintenanceCalculatorModal: React.FC<{\n    onClose: () => void;\n    onSave: (monthlyCost: number, annualCost: number) => void;\n    cost: string;\n    setCost: (cost: string) => void;\n    drivingScale: number;\n    setDrivingScale: (scale: number) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSave, cost, setCost, drivingScale, setDrivingScale, style }) => {\n    const [result, setResult] = useState<{ monthly: number; annual: number } | null>(null);\n\n    const handleCalculate = () => {\n        const costNum = parseFloat(cost);\n        if (isNaN(costNum) || costNum <= 0) {\n            alert(\"אנא הזינו עלות טיפול חיובית.\");\n            return;\n        }\n\n        const kmNum = drivingScale * 300;\n        const annualKm = kmNum * 12;\n        const servicesPerYear = annualKm / 10000;\n        const annualCost = servicesPerYear * costNum;\n        const monthlyCost = annualCost / 12;\n\n        setResult({ monthly: Math.round(monthlyCost), annual: Math.round(annualCost) });\n    };\n\n    const handleConfirm = () => {\n        if (result) {\n            onSave(result.monthly, result.annual);\n            onClose();\n        }\n    };\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-lg shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-4 text-center\">מחשבון טיפולי רכב</h3>\n                <div className=\"space-y-4\">\n                    <div>\n                        <label>עלות טיפול 10,000 ממוצע (₪)</label>\n                        <input type=\"number\" value={cost} onChange={e => setCost(e.target.value)} className=\"w-full mt-1 p-2 rounded border\" placeholder=\"בררו את העלות באינטרנט/שאלו את ההורים\" />\n                    </div>\n                    <div>\n                        <label>כמה תנהגו? (5 = ממוצע)</label>\n                        <input \n                            type=\"range\" \n                            min=\"1\" \n                            max=\"10\" \n                            value={drivingScale} \n                            onChange={e => setDrivingScale(Number(e.target.value))} \n                            className=\"w-full mt-1 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                        />\n                         <div className=\"text-center font-bold text-brand-light-blue\">{drivingScale} ({ (drivingScale * 300).toLocaleString() } ק\"מ בחודש)</div>\n                    </div>\n                    <button onClick={handleCalculate} className=\"w-full bg-brand-teal text-white font-bold py-2 rounded-lg\">חשב עלות שנתית</button>\n                </div>\n\n                {result && (\n                    <div className=\"mt-6 p-4 bg-gray-100 rounded-lg text-center animate-fade-in\">\n                        <h4 className=\"font-bold text-lg\">עלות שנתית מוערכת לטיפולים:</h4>\n                        <p className=\"font-bold text-2xl text-brand-teal\">{result.annual.toLocaleString()} ₪</p>\n                        <p className=\"font-bold text-lg mt-2\">(כ-{result.monthly.toLocaleString()} ₪ לחודש)</p>\n                        <button onClick={handleConfirm} className=\"mt-4 w-full bg-brand-magenta text-white font-bold py-2 rounded-lg\">עדכן תקציב</button>\n                    </div>\n                )}\n                <button onClick={onClose} className=\"mt-4 w-full bg-gray-300 py-2 rounded-lg\">סגור</button>\n            </div>\n        </div>\n    );\n};\n\nconst CarMaintenanceExplanationModal: React.FC<{ onClose: () => void, style?: React.CSSProperties }> = ({ onClose, style }) => (\n    <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n        <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl text-center\">\n            <h3 className=\"text-2xl font-bold mb-4 text-brand-light-blue\">מהו טיפול 10,000?</h3>\n            <div className=\"text-lg text-right space-y-3\">\n                <p>טיפול 10,000 (או טיפול שוטף) הוא בדיקה ותחזוקה תקופתית לרכב, המומלצת בדרך כלל כל 10,000-15,000 ק\"מ או פעם בשנה (המוקדם מביניהם).</p>\n                <p>בטיפול זה מחליפים שמנים, פילטרים, ובודקים מערכות חיוניות כמו בלמים וצמיגים כדי לשמור על בטיחות ותקינות הרכב לאורך זמן.</p>\n            </div>\n            <button onClick={onClose} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 px-4 rounded-lg\">סגור</button>\n        </div>\n    </div>\n);\n\ntype EntertainmentItem = { id: number, name: string, price: number, count: number, isEditable: boolean, customName: string };\n\nconst EntertainmentSimulatorModal: React.FC<{\n    onClose: () => void;\n    onSave: (total: number, note: string) => void;\n    items: EntertainmentItem[];\n    setItems: (items: EntertainmentItem[]) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSave, items, setItems, style }) => {\n\n    const handleItemChange = (id: number, field: 'price' | 'count' | 'customName', value: string | number) => {\n        setItems(\n            items.map(item =>\n                item.id === id ? { ...item, [field]: value } : item\n            )\n        );\n    };\n\n    const handleAddItem = () => {\n        const newItem = {\n            id: Date.now(),\n            name: '',\n            price: 0,\n            count: 0,\n            isEditable: true,\n            customName: '',\n        };\n        setItems([...items, newItem]);\n    };\n\n    const handleCalculate = () => {\n        const total = items.reduce((sum, item) => sum + (Number(item.price) * Number(item.count)), 0);\n        const noteParts = items\n            .filter(item => Number(item.count) > 0)\n            .map(item => {\n                const name = item.isEditable ? (item.customName || 'אחר') : item.name.split(' ')[0];\n                return `${name}: ${item.count}x`;\n            });\n        onSave(total, noteParts.join(', '));\n        onClose();\n    };\n    \n    const totalCost = items.reduce((sum, item) => sum + (Number(item.price) * Number(item.count)), 0);\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-2xl shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-2 text-center\">סימולטור בילויים חודשי</h3>\n                <p className=\"text-center text-brand-dark-blue/80 mb-6\">\n                    ביחרו את הבילויים שמתאימים לכם, תמחרו אותם ורישמו את מספר הפעמים שתבלו בחודש\n                </p>\n                <div className=\"space-y-4\">\n                     <div className=\"grid grid-cols-4 gap-2 items-center font-bold text-center border-b pb-2\">\n                        <span>סוג הבילוי</span>\n                        <span>עלות לפעם (₪)</span>\n                        <span>מספר פעמים בחודש</span>\n                        <span>סה\"כ (₪)</span>\n                    </div>\n                    {items.map(item => (\n                        <div key={item.id} className=\"grid grid-cols-4 gap-2 items-center\">\n                            {item.isEditable ? (\n                                <input\n                                    type=\"text\"\n                                    placeholder={item.name || \"שם הבילוי\"}\n                                    value={item.customName}\n                                    onChange={e => handleItemChange(item.id, 'customName', e.target.value)}\n                                    className=\"w-full p-2 border rounded\"\n                                />\n                            ) : (\n                                <label className=\"font-bold\">{item.name}</label>\n                            )}\n                            <input type=\"number\" placeholder=\"עלות\" value={item.price || ''} onChange={e => handleItemChange(item.id, 'price', Number(e.target.value))} className=\"w-full p-2 border rounded text-center\" />\n                            <input type=\"number\" placeholder=\"כמות\" value={item.count || ''} onChange={e => handleItemChange(item.id, 'count', Number(e.target.value))} className=\"w-full p-2 border rounded text-center\" />\n                            <span className=\"font-bold text-center\">{(Number(item.price) * Number(item.count)).toLocaleString()} ₪</span>\n                        </div>\n                    ))}\n                </div>\n\n                <button onClick={handleAddItem} className=\"mt-4 text-sm bg-gray-200 hover:bg-gray-300 p-2 rounded w-full\">\n                    + הוספת שורה\n                </button>\n\n                <div className=\"mt-6 p-4 bg-gray-100 rounded-lg text-center\">\n                    <h4 className=\"font-bold text-lg\">סה\"כ הוצאות בילויים לחודש:</h4>\n                    <p className=\"font-bold text-3xl text-brand-magenta\">{totalCost.toLocaleString()} ₪</p>\n                </div>\n                \n                <div className=\"mt-6 flex flex-col gap-2\">\n                    <button onClick={handleCalculate} className=\"w-full bg-brand-teal text-white font-bold py-3 rounded-lg\">עדכן תקציב</button>\n                    <button onClick={onClose} className=\"w-full bg-gray-300 py-2 rounded-lg\">סגור</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\ntype AccountsAnswers = { people: string; ac: string; shower: string; cooking: string; appliances: string; };\n\nconst AccountsCalculatorModal: React.FC<{\n    onClose: () => void;\n    onSave: (monthlyCost: number, note: string) => void;\n    answers: AccountsAnswers;\n    setAnswers: (answers: AccountsAnswers) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSave, answers, setAnswers, style }) => {\n    const [step, setStep] = useState(1);\n    const [result, setResult] = useState<{ \n        monthlyPerPerson: number; \n        note: string;\n        breakdown: { name: string, value: number }[];\n    } | null>(null);\n\n    const handleAnswerChange = (question: keyof typeof answers, value: string) => {\n        setAnswers({ ...answers, [question]: value });\n    };\n\n    const handleCalculate = () => {\n        const peopleNum = parseInt(answers.people);\n\n        let baseElectricity = 250;\n        let baseWater = 100;\n        let baseGas = 50;\n        const baseMunicipal = 300; \n\n        baseElectricity *= (1 + (peopleNum - 1) * 0.4);\n        baseWater *= (1 + (peopleNum - 1) * 0.6);\n        baseGas *= (1 + (peopleNum - 1) * 0.5);\n\n        if (answers.ac === 'הרבה') baseElectricity += 80;\n        if (answers.ac === 'כמעט ולא') baseElectricity -= 30;\n        if (answers.appliances === 'הרבה') baseElectricity += 50;\n        if (answers.appliances === 'חיסכון') baseElectricity -= 20;\n        if (answers.shower === 'ארוכות וחמות') baseWater += 30;\n        if (answers.cooking === 'כל יום') baseGas += 20;\n        if (answers.cooking === 'כמעט ולא') baseGas -= 10;\n        \n        const totalBiMonthly = baseElectricity + baseWater + baseGas + baseMunicipal;\n        const monthlyTotal = totalBiMonthly / 2;\n        const monthlyPerPerson = Math.round(monthlyTotal / peopleNum);\n\n        const breakdown = [\n            { name: 'חשמל', value: Math.round((baseElectricity / 2) / peopleNum) },\n            { name: 'מים', value: Math.round((baseWater / 2) / peopleNum) },\n            { name: 'גז', value: Math.round((baseGas / 2) / peopleNum) },\n            { name: 'ארנונה ועד בית', value: Math.round((baseMunicipal / 2) / peopleNum) },\n        ];\n        \n        const note = `הערכה לפי ${answers.people} נפשות, שימוש ${answers.ac} במזגן, מקלחות ${answers.shower}, בישול ${answers.cooking} ושימוש ${answers.appliances} במכשירים.`;\n\n        setResult({ monthlyPerPerson, note, breakdown });\n        setStep(2);\n    };\n    \n    const handleSave = () => {\n        if (result) {\n            onSave(result.monthlyPerPerson, result.note);\n            onClose();\n        }\n    };\n\n    type AnswerKey = keyof typeof answers;\n    const questionSet: { key: AnswerKey, label: string, options: string[] }[] = [\n        { key: 'people', label: 'כמה אנשים גרים בדירה (כולל אותך)?', options: ['1', '2', '3', '4+'] },\n        { key: 'ac', label: 'איך היית מגדיר/ה את השימוש שלך במזגן?', options: ['הרבה', 'לפעמים', 'כמעט ולא'] },\n        { key: 'shower', label: 'איך נראות המקלחות שלך בדרך כלל?', options: ['ארוכות וחמות', 'רגילות'] },\n        { key: 'cooking', label: 'מה הרגלי הבישול שלך?', options: ['כל יום', 'מדי פעם', 'כמעט ולא'] },\n        { key: 'appliances', label: 'מה לגבי מכשירי חשמל אחרים (מחשב, טלוויזיה)?', options: ['הרבה', 'ממוצע', 'חיסכון'] },\n    ];\n    \n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-lg shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-4 text-center\">מחשבון הערכת חשבונות</h3>\n                {step === 1 && (\n                    <>\n                        <p className=\"text-center mb-6 text-gray-600\">ענו על השאלות כדי לקבל הערכה חודשית מותאמת אישית.</p>\n                        <div className=\"space-y-6\">\n                            {questionSet.map(q => (\n                                <div key={q.key}>\n                                    <label className=\"font-bold text-lg\">{q.label}</label>\n                                    <div className=\"flex flex-wrap gap-2 mt-2\">\n                                        {q.options.map(opt => (\n                                            <button\n                                                key={opt}\n                                                onClick={() => handleAnswerChange(q.key, opt)}\n                                                className={`py-2 px-4 rounded-full font-semibold transition-colors ${\n                                                    answers[q.key] === opt\n                                                        ? 'bg-brand-teal text-white'\n                                                        : 'bg-gray-200 hover:bg-gray-300'\n                                                }`}\n                                            >\n                                                {opt}\n                                            </button>\n                                        ))}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                        <div className=\"mt-8 flex flex-col gap-2\">\n                            <button onClick={handleCalculate} className=\"w-full text-white font-bold py-3 rounded-lg bg-brand-magenta hover:bg-pink-700\">\n                                חשב הערכה\n                            </button>\n                            <button onClick={onClose} className=\"w-full bg-gray-300 py-2 rounded-lg\">ביטול</button>\n                        </div>\n                    </>\n                )}\n                {step === 2 && result && (\n                    <div className=\"text-center animate-fade-in\">\n                        <h4 className=\"font-bold text-xl\">הערכת ההוצאה החודשית שלך:</h4>\n                        <p className=\"font-bold text-6xl text-brand-magenta my-4\">{result.monthlyPerPerson.toLocaleString()} ₪</p>\n                        <div className=\"bg-gray-100 p-4 rounded-lg text-right\">\n                            <h5 className=\"font-bold text-lg mb-2\">פירוט ההערכה:</h5>\n                            <ul className=\"space-y-1\">\n                                {result.breakdown.map(item => (\n                                    <li key={item.name} className=\"flex justify-between\">\n                                        <span>{item.name}:</span>\n                                        <span className=\"font-mono\">{item.value.toLocaleString()} ₪</span>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                        <div className=\"mt-8 flex flex-col gap-2\">\n                            <button onClick={handleSave} className=\"w-full text-white font-bold py-3 rounded-lg bg-brand-teal hover:bg-teal-600\">\n                                עדכן תקציב\n                            </button>\n                            <button onClick={() => setStep(1)} className=\"w-full bg-gray-300 py-2 rounded-lg\">שנה תשובות</button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\n\nconst avatarOptions = [\n    'https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=400',\n    'https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=400',\n    'https://images.pexels.com/photos/91227/pexels-photo-91227.jpeg?auto=compress&cs=tinysrgb&w=400',\n    'https://images.pexels.com/photos/1065084/pexels-photo-1065084.jpeg?auto=compress&cs=tinysrgb&w=400'\n];\n\nconst CreateCharacterModal: React.FC<{ onClose: () => void, onCreate: (character: Character) => void }> = ({ onClose, onCreate }) => {\n    const [name, setName] = useState('');\n    const [salary, setSalary] = useState('');\n    const [description, setDescription] = useState('');\n    const [avatar, setAvatar] = useState(avatarOptions[0]);\n\n    const handleCreate = () => {\n        if (!name.trim() || !salary || !description.trim()) {\n            alert(\"אנא מלאו את כל השדות.\");\n            return;\n        }\n        const salaryNum = parseInt(salary);\n        if (isNaN(salaryNum) || salaryNum <= 0) {\n            alert(\"אנא הזינו שכר חוקי (מספר חיובי).\");\n            return;\n        }\n        onCreate({ name, salary: salaryNum, description, avatar });\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fade-in\">\n            <div className=\"bg-white p-8 rounded-2xl w-full max-w-lg shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-6 text-center text-brand-light-blue\">יצירת דמות חדשה</h3>\n                <div className=\"space-y-4\">\n                    <div>\n                        <label className=\"font-medium\">שם</label>\n                        <input type=\"text\" value={name} onChange={e => setName(e.target.value)} placeholder=\"השם שלכם\" className=\"w-full mt-1 p-2 rounded border\"/>\n                    </div>\n                     <div>\n                        <label className=\"font-medium\">תיאור</label>\n                        <input type=\"text\" value={description} onChange={e => setDescription(e.target.value)} placeholder=\"לדוגמה: סטודנט, גר בתל אביב\" className=\"w-full mt-1 p-2 rounded border\"/>\n                    </div>\n                    <div>\n                        <label className=\"font-medium\">שכר ברוטו חודשי (₪)</label>\n                        <input type=\"number\" value={salary} onChange={e => setSalary(e.target.value)} placeholder=\"לדוגמה: 8000\" className=\"w-full mt-1 p-2 rounded border\"/>\n                    </div>\n                    <div>\n                        <label className=\"font-medium\">בחירת תמונה</label>\n                        <div className=\"flex justify-center gap-4 mt-2\">\n                            {avatarOptions.map(opt => (\n                                <img key={opt} src={opt} alt=\"avatar option\" onClick={() => setAvatar(opt)} className={`w-20 h-20 rounded-full object-cover cursor-pointer border-4 ${avatar === opt ? 'border-brand-teal' : 'border-transparent'}`} />\n                            ))}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"mt-8 flex flex-col gap-2\">\n                    <button onClick={handleCreate} className=\"w-full bg-brand-teal text-white font-bold py-3 rounded-lg\">צור דמות והתחל</button>\n                    <button onClick={onClose} className=\"w-full bg-gray-300 py-2 rounded-lg\">ביטול</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst RentPurchaseModal: React.FC<{\n    onClose: () => void;\n    onSave: (details: { rent: number; note: string }) => void;\n    netIncome: number;\n    details: any;\n    setDetails: (details: any) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onSave, netIncome, details, setDetails, style }) => {\n    const { city, size, rooms, floor, rent, adLink } = details;\n\n    const setField = (field: string, value: any) => {\n        setDetails({ ...details, [field]: value });\n    };\n\n    const [warning, setWarning] = useState('');\n    const [validationError, setValidationError] = useState('');\n    \n    const allFieldsFilled = !!(city && size && rooms && floor && rent && adLink);\n\n    useEffect(() => {\n        const rentNum = parseFloat(rent);\n        if (!isNaN(rentNum) && netIncome > 0 && rentNum > netIncome * 0.35) {\n            setWarning('התראה לימודית: מומלץ שהוצאות הדיור לא יעלו על 35% מההכנסה הפנויה.');\n        } else {\n            setWarning('');\n        }\n    }, [rent, netIncome]);\n\n    const handleSave = () => {\n        if (!allFieldsFilled) {\n            setValidationError('יש למלא את כל השדות כדי להמשיך.');\n            setTimeout(() => setValidationError(''), 3000);\n            return;\n        }\n\n        const rentNum = parseFloat(rent);\n        if (isNaN(rentNum) || rentNum <= 0) {\n            setValidationError(\"אנא הזינו סכום שכירות חוקי.\");\n            setTimeout(() => setValidationError(''), 3000);\n            return;\n        }\n\n        const noteParts = [`מיקום: ${city}`, `גודל: ${size} מ\"ר`, `חדרים: ${rooms}`, `קומה: ${floor}`];\n        const baseNote = noteParts.join(', ');\n        const finalNote = adLink ? `${baseNote} @@LINK@@${adLink}` : baseNote;\n\n        onSave({ rent: rentNum, note: finalNote });\n        onClose();\n    };\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-lg shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-6 text-center\">הזנת פרטי שכירות</h3>\n                <div className=\"space-y-4\">\n                    <input type=\"text\" value={city} onChange={e => setField('city', e.target.value)} placeholder=\"מיקום הדירה (עיר)*\" className=\"w-full p-2 rounded border\" />\n                    <input type=\"number\" value={size} onChange={e => setField('size', e.target.value)} placeholder=\"גודל הדירה (מ&quot;ר)*\" className=\"w-full p-2 rounded border\" />\n                    <input type=\"number\" value={rooms} onChange={e => setField('rooms', e.target.value)} placeholder=\"מספר חדרים*\" className=\"w-full p-2 rounded border\" />\n                    <input type=\"number\" value={floor} onChange={e => setField('floor', e.target.value)} placeholder=\"קומה*\" className=\"w-full p-2 rounded border\" />\n                    <input type=\"url\" value={adLink} onChange={e => setField('adLink', e.target.value)} placeholder=\"קישור למודעה*\" className=\"w-full p-2 rounded border\" />\n                    <div>\n                        <input type=\"number\" value={rent} onChange={e => setField('rent', e.target.value)} placeholder=\"שכר דירה (₪)*\" className=\"w-full p-2 rounded border font-bold\" />\n                        {warning && <p className=\"text-red-500 text-sm mt-1\">{warning}</p>}\n                    </div>\n                </div>\n                <div className=\"mt-6 flex flex-col gap-2\">\n                    <button \n                        onClick={handleSave} \n                        className={`w-full text-white font-bold py-3 rounded-lg transition-colors ${!allFieldsFilled ? 'bg-gray-400 cursor-not-allowed' : 'bg-brand-teal hover:bg-teal-600'}`}>\n                        הזן\n                    </button>\n                    {validationError && <p className=\"text-red-500 text-sm mt-1 text-center\">{validationError}</p>}\n                    <button onClick={onClose} className=\"w-full bg-gray-300 py-2 rounded-lg\">ביטול</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst AddCustomExpenseModal: React.FC<{\n    onClose: () => void;\n    onAdd: (name: string, amount: number, note: string) => void;\n    style?: React.CSSProperties;\n}> = ({ onClose, onAdd, style }) => {\n    const [name, setName] = useState('');\n    const [amount, setAmount] = useState('');\n    const [isYearly, setIsYearly] = useState(false);\n\n    const handleSave = () => {\n        if (!name.trim() || !amount || isNaN(parseFloat(amount))) {\n            alert('אנא מלאו שם וסכום תקינים.');\n            return;\n        }\n\n        let val = parseFloat(amount);\n        let note = '';\n\n        if (isYearly) {\n            note = `עלות שנתית: ${val.toLocaleString()} ₪ (מחושב אוטומטית לחודש)`;\n            val = val / 12;\n        } else {\n            note = 'עלות חודשית';\n        }\n\n        onAdd(name, val, note);\n        onClose();\n    };\n\n    return (\n        <div className=\"absolute bg-black bg-opacity-50 z-50 animate-fade-in\" style={style}>\n            <div className=\"bg-white p-6 rounded-2xl w-full max-w-md shadow-2xl\">\n                <h3 className=\"text-2xl font-bold mb-4 text-center text-brand-light-blue\">הוספת הוצאה חדשה</h3>\n                <div className=\"space-y-4\">\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">שם ההוצאה</label>\n                        <input\n                            type=\"text\"\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            placeholder=\"לדוגמה: ביטוח דירה, ועד בית...\"\n                            className=\"w-full p-2 border rounded-md focus:ring-brand-teal focus:border-brand-teal\"\n                        />\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">סכום</label>\n                        <input\n                            type=\"number\"\n                            value={amount}\n                            onChange={(e) => setAmount(e.target.value)}\n                            placeholder=\"0\"\n                            className=\"w-full p-2 border rounded-md focus:ring-brand-teal focus:border-brand-teal\"\n                        />\n                    </div>\n                    <div className=\"flex items-center gap-4 bg-gray-100 p-3 rounded-lg\">\n                        <span className=\"font-bold text-gray-700\">תדירות התשלום:</span>\n                        <label className=\"flex items-center cursor-pointer\">\n                            <input\n                                type=\"radio\"\n                                checked={!isYearly}\n                                onChange={() => setIsYearly(false)}\n                                className=\"mr-2 text-brand-teal focus:ring-brand-teal\"\n                            />\n                            <span className=\"mr-1\">חודשי</span>\n                        </label>\n                        <label className=\"flex items-center cursor-pointer\">\n                            <input\n                                type=\"radio\"\n                                checked={isYearly}\n                                onChange={() => setIsYearly(true)}\n                                className=\"mr-2 text-brand-teal focus:ring-brand-teal\"\n                            />\n                            <span className=\"mr-1\">שנתי</span>\n                        </label>\n                    </div>\n                    {isYearly && amount && !isNaN(parseFloat(amount)) && (\n                        <div className=\"text-center text-brand-teal font-bold bg-teal-50 p-2 rounded\">\n                            הסכום החודשי יהיה: {Math.round(parseFloat(amount) / 12).toLocaleString()} ₪\n                        </div>\n                    )}\n                </div>\n                <div className=\"mt-6 flex flex-col gap-2\">\n                    <button\n                        onClick={handleSave}\n                        className=\"w-full bg-brand-teal hover:bg-teal-600 text-white font-bold py-3 rounded-lg transition-colors\"\n                    >\n                        הוסף הוצאה\n                    </button>\n                    <button\n                        onClick={onClose}\n                        className=\"w-full bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 rounded-lg transition-colors\"\n                    >\n                        ביטול\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// This component is now only for PDF generation and won't be displayed as a modal.\nconst SummaryReportForPdf: React.FC<{\n    character: Character;\n    netIncome: number;\n    totalUserExpenses: number;\n    balance: number;\n    allExpenses: (BudgetItem & { note?: string; isDeduction?: boolean })[];\n}> = ({ character, netIncome, totalUserExpenses, balance, allExpenses }) => {\n    \n    const deductions = allExpenses.filter(e => e.isDeduction);\n    const userExpenses = allExpenses.filter(e => !e.isDeduction);\n\n    return (\n        <div id=\"pdf-content\" className=\"bg-white p-8 w-[800px] font-sans\">\n            <div className=\"flex justify-between items-start mb-6\">\n                <div>\n                    <h2 className=\"text-3xl font-bold font-display text-brand-dark-blue\">דו\"ח סיכום תקציב</h2>\n                    <p className=\"text-lg text-gray-600\">עבור: {character.name} ({character.description})</p>\n                </div>\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-4 text-center my-6 p-4 bg-gray-50 rounded-lg\">\n                <div><p className=\"text-lg\">שכר ברוטו</p><p className=\"font-bold text-2xl text-gray-700\">{character.salary.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                <div><p className=\"text-lg\">הכנסה נטו</p><p className=\"font-bold text-2xl text-green-600\">{netIncome.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                <div><p className=\"text-lg\">סה\"כ הוצאות</p><p className=\"font-bold text-2xl text-red-500\">{totalUserExpenses.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                <div><p className=\"text-lg\">מאזן חודשי</p><p className={`font-bold text-2xl ${balance >= 0 ? 'text-brand-teal' : 'text-brand-magenta'}`}>{balance.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n            </div>\n\n            <h3 className=\"text-2xl font-bold mt-8 mb-4\">פירוט הוצאות חודשי</h3>\n            <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-right border-collapse\">\n                    <thead>\n                        <tr className=\"bg-gray-100 border-b-2 border-gray-300\">\n                            <th className=\"p-3 font-bold\">קטגוריה</th>\n                            <th className=\"p-3 font-bold text-left\">סכום חודשי</th>\n                            <th className=\"p-3 font-bold\">הערות</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                         <tr className=\"bg-gray-200 font-bold\"><td colSpan={3} className=\"p-2\">הוצאות מחייה</td></tr>\n                        {userExpenses.filter(e => e.amount > 0).map(item => (\n                            <tr key={item.id} className=\"border-b\">\n                                <td className=\"p-3\">{item.category}</td>\n                                <td className=\"p-3 text-left font-mono\">{item.amount.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</td>\n                                <td className=\"p-3 text-sm text-gray-600\">{item.note || '-'}</td>\n                            </tr>\n                        ))}\n                         <tr className=\"bg-gray-200 font-bold\"><td colSpan={3} className=\"p-2\">ניכויים</td></tr>\n                        {deductions.map(item => (\n                            <tr key={item.id} className=\"border-b\">\n                                <td className=\"p-3\">{item.category}</td>\n                                <td className=\"p-3 text-left font-mono text-red-600\">{item.amount.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</td>\n                                <td className=\"p-3 text-sm text-gray-600\">{item.note || '-'}</td>\n                            </tr>\n                        ))}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    );\n};\n\nconst ShareReportModal: React.FC<{\n    isOpen: boolean;\n    onClose: () => void;\n    onDownload: () => void;\n    onShare: () => void;\n    onCopyLink: () => void;\n    isProcessing: boolean;\n    isCopied: boolean;\n    style?: React.CSSProperties;\n}> = ({ isOpen, onClose, onDownload, onShare, onCopyLink, isProcessing, isCopied, style }) => {\n    if (!isOpen) return null;\n\n    const canShare = !!navigator.share;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/60 z-50 animate-fade-in\" onClick={onClose}>\n            <div \n                style={style}\n                className=\"absolute bg-white p-8 rounded-3xl w-full max-w-md shadow-2xl\" \n                onClick={e => e.stopPropagation()}\n            >\n                <h3 className=\"text-2xl font-bold mb-6 text-center text-brand-dark-blue\">שתף את דו\"ח התקציב</h3>\n                <div className=\"space-y-4\">\n                    <button\n                        onClick={onDownload}\n                        disabled={isProcessing}\n                        className=\"w-full flex items-center justify-center gap-3 p-4 bg-brand-light-blue text-white rounded-lg text-lg font-bold transition transform hover:scale-105 disabled:bg-gray-400\"\n                    >\n                         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" /></svg>\n                        <span>{isProcessing ? 'מעבד...' : 'הורד קובץ PDF'}</span>\n                    </button>\n                    <button\n                        onClick={onShare}\n                        disabled={!canShare || isProcessing}\n                        className=\"w-full flex items-center justify-center gap-3 p-4 bg-brand-teal text-white rounded-lg text-lg font-bold transition transform hover:scale-105 disabled:bg-gray-400 disabled:opacity-70\"\n                        title={!canShare ? \"הדפדפן שלך אינו תומך בשיתוף קבצים\" : \"\"}\n                    >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367 2.684z\" /></svg>\n                         <span>{isProcessing ? 'מעבד...' : 'שלח קובץ'}</span>\n                    </button>\n                    <button\n                        onClick={onCopyLink}\n                        disabled={isProcessing}\n                        className={`w-full flex items-center justify-center gap-3 p-4 rounded-lg text-lg font-bold transition transform hover:scale-105 disabled:bg-gray-400 ${isCopied ? 'bg-green-500 text-white' : 'bg-brand-magenta text-white'}`}\n                    >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" /></svg>\n                        <span>{isCopied ? 'הקישור הועתק!' : (isProcessing ? 'מעבד...' : 'העתק קישור (Data URI)')}</span>\n                    </button>\n                </div>\n                <button onClick={onClose} className=\"mt-6 w-full text-center text-gray-500 hover:text-gray-800\">ביטול</button>\n            </div>\n        </div>\n    )\n}\n\nconst ArrowIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n    </svg>\n);\n\n\nconst BudgetModule: React.FC<BudgetModuleProps> = ({ onBack, title, onComplete }) => {\n  const rowRefs = useRef<Record<string, HTMLDivElement | null>>({});\n  const [activeModal, setActiveModal] = useState<{ type: string; itemId?: string; content?: { title: string; content: React.ReactNode; } } | null>(null);\n  const [modalPosition, setModalPosition] = useState<React.CSSProperties | undefined>(undefined);\n\n  const [step, setStep] = useState(0);\n  const [selectedCharacter, setSelectedCharacter] = useState<Character | null>(null);\n  const [expenses, setExpenses] = useState<(BudgetItem & { note?: string, task?: React.ReactNode, isDeduction?: boolean })[]>(initialExpenses.map(e => ({...e, amount: 0})));\n  const [savingsPercentage, setSavingsPercentage] = useState(0);\n  const [reportGenerated, setReportGenerated] = useState(false);\n  \n  const [isShareModalOpen, setIsShareModalOpen] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isCopied, setIsCopied] = useState(false);\n\n  const [reportDataForPdf, setReportDataForPdf] = useState<any>(null);\n  const reportRef = useRef<HTMLDivElement>(null);\n  \n  const shareButtonRef = useRef<HTMLButtonElement>(null);\n  const [shareModalStyle, setShareModalStyle] = useState<React.CSSProperties>({});\n\n  const [fuelConsumption, setFuelConsumption] = useState<string>('');\n  const [carDetails, setCarDetails] = useState<{ year: string; price: string; } | null>(null);\n  const FUEL_PRICE_PER_LITER = 7.5; // Approximation\n\n  const [insuranceInputString, setInsuranceInputString] = useState('');\n  const [clothingInputString, setClothingInputString] = useState('');\n\n  const [drivingScale, setDrivingScale] = useState(5);\n  \n  // States for preserving modal inputs\n  const [carPurchaseDetails, setCarPurchaseDetails] = useState({ model: '', adLink: '', year: new Date().getFullYear().toString(), km: '', fuelConsumption: '', hand: '', licensePlate: '', price: '', payments: 36 });\n  const [rentDetails, setRentDetails] = useState({ city: '', size: '', rooms: '', floor: '', rent: '', adLink: ''});\n  const [accountsAnswers, setAccountsAnswers] = useState({ people: '1', ac: 'לפעמים', shower: 'רגילות', cooking: 'מדי פעם', appliances: 'ממוצע' });\n  const [entertainmentItems, setEntertainmentItems] = useState([ { id: 1, name: 'מסעדה 🍽️', price: 80, count: 0, isEditable: false, customName: '' }, { id: 2, name: 'מסיבה/סרט 🎉', price: 100, count: 0, isEditable: false, customName: '' }, { id: 3, name: 'טיול יומי 🏞️', price: 150, count: 0, isEditable: false, customName: '' }, { id: 4, name: 'הזמנת אוכל הביתה 🥡', price: 90, count: 0, isEditable: false, customName: '' }, { id: 5, name: 'אחר 🤷', price: 0, count: 0, isEditable: true, customName: '' }, ]);\n  const [selectedSubscriptions, setSelectedSubscriptions] = useState<string[]>([]);\n  const [maintenanceCostInput, setMaintenanceCostInput] = useState('');\n\n\n  const handleOpenShareModal = () => {\n    if (!selectedCharacter) return;\n\n    if (shareButtonRef.current) {\n        const rect = shareButtonRef.current.getBoundingClientRect();\n        setShareModalStyle({\n            position: 'absolute',\n            top: `${rect.top}px`,\n            left: `${rect.left + rect.width / 2}px`,\n            transform: 'translate(-50%, calc(-100% - 1rem))', // Position above with 1rem gap\n        });\n    }\n\n    setReportDataForPdf({\n        character: selectedCharacter,\n        netIncome,\n        totalUserExpenses,\n        balance,\n        allExpenses: expenses\n    });\n    setIsShareModalOpen(true);\n\n    if (!reportGenerated) {\n        onComplete();\n        setReportGenerated(true);\n    }\n  };\n  \n  const generatePdfDocument = async () => {\n    const element = reportRef.current;\n    if (!element) return null;\n\n    const canvas = await html2canvas(element, { scale: 2 });\n    const imgData = canvas.toDataURL('image/png');\n    \n    const pdf = new jspdf.jsPDF({ orientation: 'p', unit: 'mm', format: 'a4' });\n    const pdfWidth = pdf.internal.pageSize.getWidth();\n    const pdfHeight = pdf.internal.pageSize.getHeight();\n\n    const imgProps = { width: canvas.width, height: canvas.height };\n    const ratio = Math.min(pdfWidth / imgProps.width, pdfHeight / imgProps.height) * 0.95; // Use 95% of page for margin\n    \n    const imgFinalWidth = imgProps.width * ratio;\n    const imgFinalHeight = imgProps.height * ratio;\n    \n    const x = (pdfWidth - imgFinalWidth) / 2;\n    const y = (pdfHeight - imgFinalHeight) / 2;\n\n    pdf.addImage(imgData, 'PNG', x, y, imgFinalWidth, imgFinalHeight);\n    return pdf;\n  };\n\n  const handleDownload = async () => {\n    setIsProcessing(true);\n    const pdf = await generatePdfDocument();\n    if (pdf && selectedCharacter) {\n        pdf.save(`budget-report-${selectedCharacter.name}.pdf`);\n    }\n    setIsProcessing(false);\n    setIsShareModalOpen(false);\n  };\n\n  const handleShare = async () => {\n    setIsProcessing(true);\n    const pdf = await generatePdfDocument();\n    if (!pdf || !selectedCharacter) {\n        alert(\"שגיאה: יצירת ה-PDF נכשלה.\");\n        setIsProcessing(false);\n        return;\n    }\n\n    const blob = pdf.output('blob');\n    const file = new File([blob], `budget-report-${selectedCharacter.name}.pdf`, { type: 'application/pdf' });\n    const shareData = {\n        files: [file],\n        title: `דו\"ח התקציב של ${selectedCharacter.name}`,\n        text: `מצורף דו\"ח התקציב שהכנתי באפליקציית 'חכם בכיס'.`,\n    };\n\n    if (navigator.share && navigator.canShare && navigator.canShare(shareData)) {\n        try {\n            await navigator.share(shareData);\n            setIsShareModalOpen(false); // Close on success\n        } catch (error) {\n            if ((error as DOMException).name === 'AbortError') {\n                 setIsShareModalOpen(false); // Also close if user cancels\n            } else {\n                console.error(\"Share failed:\", error);\n                alert(\"שגיאה: השיתוף נכשל.\");\n            }\n        }\n    } else {\n      alert(\"הדפדפן שלך אינו תומך בשיתוף קבצים. נסה להוריד את הקובץ ולשתף אותו ידנית.\");\n    }\n\n    setIsProcessing(false);\n  };\n  \n  const handleCopyLink = async () => {\n    setIsProcessing(true);\n    const pdf = await generatePdfDocument();\n    if (pdf) {\n        try {\n            const dataUri = pdf.output('datauristring');\n            await navigator.clipboard.writeText(dataUri);\n            setIsCopied(true);\n            setTimeout(() => {\n                setIsCopied(false);\n                setIsShareModalOpen(false);\n            }, 2500);\n        } catch (error) {\n            console.error(\"Copy failed:\", error);\n            alert(\"ההעתקה נכשלה. ייתכן שהקישור ארוך מדי עבור הדפדפן שלך. נסה להוריד את הקובץ במקום.\");\n        }\n    } else {\n         alert(\"שגיאה: יצירת ה-PDF נכשלה.\");\n    }\n    setIsProcessing(false);\n  };\n\n    useEffect(() => {\n        const insuranceItem = expenses.find(e => e.category === 'רכב- ביטוח');\n        if (insuranceItem) {\n            setInsuranceInputString(String(insuranceItem.note?.match(/(\\d+,?)+/) ? insuranceItem.note.match(/(\\d+,?)+/)![0].replace(/,/g, '') : ''));\n        }\n        const clothingItem = expenses.find(e => e.category === 'הוצאות ביגוד');\n        if (clothingItem) {\n            setClothingInputString(String(clothingItem.note?.match(/(\\d+,?)+/) ? clothingItem.note.match(/(\\d+,?)+/)![0].replace(/,/g, '') : ''));\n        }\n    }, [expenses]);\n\n\n  const openModal = (type: string, itemId?: number) => {\n    \n    if (activeModal?.type) {\n        setActiveModal(null);\n    }\n\n    const itemIdentifier = `${type}-${itemId || 'global'}`;\n    \n    const rowEl = itemId ? Object.values(rowRefs.current).find((ref): ref is HTMLElement => ref instanceof HTMLElement && ref.dataset.id === String(itemId)) : undefined;\n\n    let positionStyle: React.CSSProperties = {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        zIndex: 50,\n    };\n    \n    if (rowEl) {\n        const rect = rowEl.getBoundingClientRect();\n        positionStyle = {\n            position: 'absolute',\n            top: `${rect.top + window.scrollY}px`,\n            left: `${rect.left + rect.width / 2}px`,\n            transform: 'translate(-50%, -100%) translateY(-1rem)',\n            zIndex: 50,\n        };\n    } else if (type === 'createCharacter' || type === 'addCustomExpense') {\n         positionStyle = {\n            position: 'fixed',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            zIndex: 50,\n        };\n    }\n    \n    const item = initialExpenses.find(e => e.id === itemId);\n    const category = item ? item.category : '';\n    const content = categoryExplanations[category] || termExplanations[category];\n\n    setTimeout(() => {\n        setModalPosition(positionStyle);\n        setActiveModal({ type, itemId: itemIdentifier, content: content as any });\n    }, 100);\n  };\n  \n  const openExplanationModal = (itemId: number, title: string, content: React.ReactNode) => {\n      if (activeModal?.type) {\n        setActiveModal(null);\n      }\n      const itemIdentifier = `explanation-${itemId}`;\n      \n      const rowEl = rowRefs.current[String(itemId)];\n      let positionStyle: React.CSSProperties = {\n        position: 'fixed',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        zIndex: 50,\n      };\n\n       if (rowEl) {\n            const rect = rowEl.getBoundingClientRect();\n            positionStyle = {\n                position: 'absolute',\n                top: `${rect.top + window.scrollY}px`,\n                left: `${rect.left + rect.width / 2}px`,\n                transform: 'translate(-50%, -100%) translateY(-1rem)',\n                zIndex: 50,\n            };\n        }\n      \n      setTimeout(() => {\n        setModalPosition(positionStyle);\n        setActiveModal({ type: 'explanation', itemId: itemIdentifier, content: { title, content } });\n      }, 100);\n  }\n\n  const closeModal = () => {\n      setActiveModal(null);\n  }\n  \n  const handleAddCustomExpense = (name: string, monthlyAmount: number, note: string) => {\n      const newItem = {\n          id: Date.now(),\n          category: name,\n          amount: Math.round(monthlyAmount),\n          note: note,\n          task: null,\n          isDeduction: false\n      };\n      setExpenses(prev => [...prev, newItem]);\n  };\n\n  useEffect(() => {\n    if (selectedCharacter) {\n        const deductions = salaryDeductions(selectedCharacter.salary, selectedCharacter.name);\n        setExpenses([...initialExpenses.map(e => ({...e, amount: 0})), ...deductions]);\n    } else {\n        setExpenses(initialExpenses.map(e => ({...e, amount: 0})));\n    }\n  }, [selectedCharacter]);\n\n  const netIncome = useMemo(() => {\n    if (!selectedCharacter) return 0;\n    const totalDeductions = salaryDeductions(selectedCharacter.salary, selectedCharacter.name)\n        .reduce((sum, item) => sum + item.amount, 0);\n    return selectedCharacter.salary - totalDeductions;\n  }, [selectedCharacter]);\n  \n  const userExpenses = useMemo(() => expenses.filter(e => !e.isDeduction), [expenses]);\n  const deductionExpenses = useMemo(() => expenses.filter(e => e.isDeduction), [expenses]);\n\n  const totalUserExpenses = useMemo(() => userExpenses.reduce((sum, item) => sum + item.amount, 0), [userExpenses]);\n  const balance = useMemo(() => netIncome - totalUserExpenses, [netIncome, totalUserExpenses]);\n  \n  const chartData = useMemo(() => {\n    return userExpenses\n      .filter(e => e.amount > 0)\n      .map(e => ({ name: e.category, value: e.amount }));\n  }, [userExpenses]);\n  \n  const areAllExpensesFilled = useMemo(() => {\n      const requiredCategories = initialExpenses\n          .map(e => e.category)\n          .filter(c => c !== 'חסכון והשקעות');\n      \n      return userExpenses\n          .filter(e => requiredCategories.includes(e.category))\n          .every(e => e.amount > 0);\n  }, [userExpenses]);\n\n  useEffect(() => {\n    if (netIncome > 0) {\n        const savingsAmount = Math.round((savingsPercentage / 100) * Number(netIncome));\n        const newNote = savingsPercentage > 0 \n            ? `כל הכבוד! אתם חוסכים ${savingsPercentage} אחוז משכר הנטו שלכם !`\n            : '';\n        setExpenses(prevExpenses => \n            prevExpenses.map(e => \n                e.category === 'חסכון והשקעות' \n                ? { ...e, amount: savingsAmount, note: newNote } \n                : e\n            )\n        );\n    }\n  }, [savingsPercentage, netIncome]);\n\n  useEffect(() => {\n    const consumption = parseFloat(fuelConsumption);\n    let newAmount = 0;\n    const monthlyDistance = drivingScale * 300;\n\n    if (!isNaN(consumption) && consumption > 0) {\n      const litersNeeded = monthlyDistance / consumption;\n      newAmount = Math.round(litersNeeded * FUEL_PRICE_PER_LITER);\n    }\n    \n    const newNote = newAmount > 0 ? `חושב אוטומטית (לפי ${monthlyDistance.toLocaleString()} ק\"מ בחודש)` : '';\n\n    setExpenses(prevExpenses => {\n      const fuelItem = prevExpenses.find(e => e.category === 'רכב- דלק');\n      if (fuelItem && (fuelItem.amount !== newAmount || fuelItem.note !== newNote)) {\n        return prevExpenses.map(e => (e.category === 'רכב- דלק' ? { ...e, amount: newAmount, note: newNote } : e));\n      }\n      return prevExpenses;\n    });\n  }, [fuelConsumption, drivingScale]);\n\n  useEffect(() => {\n    if (carDetails && carDetails.price && carDetails.year) {\n      const priceNum = parseFloat(carDetails.price);\n      const yearNum = parseInt(carDetails.year);\n      if (isNaN(priceNum) || isNaN(yearNum) || priceNum <= 0 || yearNum > new Date().getFullYear()) {\n        setExpenses(prevExpenses => prevExpenses.map(e => (e.category === 'רכב- אגרות' ? { ...e, amount: 0, note: '' } : e)));\n        return;\n      }\n\n      // Fee data based on the official 2024 table for non-hybrid/electric private cars\n      const feesByGroup = {\n        group1: [1114, 897, 740, 608, 502, 432, 374], // <= 135k\n        group2: [1518, 1222, 1008, 829, 685, 590, 509], // <= 157k\n        group3: [1845, 1485, 1225, 1007, 832, 716, 619], // <= 179k\n        group4: [2246, 1808, 1491, 1226, 1013, 871, 753], // <= 241k\n        group5: [3184, 2563, 2114, 1739, 1436, 1236, 1068], // <= 322k\n        group6: [4688, 3774, 3112, 2558, 2114, 1820, 1572], // <= 485k\n        group7: [5745, 4625, 3814, 3137, 2591, 2230, 1928], // > 485k\n      };\n\n      // 1. Determine Price Group\n      let priceGroupKey: keyof typeof feesByGroup;\n      if (priceNum <= 135000) priceGroupKey = 'group1';\n      else if (priceNum <= 157000) priceGroupKey = 'group2';\n      else if (priceNum <= 179000) priceGroupKey = 'group3';\n      else if (priceNum <= 241000) priceGroupKey = 'group4';\n      else if (priceNum <= 322000) priceGroupKey = 'group5';\n      else if (priceNum <= 485000) priceGroupKey = 'group6';\n      else priceGroupKey = 'group7';\n\n      const feesForGroup = feesByGroup[priceGroupKey];\n\n      // 2. Determine Age Group Index\n      const vehicleAge = new Date().getFullYear() - yearNum;\n      let ageIndex: number;\n      if (vehicleAge <= 3) ageIndex = 0;\n      else if (vehicleAge <= 6) ageIndex = 1;\n      else if (vehicleAge <= 9) ageIndex = 2;\n      else if (vehicleAge <= 12) ageIndex = 3;\n      else if (vehicleAge <= 15) ageIndex = 4;\n      else if (vehicleAge <= 19) ageIndex = 5;\n      else ageIndex = 6;\n\n      // 3. Get the final annual fee\n      const finalFee = feesForGroup[ageIndex];\n      const monthlyFee = finalFee / 12;\n\n      // 4. Update state\n      setExpenses(prevExpenses => prevExpenses.map(e => {\n          if (e.category === 'רכב- אגרות') {\n            return {\n              ...e,\n              amount: Math.round(monthlyFee),\n              note: `אגרה שנתית: ${finalFee.toLocaleString()} ₪ (מחושב אוטומטית)`\n            };\n          }\n          return e;\n        }));\n    }\n  }, [carDetails]);\n  \n  const handleSelectCharacter = (character: Character) => {\n    setSelectedCharacter(character);\n    setStep(1);\n  };\n  \n  const handleExpenseChange = (id: number, newAmount: number) => {\n    setExpenses(prev => prev.map(e => (e.id === id ? { ...e, amount: newAmount } : e)));\n  };\n\n  const handleNoteChange = (id: number, newNote: string) => {\n    setExpenses(prev => prev.map(e => (e.id === id ? { ...e, note: newNote } : e)));\n  };\n\n  const handleUnforeseenResult = (result: { label: string, value: number }) => {\n      const unforeseenItem = expenses.find(e => e.category === 'בלת\"מים');\n      if (unforeseenItem) {\n        handleExpenseChange(unforeseenItem.id, result.value);\n        handleNoteChange(unforeseenItem.id, result.label);\n      }\n  };\n  \n  const updateBudgetFromModal = (category: string, amount: number, note: string) => {\n    const item = expenses.find(e => e.category === category);\n    if(item){\n        handleExpenseChange(item.id, Math.round(amount));\n        handleNoteChange(item.id, note);\n    }\n  };\n\n  const handleSaveSubscriptions = (totalAmount: number, selectedNames: string[]) => {\n    const subsItem = expenses.find(e => e.category === 'מנויים');\n    if (subsItem) {\n        handleExpenseChange(subsItem.id, totalAmount);\n        handleNoteChange(subsItem.id, selectedNames.join(', '));\n    }\n    closeModal();\n  };\n  \n  const handlePurchaseComplete = (details: { monthlyPayment: number; note: string; fuelConsumption: string; year: string; price: string; adLink: string; }) => {\n    const finalNote = details.adLink ? `${details.note} @@LINK@@${details.adLink}` : details.note;\n    updateBudgetFromModal('רכב - קנייה', details.monthlyPayment, finalNote);\n    if (details.fuelConsumption) {\n        setFuelConsumption(details.fuelConsumption);\n    }\n    setCarDetails({ year: details.year, price: details.price });\n  };\n  \n  const handleSaveMaintenance = (monthlyCost: number, annualCost: number) => {\n    const maintenanceItem = expenses.find(e => e.category === 'רכב - טיפולים');\n    if (maintenanceItem) {\n        handleExpenseChange(maintenanceItem.id, monthlyCost);\n        handleNoteChange(maintenanceItem.id, `עלות שנתית מוערכת: ${annualCost.toLocaleString()} ₪`);\n    }\n  };\n  \n  const handleSaveAccounts = (monthlyCost: number, note: string) => {\n      updateBudgetFromModal('חשבונות', monthlyCost, note);\n  };\n\n\n  if (step === 0) {\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            {activeModal?.type === 'createCharacter' && <CreateCharacterModal \n                onClose={closeModal}\n                onCreate={(char) => {\n                    handleSelectCharacter(char);\n                    closeModal();\n                }}\n            />}\n            <h3 className=\"text-4xl font-bold text-center mb-2 text-brand-light-blue\">ניהול התקציב הראשון שלי</h3>\n            <p className=\"text-center text-2xl mb-8 text-brand-dark-blue/90\">ביחרו את הדמות שאיתה תצאו למסע ניהול התקציב החודשי</p>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {characters.map(char => (\n                    <div key={char.name} onClick={() => handleSelectCharacter(char)} className=\"bg-white/60 backdrop-blur-lg p-4 rounded-2xl border-2 border-transparent hover:border-brand-teal transition-all duration-300 cursor-pointer text-center transform hover:-translate-y-2 shadow-lg\">\n                        <img src={char.avatar} alt={char.name} className=\"w-32 h-32 rounded-full mx-auto object-cover border-4 border-white shadow-md\"/>\n                        <h4 className=\"font-bold text-3xl mt-4\">{char.name}</h4>\n                        <p className=\"text-lg\">{char.description}</p>\n                        <p className=\"font-bold text-2xl mt-2 text-brand-teal\">{char.salary.toLocaleString()} ₪ (ברוטו)</p>\n                    </div>\n                ))}\n                <div onClick={() => openModal('createCharacter')} className=\"bg-white/60 backdrop-blur-lg p-4 rounded-2xl border-2 border-dashed border-brand-teal hover:border-brand-teal hover:bg-teal-50/50 transition-all duration-300 cursor-pointer text-center transform hover:-translate-y-2 shadow-lg flex flex-col items-center justify-center\">\n                    <div className=\"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center mb-4\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 text-brand-teal\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4v16m8-8H4\" />\n                        </svg>\n                    </div>\n                    <h4 className=\"font-bold text-3xl\">יצירת דמות חדשה</h4>\n                    <p className=\"text-lg\">התאימו את התקציב לנתונים שלכם</p>\n                </div>\n            </div>\n        </ModuleView>\n    );\n  }\n\n  return (\n    <ModuleView title={title} onBack={() => setStep(0)}>\n      {activeModal?.type === 'unforeseen' && <UnforeseenEventModal style={modalPosition} onClose={closeModal} onResult={handleUnforeseenResult} />}\n      {activeModal?.type.startsWith('carQuestionnaire') && <CarQuestionnaireModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('rentQuestionnaire') && <RentQuestionnaireModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('supermarket') && <SupermarketModal\n          style={modalPosition}\n          onClose={closeModal}\n          onSelect={(name) => handleNoteChange(2, name)}\n      />}\n       {activeModal?.type.startsWith('clothingStore') && <ClothingStoreModal\n          style={modalPosition}\n          onClose={closeModal}\n          onSelect={(name) => handleNoteChange(14, `רשת: ${name}`)}\n      />}\n      {activeModal?.type.startsWith('subscriptions') && <SubscriptionsModal initialSelected={selectedSubscriptions} setInitialSelected={setSelectedSubscriptions} style={modalPosition} onClose={closeModal} onSave={handleSaveSubscriptions} />}\n      {activeModal?.type.startsWith('carPurchase') && <CarPurchaseModal details={carPurchaseDetails} setDetails={setCarPurchaseDetails} style={modalPosition} onClose={closeModal} onPurchaseComplete={handlePurchaseComplete} />}\n      {activeModal?.type.startsWith('insurance') && <InsuranceExplanationModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('licenseFee') && <LicenseFeeExplanationModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('fuelCost') && <FuelCostExplanationModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('maintenanceCalculator') && <CarMaintenanceCalculatorModal cost={maintenanceCostInput} setCost={setMaintenanceCostInput} style={modalPosition} onClose={closeModal} onSave={handleSaveMaintenance} drivingScale={drivingScale} setDrivingScale={setDrivingScale} />}\n      {activeModal?.type.startsWith('maintenanceExplanation') && <CarMaintenanceExplanationModal style={modalPosition} onClose={closeModal} />}\n      {activeModal?.type.startsWith('entertainmentSimulator') && <EntertainmentSimulatorModal items={entertainmentItems} setItems={setEntertainmentItems} style={modalPosition} onClose={closeModal} onSave={(total, note) => updateBudgetFromModal('בילויים ומסעדות', total, note)} />}\n      {activeModal?.type.startsWith('accountsCalculator') && <AccountsCalculatorModal answers={accountsAnswers} setAnswers={setAccountsAnswers} style={modalPosition} onClose={closeModal} onSave={handleSaveAccounts} />}\n      {activeModal?.type === 'createCharacter' && <CreateCharacterModal onClose={closeModal} onCreate={(char) => handleSelectCharacter(char)} />}\n      {activeModal?.type === 'explanation' && activeModal.content && <ExplanationModal style={modalPosition} title={activeModal.content.title} content={activeModal.content.content} onClose={closeModal} />}\n      {activeModal?.type.startsWith('rentPurchase') && <RentPurchaseModal \n        details={rentDetails}\n        setDetails={setRentDetails}\n        style={modalPosition} \n        onClose={closeModal} \n        netIncome={netIncome}\n        onSave={({rent, note}) => {\n            const rentItem = expenses.find(e => e.category === 'שכירות');\n            if (rentItem) {\n                handleExpenseChange(rentItem.id, rent);\n                handleNoteChange(rentItem.id, note);\n            }\n        }} \n     />}\n     {activeModal?.type === 'addCustomExpense' && <AddCustomExpenseModal onClose={closeModal} onAdd={handleAddCustomExpense} style={modalPosition} />}\n     {reportDataForPdf && (\n        <div ref={reportRef} style={{ position: 'absolute', left: '-9999px', top: 0, zIndex: -1 }}>\n            <SummaryReportForPdf {...reportDataForPdf} />\n        </div>\n     )}\n     <ShareReportModal\n        isOpen={isShareModalOpen}\n        onClose={() => setIsShareModalOpen(false)}\n        onDownload={handleDownload}\n        onShare={handleShare}\n        onCopyLink={handleCopyLink}\n        isProcessing={isProcessing}\n        isCopied={isCopied}\n        style={shareModalStyle}\n     />\n      \n      <div className=\"space-y-8\">\n        {/* Top Info Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            {/* Left Column: Character & Legend */}\n            <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-6 rounded-2xl h-full flex flex-col\">\n              {selectedCharacter && (\n                <>\n                    <div className=\"text-center mb-4\">\n                        <img src={selectedCharacter.avatar} alt={selectedCharacter.name} className=\"w-40 h-40 rounded-full mx-auto object-cover border-4 border-white shadow-md\"/>\n                        <h4 className=\"font-bold text-[2.5rem] mt-3\">{selectedCharacter.name}</h4>\n                        <p className=\"text-[1.4rem] text-gray-600\">{selectedCharacter.description}</p>\n                    </div>\n                     <div className=\"mt-4 space-y-2 text-[1.65rem] flex-grow\">\n                        <div className=\"flex justify-between items-center\">\n                            <span className=\"font-bold text-gray-700 flex items-center gap-1\">שכר ברוטו: <Tooltip title=\"שכר ברוטו\" content={termExplanations['שכר ברוטו']}/></span>\n                            <span className=\"font-mono\">{selectedCharacter.salary.toLocaleString('he-IL', {style:'currency', currency:'ILS', minimumFractionDigits: 0})}</span>\n                        </div>\n                         <div className=\"pl-4 mr-2 space-y-1 text-[1.4rem]\">\n                             {deductionExpenses.map(item => (\n                                <div key={item.id} className=\"flex justify-between items-center text-red-600\">\n                                    <span className=\"flex items-center gap-1\">{item.category} <Tooltip title={item.category} content={termExplanations[item.category] || 'הסבר בקרוב...'} /></span>\n                                    <span className=\"font-mono\">{item.amount.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</span>\n                                </div>\n                             ))}\n                         </div>\n\n                        <div className=\"flex justify-between font-bold text-[2.1rem] mt-3 border-t-2 border-gray-300 pt-3\">\n                            <span className=\"text-green-700\">הכנסה נטו:</span>\n                            <span className=\"text-green-600 font-mono\">{netIncome.toLocaleString('he-IL', {style:'currency', currency:'ILS', minimumFractionDigits: 0})}</span>\n                        </div>\n                    </div>\n                </>\n              )}\n            </div>\n\n            {/* Right Column: Instructions */}\n            <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-6 rounded-2xl h-full\">\n                <h4 className=\"font-bold text-[2.5rem] mb-3 text-brand-teal\">איך מנהלים את התקציב?</h4>\n                <ol className=\"list-decimal list-inside space-y-3 text-[1.4rem] text-brand-dark-blue/90\">\n                    <li>\n                        <strong>חקרו כל סעיף:</strong> עברו על כל קטגוריה. לחצו על אייקון המידע\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-500 inline-block mx-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                        כדי ללמוד על חשיבותו.\n                    </li>\n                    <li>\n                        <strong>בצעו את המשימות:</strong> בכל סעיף יש משימה. השתמשו בכפתורים לפי הסדר (מימין לשמאל) כדי להשלים אותה.\n                         <div className=\"mt-2 p-4 bg-white/40 rounded-lg text-lg space-y-3 border border-gray-200 shadow-inner\">\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-lg bg-[#1b2550] text-white py-1 px-3 rounded-full\">משימה</span>\n                                <span>- משימה לביצוע בסעיף</span>\n                            </div>\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-lg bg-[#01b2cf] text-black py-1 px-3 rounded-full\">כלי עזר</span>\n                                <span>- כלי עזר ופעולות (מחשבון/שאלון/בחירה/רכישה)</span>\n                            </div>\n                             <div className=\"flex items-center gap-3\">\n                                <span className=\"text-lg bg-brand-teal text-black py-1 px-3 rounded-full\">קישור לאתר</span>\n                                <span>- קישור לאתר חיצוני</span>\n                            </div>\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-lg bg-brand-magenta text-black py-1 px-3 rounded-full\">סרטון</span>\n                                <span>- צפייה בסרטון</span>\n                            </div>\n                        </div>\n                    </li>\n                    <li><strong>הזינו את התוצאות:</strong> לאחר כל משימה, הסכום החודשי וההערות יתעדכנו. ודאו שהכל נכון.</li>\n                    <li><strong>נתחו את התקציב:</strong> בסיום, בחנו את תרשים העוגה ואת מאזן ההוצאות מול ההכנסות כדי להבין לאן הכסף שלכם הולך.</li>\n                    <li><strong>הפיקו דו\"ח:</strong> לחצו על \"הפק דו\"ח סיכום\" כדי לקבל מסמך מסודר של התקציב שבניתם, אותו תוכלו לשמור או לשתף.</li>\n                </ol>\n            </div>\n        </div>\n        \n        {/* Expenses Table Section */}\n        <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-6 rounded-2xl\">\n            <h3 className=\"text-center font-bold text-4xl mb-6\">טבלת ניהול תקציב חודשית</h3>\n            <div className=\"bg-white/20 p-4 rounded-xl\">\n                <h4 className=\"font-bold text-3xl text-brand-dark-blue text-center mb-4 p-3 rounded-lg bg-cyan-200/50\">הוצאות מחייה</h4>\n                <div className=\"space-y-3\">\n                  {userExpenses.map(item => (\n                    <div key={item.id} ref={(el) => (rowRefs.current[String(item.id)] = el)} data-id={item.id} className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-md p-4 border border-transparent hover:border-brand-light-blue/50\">\n                        {/* Top row */}\n                        <div className=\"flex items-center justify-between gap-4\">\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"font-bold text-3xl\">{item.category}</span>\n                                {categoryExplanations[item.category] && (\n                                    <Tooltip \n                                        title={categoryExplanations[item.category].title}\n                                        content={categoryExplanations[item.category].content}\n                                    />\n                                )}\n                            </div>\n                            <div className=\"relative flex-shrink-0\">\n                                {item.category === 'רכב- ביטוח' ? (\n                                    <input \n                                        type=\"number\" \n                                        placeholder=\"הזן סכום שנתי\"\n                                        value={insuranceInputString} \n                                        onChange={(e) => setInsuranceInputString(e.target.value)}\n                                        onBlur={() => {\n                                            const annual = parseFloat(insuranceInputString) || 0;\n                                            const monthly = annual / 12;\n                                            handleExpenseChange(item.id, Math.round(monthly));\n                                            const currentNote = expenses.find(e => e.id === item.id)?.note || '';\n                                            const noteWithoutAmount = currentNote.replace(/עלות שנתית: [\\d,]+ ₪/g, '').trim();\n                                            if (annual > 0) {\n                                                handleNoteChange(item.id, `${noteWithoutAmount} עלות שנתית: ${annual.toLocaleString()} ₪`.trim());\n                                            } else {\n                                                handleNoteChange(item.id, noteWithoutAmount);\n                                            }\n                                        }}\n                                        className={`w-48 text-left py-2 pr-2 pl-12 rounded-lg border-2 shadow-inner bg-white transition-all focus:border-brand-teal focus:ring-1 focus:ring-brand-teal text-base`}\n                                    />\n                                ) : item.category === 'הוצאות ביגוד' ? (\n                                    <input \n                                        type=\"number\" \n                                        placeholder=\"הזן סכום שנתי\"\n                                        value={clothingInputString} \n                                        onChange={(e) => setClothingInputString(e.target.value)}\n                                        onBlur={() => {\n                                            const annual = parseFloat(clothingInputString) || 0;\n                                            const monthly = annual / 12;\n                                            handleExpenseChange(item.id, Math.round(monthly));\n                                            const currentNote = expenses.find(e => e.id === item.id)?.note || '';\n                                            const noteWithoutAmount = currentNote.replace(/עלות שנתית: [\\d,]+ ₪/g, '').trim();\n                                            if (annual > 0) {\n                                                handleNoteChange(item.id, `${noteWithoutAmount} עלות שנתית: ${annual.toLocaleString()} ₪`.trim());\n                                            } else {\n                                                handleNoteChange(item.id, noteWithoutAmount);\n                                            }\n                                        }}\n                                        className={`w-48 text-left py-2 pr-2 pl-12 rounded-lg border-2 shadow-inner bg-white transition-all focus:border-brand-teal focus:ring-1 focus:ring-brand-teal text-base`}\n                                    />\n                                ) : (\n                                    <input \n                                        type=\"number\" \n                                        value={item.amount || ''} \n                                        onChange={(e) => handleExpenseChange(item.id, parseFloat(e.target.value) || 0)}\n                                        readOnly={['חסכון והשקעות', 'רכב- דלק', 'מנויים', 'רכב- אגרות', 'רכב - טיפולים', 'בילויים ומסעדות', 'חשבונות', 'שכירות', 'רכב - קנייה'].includes(item.category)}\n                                        className={`w-36 text-left py-2 pr-2 pl-12 rounded-lg border-2 shadow-inner bg-slate-50 transition-all focus:border-brand-teal focus:ring-1 focus:ring-brand-teal text-base ${\n                                        ['חסכון והשקעות', 'רכב- דלק', 'מנויים', 'רכב- אגרות', 'רכב - טיפולים', 'בילויים ומסעדות', 'חשבונות', 'שכירות', 'רכב - קנייה'].includes(item.category) \n                                        ? 'bg-gray-200 cursor-not-allowed' \n                                        : 'bg-white'}`\n                                    }\n                                        placeholder=\"0\"\n                                    />\n                                )}\n                                <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none text-base\">ש\"ח</span>\n                            </div>\n                        </div>\n                         {/* Bottom controls */}\n                        <div className=\"mt-3 pt-3 border-t border-gray-200 space-y-3\">\n                            <div className=\"flex flex-wrap items-center gap-2\">\n                               {item.task && ( <button onClick={() => openExplanationModal(item.id, 'משימה', item.task!)} className=\"text-base bg-[#1b2550] text-white py-1 px-3 rounded-full hover:bg-blue-900\">משימה</button> )}\n                                {item.category === 'שכירות' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('rentQuestionnaire', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">שאלון ההכוונה</button> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">קישור לאתר</a> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('rentPurchase', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">מלאו את פרטי הדירה</button> </> )}\n                                {item.category === 'קניות בסופר' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('supermarket', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">ביחרו רשת</button> </> )}\n                                {item.category === 'חשבונות' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('accountsCalculator', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">מחשבון</button> </> )}\n                                {item.category === 'בילויים ומסעדות' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('entertainmentSimulator', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">מחשבון</button> </> )}\n                                {item.category === 'בלת\"מים' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('unforeseen', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">בחירה</button> </> )}\n                                {item.category === 'מנויים' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('subscriptions', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">בחירה</button> </> )}\n                                {item.category === 'רכב - קנייה' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('carQuestionnaire', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">שאלון הכוונה</button> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">קישור לאתר</a> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('carPurchase', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">ביצוע הרכישה</button> </> )}\n                                {item.category === 'רכב- ביטוח' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">קישור לאתר</a> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <a href=\"https://docs.google.com/presentation/d/1N_xUNS_ZQZW4VfumLDKk_dav53gvULiqjxjZ4NDj3fo/edit?usp=sharing\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">הנחיות למילוי</a> </> )}\n                                {item.category === 'רכב- אגרות' && <></>}\n                                {item.category === 'רכב- דלק' && <></>}\n                                {item.category === 'רכב - טיפולים' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('maintenanceCalculator', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">מחשבון</button> </> )}\n                                {item.category === 'הוצאות ביגוד' && ( <> <ArrowIcon className=\"w-5 h-5 text-gray-400\" /> <button onClick={() => openModal('clothingStore', item.id)} className=\"text-base bg-[#01b2cf] text-black py-1 px-3 rounded-full hover:bg-cyan-500\">ביחרו רשת</button> </> )}\n                                {categoryLinks[item.category] && !['רכב - קנייה', 'רכב- ביטוח', 'שכירות'].includes(item.category) && <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">קישור לאתר</a>}\n                            </div>\n                           \n                            {item.category === 'חסכון והשקעות' && ( <div className=\"mt-2\"> <div className=\"flex items-center gap-2\"> <input type=\"range\" min=\"0\" max=\"50\" value={savingsPercentage} onChange={(e) => setSavingsPercentage(Number(e.target.value))} className=\"w-full\" /> <span className=\"font-bold w-16 text-center\">{savingsPercentage}%</span> </div> <p className=\"text-xs text-center text-gray-600\">מהכנסה נטו ({netIncome.toLocaleString()} ₪)</p> </div> )}\n                            {item.category === 'רכב- דלק' && ( <div className=\"mt-2 flex items-center gap-2\"> <label className=\"text-sm\">צריכת דלק (ק\"מ/ליטר):</label> <input type=\"number\" value={fuelConsumption} onChange={(e) => setFuelConsumption(e.target.value)} className=\"w-24 p-1 rounded-md border border-gray-300\" placeholder=\"לדוג׳ 15\" /> <span className=\"text-xs text-gray-600\">(לפי {(drivingScale * 300).toLocaleString()} ק\"מ בחודש)</span> </div> )}\n                            \n                            {(() => {\n                                const noteText = item.note || '';\n                                const hasLink = noteText.includes('@@LINK@@');\n                                const isReadOnly = ['חסכון והשקעות', 'רכב- אגרות', 'רכב - טיפולים', 'בילויים ומסעדות', 'חשבונות', 'שכירות', 'רכב - קנייה', 'רכב- דלק', 'הוצאות ביגוד', 'רכב- ביטוח'].includes(item.category);\n                                if (hasLink) {\n                                    const [mainNote, linkUrl] = noteText.split('@@LINK@@');\n                                    return ( <div className=\"w-full mt-2 p-2 rounded-md text-xl border border-gray-200 bg-gray-100 break-words\"> {mainNote} {linkUrl && ( <a href={linkUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline font-bold ml-2\"> קישור למודעה </a> )} </div> );\n                                }\n                                return ( <input type=\"text\" value={item.note || ''} onChange={(e) => handleNoteChange(item.id, e.target.value)} placeholder={ item.category === 'נייד' || item.category === 'רכב- ביטוח' ? (placeholders[item.category] || 'הערה...') : '' } readOnly={isReadOnly} className={`w-full mt-2 p-2 rounded-md text-xl border border-gray-200 transition-colors ${isReadOnly ? 'bg-gray-100' : 'bg-white/70'}`} /> );\n                            })()}\n                        </div>\n                    </div>\n                  ))}\n                  <button \n                    onClick={() => openModal('addCustomExpense')}\n                    className=\"w-full py-3 px-4 rounded-2xl border-2 border-dashed border-gray-400 text-gray-600 hover:border-brand-teal hover:text-brand-teal hover:bg-teal-50 transition-all font-bold text-xl flex items-center justify-center gap-2 mt-4\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                    </svg>\n                    הוספת הוצאה חדשה\n                  </button>\n                </div>\n            </div>\n\n              {deductionExpenses.length > 0 && (\n                <div className=\"bg-white/20 p-4 rounded-xl mt-4\">\n                  <h4 className=\"font-bold text-3xl text-brand-dark-blue text-center mb-2 p-3 rounded-lg bg-cyan-200/50 flex items-center justify-center gap-2\">\n                    <span>ניכויים</span>\n                    <Tooltip title=\"מהם ניכויים?\" content={termExplanations['ניכויים']} />\n                  </h4>\n                   <p className=\"text-center text-xl text-brand-dark-blue/80 mb-4\">\n                        סכומים אלו חושבו אוטומטית ולכן אין צורך לבצע משימה בסעיפים אלו.\n                        <br />\n                        עם זאת, אתם מוזמנים לצפות בסרטוני ההסבר ולנסות לחשב את הסכומים בעצמכם בעזרת הקישורים לאתרים.\n                    </p>\n                  <div className=\"space-y-3\">\n                  {deductionExpenses.map(item => (\n                    <div key={item.id} className=\"bg-gray-100/70 p-4 rounded-2xl shadow-inner\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2\">\n                           <span className=\"font-bold text-3xl text-gray-700\">{item.category}</span>\n                           <Tooltip title={item.category} content={termExplanations[item.category] || 'הסבר בקרוב...'} />\n                            {item.category === 'מס הכנסה' && (\n                                <>\n                                    <a href=\"https://youtu.be/s2KRKDfVxMQ\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-magenta text-black py-1 px-3 rounded-full hover:bg-pink-700\">\n                                        סרטון\n                                    </a>\n                                    <ArrowIcon className=\"w-5 h-5 text-gray-400\" />\n                                    <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">\n                                        קישור לאתר\n                                    </a>\n                                </>\n                            )}\n                            {item.category === 'ביטוח לאומי' && (\n                                <>\n                                    <a href=\"https://youtu.be/QcPnUSlNffs\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-magenta text-black py-1 px-3 rounded-full hover:bg-pink-700\">\n                                        סרטון\n                                    </a>\n                                    <ArrowIcon className=\"w-5 h-5 text-gray-400\" />\n                                    <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">\n                                        קישור לאתר\n                                    </a>\n                                </>\n                            )}\n                            {item.category === 'מס בריאות' && (\n                                <>\n                                    <a href=\"https://youtu.be/QcPnUSlNffs\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-magenta text-black py-1 px-3 rounded-full hover:bg-pink-700\">\n                                        סרטון\n                                    </a>\n                                    <ArrowIcon className=\"w-5 h-5 text-gray-400\" />\n                                    <a href={categoryLinks[item.category]} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-teal text-black py-1 px-3 rounded-full hover:bg-teal-500\">\n                                        קישור לאתר\n                                    </a>\n                                </>\n                            )}\n                            {item.category === 'הפרשה לפנסיה' && (\n                                <a href=\"https://youtu.be/9g3CmmzXQlM\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-base bg-brand-magenta text-black py-1 px-3 rounded-full hover:bg-pink-700\">\n                                        סרטון\n                                </a>\n                            )}\n                        </div>\n                        <div className=\"relative\">\n                            <input\n                              type=\"number\"\n                              value={item.amount}\n                              readOnly\n                              className=\"w-36 text-left py-2 pr-2 pl-12 rounded-lg border-2 border-gray-300 bg-gray-200 cursor-not-allowed shadow-inner text-base\"\n                            />\n                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none text-base\">ש\"ח</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  </div>\n                </div>\n              )}\n        </div>\n        \n        {/* Bottom Section: Analysis + AI Feedback */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-8 rounded-2xl space-y-6\">\n                <h3 className=\"text-center font-bold text-2xl\">ניתוח תזרים</h3>\n                 <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center my-6\">\n                    <div><p className=\"text-lg\">הכנסה נטו</p><p className=\"font-bold text-3xl text-green-600\">{netIncome.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                    <div><p className=\"text-lg\">סה\"כ הוצאות</p><p className=\"font-bold text-3xl text-red-500\">{totalUserExpenses.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                     <div><p className=\"text-lg\">מאזן חודשי</p><p className={`font-bold text-3xl ${balance >= 0 ? 'text-brand-teal' : 'text-brand-magenta'}`}>{balance.toLocaleString('he-IL', {style:'currency', currency:'ILS'})}</p></div>\n                </div>\n                <div className=\"h-96 w-full\">\n                    <h4 className=\"text-center font-bold text-lg mb-2\">פירוט הוצאות</h4>\n                    <ResponsiveContainer width=\"100%\" height=\"90%\">\n                        <PieChart>\n                            <Pie data={chartData} dataKey=\"value\" nameKey=\"name\" cx=\"50%\" cy=\"50%\" outerRadius={100} fill=\"#8884d8\" label={({ name, percent }) => `${((Number(percent) || 0) * 100).toFixed(0)}%`}>\n                                {chartData.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)}\n                            </Pie>\n                            <RechartsTooltip />\n                            <Legend />\n                        </PieChart>\n                    </ResponsiveContainer>\n                </div>\n            </div>\n            <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-6 rounded-2xl flex flex-col items-center justify-center\">\n                <h3 className=\"text-center font-bold text-2xl mb-4\">סיימתם לבנות את התקציב!</h3>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-40 h-40 my-2 text-brand-teal\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n                <p className=\"text-center mb-4\">כל הכבוד על השלמת המשימה. עכשיו תוכלו לשתף את דו\"ח התקציב המסודר שהכנתם.</p>\n                <button \n                    ref={shareButtonRef}\n                    onClick={handleOpenShareModal}\n                    disabled={!areAllExpensesFilled}\n                    title={!areAllExpensesFilled ? 'מלאו את סעיפי ההוצאות' : 'הפק דו\"ח סיכום'}\n                    className=\"w-full bg-brand-magenta hover:bg-pink-700 text-white font-bold py-4 px-4 rounded-xl transition-all transform hover:scale-105 text-3xl shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                >\n                    {areAllExpensesFilled ? 'הפק דו\"ח סיכום' : 'מלאו את סעיפי ההוצאות'}\n                </button>\n            </div>\n        </div>\n      </div>\n    </ModuleView>\n  );\n};\n\nexport default BudgetModule;","import React from 'react';\n\nexport const BudgetIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\" />\n  </svg>\n);\n\nexport const SalaryIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n  </svg>\n);\n\nexport const InterestIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6\" />\n  </svg>\n);\n\nexport const OverdraftIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6\" />\n  </svg>\n);\n\nexport const ExpensesIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\" />\n  </svg>\n);\n\nexport const ResearchIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n  </svg>\n);\n\nexport const RightsIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n  </svg>\n);\n\nexport const LinksIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n  </svg>\n);\n\nexport const SelfEmployedIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\n  </svg>\n);\n\nexport const TimeIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n  </svg>\n);\n\nexport const PodiumIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n  </svg>\n);\n\nexport const BusinessIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n  </svg>\n);\n\nexport const LockIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n    </svg>\n);\n\nexport const TrophyIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\" transform=\"scale(1, -1) translate(0, -24)\"/>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\" visibility=\"hidden\"/>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 14v7m-4-5h8M9 21h6\" transform=\"scale(1, -1) translate(0, -24)\"/>\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 3v4m6-4v4\" />\n    </svg>\n);\n\nexport const PiggyBankIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4m12 0a1 1 0 100-2 1 1 0 000 2z\" />\n  </svg>\n);\n\nexport const HeartIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z\" />\n  </svg>\n);\n\nexport const CoinIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01\" />\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 18.5A6.5 6.5 0 1012 5.5a6.5 6.5 0 000 13z\" />\n  </svg>\n);\n\nexport const GlobeIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h8a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.707 4.293l.586.586A2 2 0 019 6h6a2 2 0 011.707.293l.586-.586M12 22a9 9 0 100-18 9 9 0 000 18z\" />\n  </svg>\n);\n\nexport const StarIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\n  </svg>\n);\n\nexport const StoreIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\" />\n  </svg>\n);\n\nexport const BookOpenIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25\" />\n  </svg>\n);","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface SalaryModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// --- Data Structures ---\n\nconst paySlipData = {\n    details: {\n        companyName: 'חברת הצלחה בע\"מ',\n        employeeName: 'ישראל ישראלי',\n        employeeId: '123456789',\n        payPeriod: 'אפריל 2024',\n        startDate: '01/10/2022',\n        bank: '12 (הפועלים)',\n        branch: '612',\n        account: '123456',\n    },\n    payments: {\n        title: 'תשלומים (ברוטו)',\n        items: [\n            { name: 'שכר יסוד', quantity: 186.00, rate: 31.61, value: 5880.06 },\n            { name: 'שעות נוספות 125%', quantity: 4.00, rate: 39.51, value: 158.04 },\n            { name: 'שעות נוספות 150%', quantity: 3.00, rate: 47.42, value: 142.26 },\n            { name: 'נסיעות', quantity: 1.00, rate: 400.00, value: 400.00 },\n            { name: 'תמורת חופשה', quantity: 0.83, rate: 252.88, value: 209.89 },\n            { name: 'הבראה חודשי', quantity: 1.00, rate: 174.17, value: 174.17 },\n            { name: 'תמורה עבור ימי חג', quantity: 1.00, rate: 252.88, value: 252.88 },\n            { name: 'מחלה', quantity: 1.00, rate: 252.88, value: 252.88 },\n        ],\n        total: 7470.18\n    },\n    deductions: {\n        mandatory: {\n            title: 'ניכויי חובה',\n            items: [\n                { name: 'מס הכנסה', value: 142.42 },\n                { name: 'ביטוח לאומי', value: 29.88 },\n                { name: 'דמי בריאות', value: 231.58 },\n                { name: 'פנסיה', value: 424.21 },\n            ],\n            total: 828.09\n        },\n        voluntary: {\n            title: 'ניכויי רשות',\n            items: [\n                 { name: 'קרן השתלמות', value: 176.75 },\n            ],\n            total: 176.75\n        },\n        total: 1004.84\n    },\n    summary: {\n        netSalary: 6465.34,\n    },\n    informative: {\n        marginalTax: 10.00,\n        creditPoints: 2.25,\n        employerPension: 459.56,\n        employerStudyFund: 530.26,\n    }\n};\n\nconst termExplanations: Record<string, string> = {\n    'שכר יסוד': 'השכר הבסיסי שלך לפני כל התוספות והניכויים, מחושב לפי שכר המינימום העדכני.',\n    'שעות נוספות 125%': 'תשלום עבור שעות עבודה מעבר למשרה מלאה. על השעתיים הראשונות מקבלים תוספת של 25%.',\n    'שעות נוספות 150%': 'תשלום עבור שעות עבודה נוספות מעבר לשעתיים הראשונות, עליהן מקבלים תוספת של 50%.',\n    'נסיעות': 'החזר הוצאות נסיעה מהבית לעבודה ובחזרה, לפי תעריף הקבוע בחוק.',\n    'תמורת חופשה': 'תשלום עבור ימי חופשה שניצלת.',\n    'הבראה חודשי': 'תשלום שנתי שמטרתו לסייע לעובד לצאת לחופשה להתרעננות. לעיתים הוא מחולק לתשלומים חודשיים.',\n    'תמורה עבור ימי חג': 'תשלום עבור ימי חג רשמיים שבהם לא עבדת.',\n    'מחלה': 'תשלום עבור ימי מחלה שניצלת, בהתאם לאישור רפואי.',\n    'סה\"כ תשלומים (ברוטו)': 'סך כל התשלומים שמגיעים לך מהמעסיק לפני הורדת ניכויים כלשהם.',\n    'מס הכנסה': 'מס המוטל על הכנסתך. מחושב לפי מדרגות מס ומופחת על ידי נקודות זיכוי אישיות.',\n    'ביטוח לאומי': 'תשלום חובה למוסד לביטוח לאומי, המבטח אותך במקרים של אבטלה, פגיעה בעבודה, נכות, ומממן קצבאות.',\n    'דמי בריאות': 'תשלום חובה המממן את מערכת הבריאות הציבורית ומאפשר לך לקבל שירותים רפואיים מקופת החולים.',\n    'פנסיה': 'חיסכון חובה לגיל פרישה. חלק מהסכום מופרש על ידך וחלק על ידי המעסיק.',\n    'קרן השתלמות': 'תוכנית חיסכון לטווח בינוני, בדרך כלל ל-6 שנים. זהו ניכוי רשות (לא חובה) והטבה נפוצה.',\n    'סה\"כ ניכויים': 'סך כל הסכומים שמנוכים משכר הברוטו שלך.',\n    'נטו לתשלום': 'הסכום הסופי שייכנס לחשבון הבנק שלך, אחרי שכל הניכויים ירדו משכר הברוטו.',\n    'מס שולי': 'אחוז המס הגבוה ביותר שאתה משלם. הוא חל רק על החלק העליון של השכר שלך, שנכנס למדרגת המס הגבוהה ביותר שלך.',\n    'נקודות זיכוי': 'הטבה המפחיתה את סכום מס ההכנסה שעליך לשלם. כל תושב זכאי למספר נקודות בסיסי, וישנן נקודות נוספות למצבים שונים.',\n    'קופ\"ג מעביד': 'הסכום שהמעסיק שלך מפריש עבורך לקופת הגמל או לקרן הפנסיה, בנוסף לחלק שאתה מפריש בעצמך.',\n    'קה\"ל מעביד': 'הסכום שהמעסיק שלך מפריש עבורך לקרן ההשתלמות, בנוסף לחלק שלך.'\n};\n\nconst quizQuestions = [\n    { question: \"מהו סכום ה'נטו לתשלום' המעודכן?\", options: [\"7,470.18 ₪\", \"6,465.34 ₪\", \"1,004.84 ₪\", \"5,880.06 ₪\"], answer: \"6,465.34 ₪\" },\n    { question: \"מהו סך התשלומים ברוטו המעודכן?\", options: [\"6,465.34 ₪\", \"1,004.84 ₪\", \"7,470.18 ₪\", \"8,000.00 ₪\"], answer: \"7,470.18 ₪\" },\n    { question: \"כמה כסף נוכה עבור 'ביטוח לאומי'?\", options: [\"231.58 ₪\", \"424.21 ₪\", \"29.88 ₪\", \"142.42 ₪\"], answer: \"29.88 ₪\" },\n    { question: \"מהו 'שכר היסוד' של העובד, המבוסס על שכר מינימום?\", options: [\"7,470.18 ₪\", \"6,465.34 ₪\", \"5,880.06 ₪\", \"4,650.00 ₪\"], answer: \"5,880.06 ₪\" },\n    { question: \"מהו 'המס השולי' של העובד באחוזים?\", options: [\"2.25%\", \"14%\", \"10%\", \"20%\"], answer: \"10%\" },\n    { question: \"כמה 'נקודות זיכוי' יש לעובד?\", options: [\"10\", \"2.25\", \"1\", \"אין מידע\"], answer: \"2.25\" },\n    { question: \"איזה מהבאים הוא 'ניכוי רשות' ולא חובה?\", options: [\"מס הכנסה\", \"דמי בריאות\", \"קרן השתלמות\", \"פנסיה\"], answer: \"קרן השתלמות\" },\n    { question: \"מהו הסכום הכולל של 'ניכויי החובה' (כולל מס הכנסה)?\", options: [\"176.75 ₪\", \"1,004.84 ₪\", \"828.09 ₪\", \"685.67 ₪\"], answer: \"828.09 ₪\" },\n    { question: \"מהו הסכום הכולל שהמעסיק הפריש עבור העובד לפנסיה ולקרן השתלמות?\", options: [\"530.26 ₪\", \"459.56 ₪\", \"989.82 ₪\", \"1,004.84 ₪\"], answer: \"989.82 ₪\" },\n    { question: \"אם העובד היה מוותר על 'קרן השתלמות', בכמה בערך היה גדל הנטו שלו (בהתעלם מהשפעת המס)?\", options: [\"ב-176.75 ₪\", \"ב-530.26 ₪\", \"ב-707.01 ₪\", \"הנטו לא היה משתנה\"], answer: \"ב-176.75 ₪\" },\n];\n\n// --- Sub-components ---\n\nconst CheckIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n    </svg>\n);\n\nconst CrossIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n);\n\nconst InfoIcon: React.FC<{ className?: string }> = ({ className }) => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className={`h-6 w-6 text-gray-400 group-hover:text-brand-light-blue transition-colors ${className}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n  </svg>\n);\n\n\nconst Tooltip: React.FC<{ text: string; explanation: string; children: React.ReactNode; className?: string }> = ({ text, explanation, children, className }) => (\n    <div className={`relative group ${className || ''}`}>\n      {children}\n      <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-96 bg-brand-dark-blue text-white text-xl rounded-lg p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10 shadow-lg text-right\">\n        <p className=\"font-bold text-2xl\">{text}</p>\n        <p>{explanation}</p>\n        <div className=\"absolute top-full left-1/2 -ml-2 w-0 h-0 border-x-8 border-x-transparent border-t-8 border-t-brand-dark-blue\"></div>\n      </div>\n    </div>\n);\n\nconst PaymentsTable: React.FC<{\n    title: string;\n    items: { name: string; quantity?: number | string; rate?: number | string; value: number }[];\n    total?: { name: string; value: number };\n}> = ({ title, items, total }) => {\n    return (\n        <div className=\"border border-gray-300 rounded-lg p-2 text-2xl\">\n            <div className=\"font-bold text-3xl text-center bg-gray-200 rounded-t-md p-2\">{title}</div>\n            <div className=\"grid grid-cols-10 gap-2 p-1 font-bold border-b border-gray-300 text-xl\">\n                <span className=\"text-right col-span-4\">תאור</span>\n                <span className=\"text-center col-span-2\">כמות</span>\n                <span className=\"text-center col-span-2\">תעריף</span>\n                <span className=\"text-left col-span-2\">סה\"כ</span>\n            </div>\n            {items.map(item => (\n                 <div key={item.name} className=\"grid grid-cols-10 gap-2 p-1 hover:bg-gray-100 rounded items-center\">\n                    <Tooltip className=\"col-span-4\" text={item.name} explanation={termExplanations[item.name] || ''}>\n                      <span className=\"flex items-center gap-1.5 text-right cursor-pointer\">{item.name} <InfoIcon /></span>\n                    </Tooltip>\n                    <span className=\"text-center font-mono col-span-2\">{item.quantity ? (typeof item.quantity === 'number' ? item.quantity.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : item.quantity) : ''}</span>\n                    <span className=\"text-center font-mono col-span-2\">{item.rate ? (typeof item.rate === 'number' ? item.rate.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : item.rate) : ''}</span>\n                    <span className=\"text-left font-mono col-span-2\">{item.value.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                </div>\n            ))}\n            {total && (\n                <Tooltip text={total.name} explanation={termExplanations[total.name] || ''}>\n                    <div className=\"grid grid-cols-10 gap-2 p-1 font-bold border-t border-gray-400 mt-1 pt-1 text-3xl\">\n                        <span className=\"flex items-center gap-1.5 text-right col-span-8 cursor-pointer\">{total.name} <InfoIcon /></span>\n                        <span className=\"text-left font-mono col-span-2\">{total.value.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                    </div>\n                </Tooltip>\n            )}\n        </div>\n    );\n};\n\nconst DeductionsTable: React.FC<{\n    title: string;\n    items: { name: string; value: number }[];\n}> = ({ title, items }) => (\n    <div className=\"border border-gray-300 rounded-lg p-2 h-full flex flex-col text-2xl\">\n        <div className=\"font-bold text-3xl text-center bg-gray-200 rounded-t-md p-2\">{title}</div>\n        <div className=\"grid grid-cols-2 gap-2 p-1 font-bold border-b border-gray-300 text-xl\">\n            <span className=\"text-right\">תאור</span>\n            <span className=\"text-left\">סה\"כ</span>\n        </div>\n        <div className=\"flex-grow\">\n            {items.map(item => (\n                <div key={item.name} className=\"grid grid-cols-2 gap-2 p-1 hover:bg-gray-100 rounded items-center\">\n                    <Tooltip text={item.name} explanation={termExplanations[item.name] || ''}>\n                        <span className=\"flex items-center gap-1.5 text-right cursor-pointer\">{item.name} <InfoIcon /></span>\n                    </Tooltip>\n                    <span className=\"text-left font-mono\">{item.value.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                </div>\n            ))}\n        </div>\n    </div>\n);\n\nconst InfoRow: React.FC<{ term: string, value: string | number }> = ({ term, value }) => (\n    <Tooltip text={term} explanation={termExplanations[term] || ''}>\n        <div className=\"flex justify-between items-center cursor-pointer\">\n            <span className=\"flex items-center gap-1.5\">{term} <InfoIcon /></span>\n            <span className=\"font-mono text-left\">{typeof value === 'number' ? value.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : value}</span>\n        </div>\n    </Tooltip>\n);\n\n// --- Main Component ---\n\nconst SalaryModule: React.FC<SalaryModuleProps> = ({ onBack, title, onComplete }) => {\n    const [quizState, setQuizState] = useState<'not_started' | 'in_progress' | 'finished'>('not_started');\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selectedAnswer, setSelectedAnswer] = useState<string | null>(null);\n    const [feedback, setFeedback] = useState('');\n\n    useEffect(() => {\n        if (quizState === 'finished') {\n            const percentage = (score / quizQuestions.length) * 100;\n            const isCompleted = percentage >= 80;\n            if(isCompleted) {\n                onComplete();\n            }\n        }\n     }, [quizState, score, onComplete, quizQuestions.length]);\n\n    const handleAnswer = (answer: string) => {\n        if (selectedAnswer) return;\n        \n        setSelectedAnswer(answer);\n        const correctAnswer = quizQuestions[currentQuestionIndex].answer;\n        if (answer === correctAnswer) {\n            setScore(prev => prev + 1);\n            setFeedback('נכון מאוד!');\n        } else {\n            setFeedback(`טעות. התשובה הנכונה היא: ${correctAnswer}`);\n        }\n    };\n\n    const handleNextQuestion = () => {\n        if (currentQuestionIndex < quizQuestions.length - 1) {\n            setCurrentQuestionIndex(prev => prev + 1);\n            setSelectedAnswer(null);\n            setFeedback('');\n        } else {\n            setQuizState('finished');\n        }\n    };\n\n    const restartQuiz = () => {\n        setQuizState('in_progress');\n        setCurrentQuestionIndex(0);\n        setScore(0);\n        setSelectedAnswer(null);\n        setFeedback('');\n    };\n\n    const renderQuiz = () => {\n        if (quizState === 'finished') {\n             const percentage = (score / quizQuestions.length) * 100;\n             const isCompleted = percentage >= 80;\n\n             const resultMessage = isCompleted\n                ? \"מעולה! עמדתם ביעד והשלמתם את המודול!\"\n                : \"עבודה טובה! יש לכם ידע טוב, אבל צריך להגיע ל-80% כדי להשלים את המודול.\";\n\n            return (\n                <div className=\"relative text-center p-6 bg-white/80 border-4 border-yellow-400 rounded-lg shadow-2xl\">\n                    <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                    <h3 className=\"text-4xl font-bold mb-2 mt-4 text-brand-dark-blue\">סיימת את הבוחן!</h3>\n                    <p className=\"text-3xl mb-4 text-brand-dark-blue/80\">{resultMessage}</p>\n                    <div className=\"bg-brand-light-blue/20 p-3 rounded-lg my-4\">\n                        <p className=\"text-3xl\">הציון שלך:</p>\n                        <p className=\"text-6xl font-bold text-brand-light-blue\">{score} / {quizQuestions.length}</p>\n                    </div>\n                     {!isCompleted && <p className=\"text-2xl text-red-500 mb-4\">נסו שוב כדי לפתוח את המבחן המסכם!</p>}\n                    <button onClick={restartQuiz} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg transition-transform transform hover:scale-105 text-3xl\">שחקו שוב</button>\n                </div>\n            );\n        }\n\n        if (quizState === 'not_started') {\n            return (\n                <div className=\"text-center\">\n                    <h3 className=\"text-4xl font-bold mb-2\">מוכנים? בחנו את עצמכם</h3>\n                    <p className=\"text-3xl mb-8\">עליכם לענות נכון על 80% מהשאלות ({quizQuestions.length * 0.8} מתוך {quizQuestions.length}) כדי להשלים את המודול.</p>\n                    <button onClick={() => setQuizState('in_progress')} className=\"bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-lg text-3xl transition-transform transform hover:scale-105\">התחל בוחן</button>\n                </div>\n            )\n        }\n        \n        const q = quizQuestions[currentQuestionIndex];\n        return (\n            <div>\n                 <div className=\"mb-4\">\n                    <div className=\"bg-gray-300 rounded-full h-2.5\">\n                        <div className=\"bg-brand-teal h-2.5 rounded-full transition-all duration-500\" style={{ width: `${((currentQuestionIndex + 1) / quizQuestions.length) * 100}%` }}></div>\n                    </div>\n                    <p className=\"text-center text-xl mt-1 text-brand-dark-blue/80\">{`שאלה ${currentQuestionIndex + 1} מתוך ${quizQuestions.length}`}</p>\n                </div>\n                <h4 className=\"font-bold text-4xl mb-4\">{q.question}</h4>\n                <div className=\"space-y-3\">\n                    {q.options.map(opt => {\n                        const isCorrect = opt === q.answer;\n                        const isSelected = opt === selectedAnswer;\n                        let buttonClass = 'bg-white/60 backdrop-blur-sm border border-brand-light-blue/30 text-brand-dark-blue hover:bg-brand-light-blue/20';\n                        if(selectedAnswer) {\n                            if(isCorrect) buttonClass = 'bg-green-500 text-white border-green-600';\n                            else if (isSelected) buttonClass = 'bg-red-500 text-white border-red-600';\n                            else buttonClass = 'bg-gray-200/50 text-gray-500 border-gray-300 opacity-60';\n                        }\n                        return (\n                            <button key={opt} onClick={() => handleAnswer(opt)} disabled={!!selectedAnswer} \n                                className={`flex justify-between items-center w-full text-right p-4 rounded-lg transition-all duration-300 transform hover:scale-102 text-3xl ${buttonClass}`}>\n                                <span>{opt}</span>\n                                {selectedAnswer && isCorrect && <CheckIcon />}\n                                {selectedAnswer && isSelected && !isCorrect && <CrossIcon />}\n                            </button>\n                        );\n                    })}\n                </div>\n                {feedback && <p className={`mt-4 font-bold p-3 rounded-md text-center text-2xl ${feedback === 'נכון מאוד!' ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'}`}>{feedback}</p>}\n                {selectedAnswer && (\n                    <button onClick={handleNextQuestion} className=\"w-full mt-4 bg-brand-light-blue text-white font-bold py-3 px-4 rounded-lg animate-pulse hover:animate-none text-2xl\">\n                        {currentQuestionIndex < quizQuestions.length - 1 ? 'לשאלה הבאה' : 'סיים בוחן'}\n                    </button>\n                )}\n            </div>\n        );\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <div className=\"text-center\">\n                <p className=\"mb-4 text-3xl text-center text-brand-dark-blue/90\">\n                    ברוכים הבאים למעבדת השכר! לפניכם תלוש שכר אינטראקטיבי. עברו עם העכבר או לחצו על כל רכיב המסומן באייקון ⓘ כדי לקבל הסבר מפורט. לאחר שתבינו את כל המרכיבים, בחנו את הידע שלכם בבוחן שבצד. בהצלחה!\n                </p>\n                <a \n                    href=\"https://drive.google.com/file/d/1CSZIJ6X52bBW2WZGrigtpWusrBCYh4uu/view?usp=sharing\" \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\" \n                    className=\"inline-block mt-2 mb-6 bg-white/70 backdrop-blur-sm border-2 border-brand-teal text-brand-teal font-bold py-2 px-4 rounded-lg hover:bg-brand-teal/20 transition-colors text-2xl\"\n                >\n                    רוצים לראות איך נראה תלוש אמיתי?\n                </a>\n            </div>\n            <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8\">\n                {/* Pay Slip */}\n                <div className=\"lg:col-span-3 bg-white/70 backdrop-blur-sm p-4 rounded-2xl border-2 border-gray-300 font-sans text-xl\">\n                    <div className=\"text-center p-2 border-b-2 border-black\">\n                        <h3 className=\"text-4xl font-bold\">תלוש משכורת לחודש {paySlipData.details.payPeriod}</h3>\n                        <p className=\"text-2xl\">{paySlipData.details.companyName}</p>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-x-4 p-2 border-b border-gray-300 text-2xl\">\n                        <div>\n                            <p><strong>שם עובד:</strong> {paySlipData.details.employeeName}</p>\n                            <p><strong>ת.ז:</strong> {paySlipData.details.employeeId}</p>\n                            <p><strong>ת. עבודה:</strong> {paySlipData.details.startDate}</p>\n                        </div>\n                         <div>\n                            <p><strong>בנק:</strong> {paySlipData.details.bank}</p>\n                            <p><strong>סניף:</strong> {paySlipData.details.branch}</p>\n                            <p><strong>חשבון:</strong> {paySlipData.details.account}</p>\n                        </div>\n                    </div>\n                    \n                    <div className=\"space-y-4 mt-2\">\n                        <PaymentsTable \n                            title={paySlipData.payments.title}\n                            items={paySlipData.payments.items}\n                            total={{ name: 'סה\"כ תשלומים (ברוטו)', value: paySlipData.payments.total }}\n                        />\n                         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <DeductionsTable \n                                title={paySlipData.deductions.mandatory.title}\n                                items={paySlipData.deductions.mandatory.items}\n                            />\n                            <DeductionsTable \n                                title={paySlipData.deductions.voluntary.title}\n                                items={paySlipData.deductions.voluntary.items}\n                            />\n                        </div>\n\n                         <Tooltip text={'סה\"כ ניכויים'} explanation={termExplanations['סה\"כ ניכויים'] || ''}>\n                             <div className=\"grid grid-cols-10 gap-2 p-1 font-bold border-t-2 border-b-2 border-gray-400 mt-1 py-2 text-3xl cursor-pointer\">\n                                <span className=\"flex items-center gap-1.5 text-right col-span-8\">{'סה\"כ ניכויים'} <InfoIcon /></span>\n                                <span className=\"text-left font-mono col-span-2\">{paySlipData.deductions.total.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                            </div>\n                        </Tooltip>\n                    </div>\n                    \n                    <Tooltip text={'נטו לתשלום'} explanation={termExplanations['נטו לתשלום'] || ''}>\n                        <div className=\"bg-blue-100 p-3 rounded-lg mt-4 text-center cursor-pointer\">\n                            <div className=\"flex justify-between font-bold text-4xl\">\n                                <span className=\"flex items-center gap-1.5\">נטו לתשלום <InfoIcon /></span>\n                                <span className=\"font-mono\">{paySlipData.summary.netSalary.toLocaleString('he-IL', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</span>\n                            </div>\n                        </div>\n                    </Tooltip>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 mt-2 p-2 border-t border-gray-300 text-2xl\">\n                        <div>\n                            <p className=\"font-bold underline\">נתונים נוספים:</p>\n                            <InfoRow term={'מס שולי'} value={`${paySlipData.informative.marginalTax.toFixed(2)}%`}/>\n                            <InfoRow term={'נקודות זיכוי'} value={paySlipData.informative.creditPoints}/>\n                        </div>\n                        <div>\n                            <p className=\"font-bold underline\">הפרשות מעביד:</p>\n                            <InfoRow term={'קופ\"ג מעביד'} value={paySlipData.informative.employerPension}/>\n                            <InfoRow term={'קה\"ל מעביד'} value={paySlipData.informative.employerStudyFund}/>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Quiz */}\n                <div className=\"lg:col-span-2 bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl flex flex-col justify-center\">\n                    {renderQuiz()}\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default SalaryModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface RightsModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// --- Icons for Chapters ---\nconst FileTextIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" /></svg>);\nconst ScaleIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3\" /></svg>);\nconst LogOutIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" /></svg>);\nconst ShieldCheckIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" /></svg>);\nconst CheckCircleIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>);\nconst XCircleIcon: React.FC<{ className?: string }> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>);\n\n\nconst steps = [\n  { title: \"קבלה לעבודה\", icon: FileTextIcon },\n  { title: \"זכויות בעבודה\", icon: ScaleIcon },\n  { title: \"סיום העסקה\", icon: LogOutIcon },\n  { title: \"מגני הזכויות\", icon: ShieldCheckIcon },\n];\n\n// --- Chapter 1: Getting Hired ---\nconst GettingHiredChapter: React.FC = () => (\n    <div className=\"space-y-8 animate-fade-in\">\n        <div className=\"bg-white/50 p-6 rounded-2xl shadow-lg border border-white/40\">\n            <h4 className=\"font-bold text-4xl text-brand-light-blue mb-4\">📜 חתימה על חוזה וטפסים</h4>\n            <p className=\"text-2xl mb-4\">התקבלתם לעבודה? מזל טוב! לפני שמתחילים, יש כמה דברים חשובים:</p>\n            <ul className=\"space-y-3 list-disc list-inside text-2xl\">\n                <li><strong>הודעה על תנאי העסקה:</strong> המעסיק חייב למסור לכם תוך 30 יום מסמך המפרט את תנאי העבודה שלכם, כולל תפקיד, שכר, שעות עבודה ותנאים סוציאליים. <strong>זוהי זכותכם המלאה!</strong></li>\n                <li><strong>טופס 101:</strong> זהו טופס של רשות המסים שחובה למלא בתחילת כל עבודה. הוא משמש לחישוב מס ההכנסה שלכם וכולל פרטים אישיים ובקשות להקלות מס (כמו נקודות זיכוי).</li>\n            </ul>\n             <div className=\"mt-4 p-3 bg-yellow-100/70 border-r-4 border-yellow-500 text-yellow-900 text-2xl\">\n                <strong>חשוב לזכור:</strong> חוקים וטפסים עשויים להשתנות. למידע העדכני והמדויק ביותר, מומלץ תמיד לבדוק באתרים רשמיים כמו <a href=\"https://www.gov.il/he/departments/israel_tax_authority\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"font-bold underline\">רשות המסים</a> ו<a href=\"https://www.kolzchut.org.il/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"font-bold underline\">כל-זכות</a>.\n            </div>\n        </div>\n        <div className=\"bg-white/50 p-6 rounded-2xl shadow-lg border border-white/40\">\n            <h4 className=\"font-bold text-4xl text-brand-light-blue mb-4\">💼 טיפים לראיון עבודה מוצלח</h4>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"bg-green-100/60 p-4 rounded-xl border-l-4 border-green-500\">\n                    <h5 className=\"font-bold text-[2rem] leading-tight text-green-800\">👍 מה כן לעשות:</h5>\n                    <ul className=\"list-disc list-inside mt-2 text-[1.6rem] leading-relaxed\">\n                        <li>הגיעו בזמן</li>\n                        <li>התלבשו בצורה מכובדת</li>\n                        <li>למדו קצת על מקום העבודה מראש</li>\n                        <li>הכינו שאלות לשאול את המראיין</li>\n                    </ul>\n                </div>\n                <div className=\"bg-red-100/60 p-4 rounded-xl border-l-4 border-red-500\">\n                    <h5 className=\"font-bold text-[2rem] leading-tight text-red-800\">👎 מה לא לעשות:</h5>\n                    <ul className=\"list-disc list-inside mt-2 text-[1.6rem] leading-relaxed\">\n                        <li>לדבר לא יפה על מעסיקים קודמים</li>\n                        <li>לשחק בטלפון במהלך הראיון</li>\n                        <li>לא להראות התלהבות או עניין</li>\n                        <li>לשאול רק על כסף בתחילת הראיון</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n\n// --- Chapter 2: Workplace Rights ---\nconst WorkplaceRightsChapter: React.FC = () => {\n    const rights = [\n        { title: 'שכר מינימום', content: 'החוק קובע שכר מינימום שאסור לשלם פחות ממנו. השכר משתנה לפי גיל (לנוער) ומתעדכן מעת לעת.' },\n        { title: 'שעות נוספות', content: 'עבור השעתיים הנוספות הראשונות ביום, זכאים ל-125% מהשכר. מהשעה השלישית ואילך, זכאים ל-150%.' },\n        { title: 'ימי מחלה', content: 'על היום הראשון לא מקבלים תשלום. על היום השני והשלישי מקבלים 50%, ומהיום הרביעי 100%.' },\n        { title: 'החזר נסיעות', content: 'המעסיק חייב להשתתף בהוצאות הנסיעה לעבודה, עד לתקרה יומית הקבועה בחוק.' },\n        { title: 'ימי חופשה', content: 'כל עובד צובר ימי חופשה בתשלום בהתאם לוותק שלו. אסור למעסיק \"למחוק\" ימי חופשה שלא נוצלו.' },\n        { title: 'דמי הבראה', content: 'לאחר השלמת שנת עבודה מלאה, כל עובד זכאי לתשלום דמי הבראה פעם בשנה.' },\n        { title: 'הפסקות', content: 'ביום עבודה של 6 שעות ומעלה, זכאים להפסקה של 45 דקות (לרוב לא בתשלום).' },\n        { title: 'פנסיה', content: 'המעסיק חייב להפריש עבורכם כסף לחיסכון פנסיוני. חלק מההפרשה יורד מהשכר שלכם וחלק המעסיק מוסיף.' },\n    ];\n    return (\n        <div className=\"space-y-4 animate-fade-in\">\n            <div className=\"p-4 bg-yellow-100/80 border-t-4 border-yellow-500 text-yellow-900 rounded-b-lg shadow-md text-2xl\">\n                <strong>⚠️ סייג חשוב:</strong> המידע המוצג כאן הוא כללי ומיועד להכרות ראשונית בלבד. דיני העבודה בישראל מורכבים ומתעדכנים. למידע המלא והמדויק ביותר, יש לפנות לאתר <a href=\"https://www.kolzchut.org.il/he/%D7%96%D7%9B%D7%95%D7%99%D7%95%D7%AA_%D7%A2%D7%95%D7%91%D7%93%D7%99%D7%9D\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"font-bold underline\">\"כל זכות\"</a>.\n            </div>\n            {rights.map(right => (\n                <details key={right.title} className=\"bg-white/60 p-4 rounded-xl shadow-md cursor-pointer group\">\n                    <summary className=\"font-bold text-4xl flex justify-between items-center text-brand-dark-blue\">\n                        {right.title}\n                        <span className=\"transform transition-transform duration-300 group-open:rotate-90\">▶</span>\n                    </summary>\n                    <p className=\"mt-2 text-[1.75rem] leading-relaxed text-brand-dark-blue/90\">{right.content}</p>\n                </details>\n            ))}\n        </div>\n    );\n};\n\n// --- Chapter 3: Ending Employment ---\nconst EndingEmploymentChapter: React.FC = () => (\n    <div className=\"space-y-8 animate-fade-in\">\n        <div className=\"bg-white/50 p-6 rounded-2xl shadow-lg border border-white/40\">\n            <h4 className=\"font-bold text-4xl text-brand-light-blue mb-3\">התפטרות ופיטורים</h4>\n            <p className=\"text-[1.75rem] mb-4\">בין אם בחרתם לעזוב ובין אם המעסיק החליט לסיים את עבודתכם, ישנם כללים חשובים:</p>\n            <ul className=\"space-y-4 list-disc list-inside text-[1.75rem]\">\n                <li><strong>הודעה מוקדמת:</strong> שני הצדדים (עובד ומעסיק) חייבים לתת הודעה בכתב לפני סיום העסקה. משך הזמן תלוי בוותק. לדוגמה, עובד בשנה הראשונה צריך לתת יום הודעה על כל חודש עבודה.</li>\n                <li><strong>שימוע לפני פיטורים:</strong> למעסיק אסור לפטר עובד בלי לערוך לו שימוע. בשימוע, המעסיק מציג את הסיבות לפיטורים והעובד מקבל הזדמנות להגיב ולהשמיע את טענותיו.</li>\n                <li><strong>פיצויי פיטורים:</strong> עובד שפוטר לאחר שהשלים שנת עבודה מלאה, זכאי בדרך כלל לפיצויי פיטורים (משכורת חודש אחד עבור כל שנת עבודה). ישנם מקרים מסוימים בהם גם עובד שהתפטר זכאי לפיצויים.</li>\n            </ul>\n        </div>\n        <div className=\"p-4 bg-red-100/80 border-t-4 border-red-500 text-red-900 rounded-b-lg shadow-md text-2xl\">\n            <strong>⚠️ לתשומת לבכם:</strong> נושא סיום העסקה הוא מורכב במיוחד. המידע כאן הוא בסיסי בלבד ואינו מהווה תחליף לייעוץ משפטי. במקרה של ספק, חשוב מאוד להתייעץ עם גורם מקצועי או לפנות למקורות מידע מהימנים.\n        </div>\n    </div>\n);\n\n\n// --- Chapter 4: Rights Defenders Game ---\ninterface Dilemma {\n  id: number;\n  title: string;\n  character: { name: string; avatar: string; };\n  story: string;\n  question: string;\n  options: string[];\n  answer: string;\n  explanation: string;\n  image: string;\n}\n\nconst dilemmas: Dilemma[] = [\n    { id: 1, title: 'שעות נוספות', character: { name: 'דנה', avatar: '👩‍🍳' }, story: 'עבדתי בפיצרייה והמשמרת שלי הייתה אמורה להסתיים ב-22:00. הבוס ביקש שאישאר עד 23:30 בגלל לחץ. כשקיבלתי את המשכורת, ראיתי ששילמו לי שכר רגיל על כל השעות.', question: 'האם דנה הייתה צריכה לקבל תשלום נוסף?', options: ['לא, מכיוון שהיא הסכימה להישאר.', 'כן, 125% על השעה וחצי הנוספות.', 'כן, תוספת של 100 ש\"ח כפיצוי.', 'כן, תשלום רגיל ויום חופש נוסף.'], answer: 'כן, 125% על השעה וחצי הנוספות.', explanation: 'על פי החוק, עבור השעתיים הנוספות הראשונות ביום עבודה יש לשלם 125% מהשכר הרגיל. על כל שעה נוספת לאחר מכן יש לשלם 150%.', image: 'https://images.pexels.com/photos/2271107/pexels-photo-2271107.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 2, title: 'ימי מחלה', character: { name: 'יוני', avatar: '🤒' }, story: 'הרגשתי ממש לא טוב והודעתי למנהל בבית הקפה שלא אגיע. הוא אמר שאין בעיה, אבל שהיום הזה ירד לי מימי החופשה השנתיים.', question: 'האם המנהל פעל כשורה?', options: ['כן, יום מחלה ראשון תמיד יורד מהחופשה.', 'לא, יום מחלה משולם בנפרד (מהיום השני) ואסור להורידו מהחופשה.', 'לא, הוא היה צריך להביא אישור רופא באותו היום.', 'כן, אבל הוא צריך לשלם לו חצי יום חופשה בלבד.'], answer: 'לא, יום מחלה משולם בנפרד (מהיום השני) ואסור להורידו מהחופשה.', explanation: 'ימי מחלה וימי חופשה הם שני דברים נפרדים. על היום הראשון למחלה לא מקבלים תשלום, על השני והשלישי 50%, ומהרביעי 100%. אסור למעסיק להוריד ימי מחלה מימי החופשה.', image: 'https://images.pexels.com/photos/4167544/pexels-photo-4167544.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 3, title: 'החזר נסיעות', character: { name: 'מאיה', avatar: '🚌' }, story: 'אני גרה ברעננה ועובדת בחנות בתל אביב, ונוסעת כל יום באוטובוס. בסוף החודש גיליתי שהמעסיק לא הוסיף לי כסף עבור הנסיעות.', question: 'האם המעסיק היה חייב לשלם לה על הנסיעות?', options: ['לא, נסיעות הן הטבה שהמעסיק יכול לבחור אם לתת.', 'כן, הוא חייב לשלם החזר נסיעות עד לתקרה בחוק.', 'כן, אבל רק אם היא מגיעה ברכב פרטי.', 'כן, הוא צריך לשלם את מלוא עלות הנסיעה, ללא תקרה.'], answer: 'כן, הוא חייב לשלם החזר נסיעות עד לתקרה בחוק.', explanation: 'כל עובד זכאי להחזר הוצאות נסיעה. הסכום מחושב לפי עלות כרטיסייה או \"חופשי חודשי\" מוזל, ועד לתקרה יומית הקבועה בחוק.', image: 'https://images.pexels.com/photos/1601042/pexels-photo-1601042.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 4, title: 'תלוש שכר', character: { name: 'איתי', avatar: '✉️' }, story: 'אני עובד כבר חודשיים בחנות נוחות. בסוף כל חודש, הבעלים נותן לי מזומן במעטפה ואומר \"זה השכר שלך\", בלי שום מסמך.', question: 'האם המעסיק פועל כשורה?', options: ['כן, תשלום במזומן הוא חוקי ואין צורך במסמכים.', 'לא, המעסיק חייב למסור תלוש שכר מפורט.', 'זה חוקי רק אם אני עובד זמני.', 'כן, כל עוד הוא מנהל רישום פנימי.'], answer: 'לא, המעסיק חייב למסור תלוש שכר מפורט.', explanation: 'המעסיק מחויב על פי חוק למסור לעובד תלוש שכר מפורט עד היום התשיעי של החודש העוקב. התלוש הוא הוכחה לתשלום ומפרט את כל רכיבי השכר והניכויים.', image: 'https://images.pexels.com/photos/4386433/pexels-photo-4386433.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 5, title: 'ניכויים אסורים', character: { name: 'נועה', avatar: '🍽️' }, story: 'במהלך משמרת במסעדה, הפלתי בטעות מגש עם שתי צלחות שנשברו. המנהל כעס ואמר שינכה לי 100 ש\"ח מהמשכורת על הנזק.', question: 'האם מותר למנהל לנכות לה כסף מהשכר?', options: ['כן, עובד אחראי על כל נזק במשמרת שלו.', 'לא, אסור לנכות שכר על נזק שנגרם בטעות בעבודה.', 'מותר, אבל רק אם הנזק עולה על 200 ש\"ח.', 'מותר, אבל רק אם היא הסכימה בכתב.'], answer: 'לא, אסור לנכות שכר על נזק שנגרם בטעות בעבודה.', explanation: 'ככלל, אסור למעסיק לנכות משכר העובד פיצוי על נזקים שנגרמו במסגרת העבודה הרגילה, אלא אם מדובר בנזק שנגרם בזדון או ברשלנות חמורה.', image: 'https://images.pexels.com/photos/1075841/pexels-photo-1075841.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 6, title: 'דמי הבראה', character: { name: 'רון', avatar: '🏖️' }, story: 'אני עובד באולם אירועים כבר שנה וחצי. שמעתי מחברים על \"דמי הבראה\" אבל אף פעם לא ראיתי סעיף כזה בתלוש שלי.', question: 'האם רון זכאי לדמי הבראה?', options: ['לא, דמי הבראה מקבלים רק עובדי מדינה.', 'כן, כל עובד שהשלים שנת עבודה זכאי לדמי הבראה.', 'כן, אבל רק אם יצא לחופשה בפועל באותה שנה.', 'לא, זה תלוי ברצון הטוב של המעסיק.'], answer: 'כן, כל עובד שהשלים שנת עבודה זכאי לדמי הבראה.', explanation: 'כל עובד שהשלים שנת עבודה מלאה אצל אותו מעסיק זכאי לדמי הבראה. מספר ימי ההבראה עולה בהתאם לוותק של העובד במקום העבודה.', image: 'https://images.pexels.com/photos/3184183/pexels-photo-3184183.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 7, title: 'תאונת עבודה', character: { name: 'עמית', avatar: '🩹' }, story: 'בזמן שניקיתי את המטבח במסעדה, החלקתי על רצפה רטובה ושברתי את היד. הטיפול הרפואי עלה כסף ואני גם לא יכול לעבוד חודש.', question: 'מי צריך לכסות את הנזק?', options: ['עמית, זו אחריותו האישית להיזהר.', 'המעסיק, הוא צריך לשלם משכורת מלאה ופיצויים.', 'ביטוח לאומי, שמכסה את הטיפול ואובדן ההכנסה.', 'קופת החולים, כי זו פגיעה רפואית.'], answer: 'ביטוח לאומי, שמכסה את הטיפול ואובדן ההכנסה.', explanation: 'פגיעה שנגרמה תוך כדי ועקב העבודה נחשבת לתאונת עבודה. במקרה כזה, המוסד לביטוח לאומי מכסה את עלויות הטיפול הרפואי ומשלם \"דמי פגיעה\" כתחליף לשכר.', image: 'https://images.pexels.com/photos/6029323/pexels-photo-6029323.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 8, title: 'הפסקות', character: { name: 'שירה', avatar: '⏳' }, story: 'אני עובדת משמרת של 7 שעות בחנות. המנהלת אומרת שאין זמן להפסקה אמיתית לאכול כי החנות עמוסה.', question: 'האם שירה זכאית להפסקה?', options: ['לא, אם החנות עמוסה אין חובת הפסקה.', 'כן, בעבודה של 6 שעות ומעלה, היא זכאית ל-45 דקות הפסקה.', 'כן, היא זכאית להפסקה רק אם היא עובדת 8 שעות מלאות.', 'כן, אבל על חשבון הזמן הפנוי שלה אחרי העבודה.'], answer: 'כן, בעבודה של 6 שעות ומעלה, היא זכאית ל-45 דקות הפסקה.', explanation: 'עובד המועסק 6 שעות או יותר זכאי להפסקה של 45 דקות, מתוכה חצי שעה רצופה. בדרך כלל ההפסקה אינה בתשלום, אלא אם הוסכם אחרת.', image: 'https://images.pexels.com/photos/3951901/pexels-photo-3951901.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 9, title: 'שכר מינימום לנוער', character: { name: 'עומר', avatar: '👦' }, story: 'אני בן 16 והתחלתי לעבוד בגלידרייה. הבעלים הציע לי 22 ש\"ח לשעה כי \"אני צעיר ובלי ניסיון\".', question: 'האם השכר שהוצע לעומר חוקי?', options: ['כן, המעסיק קובע את השכר לפי הניסיון.', 'לא, אסור לשלם פחות משכר המינימום לנוער, המותאם לגיל.', 'כן, זה שכר סביר לעבודה ראשונה.', 'לא, אבל מותר אם הוא הסכים לכך בכתב.'], answer: 'לא, אסור לשלם פחות משכר המינימום לנוער, המותאם לגיל.', explanation: 'קיים שכר מינימום מיוחד לנוער, והוא מותאם לגיל. אסור למעסיק לשלם פחות מהסכום הקבוע בחוק!', image: 'https://images.pexels.com/photos/1352270/pexels-photo-1352270.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' },\n    { id: 10, title: 'הודעה מוקדמת', character: { name: 'גיא', avatar: '👋' }, story: 'אחרי שלושה חודשים, החלטתי לעזוב את עבודתי כשליח. הודעתי לבוס שאני לא מגיע יותר מהיום.', question: 'האם גיא פעל כשורה?', options: ['כן, כל עוד הוא מודיע על כך בטלפון.', 'לא, הוא חייב לתת הודעה מוקדמת בכתב.', 'לא, הוא חייב להישאר עד שימצאו לו מחליף.', 'כן, כי הוא עבד רק שלושה חודשים.'], answer: 'לא, הוא חייב לתת הודעה מוקדמת בכתב.', explanation: 'כשעובד רוצה להתפטר או כשמעסיק רוצה לפטר, שני הצדדים מחויבים לתת \"הודעה מוקדמת\" בכתב. משך הזמן תלוי בוותק. בשלושת החודשים הראשונים, נדרש יום הודעה על כל חודש עבודה.', image: 'https://images.pexels.com/photos/7869680/pexels-photo-7869680.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1' }\n].sort(() => Math.random() - 0.5); // Shuffle dilemmas\n\n\nconst RightsDefendersGame: React.FC<{ onGameComplete: () => void }> = ({ onGameComplete }) => {\n    const [currentDilemmaIndex, setCurrentDilemmaIndex] = useState(0);\n    const [answers, setAnswers] = useState<Record<string, { selected: string; isCorrect: boolean }>>({});\n    const [gameState, setGameState] = useState<'playing' | 'finished'>('playing');\n\n    const currentDilemma = dilemmas[currentDilemmaIndex];\n    const selectedAnswer = answers[currentDilemma.id.toString()]?.selected;\n    // FIX: Cast Object.values to provide an explicit type for 'a', resolving a TS error where it was inferred as 'unknown'.\n    const score = (Object.values(answers) as { isCorrect: boolean }[]).filter(a => a.isCorrect).length;\n\n    useEffect(() => {\n        if (gameState === 'finished' && score >= 8) {\n            onGameComplete();\n        }\n    }, [gameState, score, onGameComplete]);\n\n    const handleAnswerSelect = (option: string) => {\n        if (selectedAnswer) return;\n        const isCorrect = option === currentDilemma.answer;\n        setAnswers(prev => ({ ...prev, [currentDilemma.id.toString()]: { selected: option, isCorrect } }));\n    };\n\n    const handleNext = () => {\n        if (currentDilemmaIndex < dilemmas.length - 1) {\n            setCurrentDilemmaIndex(prev => prev + 1);\n        } else {\n            setGameState('finished');\n        }\n    };\n\n    const handleRestart = () => {\n        setCurrentDilemmaIndex(0);\n        setAnswers({});\n        setGameState('playing');\n    };\n\n    if (gameState === 'finished') {\n        const isCompleted = score >= 8;\n        return (\n            <div className=\"text-center bg-white/60 p-8 rounded-3xl animate-fade-in shadow-xl\">\n                <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                <h3 className=\"text-5xl font-bold font-display text-brand-teal mt-4 mb-4\">סיכום התיקים</h3>\n                <p className=\"text-3xl mb-6\">{isCompleted ? \"הצלחתם במשימה והשלמתם את המודול!\" : \"עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.\"}</p>\n                <div className=\"bg-brand-light-blue/20 p-4 rounded-xl my-4 inline-block\">\n                    <p className=\"text-4xl font-semibold\">הציון הסופי:</p>\n                    <p className=\"text-7xl font-bold text-brand-light-blue\">{score}<span className=\"text-5xl text-brand-dark-blue/70\"> / {dilemmas.length}</span></p>\n                </div>\n                {!isCompleted && <p className=\"text-red-500 mb-4 font-semibold text-2xl\">יש לפתור נכון 8 תיקים לפחות כדי להשלים את המודול.</p>}\n                <button onClick={handleRestart} className=\"mt-6 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-8 rounded-xl text-3xl transition-transform transform hover:scale-105\">שחק שוב</button>\n            </div>\n        );\n    }\n    \n    return (\n        <div className=\"animate-fade-in\">\n             <div className=\"flex justify-center gap-1 sm:gap-2 mb-6\">\n                {dilemmas.map((d, index) => {\n                    const answerRecord = answers[d.id.toString()];\n                    const isCompleted = !!answerRecord;\n                    const isCorrect = answerRecord ? answerRecord.isCorrect : false;\n                    return <div key={d.id} className={`h-3 flex-1 rounded-full transition-all duration-300 ${index === currentDilemmaIndex ? 'bg-brand-teal' : isCompleted ? (isCorrect ? 'bg-green-400' : 'bg-red-400') : 'bg-gray-300'}`} title={`תיק ${index + 1}`}></div>;\n                })}\n            </div>\n            <div className=\"bg-white/60 backdrop-blur-md border border-white/30 p-6 rounded-3xl shadow-xl\">\n                <h3 className=\"text-4xl sm:text-5xl font-bold font-display text-brand-dark-blue mb-4 text-center\">תיק #{currentDilemma.id}: <span className=\"text-brand-light-blue\">{currentDilemma.title}</span></h3>\n                <img src={currentDilemma.image} alt={currentDilemma.title} className=\"w-full h-64 object-cover rounded-2xl mb-6 shadow-lg\" />\n                <div className=\"bg-white/50 p-6 rounded-2xl\">\n                    <div className=\"flex items-start gap-4 mb-6\">\n                        <div className=\"flex-shrink-0 text-7xl bg-gray-200 w-24 h-24 rounded-full flex items-center justify-center\">{currentDilemma.character.avatar}</div>\n                        <div className=\"relative bg-gray-100 p-4 rounded-xl flex-1\"><div className=\"absolute top-4 -right-3 w-0 h-0 border-t-8 border-t-transparent border-b-8 border-b-transparent border-l-8 border-l-gray-100\"></div><p className=\"font-semibold text-2xl text-brand-dark-blue\">{currentDilemma.character.name} מספר/ת:</p><p className=\"italic text-brand-dark-blue/90 text-4xl\">\"{currentDilemma.story}\"</p></div>\n                    </div>\n                    <div className=\"bg-brand-light-blue/20 p-4 rounded-xl\">\n                        <h4 className=\"font-bold text-5xl text-brand-dark-blue mb-4 text-center\">{currentDilemma.question}</h4>\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                            {currentDilemma.options.map((option) => {\n                                const isSelected = selectedAnswer === option;\n                                const isCorrect = currentDilemma.answer === option;\n                                let buttonClass = 'bg-white hover:bg-gray-50 border-gray-300';\n                                if (selectedAnswer) { if (isCorrect) buttonClass = 'bg-green-500 text-white border-green-600'; else if (isSelected) buttonClass = 'bg-red-500 text-white border-red-600'; else buttonClass = 'bg-gray-200/50 opacity-60 border-gray-300'; }\n                                return <button key={option} onClick={() => handleAnswerSelect(option)} disabled={!!selectedAnswer} className={`flex items-center justify-between w-full text-right p-4 rounded-xl transition-all duration-300 border-2 ${buttonClass}`}><span className=\"flex-1 text-4xl\">{option}</span>{selectedAnswer && isCorrect && <CheckCircleIcon className=\"w-8 h-8 text-white flex-shrink-0\" />}{selectedAnswer && isSelected && !isCorrect && <XCircleIcon className=\"w-8 h-8 text-white flex-shrink-0\" />}</button>;\n                            })}\n                        </div>\n                    </div>\n                </div>\n                {selectedAnswer && (<div className=\"mt-6 p-4 bg-yellow-100/60 border-r-4 border-yellow-500 rounded-lg animate-fade-in flex items-start gap-4\"><ScaleIcon className=\"w-16 h-16 text-yellow-800 flex-shrink-0 mt-1\" /><div><p className=\"font-bold text-3xl text-yellow-900\">חוות דעת מומחה:</p><p className=\"text-yellow-900/90 text-2xl\">{currentDilemma.explanation}</p></div></div>)}\n            </div>\n            <div className=\"mt-6 text-center\"><button onClick={handleNext} disabled={!selectedAnswer} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-xl transition-all duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed text-2xl\">{currentDilemmaIndex < dilemmas.length - 1 ? 'לתיק הבא' : 'סיים בוחן'}</button></div>\n        </div>\n    );\n};\n\n// --- Main Module Component ---\nconst RightsModule: React.FC<RightsModuleProps> = ({ onBack, title, onComplete }) => {\n  const [currentStep, setCurrentStep] = useState(0);\n\n  const renderStepContent = () => {\n    switch (currentStep) {\n        case 0: return <GettingHiredChapter />;\n        case 1: return <WorkplaceRightsChapter />;\n        case 2: return <EndingEmploymentChapter />;\n        case 3: return <RightsDefendersGame onGameComplete={onComplete} />;\n        default: return <GettingHiredChapter />;\n    }\n  };\n\n  return (\n    <ModuleView title=\"המדריך המלא לזכויות עובדים\" onBack={onBack}>\n      <div className=\"mb-8\">\n        <div className=\"flex items-start mb-2\">\n          {steps.map((step, index) => (\n            <React.Fragment key={index}>\n              <div className=\"flex flex-col items-center flex-1\" onClick={() => setCurrentStep(index)}>\n                <div className={`w-16 h-16 rounded-full flex items-center justify-center border-2 transition-all duration-300 cursor-pointer ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                  <step.icon className=\"w-10 h-10\" />\n                </div>\n                <p className={`mt-2 text-xl text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step.title}</p>\n              </div>\n              {index < steps.length - 1 && <div className={`flex-1 h-1 mt-8 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n            </React.Fragment>\n          ))}\n        </div>\n      </div>\n\n      {renderStepContent()}\n\n      <div className=\"flex justify-between mt-8\">\n        <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הקודם</button>\n        <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הבא</button>\n      </div>\n    </ModuleView>\n  );\n};\n\nexport default RightsModule;","// This file contains hardcoded historical stock data for the investment simulator.\n// The data is plausible but not real-time or guaranteed to be accurate. It's for educational purposes only.\n\nexport type StockData = {\n  [key: string]: { date: string; price: number }[];\n};\n\nfunction generateStockData(\n    startDate: string, \n    endDate: string, \n    startPrice: number, \n    volatility: number, \n    trend: number\n): { date: string; price: number }[] {\n  const data = [];\n  let currentDate = new Date(startDate);\n  const finalDate = new Date(endDate);\n  let currentPrice = startPrice;\n\n  while (currentDate <= finalDate) {\n    const day = currentDate.getDay();\n    // Only generate data for weekdays\n    if (day !== 0 && day !== 6) {\n        data.push({\n            date: currentDate.toISOString().split('T')[0],\n            price: parseFloat(currentPrice.toFixed(2))\n        });\n    }\n\n    const changePercent = 2 * volatility * Math.random();\n    let changeAmount = currentPrice * changePercent;\n    if (Math.random() > 0.5) {\n      changeAmount *= -1;\n    }\n    \n    currentPrice += changeAmount;\n    currentPrice += trend; // Apply a small daily trend\n\n    // Ensure price doesn't go below a certain threshold to avoid negative values\n    if (currentPrice < startPrice / 5) {\n        currentPrice = startPrice / 5;\n    }\n\n    currentDate.setDate(currentDate.getDate() + 1);\n  }\n  return data;\n}\n\nconst stockConfigs = {\n    AAPL: { start: 172, volatility: 0.019, trend: 0.08 },\n    GOOGL: { start: 145, volatility: 0.020, trend: 0.07 },\n    MSFT: { start: 300, volatility: 0.017, trend: 0.16 },\n    AMZN: { start: 165, volatility: 0.028, trend: 0.05 },\n    NFLX: { start: 520, volatility: 0.038, trend: 0.1 },\n    TSLA: { start: 260, volatility: 0.050, trend: -0.02 },\n    NKE: { start: 160, volatility: 0.024, trend: -0.03 },\n    SBUX: { start: 105, volatility: 0.021, trend: -0.01 },\n    DIS: { start: 115, volatility: 0.030, trend: -0.04 },\n    MCD: { start: 260, volatility: 0.014, trend: 0.04 },\n};\n\nconst startDate = '2022-01-01';\nconst endDate = '2024-07-01';\n\nconst generatedStockData: StockData = {};\nfor (const [symbol, params] of Object.entries(stockConfigs)) {\n    generatedStockData[symbol] = generateStockData(startDate, endDate, params.start, params.volatility, params.trend);\n}\n\nexport const stockData: StockData = generatedStockData;","import React, { useState, useMemo, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { stockData, StockData } from './investmentData';\nimport { TrophyIcon, BookOpenIcon } from '../icons/Icons';\n\n\ninterface InterestModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\n  \"מהי השקעה?\",\n  \"סוגי השקעות\",\n  \"כוחה של ריבית דריבית\",\n  \"נסו בעצמכם!\",\n  \"בוחן ידע\"\n];\n\n// Custom Icons\nconst CheckCircleIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n);\nconst XCircleIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n);\n\n\n// --- Step 1: What is an Investment? ---\nconst WhatIsInvestment: React.FC = () => {\n    const initialItems = useMemo(() => [\n        { name: 'קניית מניית אפל', category: 'השקעה' },\n        { name: 'ארוחה במסעדה יקרה', category: 'בזבוז' },\n        { name: 'רכישת דירה להשכרה', category: 'השקעה' },\n        { name: 'כרטיס לקולנוע', category: 'בזבוז' },\n        { name: 'הפקדה לקרן פנסיה', category: 'השקעה' },\n        { name: 'קניית בגד מותג חדש', category: 'בזבוז' },\n    ].sort(() => Math.random() - 0.5), []);\n\n    const [itemsToSort, setItemsToSort] = useState(initialItems.map(i => i.name));\n    const [assignments, setAssignments] = useState<Record<string, { category: string; isCorrect: boolean }>>({});\n    const [feedback, setFeedback] = useState('');\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, itemName: string) => {\n        e.dataTransfer.setData('itemName', itemName);\n    };\n\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, targetCategory: string) => {\n        e.preventDefault();\n        const itemName = e.dataTransfer.getData('itemName');\n        const item = initialItems.find(i => i.name === itemName);\n\n        if (item && !assignments[item.name]) {\n            const isCorrect = item.category === targetCategory;\n            setAssignments(prev => ({ ...prev, [item.name]: { category: targetCategory, isCorrect } }));\n            setItemsToSort(prev => prev.filter(i => i !== itemName));\n            setFeedback(isCorrect ? 'נכון!' : 'לא בדיוק...');\n            setTimeout(() => setFeedback(''), 1500);\n        }\n    };\n    \n    const investmentItems = (Object.entries(assignments) as [string, { category: string; isCorrect: boolean }][]).filter(([, val]) => val.category === 'השקעה');\n    const spendingItems = (Object.entries(assignments) as [string, { category: string; isCorrect: boolean }][]).filter(([, val]) => val.category === 'בזבוז');\n    \n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-teal mb-4 text-center\">מהי השקעה ומהו בזבוז?</h3>\n            <p className=\"text-3xl text-center text-brand-dark-blue/90 mb-6\">\n                <strong>השקעה</strong> היא שימוש בכסף כדי לקנות נכס שצפוי להגדיל את ערכו או לייצר הכנסה בעתיד (כמו מניה או דירה).\n                <br />\n                <strong>בזבוז</strong> הוא הוצאת כסף על מוצר או שירות שמספק הנאה רגעית אך לא מייצר ערך עתידי.\n            </p>\n            <div className=\"mt-4 mb-8 p-4 bg-yellow-100/60 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg text-2xl\">\n                <p className=\"font-bold\">💡 הערה חשובה:</p>\n                <p>לפעמים ההבחנה היא סובייקטיבית (\"בעיני המתבונן\"). למשל, קורס מקצועי יכול להיראות כהוצאה, אך אם הוא מוביל לעבודה טובה יותר - זוהי <strong>השקעה בעצמכם!</strong></p>\n            </div>\n            <p className=\"text-3xl font-bold text-center mb-8\">גררו כל פריט לקטגוריה הנכונה:</p>\n            \n            <div className=\"min-h-[80px] bg-white/30 p-4 rounded-2xl mb-6 flex flex-wrap justify-center gap-4 text-2xl\">\n                {itemsToSort.map(name => (\n                    <div key={name} draggable onDragStart={(e) => handleDragStart(e, name)} className=\"bg-brand-light-blue/20 shadow-md p-3 rounded-xl cursor-grab hover:bg-brand-light-blue/30 transition-colors\">\n                        {name}\n                    </div>\n                ))}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div onDrop={(e) => handleDrop(e, 'השקעה')} onDragOver={(e) => e.preventDefault()} className=\"min-h-[200px] p-4 bg-green-100/50 rounded-2xl border-2 border-dashed border-green-500\">\n                    <h4 className=\"font-bold text-4xl text-green-700 text-center\">📈 השקעה</h4>\n                    <div className=\"space-y-2 mt-4 text-2xl\">\n                        {investmentItems.map(([name, val]) => (\n                            <div key={name} className={`p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'}`}>{name}</div>\n                        ))}\n                    </div>\n                </div>\n                <div onDrop={(e) => handleDrop(e, 'בזבוז')} onDragOver={(e) => e.preventDefault()} className=\"min-h-[200px] p-4 bg-red-100/50 rounded-2xl border-2 border-dashed border-red-500\">\n                    <h4 className=\"font-bold text-4xl text-red-700 text-center\">💸 בזבוז</h4>\n                    <div className=\"space-y-2 mt-4 text-2xl\">\n                        {spendingItems.map(([name, val]) => (\n                            <div key={name} className={`p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'}`}>{name}</div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            {feedback && <p className=\"text-center font-bold text-3xl mt-4\">{feedback}</p>}\n        </div>\n    );\n};\n\n\n// --- Step 2: Types of Investments ---\nconst InvestmentTypes: React.FC = () => {\n    const types = [\n        { name: \"מניות\", risk: \"גבוה\", icon: \"📈\", desc: \"אתם קונים חלק קטן מבעלות בחברה. אם החברה מצליחה, ערך המניה עולה. אם היא נכשלת, אתם עלולים להפסיד את כספכם.\" },\n        { name: \"אג\\\"ח (אגרות חוב)\", risk: \"נמוך\", icon: \"📜\", desc: \"אתם מלווים כסף לממשלה או לחברה, והם מבטיחים להחזיר לכם אותו עם ריבית קבועה. נחשב בטוח יחסית.\" },\n        { name: \"נדל\\\"ן\", risk: \"בינוני\", icon: \"🏢\", desc: \"קניית נכס כמו דירה או משרד, במטרה להשכיר אותו ולקבל הכנסה חודשית, או למכור אותו ברווח בעתיד.\" },\n        { name: \"קרנות סל/נאמנות\", risk: \"בינוני\", icon: \"🧺\", desc: \"במקום לקנות מניה אחת, אתם קונים 'סל' שמכיל מניות רבות ושונות. זה מפזר את הסיכון ומתאים למתחילים.\" },\n        { name: \"השקעה בעצמך (לימודים)\", risk: \"נמוך-בינוני\", icon: \"🎓\", desc: \"רכישת ידע או מיומנות חדשה (כמו קורס או תואר) שיכולה להגדיל את פוטנציאל ההשתכרות שלכם בעתיד. זו אחת ההשקעות הבטוחות והמשתלמות ביותר!\" },\n        { name: \"פריטי אספנות וסחורות\", risk: \"גבוה\", icon: \"💎\", desc: \"קניית פריטים נדירים (כמו אומנות, שעונים, קלפים) או סחורות (כמו זהב) מתוך ציפייה שערכם יעלה. דורש ידע רב והסיכון גבוה.\" }\n    ];\n    \n    const getRiskStyles = (risk: string) => {\n        if (risk === \"גבוה\") return 'bg-red-200 text-red-800';\n        if (risk === \"בינוני\") return 'bg-yellow-200 text-yellow-800';\n        if (risk === \"נמוך-בינוני\") return 'bg-blue-200 text-blue-800';\n        return 'bg-green-200 text-green-800'; // נמוך\n    };\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n             <p className=\"text-center text-3xl mb-8\">ישנן דרכים רבות להשקיע. הנה כמה מהנפוצות ביותר. רמת הסיכון משפיעה על פוטנציאל הרווח (וההפסד).</p>\n             <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {types.map(type => (\n                    <div key={type.name} className=\"bg-white/60 p-6 rounded-2xl border border-white/40 shadow-lg flex flex-col\">\n                        <div className=\"flex justify-between items-start mb-3\">\n                            <div className=\"text-left\">\n                                <p className=\"text-7xl\">{type.icon}</p>\n                                <h4 className=\"text-4xl font-bold text-brand-light-blue mt-2\">{type.name}</h4>\n                            </div>\n                            <div className={`px-3 py-1 rounded-full font-bold text-xl ${getRiskStyles(type.risk)}`}>\n                                סיכון {type.risk}\n                            </div>\n                        </div>\n                        <p className=\"text-brand-dark-blue/90 flex-grow text-2xl\">{type.desc}</p>\n                    </div>\n                ))}\n             </div>\n        </div>\n    );\n};\n\n// --- Step 3: Compound Interest Calculator ---\nconst CompoundInterestCalculator: React.FC = () => {\n    const [principal, setPrincipal] = useState(1000);\n    const [rate, setRate] = useState(5);\n    const [years, setYears] = useState(10);\n    const [monthlyContribution, setMonthlyContribution] = useState(100);\n\n    const calculationResults = useMemo(() => {\n        const chartData = [];\n        let compoundInterestTotal = principal;\n        for (let i = 0; i <= years; i++) {\n            if (i > 0) {\n                compoundInterestTotal = (compoundInterestTotal + monthlyContribution * 12) * (1 + rate / 100);\n            }\n            chartData.push({ year: `שנה ${i}`, 'שווי החיסכון': parseFloat(compoundInterestTotal.toFixed(2)) });\n        }\n        const finalValue = compoundInterestTotal;\n        return { chartData, finalValue };\n    }, [principal, rate, years, monthlyContribution]);\n\n    const { chartData, finalValue } = calculationResults;\n\n    const totalInvested = principal + (monthlyContribution * years * 12);\n    const totalGains = finalValue - totalInvested;\n    const investedPercentage = totalInvested > 0 ? (totalInvested / finalValue) * 100 : 0;\n    const gainsPercentage = totalGains > 0 ? (totalGains / finalValue) * 100 : 0;\n\n\n    return (\n        <div className=\"animate-fade-in\">\n             <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl mb-8\">\n                <h3 className=\"text-4xl font-bold text-brand-teal text-center mb-3\">ריבית דריבית: מנוע הצמיחה של ההשקעות</h3>\n                <div className=\"text-3xl text-center space-y-2\">\n                    <p>כשאתם משקיעים, הכסף שלכם מרוויח תשואה (רווח).</p>\n                    <p>ריבית דריבית היא \"הקסם\" שבו גם <strong>התשואה שהרווחתם מתחילה להרוויח תשואה בעצמה</strong>.</p>\n                    <p>זהו אפקט כדור שלג: ככל שהזמן עובר, הצמיחה הופכת מהירה יותר ויותר.</p>\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-1 bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl\">\n                    <h3 className=\"text-4xl font-bold mb-6 text-brand-light-blue\">מחשבון חיסכון</h3>\n                    <div className=\"space-y-4 text-2xl\">\n                        <div><label>סכום התחלתי (ש\"ח)</label><input type=\"number\" value={principal} onChange={e => setPrincipal(Number(e.target.value))} className=\"w-full mt-1 bg-white p-2 rounded-lg border border-gray-300 text-3xl\" /></div>\n                        <div><label>הפקדה חודשית (ש\"ח)</label><input type=\"number\" value={monthlyContribution} onChange={e => setMonthlyContribution(Number(e.target.value))} className=\"w-full mt-1 bg-white p-2 rounded-lg border border-gray-300 text-3xl\" /></div>\n                        <div><label>תשואה שנתית ממוצעת (%)</label><input type=\"number\" value={rate} onChange={e => setRate(Number(e.target.value))} className=\"w-full mt-1 bg-white p-2 rounded-lg border border-gray-300 text-3xl\" /></div>\n                        <div><label>מספר שנים</label><input type=\"range\" min=\"1\" max=\"40\" value={years} onChange={e => setYears(Number(e.target.value))} className=\"w-full mt-1\" /><div className=\"text-center font-bold text-brand-light-blue text-3xl\">{years} שנים</div></div>\n                    </div>\n                </div>\n                <div className=\"lg:col-span-2 bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl flex flex-col justify-center\">\n                    <div className=\"text-center mb-4\"><p className=\"text-3xl text-brand-dark-blue/90\">לאחר {years} שנים, ההשקעה שלך תגיע ל-</p><p className=\"text-6xl font-bold text-brand-light-blue my-2\">{finalValue.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}</p></div>\n                    <div className=\"h-80 w-full\">\n                        <ResponsiveContainer><LineChart data={chartData}><CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" /><XAxis dataKey=\"year\" stroke=\"#4a5568\" /><YAxis stroke=\"#4a5568\" tickFormatter={(value) => `₪${value}`} /><Tooltip contentStyle={{ backgroundColor: 'rgba(255, 255, 255, 0.8)', border: '1px solid #e2e8f0' }} /><Legend /><Line type=\"monotone\" dataKey=\"שווי החיסכון\" stroke=\"#00b1a6\" strokeWidth={3} /></LineChart></ResponsiveContainer>\n                    </div>\n                     <div className=\"mt-6\">\n                        <h4 className=\"font-bold text-2xl text-center mb-2\">פירוט הסכום הסופי:</h4>\n                        <div className=\"w-full bg-gray-200 rounded-full h-8 flex overflow-hidden border-2 border-gray-300\">\n                            <div style={{ width: `${investedPercentage}%` }} className=\"bg-blue-400 transition-all duration-500\"></div>\n                            <div style={{ width: `${gainsPercentage}%` }} className=\"bg-green-400 transition-all duration-500\"></div>\n                        </div>\n                        <div className=\"flex justify-between mt-2 text-xl px-1\">\n                            <div className=\"text-center\">\n                                <div className=\"flex items-center gap-2\"><div className=\"w-3 h-3 bg-blue-400 rounded-full\"></div><span>סך הפקדות</span></div>\n                                <p className=\"font-bold\">{totalInvested.toLocaleString('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 })}</p>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"flex items-center gap-2\"><div className=\"w-3 h-3 bg-green-400 rounded-full\"></div><span>סך רווחים (ריבית)</span></div>\n                                <p className=\"font-bold\">{totalGains.toLocaleString('he-IL', { style: 'currency', currency: 'ILS', minimumFractionDigits: 0 })}</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n// --- Step 4: Investment Simulator ---\nconst InvestmentSimulator: React.FC = () => {\n    const VIRTUAL_MONEY = 10000;\n    const [investmentAmount, setInvestmentAmount] = useState(5000);\n    const [selectedStock, setSelectedStock] = useState<keyof StockData>('AAPL');\n    const [startDate, setStartDate] = useState('2022-01-03');\n    const [endDate, setEndDate] = useState('2023-12-29');\n    const [results, setResults] = useState<{ invested: number, finalValue: number, profit: number, profitPercentage: number, chartData: any[] } | null>(null);\n\n    const stockHebrewNames: Record<keyof StockData, string> = {\n        AAPL: 'אפל', GOOGL: 'גוגל', MSFT: 'מייקרוסופט', AMZN: 'אמזון',\n        NFLX: 'נטפליקס', TSLA: 'טסלה', NKE: 'נייקי', SBUX: 'סטארבקס',\n        DIS: 'דיסני', MCD: \"מקדונלד'ס\",\n    };\n\n    const availableStocks = Object.keys(stockData);\n    const minDate = '2022-01-03';\n    const maxDate = '2024-06-28';\n\n    const handleSimulation = () => {\n        const stockHistory = stockData[selectedStock];\n        const startEntry = stockHistory.find(d => d.date >= startDate);\n        const endEntry = stockHistory.slice().reverse().find(d => d.date <= endDate);\n\n        if (!startEntry || !endEntry) {\n            alert(\"נתונים לא זמינים עבור התאריכים שנבחרו. אנא בחרו תאריכים אחרים.\");\n            return;\n        }\n\n        const sharesBought = investmentAmount / startEntry.price;\n        const finalValue = sharesBought * endEntry.price;\n        const profit = finalValue - investmentAmount;\n        const profitPercentage = (profit / investmentAmount) * 100;\n        const chartData = stockHistory.filter(d => d.date >= startDate && d.date <= endDate).map(d => ({ date: d.date, [selectedStock]: d.price }));\n        setResults({ invested: investmentAmount, finalValue, profit, profitPercentage, chartData });\n    };\n\n\n    return (\n        <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8 animate-fade-in text-2xl\">\n            <div className=\"lg:col-span-2 bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl\">\n                <h3 className=\"text-4xl font-bold mb-4 text-brand-light-blue\">בנו את ההשקעה שלכם</h3>\n                <p className=\"mb-4 text-3xl\">עומדים לרשותכם <strong>{VIRTUAL_MONEY.toLocaleString()} ₪</strong> וירטואליים.</p>\n                <div className=\"space-y-4\">\n                    <div><label className=\"font-bold\">1. בחרו חברה:</label><select value={selectedStock} onChange={e => setSelectedStock(e.target.value as keyof StockData)} className=\"w-full mt-1 bg-white p-2 rounded-lg border border-gray-300 text-3xl\">{availableStocks.map(s => <option key={s} value={s}>{`${s} - ${stockHebrewNames[s as keyof StockData]}`}</option>)}</select></div>\n                    <div><label className=\"font-bold\">2. כמה כסף להשקיע? ({investmentAmount.toLocaleString()} ₪)</label><input type=\"range\" min=\"100\" max={VIRTUAL_MONEY} step=\"100\" value={investmentAmount} onChange={e => setInvestmentAmount(Number(e.target.value))} className=\"w-full mt-1\" /></div>\n                    <div><label className=\"font-bold\">3. בחרו תקופה:</label>\n                        <div className=\"flex gap-2 mt-1\">\n                          <input type=\"date\" value={startDate} min={minDate} max={endDate} onChange={e => setStartDate(e.target.value)} className=\"w-full bg-white p-2 rounded-lg border border-gray-300 text-2xl\" title=\"תאריך התחלה\"/>\n                          <input type=\"date\" value={endDate} min={startDate} max={maxDate} onChange={e => setEndDate(e.target.value)} className=\"w-full bg-white p-2 rounded-lg border border-gray-300 text-2xl\" title=\"תאריך סיום\"/>\n                        </div>\n                    </div>\n                </div>\n                <button onClick={handleSimulation} className=\"w-full mt-6 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-4 rounded-lg transition-colors text-3xl\">בדוק תוצאות!</button>\n                 <div className=\"mt-4 p-3 bg-red-100/70 border-2 border-red-400 rounded-lg text-red-800 text-xl text-center\">\n                    <strong className=\"text-2xl\">⚠️לתשומת ליבך:</strong><br/>\n                    הנתונים בסימולטור זה הם <strong>הדגמה בלבד</strong> ואינם משקפים נתוני שוק אמיתיים. אין לראות בתוצאות אלו המלצה להשקעה.\n                </div>\n            </div>\n            <div className=\"lg:col-span-3 bg-white/40 backdrop-blur-md border border-white/30 p-6 rounded-2xl\">\n                {results ? (\n                    <div className=\"animate-fade-in\">\n                        <div className=\"text-center mb-4\">\n                            <h3 className=\"text-4xl font-bold text-brand-teal\">תוצאות עבור {stockHebrewNames[selectedStock]} ({selectedStock})</h3>\n                        </div>\n                         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-center mb-4 text-3xl\">\n                            <div className=\"bg-white/50 p-4 rounded-lg\">\n                                <p>השקעתם</p>\n                                <p className=\"font-bold text-4xl\">{results.invested.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}</p>\n                            </div>\n                             <div className=\"bg-white/50 p-4 rounded-lg\">\n                                <p>שווי נוכחי</p>\n                                <p className=\"font-bold text-4xl\">{results.finalValue.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}</p>\n                            </div>\n                            <div className={`md:col-span-2 p-4 rounded-lg ${results.profit >= 0 ? 'bg-green-200' : 'bg-red-200'}`}>\n                                <p>רווח/הפסד</p>\n                                <p className={`font-bold text-5xl ${results.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                    {results.profit.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}\n                                    <span className=\"text-3xl ml-2\">({results.profitPercentage.toFixed(2)}%)</span>\n                                </p>\n                            </div>\n                        </div>\n                        <div className=\"h-64 w-full\">\n                            <ResponsiveContainer><LineChart data={results.chartData}><CartesianGrid strokeDasharray=\"3 3\" /><XAxis dataKey=\"date\" /><YAxis domain={['dataMin', 'dataMax']} tickFormatter={(value) => `$${value.toFixed(0)}`} /><Tooltip formatter={(value: number) => `$${value.toFixed(2)}`} /><Legend /><Line type=\"monotone\" dataKey={selectedStock} stroke=\"#d52963\" strokeWidth={2} dot={false} /></LineChart></ResponsiveContainer>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"flex items-center justify-center h-full text-center text-gray-500 text-3xl\"><p>הגדירו את ההשקעה שלכם ולחצו \"בדוק תוצאות\" כדי לראות את הגרף.</p></div>\n                )}\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 5: Knowledge Quiz ---\nconst KnowledgeQuiz: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = useMemo(() => [\n        { q: \"מהו המרכיב החשוב ביותר בצמיחת חיסכון באמצעות ריבית דריבית לאורך זמן?\", options: [\"הסכום ההתחלתי\", \"זמן (מספר השנים)\", \"גובה הריבית\"], answer: \"זמן (מספר השנים)\", explanation: \"זמן הוא הגורם המשפיע ביותר כי הוא מאפשר לרווחים לצבור רווחים נוספים לאורך שנים רבות (אפקט כדור שלג).\" },\n        { q: \"איזה סוג השקעה נחשב בדרך כלל לבעל הסיכון הנמוך ביותר?\", options: [\"מניות\", \"נדל\\\"ן\", \"אגרות חוב ממשלתיות\"], answer: \"אגרות חוב ממשלתיות\", explanation: \"אגרות חוב ממשלתיות נחשבות בטוחות כי הן מגובות על ידי המדינה, והסיכוי שהיא לא תחזיר את חובה נמוך מאוד.\" },\n        { q: \"מה היתרון המרכזי של השקעה בקרן סל על פני קניית מניה בודדת?\", options: [\"רווחים גבוהים יותר\", \"פיזור סיכונים\", \"אין עמלות\"], answer: \"פיזור סיכונים\", explanation: \"קרן סל מחזיקה מניות רבות, כך שאם מניה אחת יורדת, אחרות יכולות לעלות ולאזן את ההפסד. זה מפחית את הסיכון.\" },\n        { q: \"מהי המטרה העיקרית של השקעה?\", options: [\"לשמור על הכסף בטוח\", \"להשתמש בכסף כדי לייצר עוד כסף\", \"לבזבז את הכסף מהר\"], answer: \"להשתמש בכסף כדי לייצר עוד כסף\", explanation: \"המטרה היא לא רק לשמור על הכסף, אלא לגרום לו לצמוח וליצור ערך נוסף לאורך זמן.\" },\n        { q: \"כאשר אומרים ש'השקעה היא נזילה', למה מתכוונים?\", options: [\"שאפשר להפוך אותה למזומן בקלות ובמהירות\", \"שהיא קשורה למים\", \"שהשווי שלה משתנה כל הזמן\"], answer: \"שאפשר להפוך אותה למזומן בקלות ובמהירות\", explanation: \"נזילות היא מדד לקלות שבה ניתן להמיר נכס למזומן בלי לאבד משמעותית מערכו.\" },\n        { q: \"מה קורה לכסף שיושב בחיסכון בבנק כאשר יש אינפלציה גבוהה?\", options: [\"הערך שלו עולה\", \"הוא מאבד מכוח הקנייה שלו\", \"הוא מוגן מפני אינפלציה\", \"הוא מוכפל\"], answer: \"הוא מאבד מכוח הקנייה שלו\", explanation: \"אינפלציה גורמת למחירים לעלות, ולכן כל שקל שבידכם יכול לקנות פחות ממה שיכל לקנות בעבר.\" },\n        { q: \"האמרה 'לא לשים את כל הביצים בסל אחד' מתייחסת לעיקרון של...\", options: [\"חיסכון אגרסיבי\", \"מינוף\", \"פיזור השקעות (דיברסיפיקציה)\", \"השקעה בנדל\\\"ן\"], answer: \"פיזור השקעות (דיברסיפיקציה)\", explanation: \"פיזור השקעות (דיברסיפיקציה) הוא עיקרון בסיסי להפחתת סיכון, על ידי השקעה בנכסים שונים ומגוונים.\" },\n        { q: \"מהו הסיכון העיקרי בהשקעה במניה של חברה בודדת?\", options: [\"החברה עלולה לפשוט רגל וערך המניה יצנח לאפס\", \"הריבית עלולה לעלות\", \"קשה למכור את המניה\", \"הממשלה עלולה להלאים את החברה\"], answer: \"החברה עלולה לפשוט רגל וערך המניה יצנח לאפס\", explanation: \"בניגוד לקרן סל, אם החברה הבודדת נכשלת, כל ההשקעה שלך במניה זו עלולה להימחק.\" },\n        { q: \"איזה מהבאים אינו נחשב בדרך כלל להשקעה פיננסית?\", options: [\"קניית דירה להשכרה\", \"קניית קרן סל\", \"קניית רכב חדש לשימוש אישי\", \"קניית אג\\\"ח ממשלתי\"], answer: \"קניית רכב חדש לשימוש אישי\", explanation: \"רכב לשימוש אישי הוא התחייבות שערכה יורד במהירות (פחת), ולא נכס שמייצר הכנסה או צומח בערכו.\" },\n        { q: \"מה בדרך כלל הקשר בין סיכון לתשואה (רווח פוטנציאלי) בהשקעות?\", options: [\"ככל שהסיכון גבוה יותר, התשואה הפוטנציאלית נמוכה יותר\", \"אין קשר בין סיכון לתשואה\", \"ככל שהסיכון גבוה יותר, התשואה הפוטנציאלית גבוהה יותר\", \"ככל שהסיכון נמוך יותר, התשואה הפוטנציאלית גבוהה יותר\"], answer: \"ככל שהסיכון גבוה יותר, התשואה הפוטנציאלית גבוהה יותר\", explanation: \"באופן כללי, כדי להשיג פוטנציאל רווח גבוה יותר, יש לקחת על עצמך רמת סיכון גבוהה יותר.\" },\n    ].sort(() => Math.random() - 0.5), []);\n    \n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [answerState, setAnswerState] = useState<'pending' | 'correct' | 'incorrect' | null>(null);\n    const [finished, setFinished] = useState(false);\n    const prizeLevels = [100, 200, 500, 1000, 2000, 5000, 10000, 25000, 50000, 100000].reverse();\n\n\n    useEffect(() => {\n        if (finished && (score / questions.length) >= 0.8) {\n            onComplete();\n        }\n    }, [finished, score, onComplete, questions.length]);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        setAnswerState('pending');\n\n        setTimeout(() => {\n             if(opt === questions[current].answer) {\n                setScore(s => s + 1);\n                setAnswerState('correct');\n            } else {\n                setAnswerState('incorrect');\n            }\n        }, 1500);\n    };\n    \n    const handleNext = () => {\n        if (current === questions.length - 1) {\n            setFinished(true);\n        } else {\n            setCurrent(c => c + 1);\n            setSelected('');\n            setAnswerState(null);\n        }\n    };\n    \n    if (finished) {\n        return (\n            <div className=\"text-center bg-white/80 p-6 rounded-lg shadow-2xl\">\n                <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                <h3 className=\"text-5xl font-bold mt-4\">סיימתם את הבוחן!</h3>\n                <p className=\"text-3xl my-4\">הציון שלכם: <span className=\"font-bold text-brand-light-blue text-4xl\">{score} / {questions.length}</span></p>\n                {(score/questions.length >= 0.8) ?\n                    <p className=\"text-green-600 font-bold text-2xl\">כל הכבוד! השלמתם את המודול!</p> :\n                    <p className=\"text-red-600 font-bold text-2xl\">עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.</p>\n                }\n            </div>\n        )\n    }\n\n    const q = questions[current];\n    return (\n        <div className=\"bg-brand-dark-blue p-4 sm:p-6 rounded-2xl text-white shadow-2xl\">\n            <p className=\"text-center mb-4 text-gray-300 text-2xl\">ברוכים הבאים לשעשועון \"ההרפתקה אל העושר\"! ענו נכון על השאלות כדי להתקדם בסולם הפרסים. בהצלחה!</p>\n             <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                <div className=\"lg:col-span-3\">\n                    <div className=\"bg-white/10 p-6 rounded-xl border-2 border-brand-light-blue min-h-[120px] flex items-center justify-center\">\n                        <p className=\"font-bold text-4xl text-center\">{q.q}</p>\n                    </div>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6\">\n                        {q.options.map((opt, i) => {\n                             const isSelected = selected === opt;\n                             const isCorrect = answerState && q.answer === opt;\n                             let stateClass = '';\n                             if (answerState === 'pending' && isSelected) stateClass = 'bg-yellow-500 animate-pulse';\n                             else if (answerState === 'correct' && isCorrect) stateClass = 'bg-green-500';\n                             else if (answerState === 'incorrect' && isSelected) stateClass = 'bg-red-500';\n                             else if (answerState === 'incorrect' && isCorrect) stateClass = 'bg-green-500/50 border-green-400';\n\n                            return (\n                                <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                                    className={`flex items-center p-4 rounded-lg border-2 border-brand-light-blue transition-all duration-300 min-h-[80px] text-2xl ${stateClass || 'bg-brand-dark-blue hover:bg-brand-light-blue/20'}`}>\n                                    <span className=\"font-bold text-yellow-400 ml-3\">{String.fromCharCode(65 + i)}:</span> {opt}\n                                </button>\n                            )\n                        })}\n                    </div>\n                     {answerState && answerState !== 'pending' && (\n                        <div className=\"mt-4 animate-fade-in\">\n                            <div className={`p-3 rounded-lg mb-4 text-2xl ${answerState === 'correct' ? 'bg-green-900/50' : 'bg-red-900/50'}`}>\n                                <p className=\"font-bold\">{answerState === 'correct' ? 'נכון מאוד!' : 'הסבר:'}</p>\n                                <p>{q.explanation}</p>\n                            </div>\n                            <button onClick={handleNext} className=\"w-full bg-brand-magenta font-bold p-3 rounded-lg text-2xl\">\n                                {current === questions.length - 1 ? 'סיים בוחן' : 'לשאלה הבאה'}\n                            </button>\n                        </div>\n                    )}\n                </div>\n                 <div className=\"lg:col-span-1 bg-white/10 p-4 rounded-xl flex flex-col-reverse\">\n                    {prizeLevels.map((level, index) => (\n                        <div key={level} className={`p-2 my-1 rounded text-center font-bold text-xl sm:text-2xl ${\n                            score > (prizeLevels.length - 1 - index) ? 'bg-green-500 text-white' : \n                            current === (prizeLevels.length - 1 - index) ? 'bg-yellow-400 text-black' : \n                            'bg-brand-dark-blue'\n                        }`}>\n                           <span className=\"text-gray-400 mr-2\">{prizeLevels.length - index}</span> {level.toLocaleString()} ₪\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Main Module Component ---\nconst InterestModule: React.FC<InterestModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <WhatIsInvestment />;\n            case 1: return <InvestmentTypes />;\n            case 2: return <CompoundInterestCalculator />;\n            case 3: return <InvestmentSimulator />;\n            case 4: return <KnowledgeQuiz onComplete={onComplete} />;\n            default: return <WhatIsInvestment />;\n        }\n    };\n\n    return (\n        <ModuleView title=\"ההרפתקה אל העושר\" onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300 text-2xl ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-lg text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n\n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default InterestModule;","import React, { useState, useMemo, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { TrophyIcon } from '../icons/Icons';\n\n// --- PROPS ---\ninterface OverdraftModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// --- ICONS ---\nconst InfoIcon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>;\nconst UserIcon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" /></svg>;\nconst CalculatorIcon = () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 7h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" /></svg>;\nconst CheckIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" /></svg>;\nconst CrossIcon: React.FC = () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" /></svg>;\n\nconst steps = [\n    { title: \"מהו מינוס?\", icon: InfoIcon },\n    { title: \"אתגר הדמות\", icon: UserIcon },\n    { title: \"כמה זה עולה?\", icon: CalculatorIcon },\n    { title: \"בוחן סיום\", icon: TrophyIcon },\n];\n\n// --- STEP 1: INTRODUCTION ---\nconst IntroductionStep: React.FC = () => (\n    <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n        <h3 className=\"text-5xl font-bold text-brand-magenta mb-4\">מהו מינוס (אוברדראפט)?</h3>\n        <p className=\"text-3xl text-brand-dark-blue/90 mb-6\">\n            דמיינו שהארנק שלכם הוא קופסה. כשאתם מקבלים כסף, אתם מכניסים אותו לקופסה. כשאתם קונים משהו, אתם מוציאים.\n            <br/>\n            <strong>מינוס הוא כמו חור בתחתית הקופסה.</strong> אתם יכולים להמשיך להוציא כסף גם כשהקופסה ריקה, אבל אתם בעצם לווים את הכסף מהבנק, והחור רק הולך וגדל...\n        </p>\n        <div className=\"flex justify-center items-center text-8xl gap-8 my-8\">\n            <span className=\"animate-bounce\">💰</span>\n            <span>➡️</span>\n            <span className=\"text-red-500\">🏦</span>\n            <span>➡️</span>\n            <span className=\"animate-pulse\">💸</span>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-2xl\">\n            <div className=\"bg-green-100/60 p-4 rounded-xl border-l-4 border-green-500 text-right\">\n                <h4 className=\"font-bold text-3xl text-green-800\">✅ יתרה חיובית (פלוס)</h4>\n                <p>יש לכם כסף בחשבון. זה הכסף שלכם ואתם יכולים להשתמש בו.</p>\n            </div>\n             <div className=\"bg-red-100/60 p-4 rounded-xl border-l-4 border-red-500 text-right\">\n                <h4 className=\"font-bold text-3xl text-red-800\">❌ יתרת חובה (מינוס)</h4>\n                <p>אין לכם כסף בחשבון, והבנק \"מלווה\" לכם כסף. על ההלוואה הזו תשלמו <strong>ריבית גבוהה</strong>.</p>\n            </div>\n        </div>\n    </div>\n);\n\n// --- STEP 2: CHARACTER CHALLENGE ---\ninterface Expense {\n    name: string;\n    cost: number;\n    icon: string;\n    category: 'vital' | 'important' | 'luxury';\n}\n\nconst CharacterChallengeStep: React.FC = () => {\n    // FIX: Add missing 'category' property to each expense object\n    const initialExpenses: Expense[] = [\n        { name: 'שכר דירה', cost: 2500, icon: '🏠', category: 'vital' },\n        { name: 'חשבונות', cost: 400, icon: '💡', category: 'vital' },\n        // Supermarket items\n        { name: 'מוצרי יסוד', cost: 500, icon: '🍞', category: 'vital' },\n        { name: 'ירקות ופירות', cost: 250, icon: '🥦', category: 'vital' },\n        { name: 'מוצרי ניקיון', cost: 150, icon: '🧹', category: 'important' },\n        { name: 'חטיפים ושתיה', cost: 200, icon: '🍫', category: 'luxury' },\n        { name: 'מעדנים ופינוקים', cost: 100, icon: '🧀', category: 'luxury' },\n        \n        { name: 'תחבורה ציבורית', cost: 250, icon: '🚌', category: 'important' },\n        { name: 'אינטרנט וסלולר', cost: 150, icon: '📱', category: 'important' },\n        { name: 'חדר כושר', cost: 200, icon: '🏋️', category: 'luxury' },\n        { name: 'מנויי סטרימינג', cost: 100, icon: '📺', category: 'luxury' },\n\n        // Food delivery items\n        { name: 'הזמנת פיצה', cost: 150, icon: '🍕', category: 'luxury' },\n        { name: 'וולט לצהריים', cost: 200, icon: '🍜', category: 'luxury' },\n        { name: 'סושי בסופ\"ש', cost: 100, icon: '🍣', category: 'luxury' },\n\n        { name: 'שופינג אונליין', cost: 350, icon: '🛍️', category: 'luxury' },\n        { name: 'קפה ומאפה בחוץ', cost: 180, icon: '☕', category: 'luxury' },\n    ];\n    \n    const INCOME = 5000;\n    const totalExpenses = initialExpenses.reduce((sum, e) => sum + e.cost, 0);\n    const initialBalance = INCOME - totalExpenses;\n\n    const [removedExpenses, setRemovedExpenses] = useState<Expense[]>([]);\n    \n    const handleToggleExpense = (expense: Expense) => {\n        setRemovedExpenses(prev => \n            prev.some(e => e.name === expense.name)\n            ? prev.filter(e => e.name !== expense.name)\n            : [...prev, expense]\n        );\n    };\n\n    const currentExpenses = initialExpenses.filter(e => !removedExpenses.some(re => re.name === e.name));\n    const currentTotal = currentExpenses.reduce((sum, e) => sum + e.cost, 0);\n    const currentBalance = INCOME - currentTotal;\n    \n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n             <h3 className=\"text-5xl font-bold text-brand-magenta mb-4 text-center\">אתגר: להוציא את דני מהמינוס!</h3>\n             <div className=\"flex flex-col md:flex-row items-center justify-center gap-8 mb-6 bg-white/50 p-6 rounded-2xl shadow-inner\">\n                <div className=\"text-center\">\n                    <img src=\"https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?auto=compress&cs=tinysrgb&w=150&h=150&dpr=1\" alt=\"דני\" className=\"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg mx-auto\"/>\n                    <h4 className=\"font-bold text-4xl mt-2\">דני, בן 24</h4>\n                </div>\n                <div className=\"text-3xl\">\n                     <p className=\"text-brand-dark-blue/90\">דני מרוויח <strong>{INCOME.toLocaleString()} ₪</strong> בחודש, אבל מוציא <strong>{totalExpenses.toLocaleString()} ₪</strong>. הוא במינוס של <strong>{initialBalance.toLocaleString()} ₪</strong> כל חודש!</p>\n                     <p className=\"font-bold mt-2\">המשימה שלכם: עזרו לדני להגיע למאזן חיובי על ידי ויתור על הוצאות.</p>\n                </div>\n             </div>\n             <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                 <div>\n                    <h4 className=\"font-bold text-4xl mb-2 text-center\">ההוצאות של דני</h4>\n                     <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-4\">\n                        {initialExpenses.map(exp => {\n                            const isRemoved = removedExpenses.some(re => re.name === exp.name);\n                            return (\n                                <button key={exp.name} onClick={() => handleToggleExpense(exp)} \n                                    className={`p-4 rounded-2xl text-center transition-all duration-300 transform shadow-lg relative ${isRemoved ? 'bg-gray-300 opacity-50 scale-95' : 'bg-white/80 hover:scale-105'}`}>\n                                    <span className=\"text-6xl\">{exp.icon}</span>\n                                    <p className=\"font-bold text-2xl\">{exp.name}</p>\n                                    <p className=\"font-semibold text-xl\">{exp.cost.toLocaleString()} ₪</p>\n                                    {isRemoved && <div className=\"absolute inset-0 flex items-center justify-center text-white text-7xl bg-black/50 rounded-2xl\"><CrossIcon/></div>}\n                                </button>\n                            );\n                        })}\n                     </div>\n                 </div>\n                 <div className=\"bg-white/60 p-6 rounded-2xl flex flex-col justify-center items-center shadow-lg\">\n                    <h4 className=\"font-bold text-4xl mb-2\">התקציב החדש</h4>\n                     <div className=\"space-y-2 text-4xl w-full\">\n                        <div className=\"flex justify-between\"><span>הכנסה:</span><span className=\"font-bold text-green-600\">{INCOME.toLocaleString()} ₪</span></div>\n                        <div className=\"flex justify-between\"><span>הוצאות:</span><span className=\"font-bold text-red-500\">{currentTotal.toLocaleString()} ₪</span></div>\n                    </div>\n                     <div className={`mt-4 p-4 rounded-2xl w-full text-center ${currentBalance >= 0 ? 'bg-green-200/80' : 'bg-red-200/80'}`}>\n                        <p className=\"font-bold text-4xl\">מאזן חודשי:</p>\n                        <p className={`text-8xl font-black ${currentBalance >= 0 ? 'text-green-700' : 'text-red-700'}`}>{currentBalance.toLocaleString()} ₪</p>\n                    </div>\n                 </div>\n             </div>\n        </div>\n    );\n};\n\n\n// --- STEP 3: SIMULATOR ---\nconst OverdraftSimulator: React.FC = () => {\n    const [balance, setBalance] = useState(-2000);\n    const [interest, setInterest] = useState(12);\n    const [months, setMonths] = useState(24);\n    const [monthlyChange, setMonthlyChange] = useState(-100); // Monthly deficit\n\n    const { data, totalInterestPaid } = useMemo(() => {\n        const results = [];\n        let currentBalance = balance;\n        let totalInterest = 0;\n\n        for (let i = 0; i <= months; i++) {\n            results.push({ \n                month: `חודש ${i}`, \n                'גובה החוב': currentBalance < 0 ? -currentBalance : 0, \n                'יתרה חיובית': currentBalance >= 0 ? currentBalance : 0 \n            });\n            \n            if (currentBalance < 0) {\n                const interestForMonth = -currentBalance * (interest / 100) / 12;\n                totalInterest += interestForMonth;\n                currentBalance -= interestForMonth; // Interest increases the debt (makes balance more negative)\n            }\n            currentBalance += monthlyChange;\n        }\n        return { data: results, totalInterestPaid: totalInterest };\n    }, [balance, interest, months, monthlyChange]);\n\n    const finalBalance = data[data.length - 1]['יתרה חיובית'] - data[data.length - 1]['גובה החוב'];\n    const goalReachedMonth = data.findIndex(d => d['יתרה חיובית'] > 0);\n    const years = (months / 12).toFixed(1);\n\n    return (\n        <div className=\"animate-fade-in text-2xl\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-1 bg-white/40 p-6 rounded-2xl\">\n                    <h3 className=\"text-4xl font-bold mb-4\">סימולטור המינוס</h3>\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label>סכום המינוס ההתחלתי (₪)</label>\n                            <input type=\"number\" value={balance} onChange={e => setBalance(Math.min(0, Number(e.target.value)))} className=\"w-full mt-1 p-2 rounded text-3xl\" />\n                        </div>\n                        <div>\n                            <label>ריבית שנתית על המינוס (%)</label>\n                            <input type=\"number\" value={interest} onChange={e => setInterest(Number(e.target.value))} className=\"w-full mt-1 p-2 rounded text-3xl\" />\n                        </div>\n                         <div>\n                            <label>גירעון/עודף חודשי (₪)</label>\n                            <input type=\"range\" min=\"-500\" max=\"500\" value={monthlyChange} onChange={e => setMonthlyChange(Number(e.target.value))} className=\"w-full mt-1\" />\n                            <div className={`text-center font-bold text-3xl ${monthlyChange < 0 ? 'text-red-500' : 'text-green-600'}`}>\n                                {monthlyChange > 0 ? `+${monthlyChange}` : monthlyChange} ₪\n                            </div>\n                        </div>\n                        <div>\n                            <label>מספר חודשים</label>\n                            <input type=\"range\" min=\"1\" max=\"600\" value={months} onChange={e => setMonths(Number(e.target.value))} className=\"w-full mt-1\" />\n                            <div className=\"text-center font-bold text-3xl\">{months} חודשים</div>\n                            <div className=\"text-center font-semibold text-xl text-gray-600\">({years} שנים)</div>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"lg:col-span-2 bg-white/40 p-6 rounded-2xl\">\n                    <div className=\"text-center\">\n                        <p className=\"text-3xl\">לאחר {months} חודשים, היתרה שלך תהיה:</p>\n                        <p className={`text-6xl font-bold my-2 ${finalBalance < 0 ? 'text-brand-magenta' : 'text-green-600'}`}>{finalBalance.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}</p>\n                        {goalReachedMonth !== -1 && finalBalance > 0 && <p className=\"text-2xl\">הצלחת לצאת מהמינוס בחודש ה-<strong>{goalReachedMonth}</strong>!</p>}\n                    </div>\n                    <div className=\"h-64 w-full mt-4\">\n                        <ResponsiveContainer>\n                            <LineChart data={data}>\n                                <CartesianGrid strokeDasharray=\"3 3\" />\n                                <XAxis dataKey=\"month\" />\n                                <YAxis />\n                                <Tooltip formatter={(value: number) => `${value.toLocaleString()} ₪`} />\n                                <Legend />\n                                <Line type=\"monotone\" dataKey=\"גובה החוב\" stroke=\"#d52963\" strokeWidth={3} />\n                                <Line type=\"monotone\" dataKey=\"יתרה חיובית\" stroke=\"#10b981\" strokeWidth={3} />\n                            </LineChart>\n                        </ResponsiveContainer>\n                    </div>\n                    <div className=\"mt-4 p-4 bg-red-100/70 rounded-lg text-center\">\n                        <p className=\"font-bold text-2xl text-red-800\">סה\"כ ריבית ששולמה לבנק בתקופה זו:</p>\n                        <p className=\"font-bold text-4xl text-red-600\">{totalInterestPaid.toLocaleString('he-IL', { style: 'currency', currency: 'ILS' })}</p>\n                    </div>\n                     <div className=\"mt-4 p-2 bg-yellow-100/70 rounded-md text-xl text-yellow-800\">\n                        <strong>איך זה מחושב?</strong> בכל חודש, הריבית מתווספת לחוב הקיים, ולאחר מכן הגירעון/עודף החודשי שלכם מתווסף ליתרה.\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- STEP 4: QUIZ ---\nconst QuizStep: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = [\n        { q: \"מהי ההגדרה הנכונה ל'מינוס' (אוברדראפט)?\", options: [\"כסף שהבנק נותן במתנה\", \"הלוואה מהבנק בריבית גבוהה\", \"חיסכון עם ריבית טובה\", \"הפרש בין הכנסות להוצאות\"], answer: \"הלוואה מהבנק בריבית גבוהה\" },\n        { q: \"מהי הדרך הטובה ביותר להימנע ממינוס?\", options: [\"לא להשתמש בכרטיס אשראי\", \"לעקוב אחר ההוצאות ולוודא שהן לא גבוהות מההכנסות\", \"לבקש העלאה מהבוס\", \"לקחת הלוואה\"], answer: \"לעקוב אחר ההוצאות ולוודא שהן לא גבוהות מההכנסות\" },\n        { q: \"מה קורה לחוב במינוס אם לא עושים כלום?\", options: [\"הוא נמחק אחרי שנה\", \"הוא גדל בגלל הריבית\", \"הוא נשאר אותו הדבר\", \"הבנק מוותר עליו\"], answer: \"הוא גדל בגלל הריבית\" },\n        { q: \"מה יכולה להיות אחת ההשלכות של הישארות במינוס לאורך זמן?\", options: [\"הבנק ייתן לך מתנות\", \"החוב שלך יקטן מעצמו\", \"הבנק עלול להגביל את מסגרת האשראי שלך\", \"תקבל ריבית חיובית על החוב\"], answer: \"הבנק עלול להגביל את מסגרת האשראי שלך\" },\n        { q: \"מהי 'ריבית על המינוס'?\", options: [\"כסף שהבנק משלם לך\", \"קנס על הוצאת כסף\", \"המחיר שנשלם על ההלוואה מהבנק בעקבות גרעון שלילי\", \"סכום קבוע של 100 שקלים\"], answer: \"המחיר שנשלם על ההלוואה מהבנק בעקבות גרעון שלילי\" },\n    ];\n    \n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [finished, setFinished] = useState(false);\n\n     useEffect(() => {\n        if (finished) {\n            if (score / questions.length >= 0.8) { \n                onComplete();\n            }\n        }\n    }, [finished, score, onComplete, questions.length]);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].answer) {\n            setScore(s => s + 1);\n        }\n    };\n    \n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setFinished(true);\n        }\n    };\n    \n    if (finished) {\n        const isCompleted = score >= 4;\n        return (\n            <div className=\"text-center bg-white/60 p-6 rounded-lg\">\n                <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                <h3 className=\"text-5xl font-bold mt-2\">סיימת את הבוחן!</h3>\n                <p className=\"text-4xl my-2\">הציון שלך: <span className=\"font-bold\">{score} / {questions.length}</span></p>\n                {isCompleted ? <p className=\"text-green-600 font-bold text-3xl\">מעולה! השלמת את המודול!</p> : <p className=\"text-red-600 font-bold text-3xl\">נסה שוב כדי להגיע ל-80%.</p>}\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white/50 p-6 rounded-lg\">\n             <div className=\"mb-4\">\n                <div className=\"bg-gray-300 rounded-full h-2.5\">\n                    <div className=\"bg-brand-teal h-2.5 rounded-full\" style={{ width: `${((current + 1) / questions.length) * 100}%` }}></div>\n                </div>\n            </div>\n            <div className=\"bg-brand-light-blue/20 p-6 rounded-xl mb-6 shadow-inner\">\n                <h3 className=\"font-bold text-4xl text-center text-brand-dark-blue\">{questions[current].q}</h3>\n            </div>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                {questions[current].options.map((opt, index) => {\n                     const isCorrect = opt === questions[current].answer;\n                     const isSelected = opt === selected;\n                     let buttonClass = 'bg-white/80 hover:bg-white';\n                     if(selected) {\n                         if(isCorrect) buttonClass = 'bg-green-500 text-white';\n                         else if (isSelected) buttonClass = 'bg-red-500 text-white';\n                         else buttonClass = 'bg-white/40 opacity-60';\n                     }\n                    return (\n                         <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                            className={`flex items-center text-right p-4 rounded-lg transition-colors text-2xl h-full ${buttonClass}`}>\n                            <span className=\"font-bold text-brand-dark-blue/50 ml-3\">{index + 1}.</span>\n                            <span className=\"flex-1\">{opt}</span>\n                            {selected && isCorrect && <CheckIcon />}\n                            {selected && isSelected && !isCorrect && <CrossIcon />}\n                        </button>\n                    );\n                })}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-4 w-full bg-brand-light-blue text-white p-3 rounded-lg text-2xl\">הבא</button>}\n        </div>\n    );\n};\n\n\n// --- MAIN COMPONENT ---\nconst OverdraftModule: React.FC<OverdraftModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <CharacterChallengeStep />;\n            case 2: return <OverdraftSimulator />;\n            case 3: return <QuizStep onComplete={onComplete} />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title=\"הסכנה שבמינוס\" onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-start mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                 <div className={`w-16 h-16 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    <step.icon />\n                                </div>\n                                <p className={`mt-2 text-xl text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step.title}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mt-8 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n\n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8 text-2xl\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default OverdraftModule;","import { GoogleGenAI, Type } from \"@google/genai\";\nimport type { BudgetItem } from '../types';\n\nconst apiKey = process.env.API_KEY || process.env.GEMINI_API_KEY || '';\nconst ai = apiKey ? new GoogleGenAI({ apiKey }) : null;\n\nfunction ensureAI(): GoogleGenAI {\n  if (!ai) {\n    throw new Error('Gemini API key is not configured. Set GEMINI_API_KEY in your .env file.');\n  }\n  return ai;\n}\n\nexport const getBudgetFeedback = async (income: number, expenses: BudgetItem[]): Promise<string> => {\n  const expenseDetails = expenses.map(e => `- ${e.category}: ${e.amount} ש\"ח`).join('\\n');\n  const totalExpenses = expenses.reduce((sum, item) => sum + item.amount, 0);\n\n  const prompt = `\n    אתה יועץ פיננסי חכם וידידותי המדבר עם נער/ה בן/בת 16 בישראל.\n    הם הרכיבו תקציב חודשי. תן להם משוב קצר, מעשי וחיובי על התקציב שלהם.\n    התמקד בנקודה אחת או שתיים לשיפור, ושמור על טון מעודד.\n    התייחס לפער בין ההכנסות להוצאות.\n\n    פרטי התקציב:\n    הכנסה חודשית: ${income} ש\"ח\n    הוצאות חודשיות:\n    ${expenseDetails}\n    ---\n    סה\"כ הוצאות: ${totalExpenses} ש\"ח\n    ---\n    \n    התחל את התשובה שלך ב\"היי, כל הכבוד על בניית התקציב!\".\n    כתוב את התשובה בעברית.\n  `;\n\n  try {\n    const response = await ensureAI().models.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: prompt,\n    });\n    return response.text;\n  } catch (error) {\n    console.error(\"Error getting budget feedback:\", error);\n    return \"אופס, נתקלתי בבעיה. אנא נסה שוב מאוחר יותר.\";\n  }\n};\n\n\nexport const explainSalaryTerm = async (term: string): Promise<string> => {\n  const prompt = `\n    אתה מומחה למשכורות בישראל, ומסביר מושגים לנער/ה בן/בת 16 שמקבל/ת את תלוש השכר הראשון.\n    הסבר את המושג \"${term}\" בצורה פשוטה, ברורה ובגובה העיניים.\n    הסבר מהי מטרתו ולמה הוא מנוכה מהשכר.\n    שמור על תשובה קצרה וממוקדת (2-3 משפטים).\n    כתוב את התשובה בעברית.\n  `;\n  \n  try {\n    const response = await ensureAI().models.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: prompt,\n    });\n    return response.text;\n  } catch (error) {\n    console.error(\"Error explaining salary term:\", error);\n    return \"אופס, נתקלתי בבעיה. אנא נסה שוב מאוחר יותר.\";\n  }\n};\n\nexport const askAboutOverdraft = async (question: string): Promise<string> => {\n  const prompt = `\n    אתה יועץ פיננסי שמסביר לנער/ה בן/בת 16 על מינוס (אוברדראפט) בבנק.\n    ענה על השאלה הבאה בצורה פשוטה, ברורה ובגובה העיניים.\n    השאלה: \"${question}\"\n    שמור על תשובה קצרה וממוקדת.\n    כתוב את התשובה בעברית.\n  `;\n  \n  try {\n    const response = await ensureAI().models.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: prompt,\n    });\n    return response.text;\n  } catch (error) {\n    console.error(\"Error asking about overdraft:\", error);\n    return \"אופס, נתקלתי בבעיה. אנא נסה שוב מאוחר יותר.\";\n  }\n};\n\nexport const getCostOfLivingInfo = async (item: string): Promise<string> => {\n  const prompt = `\n    אתה מומחה ליוקר המחיה בישראל עבור צעירים.\n    נער/ה בן/בת 16 שואל/ת: \"מה העלות החודשית הממוצעת עבור ${item} בישראל?\"\n    ספק הערכה ריאלית ומנומקת. אם מדובר בטווח, ציין זאת.\n    לדוגמה: \"עלות ממוצעת של קורס פסיכומטרי היא בין 5,000 ל-10,000 ש\"ח\". \"מנת פלאפל עולה בסביבות 15-25 ש\"ח\".\n    התשובה צריכה להיות קצרה, ישירה ועוזרת.\n    כתוב את התשובה בעברית.\n  `;\n  \n  try {\n    const response = await ensureAI().models.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: prompt,\n    });\n    return response.text;\n  } catch (error) {\n    console.error(\"Error getting cost of living info:\", error);\n    return \"אופס, נתקלתי בבעיה. אנא נסה שוב מאוחר יותר.\";\n  }\n};\n\nexport const getClientSimulationResponse = async (businessIdea: string, chatHistory: {sender: 'client' | 'user', text: string}[]): Promise<{responseText: string; feedbackText: string}> => {\n  const historyString = chatHistory.map(msg => `${msg.sender === 'client' ? 'Alex' : 'You'}: ${msg.text}`).join('\\n');\n\n  const prompt = `\n    You are a potential client named Alex, simulating a conversation for a teenager learning about business.\n    The teenager is offering a service: \"${businessIdea}\".\n    Your personality: Friendly, curious, but a bit cautious about spending money. You want to understand the service before committing.\n    The last message in the history is from the user. Respond to it naturally as Alex.\n    Also, provide short, constructive feedback for the teenager on their last message.\n    \n    Chat History:\n    ${historyString}\n  `;\n\n  try {\n    const response = await ensureAI().models.generateContent({\n        model: 'gemini-2.5-flash',\n        contents: prompt,\n        config: {\n            responseMimeType: \"application/json\",\n            responseSchema: {\n                type: Type.OBJECT,\n                properties: {\n                    responseText: {\n                        type: Type.STRING,\n                        description: \"Your natural response as Alex the client, in Hebrew.\"\n                    },\n                    feedbackText: {\n                        type: Type.STRING,\n                        description: \"Short, constructive feedback for the teenager on their last message (e.g., 'Great job being clear and polite!' or 'Good start, but maybe ask what I need before giving a price.'), in Hebrew.\"\n                    }\n                },\n                required: ['responseText', 'feedbackText']\n            }\n        }\n    });\n    \n    const jsonResponse = JSON.parse(response.text);\n    return jsonResponse;\n\n  } catch (error) {\n    console.error(\"Error in client simulation:\", error);\n    return {\n        responseText: \"אני לא בטוח שהבנתי, תוכל/י להסביר שוב?\",\n        feedbackText: \"שגיאה: התגובה מהשרת לא הייתה תקינה.\"\n    };\n  }\n};","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { getCostOfLivingInfo } from '../../services/geminiService';\n\ninterface ExpensesModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// New Rich Icons\nconst RichPiggyBankIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"a\" x1=\"32\" x2=\"32\" y1=\"18\" y2=\"50\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#fbbf24\" offset=\"0\"/><stop stopColor=\"#f59e0b\" offset=\"1\"/></linearGradient></defs><rect width=\"48\" height=\"32\" x=\"8\" y=\"18\" fill=\"url(#a)\" rx=\"16\" ry=\"16\"/><circle cx=\"48\" cy=\"26\" r=\"5\" fill=\"#fcd34d\"/><rect width=\"4\" height=\"10\" x=\"18\" y=\"46\" fill=\"#d97706\" rx=\"2\" ry=\"2\"/><rect width=\"4\" height=\"10\" x=\"42\" y=\"46\" fill=\"#d97706\" rx=\"2\" ry=\"2\"/><path d=\"M12 28a8 8 0 0 1 8-8\" fill=\"none\" stroke=\"#d97706\" strokeWidth=\"4\"/><path fill=\"#fff\" d=\"M28 22h8v2h-8z\"/><path fill=\"#fff\" d=\"M30 20h4v6h-4z\"/></svg>\n);\nconst RichShoppingBagIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"b\" x1=\"32\" x2=\"32\" y1=\"16\" y2=\"58\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#67e8f9\" offset=\"0\"/><stop stopColor=\"#01b2cf\" offset=\"1\"/></linearGradient></defs><path fill=\"url(#b)\" d=\"M52 16H12a4 4 0 0 0-4 4v34a4 4 0 0 0 4 4h40a4 4 0 0 0 4-4V20a4 4 0 0 0-4-4z\"/><path d=\"M24 16a8 8 0 0 1 8-8h0a8 8 0 0 1 8 8v8H24z\" fill=\"none\" stroke=\"#0891b2\" strokeWidth=\"6\"/><circle cx=\"20\" cy=\"30\" r=\"5\" fill=\"#f472b6\"/><circle cx=\"32\" cy=\"40\" r=\"7\" fill=\"#a3e635\"/><rect width=\"12\" height=\"12\" x=\"38\" y=\"26\" fill=\"#fbbf24\" rx=\"3\" ry=\"3\" transform=\"rotate(15 44 32)\"/></svg>\n);\nconst FoundationIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M54 58H10a4 4 0 0 1-4-4V24l24-18 24 18v30a4 4 0 0 1-4 4z\" fill=\"#f472b6\"/><path d=\"M50 54H14a2 2 0 0 1-2-2V26l20-15 20 15v26a2 2 0 0 1-2 2z\" fill=\"#f8fafc\"/><path d=\"M32 23a9 9 0 0 1 9 9c0 4-4 8-9 12-5-4-9-8-9-12a9 9 0 0 1 9-9z\" fill=\"#ef4444\"/></svg>\n);\nconst ChecklistIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"48\" height=\"52\" x=\"8\" y=\"6\" fill=\"#67e8f9\" rx=\"6\"/><rect width=\"40\" height=\"44\" x=\"12\" y=\"10\" fill=\"#f8fafc\" rx=\"2\"/><path d=\"M22 24h20v4H22zm0 12h20v4H22z\" fill=\"#0e7490\"/><path d=\"M18 22a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm-2 5v-2h4v2h-4z\" fill=\"#34d399\"/><path d=\"M18 34a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm-2 5v-2h4v2h-4z\" fill=\"#34d399\"/></svg>\n);\nconst GiftIcon: React.FC<{ className?: string }> = ({ className }) => (\n    <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"48\" height=\"36\" x=\"8\" y=\"22\" fill=\"#34d399\" rx=\"4\"/><rect width=\"12\" height=\"40\" x=\"26\" y=\"18\" fill=\"#a3e635\"/><path d=\"M18 18c0-8 4-8 14-8s14 0 14 8\" fill=\"none\" stroke=\"#a3e635\" strokeWidth=\"8\" strokeLinecap=\"round\"/><rect width=\"52\" height=\"8\" x=\"6\" y=\"28\" fill=\"#a3e635\" rx=\"4\"/></svg>\n);\n\n\ntype Category = 'fixed' | 'variable';\ninterface ExpenseItem {\n  id: number;\n  name: string;\n  category: Category;\n}\n\nconst initialItems: ExpenseItem[] = [\n    { id: 1, name: 'מנוי לנטפליקס', category: 'fixed' },\n    { id: 2, name: 'יציאה לסרט', category: 'variable' },\n    { id: 3, name: 'חשבון סלולר', category: 'fixed' },\n    { id: 4, name: 'קניית פיצה', category: 'variable' },\n    { id: 5, name: 'שיעור נהיגה', category: 'fixed' },\n    { id: 6, name: 'בגדים', category: 'variable' },\n    { id: 7, name: 'שכר דירה', category: 'fixed' },\n    { id: 8, name: 'מנוי לחדר כושר', category: 'fixed' },\n    { id: 9, name: 'מתנות יום הולדת', category: 'variable' },\n    { id: 10, name: 'תחבורה ציבורית', category: 'variable' },\n    { id: 11, name: 'ארנונה', category: 'fixed' },\n    { id: 12, name: 'דלק לרכב', category: 'variable' },\n    { id: 13, name: 'ביטוח רכב', category: 'fixed' },\n    { id: 14, name: 'קניות בסופר', category: 'variable' },\n    { id: 15, name: 'חוג העשרה', category: 'fixed' },\n    { id: 16, name: 'תרופות', category: 'variable' },\n    { id: 17, name: 'ועד בית', category: 'fixed' },\n    { id: 18, name: 'חופשה', category: 'variable' },\n    { id: 19, name: 'אינטרנט וטלוויזיה', category: 'fixed' },\n    { id: 20, name: 'תיקונים בבית', category: 'variable' },\n];\n\ntype HatzarCategory = 'חייב' | 'צריך' | 'רוצה';\ninterface HatzarExpenseItem {\n  id: number;\n  name: string;\n  hatzarCategory: HatzarCategory[];\n}\n\nconst hatzarInitialItems: HatzarExpenseItem[] = [\n    { id: 1, name: 'מנוי לנטפליקס', hatzarCategory: ['רוצה'] },\n    { id: 2, name: 'יציאה לסרט', hatzarCategory: ['רוצה'] },\n    { id: 3, name: 'חשבון סלולר', hatzarCategory: ['צריך'] },\n    { id: 4, name: 'קניית פיצה', hatzarCategory: ['רוצה'] },\n    { id: 5, name: 'שיעור נהיגה', hatzarCategory: ['צריך'] },\n    { id: 6, name: 'בגדים', hatzarCategory: ['חייב', 'צריך', 'רוצה'] },\n    { id: 7, name: 'שכר דירה', hatzarCategory: ['חייב'] },\n    { id: 8, name: 'מנוי לחדר כושר', hatzarCategory: ['צריך', 'רוצה'] },\n    { id: 9, name: 'מתנת יום הולדת', hatzarCategory: ['חייב', 'צריך', 'רוצה'] },\n    { id: 10, name: 'תחבורה ציבורית', hatzarCategory: ['חייב', 'צריך'] },\n    { id: 11, name: 'ארנונה', hatzarCategory: ['חייב'] },\n    { id: 12, name: 'דלק לרכב', hatzarCategory: ['חייב', 'צריך'] },\n    { id: 13, name: 'ביטוח רכב', hatzarCategory: ['חייב'] },\n    { id: 14, name: 'קניות בסופר', hatzarCategory: ['חייב'] },\n    { id: 15, name: 'חוג העשרה', hatzarCategory: ['רוצה'] },\n    { id: 16, name: 'תרופות', hatzarCategory: ['חייב'] },\n    { id: 17, name: 'ועד בית', hatzarCategory: ['חייב'] },\n    { id: 18, name: 'חופשה', hatzarCategory: ['רוצה', 'צריך'] },\n    { id: 19, name: 'אינטרנט וטלוויזיה', hatzarCategory: ['חייב', 'צריך'] },\n    { id: 20, name: 'תיקונים בבית', hatzarCategory: ['חייב'] },\n];\n\nconst steps = [\n  \"מהן סוגי ההוצאות?\",\n  \"אתגר מיון: חלק 1\",\n  \"מודל חצ\\\"ר\",\n  \"אתגר מיון: חלק 2\",\n  \"סורק המחירים\"\n];\n\nconst ExpensesModule: React.FC<ExpensesModuleProps> = ({ onBack, title, onComplete }) => {\n  const [currentStep, setCurrentStep] = useState(0);\n\n  // State for game 1 (fixed/variable)\n  const [items, setItems] = useState([...initialItems].sort(() => Math.random() - 0.5));\n  const [droppedItems, setDroppedItems] = useState<{[key: number]: { category: Category, isCorrect: boolean }}>({});\n  const [game1Score, setGame1Score] = useState<number | null>(null);\n  \n  // State for game 2 (Hatzar)\n  const [hatzarItems, setHatzarItems] = useState([...hatzarInitialItems].sort(() => Math.random() - 0.5));\n  const [hatzarDroppedItems, setHatzarDroppedItems] = useState<{[key: number]: { category: HatzarCategory, isCorrect: boolean }}>({});\n  const [game2Score, setGame2Score] = useState<number | null>(null);\n\n  // State for AI scanner\n  const [searchTerm, setSearchTerm] = useState('');\n  const [aiAnswer, setAiAnswer] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  \n  const game1Completed = game1Score !== null && game1Score >= 16; // 80% of 20\n  const game2Completed = game2Score !== null && game2Score >= 16;\n\n  useEffect(() => {\n    if (Object.keys(droppedItems).length === initialItems.length) {\n        const score = (Object.values(droppedItems) as {isCorrect: boolean}[]).filter(f => f.isCorrect).length;\n        setGame1Score(score);\n    }\n  }, [droppedItems]);\n\n  useEffect(() => {\n    if (Object.keys(hatzarDroppedItems).length === hatzarInitialItems.length) {\n        const score = (Object.values(hatzarDroppedItems) as {isCorrect: boolean}[]).filter(f => f.isCorrect).length;\n        setGame2Score(score);\n        if (score >= 16) {\n            onComplete();\n        }\n    }\n  }, [hatzarDroppedItems, onComplete]);\n\n  const handleDragStart = (e: React.DragEvent<HTMLDivElement>, item: ExpenseItem | HatzarExpenseItem) => {\n    e.dataTransfer.setData('application/json', JSON.stringify(item));\n  };\n  \n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>, targetCategory: Category) => {\n    e.preventDefault();\n    const item: ExpenseItem = JSON.parse(e.dataTransfer.getData('application/json'));\n    if (droppedItems[item.id]) return;\n\n    const isCorrect = item.category === targetCategory;\n    setDroppedItems(prev => ({...prev, [item.id]: { category: targetCategory, isCorrect }}));\n  };\n  \n  const handleHatzarDrop = (e: React.DragEvent<HTMLDivElement>, targetCategory: HatzarCategory) => {\n    e.preventDefault();\n    const item: HatzarExpenseItem = JSON.parse(e.dataTransfer.getData('application/json'));\n    if (hatzarDroppedItems[item.id]) return;\n\n    const isCorrect = item.hatzarCategory.includes(targetCategory);\n    setHatzarDroppedItems(prev => ({...prev, [item.id]: { category: targetCategory, isCorrect }}));\n  };\n  \n  const undropItem = (itemId: number) => {\n    const itemToUnsort = initialItems.find(i => i.id === itemId);\n    if (!itemToUnsort || items.some(i => i.id === itemId)) return;\n\n    setItems(prev => [...prev, itemToUnsort].sort(() => Math.random() - 0.5));\n    setDroppedItems(prev => {\n        const newDropped = { ...prev };\n        delete newDropped[itemId];\n        return newDropped;\n    });\n    setGame1Score(null);\n  };\n\n  const undropHatzarItem = (itemId: number) => {\n    const itemToUnsort = hatzarInitialItems.find(i => i.id === itemId);\n    if (!itemToUnsort || hatzarItems.some(i => i.id === itemId)) return;\n\n    setHatzarItems(prev => [...prev, itemToUnsort].sort(() => Math.random() - 0.5));\n    setHatzarDroppedItems(prev => {\n        const newDropped = { ...prev };\n        delete newDropped[itemId];\n        return newDropped;\n    });\n    setGame2Score(null);\n  };\n\n  const handleSearch = async () => {\n    if (!searchTerm.trim()) return;\n    setIsLoading(true);\n    setAiAnswer('');\n    const answer = await getCostOfLivingInfo(searchTerm);\n    setAiAnswer(answer);\n    setIsLoading(false);\n  };\n  \n  const resetGames = () => {\n      setItems([...initialItems].sort(() => Math.random() - 0.5));\n      setDroppedItems({});\n      setGame1Score(null);\n      setHatzarItems([...hatzarInitialItems].sort(() => Math.random() - 0.5));\n      setHatzarDroppedItems({});\n      setGame2Score(null);\n  }\n  \n  const itemsToSort1 = items.filter(i => !droppedItems[i.id]);\n  const hatzarItemsToSort = hatzarItems.filter(i => !hatzarDroppedItems[i.id]);\n  \n  const renderStepContent = () => {\n    switch(currentStep) {\n        case 0: return (\n            <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n                <h3 className=\"text-5xl font-bold text-brand-teal mb-4 text-center\">מהן סוגי ההוצאות?</h3>\n                <p className=\"text-center text-3xl mb-8 text-brand-dark-blue/90 max-w-3xl mx-auto\">כדי לנהל את ההוצאות שלנו בצורה חכמה, הצעד הראשון הוא להבין לאן הכסף הולך. דרך מצוינת לעשות זאת היא לחלק את ההוצאות לקטגוריות. שתי הקטגוריות העיקריות והחשובות ביותר הן:</p>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                    <div className=\"bg-white/60 p-6 rounded-xl border-2 border-brand-light-blue text-center\">\n                        <RichPiggyBankIcon className=\"w-24 h-24 mx-auto text-brand-light-blue\" />\n                        <h4 className=\"text-4xl font-bold text-brand-light-blue mt-3 mb-2\">הוצאות קבועות</h4>\n                        <p className=\"text-brand-dark-blue/90 text-2xl\">אלו הוצאות שאתם משלמים באופן קבוע (לרוב כל חודש), והסכום שלהן נשאר זהה או כמעט זהה. למשל: שכר דירה, חשבון סלולר, מנוי לנטפליקס.</p>\n                    </div>\n                    <div className=\"bg-white/60 p-6 rounded-xl border-2 border-brand-magenta text-center\">\n                        <RichShoppingBagIcon className=\"w-24 h-24 mx-auto text-brand-magenta\" />\n                        <h4 className=\"text-4xl font-bold text-brand-magenta mt-3 mb-2\">הוצאות משתנות</h4>\n                        <p className=\"text-brand-dark-blue/90 text-2xl\">אלו הוצאות שהסכום שלהן משתנה, והן תלויות בבחירות שלכם. למשל: בילויים, מסעדות, בגדים, קניות בסופר. כאן נמצא המפתח לחיסכון!</p>\n                    </div>\n                </div>\n            </div>\n        );\n        case 1: return (\n            <div>\n                <h3 className=\"text-5xl font-bold mb-2 text-center text-brand-dark-blue\">אתגר מיון: חלק 1</h3>\n                <p className=\"text-center text-3xl mb-4 text-brand-dark-blue/80\">גררו כל כרטיסייה לסל המתאים.</p>\n                 <div className=\"mt-4 mb-4 p-3 bg-yellow-100/60 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg text-2xl\">\n                    <p className=\"font-bold\">💡 שימו לב:</p>\n                    <p>לעיתים, ההבחנה בין הוצאה קבועה למשתנה היא אישית. לדוגמה, 'קניות בסופר' יכולה להיות קבועה אם מקפידים על תקציב, או משתנה אם קונים לפי החשק.</p>\n                </div>\n                <div className=\"bg-white/40 backdrop-blur-md p-6 rounded-3xl border border-white/30\">\n                   <div className=\"min-h-[100px] bg-white/30 p-4 rounded-2xl mb-6\">\n                        <h4 className=\"text-center font-bold text-2xl mb-4\">כרטיסיות למיון ({itemsToSort1.length})</h4>\n                        <div className=\"flex flex-wrap justify-center gap-4\">\n                            {itemsToSort1.map(item => (\n                                <div key={item.id} draggable onDragStart={(e) => handleDragStart(e, item)} className=\"bg-cyan-100/70 shadow-md p-3 rounded-xl cursor-grab hover:bg-cyan-200 transition-colors transform hover:-translate-y-1 text-2xl\">\n                                    {item.name}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div onDrop={(e) => handleDrop(e, 'fixed')} onDragOver={handleDragOver} className=\"min-h-[200px] p-4 bg-brand-light-blue/10 rounded-2xl border-2 border-dashed border-brand-light-blue\">\n                           <div className=\"flex items-center justify-center gap-2 mb-4\">\n                               <RichPiggyBankIcon className=\"w-16 h-16 text-brand-light-blue\" />\n                               <h4 className=\"font-bold text-4xl text-brand-light-blue\">הוצאות קבועות</h4>\n                           </div>\n                           <div className=\"space-y-2 text-2xl\">\n                              {(Object.entries(droppedItems) as [string, { category: Category; isCorrect: boolean }][]).filter(([, val]) => val.category === 'fixed').map(([id, val]) => {\n                                const item = initialItems.find(i => i.id === Number(id));\n                                return (\n                                    <div key={id} onClick={() => undropItem(Number(id))} className={`flex items-center justify-between p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'} animate-fade-in cursor-pointer`}>\n                                        <span>{item?.name}</span>\n                                        <span>{val.isCorrect ? '✔️' : '❌'}</span>\n                                    </div>\n                                )\n                              })}\n                            </div>\n                        </div>\n                        <div onDrop={(e) => handleDrop(e, 'variable')} onDragOver={handleDragOver} className=\"min-h-[200px] p-4 bg-brand-magenta/10 rounded-2xl border-2 border-dashed border-brand-magenta\">\n                            <div className=\"flex items-center justify-center gap-2 mb-4\">\n                               <RichShoppingBagIcon className=\"w-16 h-16 text-brand-magenta\" />\n                               <h4 className=\"font-bold text-4xl text-brand-magenta\">הוצאות משתנות</h4>\n                            </div>\n                             <div className=\"space-y-2 text-2xl\">\n                              {(Object.entries(droppedItems) as [string, { category: Category; isCorrect: boolean }][]).filter(([, val]) => val.category === 'variable').map(([id, val]) => {\n                                const item = initialItems.find(i => i.id === Number(id));\n                                return (\n                                    <div key={id} onClick={() => undropItem(Number(id))} className={`flex items-center justify-between p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'} animate-fade-in cursor-pointer`}>\n                                        <span>{item?.name}</span>\n                                        <span>{val.isCorrect ? '✔️' : '❌'}</span>\n                                    </div>\n                                )\n                              })}\n                            </div>\n                        </div>\n                    </div>\n                    {game1Score !== null && \n                        <div className=\"text-center mt-6\">\n                            <p className={`text-3xl font-bold ${game1Completed ? 'text-green-600' : 'text-red-600'}`}>\n                                {game1Completed ? `כל הכבוד! סיימתם עם ${game1Score} תשובות נכונות. אפשר להמשיך!` : `סיימתם למיין עם ${game1Score} תשובות נכונות. נסו שוב כדי להגיע ל-80% דיוק.`}\n                            </p>\n                            {!game1Completed && <button onClick={resetGames} className=\"mt-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg text-2xl\">שחק שוב</button>}\n                        </div>\n                    }\n               </div>\n            </div>\n        );\n        case 2: return (\n             <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n                <h3 className=\"text-5xl font-bold text-brand-teal mb-6 text-center\">מודל חצ\"ר: חייב, צריך, רוצה</h3>\n                 <p className=\"text-center text-2xl mb-8 text-brand-dark-blue/90\">זוהי דרך פשוטה לתעדף את ההוצאות שלכם ולהבין איפה אפשר לחסוך.</p>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"bg-gradient-to-br from-pink-50 to-white/60 p-6 rounded-xl border-2 border-brand-magenta text-center shadow-xl transform hover:-translate-y-1.5 transition-transform duration-300\">\n                        <FoundationIcon className=\"w-20 h-20 mx-auto\" />\n                        <h4 className=\"text-4xl font-bold text-brand-magenta mt-3 mb-2\">חייב</h4>\n                        <p className=\"text-brand-dark-blue/90 text-2xl\">הוצאות שלא ניתן לוותר עליהן בשום מצב. למשל: שכר דירה, חשבונות בסיסיים, אוכל, תרופות.</p>\n                    </div>\n                    <div className=\"bg-gradient-to-br from-cyan-50 to-white/60 p-6 rounded-xl border-2 border-brand-light-blue text-center shadow-xl transform hover:-translate-y-1.5 transition-transform duration-300\">\n                        <ChecklistIcon className=\"w-20 h-20 mx-auto\" />\n                        <h4 className=\"text-4xl font-bold text-brand-light-blue mt-3 mb-2\">צריך</h4>\n                        <p className=\"text-brand-dark-blue/90 text-2xl\">הוצאות חשובות שמשפרות את איכות החיים, אבל אפשר להתגמש איתן. למשל: אינטרנט, תחבורה, בגדים.</p>\n                    </div>\n                     <div className=\"bg-gradient-to-br from-teal-50 to-white/60 p-6 rounded-xl border-2 border-brand-teal text-center shadow-xl transform hover:-translate-y-1.5 transition-transform duration-300\">\n                        <GiftIcon className=\"w-20 h-20 mx-auto\" />\n                        <h4 className=\"text-4xl font-bold text-brand-teal mt-3 mb-2\">רוצה</h4>\n                        <p className=\"text-brand-dark-blue/90 text-2xl\">הוצאות שהן מותרות וכיף, אבל הן לא חיוניות. למשל: בילויים, חופשות, מסעדות. כאן הכי קל לקצץ ולחסוך!</p>\n                    </div>\n                </div>\n            </div>\n        );\n        case 3: return (\n            <div>\n                 <h3 className=\"text-5xl font-bold mb-2 text-center text-brand-dark-blue\">אתגר מיון: חלק 2</h3>\n                 <p className=\"text-center text-3xl mb-4 text-brand-dark-blue/80\">עכשיו, בואו נמיין את ההוצאות לפי מודל חצ\"ר.</p>\n                 <div className=\"mt-4 mb-4 p-3 bg-yellow-100/60 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg text-2xl\">\n                    <p className=\"font-bold\">💡 חשוב לזכור:</p>\n                    <p>המיון כאן הוא המלצה בלבד. מה שנחשב 'צריך' עבור אדם אחד, יכול להיות 'חייב' או 'רוצה' עבור אדם אחר. הכל תלוי בסדר העדיפויות האישי שלכם!</p>\n                </div>\n                <div className=\"bg-white/40 backdrop-blur-md p-6 rounded-3xl border border-white/30\">\n                    <div className=\"min-h-[100px] bg-white/30 p-4 rounded-2xl mb-6\">\n                        <h4 className=\"text-center font-bold text-2xl mb-4\">כרטיסיות למיון ({hatzarItemsToSort.length})</h4>\n                        <div className=\"flex flex-wrap justify-center gap-4\">\n                            {hatzarItemsToSort.map(item => (\n                                <div key={item.id} draggable onDragStart={(e) => handleDragStart(e, item)} className=\"bg-cyan-100/70 shadow-md p-3 rounded-xl cursor-grab hover:bg-cyan-200 transition-colors transform hover:-translate-y-1 text-2xl\">\n                                    {item.name}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                         <div onDrop={(e) => handleHatzarDrop(e, 'חייב')} onDragOver={handleDragOver} className=\"min-h-[200px] p-4 bg-brand-magenta/10 rounded-2xl border-2 border-dashed border-brand-magenta\">\n                            <div className=\"flex items-center justify-center gap-2 mb-4\">\n                               <FoundationIcon className=\"w-16 h-16\" />\n                               <h4 className=\"font-bold text-4xl text-brand-magenta\">חייב</h4>\n                            </div>\n                            <div className=\"space-y-2 text-2xl\">\n                              {(Object.entries(hatzarDroppedItems) as [string, { category: HatzarCategory; isCorrect: boolean }][]).filter(([, val]) => val.category === 'חייב').map(([id, val]) => {\n                                const item = hatzarInitialItems.find(i => i.id === Number(id));\n                                return <div key={id} onClick={() => undropHatzarItem(Number(id))} className={`flex items-center justify-between p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'} animate-fade-in cursor-pointer`}><span>{item?.name}</span><span>{val.isCorrect ? '✔️' : '❌'}</span></div>\n                              })}\n                            </div>\n                         </div>\n                         <div onDrop={(e) => handleHatzarDrop(e, 'צריך')} onDragOver={handleDragOver} className=\"min-h-[200px] p-4 bg-brand-light-blue/10 rounded-2xl border-2 border-dashed border-brand-light-blue\">\n                            <div className=\"flex items-center justify-center gap-2 mb-4\">\n                               <ChecklistIcon className=\"w-16 h-16\" />\n                               <h4 className=\"font-bold text-4xl text-brand-light-blue\">צריך</h4>\n                            </div>\n                            <div className=\"space-y-2 text-2xl\">\n                              {(Object.entries(hatzarDroppedItems) as [string, { category: HatzarCategory; isCorrect: boolean }][]).filter(([, val]) => val.category === 'צריך').map(([id, val]) => {\n                                const item = hatzarInitialItems.find(i => i.id === Number(id));\n                                return <div key={id} onClick={() => undropHatzarItem(Number(id))} className={`flex items-center justify-between p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'} animate-fade-in cursor-pointer`}><span>{item?.name}</span><span>{val.isCorrect ? '✔️' : '❌'}</span></div>\n                              })}\n                            </div>\n                         </div>\n                         <div onDrop={(e) => handleHatzarDrop(e, 'רוצה')} onDragOver={handleDragOver} className=\"min-h-[200px] p-4 bg-brand-teal/10 rounded-2xl border-2 border-dashed border-brand-teal\">\n                            <div className=\"flex items-center justify-center gap-2 mb-4\">\n                               <GiftIcon className=\"w-16 h-16\" />\n                               <h4 className=\"font-bold text-4xl text-brand-teal\">רוצה</h4>\n                            </div>\n                            <div className=\"space-y-2 text-2xl\">\n                              {(Object.entries(hatzarDroppedItems) as [string, { category: HatzarCategory; isCorrect: boolean }][]).filter(([, val]) => val.category === 'רוצה').map(([id, val]) => {\n                                const item = hatzarInitialItems.find(i => i.id === Number(id));\n                                return <div key={id} onClick={() => undropHatzarItem(Number(id))} className={`flex items-center justify-between p-2 rounded-lg text-white ${val.isCorrect ? 'bg-green-500' : 'bg-red-500'} animate-fade-in cursor-pointer`}><span>{item?.name}</span><span>{val.isCorrect ? '✔️' : '❌'}</span></div>\n                              })}\n                            </div>\n                         </div>\n                    </div>\n                    {game2Score !== null && \n                        <div className=\"text-center mt-6\">\n                            <p className={`text-3xl font-bold ${game2Completed ? 'text-green-600' : 'text-red-600'}`}>\n                                {game2Completed ? `כל הכבוד! סיימתם עם ${game2Score} תשובות נכונות והשלמתם את המודול!` : `סיימתם למיין עם ${game2Score} תשובות נכונות. נסו שוב כדי להגיע ל-80% דיוק.`}\n                            </p>\n                            {!game2Completed && <button onClick={resetGames} className=\"mt-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg text-2xl\">שחק שוב</button>}\n                        </div>\n                    }\n                </div>\n            </div>\n        );\n        case 4: return (\n             <div>\n                <h3 className=\"text-5xl font-bold mb-4 text-center text-brand-dark-blue\">סורק המחירים</h3>\n                <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-3xl max-w-2xl mx-auto\">\n                    <p className=\"mb-6 text-center text-3xl text-brand-dark-blue/80\">רוצים לדעת מה העלות הממוצעת של משהו? הקלידו כאן וה-AI יסרוק את המידע עבורכם.</p>\n                    <div className=\"bg-brand-dark-blue p-6 rounded-2xl shadow-inner\">\n                        <div className=\"bg-gray-800 p-4 rounded-lg text-center text-4xl font-mono text-cyan-300 min-h-[60px] flex items-center justify-center mb-4 border-2 border-gray-600\">\n                            {isLoading ? 'סורק...' : (aiAnswer || '...')}\n                        </div>\n                        <div className=\"flex gap-4\">\n                            <input \n                                type=\"text\" \n                                value={searchTerm}\n                                onChange={(e) => setSearchTerm(e.target.value)}\n                                placeholder=\"לדוגמה: רישיון נהיגה, מנת פלאפל\" \n                                className=\"w-full bg-gray-700 text-white p-3 rounded-lg border-2 border-gray-600 focus:border-brand-teal focus:ring-0 text-2xl\"\n                            />\n                            <button \n                                onClick={handleSearch}\n                                disabled={isLoading}\n                                className=\"bg-brand-magenta hover:bg-pink-700 disabled:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center gap-2 text-2xl\"\n                            >\n                                 <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg>\n                                <span>סרוק</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n        default: return null;\n    }\n  }\n\n  return (\n    <ModuleView title={title} onBack={onBack}>\n        <div className=\"mb-8\">\n            <div className=\"flex justify-between items-center mb-2\">\n                {steps.map((step, index) => (\n                    <React.Fragment key={index}>\n                        <div className=\"flex flex-col items-center flex-1\">\n                            <div className={`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-300 text-2xl ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                {index + 1}\n                            </div>\n                            <p className={`mt-2 text-lg text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                        </div>\n                        {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                    </React.Fragment>\n                ))}\n            </div>\n        </div>\n\n        {renderStepContent()}\n\n        <div className=\"flex justify-between mt-8 text-2xl\">\n            <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50\">הקודם</button>\n            <button \n                onClick={() => setCurrentStep(s => s + 1)} \n                disabled={currentStep === steps.length - 1 || (currentStep === 1 && !game1Completed) || (currentStep === 3 && !game2Completed)}\n                className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\">\n                {\n                   (currentStep === 1 && !game1Completed) ? \"השלימו את המשימה\" : \n                   (currentStep === 3 && !game2Completed) ? \"השלימו את המשימה\" : \"הבא\"\n                }\n            </button>\n        </div>\n    </ModuleView>\n  );\n};\n\nexport default ExpensesModule;\n","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\n\ninterface ResearchModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// --- Icons ---\nconst VideoCameraIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" /></svg>);\nconst CheckBadgeIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" /></svg>);\nconst MagnifyingGlassIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg>);\nconst TrophyIcon: React.FC<{className?: string}> = ({ className }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\" transform=\"scale(1, -1) translate(0, -24)\"/><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z\" visibility=\"hidden\"/><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 14v7m-4-5h8M9 21h6\" transform=\"scale(1, -1) translate(0, -24)\"/><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 3v4m6-4v4\" /></svg>);\n\nconst steps = [\n    { title: \"איסוף רמזים\", icon: VideoCameraIcon },\n    { title: \"בחינת הידע\", icon: CheckBadgeIcon },\n    { title: \"משימת חקר\", icon: MagnifyingGlassIcon },\n];\n\nconst Quiz: React.FC<{onQuizSuccess: () => void}> = ({onQuizSuccess}) => {\n    const questions = [\n        {\n            question: \"מהי ההגדרה הבסיסית של אינפלציה?\",\n            options: [\"התחזקות של השקל\", \"עלייה כללית ומתמשכת של מחירים\", \"ירידה במחירי הדיור\", \"העלאת ריבית על ידי בנק ישראל\"],\n            answer: \"עלייה כללית ומתמשכת של מחירים\"\n        },\n        {\n            question: \"מהו אחד הכלים המרכזיים של בנק ישראל להילחם באינפלציה?\",\n            options: [\"הדפסת עוד כסף\", \"הורדת מסים\", \"העלאת הריבית במשק\", \"עידוד קניית מוצרים מחו\\\"ל\"],\n            answer: \"העלאת הריבית במשק\"\n        },\n        {\n            question: \"אם יש לכם 100 ש\\\"ח ושיעור האינפלציה השנתי הוא 5%, מה קורה לכוח הקנייה שלכם?\",\n            options: [\"אפשר לקנות דברים בשווי 105 ש\\\"ח\", \"אפשר לקנות דברים בשווי 100 ש\\\"ח בדיוק\", \"אפשר לקנות דברים בשווי של כ-95 ש\\\"ח\", \"הכסף הופך ללא שמיש\"],\n            answer: \"אפשר לקנות דברים בשווי של כ-95 ש\\\"ח\"\n        },\n        {\n            question: \"לשם מה משמש 'מדד המחירים לצרכן'?\",\n            options: [\"למדוד את רמת האבטלה\", \"למדוד את קצב האינפלציה\", \"לקבוע את שכר המינימום\", \"למדוד את הצמיחה הכלכלית\"],\n            answer: \"למדוד את קצב האינפלציה\"\n        },\n        {\n            question: \"מי בדרך כלל מרוויח מאינפלציה גבוהה ובלתי צפויה?\",\n            options: [\"אנשים שחוסכים כסף בבנק\", \"אנשים שלקחו הלוואות גדולות בריבית קבועה\", \"פנסיונרים עם קצבה קבועה\", \"אנשים שמלווים כסף לאחרים\"],\n            answer: \"אנשים שלקחו הלוואות גדולות בריבית קבועה\"\n        }\n    ];\n\n    const [currentQuestion, setCurrentQuestion] = useState(0);\n    const [selectedOption, setSelectedOption] = useState('');\n    const [feedback, setFeedback] = useState('');\n    const [quizFinished, setQuizFinished] = useState(false);\n    const [score, setScore] = useState(0);\n\n     useEffect(() => {\n        if (quizFinished) {\n            if (score >= 4) { // 80% of 5 questions\n                onQuizSuccess();\n            }\n        }\n    }, [quizFinished, score, onQuizSuccess]);\n\n\n    const handleSelect = (option: string) => {\n        if(selectedOption) return;\n        setSelectedOption(option);\n        if (option === questions[currentQuestion].answer) {\n            setScore(prev => prev + 1);\n            setFeedback('נכון מאוד! כל הכבוד!');\n        } else {\n            setFeedback('תשובה לא נכונה. התשובה הנכונה היא: ' + questions[currentQuestion].answer);\n        }\n    };\n    \n    const nextQuestion = () => {\n        if(currentQuestion < questions.length - 1) {\n            setCurrentQuestion(currentQuestion + 1);\n            setSelectedOption('');\n            setFeedback('');\n        } else {\n            setQuizFinished(true);\n        }\n    }\n    \n    const restartQuiz = () => {\n        setCurrentQuestion(0);\n        setSelectedOption('');\n        setFeedback('');\n        setQuizFinished(false);\n        setScore(0);\n    }\n\n    if(quizFinished) {\n        const isCompleted = score >= 4;\n        const resultMessage = isCompleted \n            ? \"מעולה! עמדתם ביעד של 80% והשלמתם את המודול!\"\n            : `עבודה טובה! הציון שלכם הוא ${score}/${questions.length}. נסו שוב כדי להשלים את המודול.`;\n\n        return (\n            <div className={`text-center p-6 rounded-2xl ${isCompleted ? 'bg-green-100/70 border-green-400' : 'bg-red-100/70 border-red-400'} border-2`}>\n                <TrophyIcon className=\"w-20 h-20 mx-auto text-yellow-500\"/>\n                <h4 className=\"font-bold text-4xl mb-2 mt-4\">{isCompleted ? '🎉 הצלחתם!' : '🤔 כמעט שם...'}</h4>\n                <p className=\"text-2xl mb-4\">{resultMessage}</p>\n                {!isCompleted && <button onClick={restartQuiz} className=\"bg-brand-teal text-white font-bold py-2 px-6 rounded-lg text-lg\">שחק שוב</button>}\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"bg-white/60 backdrop-blur-sm p-6 rounded-2xl shadow-inner border border-white/40\">\n            <div className=\"mb-4\">\n                <p className=\"text-center font-bold text-xl\">{`שאלה ${currentQuestion + 1} מתוך ${questions.length}`}</p>\n                <div className=\"w-full bg-gray-200 rounded-full h-2.5 mt-1\"><div className=\"bg-brand-teal h-2.5 rounded-full\" style={{width: `${((currentQuestion + 1) / questions.length) * 100}%`}}></div></div>\n            </div>\n            <h4 className=\"font-bold text-3xl mb-4 text-center\">{questions[currentQuestion].question}</h4>\n            <div className=\"space-y-3\">\n                {questions[currentQuestion].options.map(opt => (\n                     <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selectedOption} className={`block w-full text-right p-4 rounded-lg transition-all duration-300 text-2xl ${selectedOption ? (opt === questions[currentQuestion].answer ? 'bg-green-500 text-white' : (opt === selectedOption ? 'bg-red-500 text-white' : 'bg-white/50 opacity-60')) : 'bg-white/80 hover:bg-white'}`}>\n                        {opt}\n                    </button>\n                ))}\n            </div>\n            {feedback && <p className=\"mt-4 font-bold p-3 rounded-lg bg-yellow-100/60 text-yellow-800 text-xl\">{feedback}</p>}\n            {selectedOption && <button onClick={nextQuestion} className=\"mt-4 w-full bg-brand-light-blue text-white font-bold py-3 px-4 rounded-lg text-2xl hover:bg-cyan-600 transition-colors\">{currentQuestion < questions.length - 1 ? \"לשאלה הבאה\" : \"סיים בוחן\"}</button>}\n        </div>\n    );\n};\n\nconst Step1: React.FC = () => (\n    <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-8 rounded-3xl shadow-xl flex flex-col md:flex-row items-center gap-8 animate-fade-in\">\n        <div className=\"flex-shrink-0 bg-brand-light-blue p-5 rounded-full shadow-lg\">\n            <VideoCameraIcon className=\"w-24 h-24 text-white\"/>\n        </div>\n        <div className=\"text-center md:text-right\">\n            <h3 className=\"text-5xl font-bold mb-2 text-brand-light-blue\">שלב 1: איסוף רמזים</h3>\n            <p className=\"text-2xl mb-4 text-brand-dark-blue/90\">כדי להיות בלשים פיננסיים, קודם כל צריך להבין את הזירה. צפו בסרטון הבא כדי ללמוד מהי אינפלציה ואיך היא משפיעה על הכסף של כולנו.</p>\n            <a href=\"https://www.youtube.com/watch?v=y1Fvi6Xu29g\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center justify-center gap-3 px-8 py-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-transform transform hover:scale-105 shadow-lg\">\n                <svg className=\"w-10 h-10\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z\"></path></svg>\n                <span className=\"text-2xl\">צפייה בסרטון</span>\n            </a>\n        </div>\n    </div>\n);\n\nconst Step2: React.FC<{onQuizSuccess: () => void}> = ({onQuizSuccess}) => (\n    <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-8 rounded-3xl shadow-xl animate-fade-in\">\n        <div className=\"flex flex-col md:flex-row items-center gap-8\">\n            <div className=\"flex-shrink-0 bg-brand-teal p-5 rounded-full shadow-lg\">\n                <CheckBadgeIcon className=\"w-24 h-24 text-white\"/>\n            </div>\n            <div className=\"text-center md:text-right flex-grow\">\n                <h3 className=\"text-5xl font-bold mb-2 text-brand-teal\">שלב 2: בחינת הידע</h3>\n                <p className=\"text-2xl mb-4 text-brand-dark-blue/90\">ראיתם את הסרטון? יופי! עכשיו בואו נראה מה למדתם. עליכם לענות נכון על 80% מהשאלות כדי להמשיך לשלב הבא.</p>\n            </div>\n        </div>\n        <div className=\"mt-6\">\n            <Quiz onQuizSuccess={onQuizSuccess} />\n        </div>\n    </div>\n);\n\nconst Step3: React.FC = () => (\n     <div className=\"bg-white/50 backdrop-blur-md border border-white/30 p-8 rounded-3xl shadow-xl animate-fade-in\">\n         <div className=\"flex flex-col md:flex-row items-center gap-8\">\n            <div className=\"flex-shrink-0 bg-brand-magenta p-5 rounded-full shadow-lg\">\n                <MagnifyingGlassIcon className=\"w-24 h-24 text-white\"/>\n            </div>\n            <div className=\"text-center md:text-right flex-grow\">\n                <h3 className=\"text-5xl font-bold mb-2 text-brand-magenta\">שלב 3: משימת חקר - צאו לשטח!</h3>\n                <p className=\"text-2xl mb-4 text-brand-dark-blue/90\">הגיע הזמן להיות חוקרים פיננסיים! חיפוש מידע אמין ברשת הוא כלי חשוב. משימתכם היא למצוא את מדד המחירים לצרכן האחרון שפורסם בישראל.</p>\n            </div>\n        </div>\n        <div className=\"mt-6 bg-brand-dark-blue text-white p-6 rounded-2xl shadow-inner\">\n            <h4 className=\"font-bold text-3xl mb-4 text-yellow-300\">📜 תדריך המשימה:</h4>\n            <ol className=\"list-decimal list-inside space-y-3 text-xl bg-black/20 p-4 rounded-lg\">\n                <li>פתחו כרטיסייה חדשה בדפדפן וחפשו \"<strong>מדד המחירים לצרכן הלמ\"ס</strong>\" (הלשכה המרכזית לסטטיסטיקה).</li>\n                <li>היכנסו לאתר הרשמי של הלמ\"ס ומצאו את הנתון העדכני ביותר. הוא בדרך כלל מופיע כאחוז.</li>\n                <li>העתיקו את הנתון שמצאתם (לדוגמה: 0.3%) לשדה הראשון למטה.</li>\n                <li>העתיקו את הקישור המדויק (URL) מהדפדפן לשדה השני כדי שנוכל לוודא את מקור המידע.</li>\n            </ol>\n            <div className=\"mt-6 space-y-4\">\n                <input type=\"text\" placeholder=\"הנתון שמצאתם (לדוגמה: 0.3%)\" className=\"w-full bg-white/90 text-brand-dark-blue p-3 rounded-lg border-2 border-gray-300 text-xl\"/>\n                <input type=\"text\" placeholder=\"הקישור למקור המידע (URL)\" className=\"w-full bg-white/90 text-brand-dark-blue p-3 rounded-lg border-2 border-gray-300 text-xl\"/>\n                <button className=\"w-full bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 rounded-lg text-2xl transition-colors\">הגשת ממצאים</button>\n            </div>\n        </div>\n    </div>\n);\n\n\nconst ResearchModule: React.FC<ResearchModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [quizCompleted, setQuizCompleted] = useState(false);\n    \n    const handleQuizSuccess = () => {\n        setQuizCompleted(true);\n        onComplete();\n    };\n    \n    const renderStepContent = () => {\n        switch(currentStep) {\n            case 0: return <Step1 />;\n            case 1: return <Step2 onQuizSuccess={handleQuizSuccess}/>;\n            case 2: return <Step3 />;\n            default: return null;\n        }\n    };\n    \n    return (\n        <ModuleView title=\"משימת חקר: הבלש הפיננסי\" onBack={onBack}>\n             <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-16 h-16 rounded-full flex items-center justify-center border-4 transition-all duration-300 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    <step.icon className=\"w-8 h-8\"/>\n                                </div>\n                                <p className={`mt-2 text-lg text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step.title}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n\n            <div className=\"mt-8\">\n                {renderStepContent()}\n            </div>\n\n            <div className=\"flex justify-between mt-12\">\n                <button \n                    onClick={() => setCurrentStep(s => s - 1)} \n                    disabled={currentStep === 0} \n                    className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\"\n                >\n                    הקודם\n                </button>\n                <button \n                    onClick={() => setCurrentStep(s => s + 1)} \n                    disabled={currentStep === steps.length - 1 || (currentStep === 1 && !quizCompleted)} \n                    className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed text-2xl\"\n                    title={currentStep === 1 && !quizCompleted ? \"עליך להשלים את הבוחן כדי להמשיך\" : \"\"}\n                >\n                    {currentStep === 1 && !quizCompleted ? \"השלימו את הבוחן\" : \"הבא\"}\n                </button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default ResearchModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from './ModuleView';\n\ninterface FinalExamProps {\n  onBack: () => void;\n  title: string;\n}\n\n// --- Question Types ---\ntype Question = MultipleChoiceQuestion | MatchingQuestion | CategorizationQuestion;\n\ninterface BaseQuestion {\n    id: number;\n    question: string;\n}\n\ninterface MultipleChoiceQuestion extends BaseQuestion {\n    type: 'multiple-choice';\n    options: string[];\n    answer: string;\n}\n\ninterface MatchingQuestion extends BaseQuestion {\n    type: 'matching';\n    pairs: { term: string; definition: string }[];\n}\n\ninterface CategorizationQuestion extends BaseQuestion {\n    type: 'categorization';\n    categories: string[];\n    items: { name: string; category: string }[];\n}\n\n\n// --- Question Bank ---\nconst allQuestions: Question[] = [\n    // --- Multiple Choice (Easy) ---\n    {\n        id: 1, type: 'multiple-choice',\n        question: \"בניית תקציב מאוזן פירושה:\",\n        options: [\"שההוצאות גבוהות מההכנסות\", \"שההכנסות שוות להוצאות או גבוהות מהן\", \"לחסוך את כל הכסף\", \"להוציא כסף רק על דברים קבועים\"],\n        answer: \"שההכנסות שוות להוצאות או גבוהות מהן\"\n    },\n    {\n        id: 2, type: 'multiple-choice',\n        question: \"מה ההבדל העיקרי בין שכר 'ברוטו' לשכר 'נטו'?\",\n        options: [\"אין הבדל, אלו שני שמות לאותו הדבר\", \"נטו הוא מה שנכנס לבנק אחרי כל הניכויים, ברוטו הוא הסכום לפני הניכויים\", \"ברוטו הוא מה שנכנס לבנק, נטו הוא לפני ניכויים\", \"ברוטו הוא רק השכר הבסיסי, נטו כולל שעות נוספות\"],\n        answer: \"נטו הוא מה שנכנס לבנק אחרי כל הניכויים, ברוטו הוא הסכום לפני הניכויים\"\n    },\n    {\n        id: 3, type: 'multiple-choice',\n        question: \"מדוע מינוס (אוברדראפט) נחשב למסוכן?\",\n        options: [\"כי הבנק יכול לסגור את החשבון בכל רגע\", \"כי הבנק גובה עליו ריבית גבוהה מאוד, מה שמגדיל את החוב\", \"כי אי אפשר להשתמש בכרטיס אשראי כשנמצאים בו\", \"כי הוא מדווח מיידית לכל הגופים הפיננסיים\"],\n        answer: \"כי הבנק גובה עליו ריבית גבוהה מאוד, מה שמגדיל את החוב\"\n    },\n    {\n        id: 4, type: 'multiple-choice',\n        question: \"כאשר יש אינפלציה, מה קורה לכוח הקנייה של הכסף?\",\n        options: [\"הוא גדל\", \"הוא נשאר זהה\", \"הוא נחלש (אפשר לקנות פחות באותו סכום)\", \"הוא הופך ללא יציב\"],\n        answer: \"הוא נחלש (אפשר לקנות פחות באותו סכום)\"\n    },\n    {\n        id: 5, type: 'multiple-choice',\n        question: \"מהי הדוגמה הטובה ביותר ל'הוצאה קבועה'?\",\n        options: [\"קניות בסופרמרקט\", \"חשבון חשמל\", \"דמי שכירות חודשיים\", \"בילוי בקולנוע\"],\n        answer: \"דמי שכירות חודשיים\"\n    },\n    // --- Categorization (Medium) ---\n    {\n        id: 6, type: 'categorization',\n        question: \"גררו כל הוצאה לעמודה הנכונה: הוצאות קבועות או משתנות.\",\n        categories: ['הוצאות קבועות', 'הוצאות משתנות'],\n        items: [\n            { name: 'שכר דירה', category: 'הוצאות קבועות' },\n            { name: 'יציאה למסעדה', category: 'הוצאות משתנות' },\n            { name: 'חשבון חשמל', category: 'הוצאות משתנות' },\n            { name: 'מנוי לחדר כושר', category: 'הוצאות קבועות' },\n            { name: 'קניית בגדים', category: 'הוצאות משתנות' },\n            { name: 'ביטוח רכב', category: 'הוצאות קבועות' }\n        ]\n    },\n    // --- Multiple Choice (Medium) ---\n    {\n        id: 7, type: 'multiple-choice',\n        question: \"מהי 'ריבית דריבית'?\",\n        options: [\"ריבית שהבנק דורש ממך לשלם על המינוס\", \"ריבית שמחושבת גם על הקרן וגם על הריבית שנצברה, מה שגורם לצמיחה מהירה\", \"סוג של מס על חסכונות\", \"ריבית שמשלמים רק בסוף תקופת החיסכון\"],\n        answer: \"ריבית שמחושבת גם על הקרן וגם על הריבית שנצברה, מה שגורם לצמיחה מהירה\"\n    },\n    {\n        id: 8, type: 'multiple-choice',\n        question: \"איזה מהרכיבים הבאים *אינו* ניכוי חובה בתלוש השכר?\",\n        options: [\"מס הכנסה\", \"ביטוח לאומי\", \"קרן השתלמות\", \"מס בריאות\"],\n        answer: \"קרן השתלמות\"\n    },\n     // --- Matching (Medium) ---\n    {\n        id: 9, type: 'matching',\n        question: \"התאימו בין המושג להסבר שלו.\",\n        pairs: [\n            { term: 'תקציב', definition: 'תוכנית הכנסות והוצאות לתקופה מסוימת' },\n            { term: 'אינפלציה', definition: 'שחיקה בכוח הקנייה של הכסף' },\n            { term: 'נכס', definition: 'פריט בעל ערך כלכלי שבבעלותך' },\n            { term: 'התחייבות', definition: 'חוב כספי או מחויבות פיננסית' }\n        ]\n    },\n    {\n        id: 10, type: 'multiple-choice',\n        question: \"מהי הדרך הטובה ביותר להתחיל לצאת ממינוס?\",\n        options: [\"לקחת הלוואה גדולה כדי לכסות אותו\", \"להתעלם ממנו ולקוות שיסתדר\", \"לבנות תקציב, לעקוב אחר הוצאות ולקצץ בהוצאות משתנות\", \"להשקיע את כל הכסף שנשאר במניות מסוכנות\"],\n        answer: \"לבנות תקציב, לעקוב אחר הוצאות ולקצץ בהוצאות משתנות\"\n    },\n    // --- Multiple Choice (Hard) ---\n    {\n        id: 11, type: 'multiple-choice',\n        question: \"איזה גורם משפיע בצורה החזקה ביותר על גודל החיסכון לטווח ארוך (30+ שנים) בעזרת ריבית דריבית?\",\n        options: [\"הסכום ההתחלתי\", \"גובה ההפקדה החודשית\", \"אחוז הריבית השנתית\", \"זמן (מספר השנים)\"],\n        answer: \"זמן (מספר השנים)\"\n    },\n    {\n        id: 12, type: 'multiple-choice',\n        question: \"אם שכר הברוטו שלך הוא 10,000 ש\\\"ח וסך הניכויים הוא 2,500 ש\\\"ח, מה יהיה שכר הנטו שלך?\",\n        options: [\"12,500 ש\\\"ח\", \"10,000 ש\\\"ח\", \"7,500 ש\\\"ח\", \"אי אפשר לדעת מהנתונים האלה\"],\n        answer: \"7,500 ש\\\"ח\"\n    },\n      // --- Matching (Hard) ---\n    {\n        id: 13, type: 'matching',\n        question: \"התאימו בין סוג ההשקעה לרמת הסיכון האופיינית לו.\",\n        pairs: [\n            { term: 'מניית טכנולוגיה', definition: 'סיכון גבוה' },\n            { term: 'פיקדון בנקאי', definition: 'סיכון נמוך' },\n            { term: 'אגרת חוב ממשלתית', definition: 'סיכון נמוך-בינוני' },\n            { term: 'קרן סל S&P 500', definition: 'סיכון בינוני' }\n        ]\n    },\n    {\n        id: 14, type: 'multiple-choice',\n        question: \"מה בנק ישראל עושה בדרך כלל כדי להילחם באינפלציה גבוהה?\",\n        options: [\"מוריד את הריבית כדי לעודד צריכה\", \"מדפיס עוד כסף כדי שיהיה לאנשים יותר\", \"מעלה את הריבית כדי 'לקרר' את הכלכלה ולהפחית את הביקושים\", \"ממליץ לממשלה להוריד מסים\"],\n        answer: \"מעלה את הריבית כדי 'לקרר' את הכלכלה ולהפחית את הביקושים\"\n    },\n     // --- Categorization (Hard) ---\n    {\n        id: 15, type: 'categorization',\n        question: \"גררו כל פעולה לקטגוריה הנכונה: מגדילה או מקטינה הון עצמי.\",\n        categories: ['מגדיל הון עצמי', 'מקטין הון עצמי'],\n        items: [\n            { name: 'חיסכון חודשי בפיקדון', category: 'מגדיל הון עצמי' },\n            { name: 'לקיחת הלוואה לקניית רכב', category: 'מקטין הון עצמי' },\n            { name: 'קבלת העלאה במשכורת', category: 'מגדיל הון עצמי' },\n            { name: 'תשואה חיובית על השקעה', category: 'מגדיל הון עצמי' },\n            { name: 'יציאה לחופשה יקרה', category: 'מקטין הון עצמי' },\n        ]\n    },\n];\n\n// --- Question Components ---\n\nconst MC_Question: React.FC<{ questionData: MultipleChoiceQuestion, onAnswered: (correct: boolean) => void }> = ({ questionData, onAnswered }) => {\n    const [selectedOption, setSelectedOption] = useState('');\n    const [feedback, setFeedback] = useState('');\n\n    const handleSelect = (option: string) => {\n        if(selectedOption) return;\n        setSelectedOption(option);\n        const isCorrect = option === questionData.answer;\n        setFeedback(isCorrect ? 'נכון מאוד!' : `טעות. התשובה הנכונה: \"${questionData.answer}\"`);\n        onAnswered(isCorrect);\n    };\n\n    return (\n        <div>\n            <p className=\"text-2xl mb-4\">{questionData.question}</p>\n            <div className=\"space-y-3\">\n                {questionData.options.map(opt => (\n                     <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selectedOption} className={`block w-full text-right p-4 rounded-md transition-colors text-xl ${selectedOption ? (opt === questionData.answer ? 'bg-green-600 text-white' : (opt === selectedOption ? 'bg-red-600 text-white' : 'bg-white/50')) : 'bg-white/80 hover:bg-white'}`}>\n                        {opt}\n                    </button>\n                ))}\n            </div>\n            {feedback && <p className=\"mt-4 p-3 bg-white/40 rounded-lg font-bold text-lg\">{feedback}</p>}\n        </div>\n    );\n};\n\nconst Matching_Question: React.FC<{ questionData: MatchingQuestion, onAnswered: (correct: boolean) => void }> = ({ questionData, onAnswered }) => {\n    const [terms] = useState(() => questionData.pairs.map(p => p.term).sort(() => Math.random() - 0.5));\n    const [definitions] = useState(() => questionData.pairs.map(p => p.definition).sort(() => Math.random() - 0.5));\n    const [selectedTerm, setSelectedTerm] = useState<string | null>(null);\n    const [matches, setMatches] = useState<{[key: string]: string}>({});\n    const [submitted, setSubmitted] = useState(false);\n\n    const handleTermSelect = (term: string) => {\n        if (submitted || matches[term]) return;\n        setSelectedTerm(term);\n    };\n\n    const handleDefinitionSelect = (definition: string) => {\n        if (submitted || !selectedTerm || Object.values(matches).includes(definition)) return;\n        setMatches(prev => ({...prev, [selectedTerm]: definition}));\n        setSelectedTerm(null);\n    };\n    \n    const handleSubmit = () => {\n        if (submitted) return;\n        setSubmitted(true);\n        let correctMatches = 0;\n        questionData.pairs.forEach(pair => {\n            if (matches[pair.term] === pair.definition) {\n                correctMatches++;\n            }\n        });\n        onAnswered(correctMatches === questionData.pairs.length);\n    };\n    \n    const isCorrect = (term: string) => questionData.pairs.find(p => p.term === term)?.definition === matches[term];\n\n    return (\n        <div>\n            <p className=\"text-2xl mb-4\">{questionData.question}</p>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">{terms.map(term => (\n                    <button key={term} onClick={() => handleTermSelect(term)} disabled={submitted || !!matches[term]}\n                        className={`w-full p-3 rounded text-xl transition-colors text-white ${submitted ? (isCorrect(term) ? 'bg-green-600' : 'bg-red-600') : (selectedTerm === term ? 'bg-yellow-500' : 'bg-brand-dark-blue hover:bg-gray-600')} disabled:opacity-50`}>\n                        {term}\n                    </button>\n                ))}</div>\n                <div className=\"space-y-2\">{definitions.map(def => (\n                    <button key={def} onClick={() => handleDefinitionSelect(def)} disabled={submitted || Object.values(matches).includes(def)}\n                         className={`w-full p-3 rounded text-xl transition-colors ${submitted ? 'bg-white/50' : 'bg-white/80 hover:bg-white'} disabled:opacity-50`}>\n                        {def}\n                    </button>\n                ))}</div>\n            </div>\n            {Object.keys(matches).length === terms.length && !submitted &&\n                <button onClick={handleSubmit} className=\"mt-4 w-full bg-brand-magenta text-white font-bold p-3 rounded-lg text-xl\">בדיקה</button>\n            }\n             {submitted && <p className=\"mt-4 p-3 bg-white/40 rounded-lg font-bold text-lg\">{isCorrect ? \"כל ההתאמות נכונות!\" : \"נמצאו טעויות בהתאמה.\"}</p>}\n        </div>\n    );\n};\n\nconst Categorization_Question: React.FC<{ questionData: CategorizationQuestion, onAnswered: (correct: boolean) => void }> = ({ questionData, onAnswered }) => {\n    const [unassignedItems, setUnassignedItems] = useState(() => questionData.items.map(i => i.name));\n    const [assignments, setAssignments] = useState<{[key: string]: string[]}>({});\n    const [submitted, setSubmitted] = useState(false);\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, item: string) => {\n        if (submitted) return;\n        e.dataTransfer.setData('text/plain', item);\n    };\n\n    const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n    };\n\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, targetCategory: string) => {\n        if (submitted) return;\n        e.preventDefault();\n        const item = e.dataTransfer.getData('text/plain');\n\n        if (unassignedItems.includes(item)) {\n            setUnassignedItems(prev => prev.filter(i => i !== item));\n            setAssignments(prev => ({\n                ...prev,\n                [targetCategory]: [...(prev[targetCategory] || []), item]\n            }));\n        }\n    };\n\n    const handleSubmit = () => {\n        if (submitted) return;\n        setSubmitted(true);\n        let allCorrect = true;\n        questionData.items.forEach(item => {\n            const assignedCategory = Object.keys(assignments).find(cat => assignments[cat]?.includes(item.name));\n            if (assignedCategory !== item.category) {\n                allCorrect = false;\n            }\n        });\n        onAnswered(allCorrect);\n    };\n    \n    return (\n        <div>\n            <p className=\"text-2xl mb-4\">{questionData.question}</p>\n            <div className=\"p-4 bg-white/30 rounded-lg mb-4\">\n                <h3 className=\"text-xl font-bold text-center mb-2\">פריטים למיון</h3>\n                <div className=\"flex flex-wrap justify-center gap-2 min-h-[40px]\">\n                    {unassignedItems.map(item => (\n                        <div key={item} draggable onDragStart={(e) => handleDragStart(e, item)} className=\"p-3 rounded bg-white shadow-md hover:bg-gray-100 cursor-move transition-colors text-lg\">\n                            {item}\n                        </div>\n                    ))}\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {questionData.categories.map(cat => (\n                    <div key={cat} onDrop={(e) => handleDrop(e, cat)} onDragOver={handleDragOver} className=\"p-4 bg-white/30 rounded-lg min-h-[150px]\">\n                        <h3 className=\"text-center font-bold text-xl text-brand-light-blue border-b-2 border-brand-light-blue pb-2 mb-2\">{cat}</h3>\n                        <div className=\"space-y-2\">\n                            {(assignments[cat] || []).map(item => {\n                                const isCorrect = questionData.items.find(i => i.name === item)?.category === cat;\n                                return <div key={item} className={`p-2 rounded text-center text-lg text-white ${submitted ? (isCorrect ? 'bg-green-600' : 'bg-red-600') : 'bg-white text-brand-dark-blue'}`}>{item}</div>\n                            })}\n                        </div>\n                    </div>\n                ))}\n            </div>\n            {unassignedItems.length === 0 && !submitted &&\n                <button onClick={handleSubmit} className=\"mt-4 w-full bg-brand-magenta text-white font-bold p-3 rounded-lg text-xl\">בדיקה</button>\n            }\n            {submitted && <p className=\"mt-4 p-3 bg-white/40 rounded-lg font-bold text-lg\">תשובתך נבדקה. תוכל להמשיך לשאלה הבאה.</p>}\n        </div>\n    );\n};\n\n\n// --- Main Component ---\nconst FinalExam: React.FC<FinalExamProps> = ({ onBack, title }) => {\n    const [examState, setExamState] = useState<'nameInput' | 'quiz' | 'results'>('nameInput');\n    const [userName, setUserName] = useState('');\n    const [questions, setQuestions] = useState<Question[]>([]);\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const [score, setScore] = useState(0);\n    const [answerSubmitted, setAnswerSubmitted] = useState(false);\n    \n    useEffect(() => {\n        setQuestions(allQuestions.sort(() => Math.random() - 0.5));\n    }, []);\n\n    const handleAnswer = (isCorrect: boolean) => {\n        if (isCorrect) {\n            setScore(prev => prev + 1);\n        }\n        setAnswerSubmitted(true);\n    };\n    \n    const nextQuestion = () => {\n        if(currentQuestionIndex < questions.length - 1) {\n            setCurrentQuestionIndex(prev => prev + 1);\n            setAnswerSubmitted(false);\n        } else {\n            setExamState('results');\n        }\n    }\n\n    const startQuiz = () => {\n        if (userName.trim()) {\n            setExamState('quiz');\n        }\n    }\n    \n    const renderCurrentQuestion = () => {\n        const q = questions[currentQuestionIndex];\n        if (!q) return null;\n\n        switch (q.type) {\n            case 'multiple-choice':\n                return <MC_Question questionData={q} onAnswered={handleAnswer} />;\n            case 'matching':\n                return <Matching_Question questionData={q} onAnswered={handleAnswer} />;\n            case 'categorization':\n                return <Categorization_Question questionData={q} onAnswered={handleAnswer} />;\n            default:\n                return <div>סוג שאלה לא נתמך.</div>;\n        }\n    };\n\n\n    const renderContent = () => {\n        switch(examState) {\n            case 'nameInput':\n                return (\n                    <div className=\"text-center bg-white/60 backdrop-blur-md border border-white/30 p-8 rounded-lg\">\n                        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">רגע לפני שמתחילים</h3>\n                        <p className=\"text-2xl mb-6\">אנא הזינו את שמכם המלא כדי שיופיע בתעודת הסיום.</p>\n                        <input\n                            type=\"text\"\n                            value={userName}\n                            onChange={(e) => setUserName(e.target.value)}\n                            placeholder=\"שם מלא\"\n                            className=\"w-full max-w-sm mx-auto bg-white text-brand-dark-blue p-3 rounded-lg border-2 border-gray-300 text-center text-xl\"\n                        />\n                        <button \n                            onClick={startQuiz}\n                            disabled={!userName.trim()}\n                            className=\"mt-6 w-full max-w-sm mx-auto bg-brand-magenta hover:bg-pink-700 disabled:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg text-xl transition-colors\"\n                        >\n                            התחלת המבחן\n                        </button>\n                    </div>\n                );\n            \n            case 'quiz':\n                const currentQuestion = questions[currentQuestionIndex];\n                if (!currentQuestion) return null;\n                return (\n                    <div className=\"bg-white/60 backdrop-blur-md border border-white/30 p-6 rounded-lg\">\n                      <h4 className=\"font-bold text-xl mb-4 text-brand-light-blue\">{`שאלה ${currentQuestionIndex + 1}/${questions.length}`}</h4>\n                      <div key={currentQuestion.id}>\n                        {renderCurrentQuestion()}\n                      </div>\n                      {answerSubmitted && <button onClick={nextQuestion} className=\"mt-4 w-full bg-brand-teal text-white font-bold p-3 rounded-lg text-xl\">\n                          {currentQuestionIndex < questions.length - 1 ? 'לשאלה הבאה' : 'סיים מבחן'}\n                      </button>}\n                  </div>\n                );\n\n            case 'results':\n                 return (\n                    <div className=\"text-center bg-white/80 backdrop-blur-sm p-8 rounded-lg border-4 border-brand-teal shadow-2xl\">\n                        <h3 className=\"text-5xl font-bold text-brand-teal mb-4\">כל הכבוד, {userName}!</h3>\n                        <p className=\"text-2xl mb-2\">סיימת את המבחן המסכם של \"חכם בכיס\".</p>\n                        <p className=\"text-3xl font-bold mb-6 bg-brand-light-blue/20 py-2 px-4 rounded-md inline-block\">{`הציון שלך: ${score} מתוך ${questions.length}`}</p>\n                        \n                        <div className=\"bg-white/50 p-4 rounded-lg mt-8 border border-brand-magenta\">\n                            <p className=\"text-xl font-bold\">משימה אחרונה:</p>\n                            <p className=\"text-lg\">יש לצלם את המסך ולשלוח לאלון כהן בווטסאפ למספר: <b dir=\"ltr\">050-4443326</b></p>\n                        </div>\n                        \n                        <button onClick={onBack} className=\"mt-8 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-lg text-xl\">\n                            חזרה למסך הראשי\n                        </button>\n                    </div>\n                );\n        }\n    }\n\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n           {renderContent()}\n        </ModuleView>\n    );\n};\n\nexport default FinalExam;","import React, { useState } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\n\ninterface LinksModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst linkCategories = [\n  {\n    categoryTitle: 'ממשל וזכויות',\n    color: 'brand-light-blue',\n    links: [\n      { name: 'כל זכות', desc: 'מאגר המידע המקיף על זכויות תושבי ישראל.', url: 'https://www.kolzchut.org.il/' },\n      { name: 'רשות המסים', desc: 'מידע על מס הכנסה, נקודות זיכוי, תיאום מס ועוד.', url: 'https://www.gov.il/he/departments/israel_tax_authority' },\n      { name: 'המוסד לביטוח לאומי', desc: 'מידע על דמי אבטלה, תאונות עבודה וזכויות סוציאליות.', url: 'https://www.btl.gov.il/' },\n    ]\n  },\n  {\n    categoryTitle: 'מחשבונים פיננסיים',\n    color: 'brand-teal',\n    links: [\n      { name: 'מחשבון שכר נטו - כל זכות', desc: 'בדקו כמה יישאר לכם מהמשכורת אחרי כל הניכויים.', url: 'https://www.kolzchut.org.il/he/%D7%9E%D7%97%D7%A9%D7%91%D7%95%D7%9F_%D7%A9%D7%9B%D7%A8_%D7%A0%D7%98%D7%95' },\n      { name: 'מחשבון מס הכנסה - חילן', desc: 'סימולטור לחישוב מס הכנסה על השכר.', url: 'https://www.hilan.co.il/%D7%9E%D7%A8%D7%9B%D7%96-%D7%99%D7%93%D7%A2/%D7%9E%D7%97%D7%A9%D7%91%D7%95%D7%A0%D7%99%D7%9D/%D7%98%D7%91%D7%9C%D7%AA-%D7%9E%D7%A1-%D7%94%D7%9B%D7%A0%D7%A1%D7%94/' },\n      { name: 'מחשבון ביטוח לאומי - חילן', desc: 'סימולטור לחישוב דמי ביטוח לאומי ומס בריאות.', url: 'https://www.hilan.co.il/%D7%9E%D7%A8%D7%9B%D7%96-%D7%99%D7%93%D7%A2/%D7%9E%D7%97%D7%A9%D7%91%D7%95%D7%A0%D7%99%D7%9D/%D7%98%D7%91%D7%9C%D7%AA-%D7%91%D7%99%D7%98%D7%95%D7%97-%D7%9C%D7%90%D7%95%D7%9E%D7%99/' },\n      { name: 'מחשבון ריבית דריבית', desc: 'ראו איך החיסכון שלכם יכול לצמוח לאורך זמן.', url: 'https://lazyinvestor.co.il/compound-interest-calculator/' },\n      { name: 'מחשבון החזר הלוואה', desc: 'תכננו את החזרי ההלוואה שלכם בצורה חכמה.', url: 'https://www.supermarker.themarker.com/Calculators/Loan/LoanCalculator.aspx' },\n    ]\n  },\n  {\n    categoryTitle: 'צרכנות נבונה',\n    color: 'brand-magenta',\n    links: [\n      { name: 'המועצה הישראלית לצרכנות', desc: 'מידע על זכויות צרכנים, ביטול עסקה ועוד.', url: 'https://www.consumers.org.il/' },\n      { name: 'כמה זה? (KamaZe)', desc: 'אתר להשוואת מחירים בתחומי התקשורת והסלולר.', url: 'https://www.kamaze.co.il/' },\n      { name: 'Zap השוואת מחירים', desc: 'השוואת מחירים למגוון רחב של מוצרים.', url: 'https://www.zap.co.il/' },\n      { name: 'מחשבון עמלות כרטיסי אשראי', desc: 'כלי של בנק ישראל להשוואת עמלות.', url: 'https://www.supermarker.themarker.com/CreditCards/CompareCreditCards.aspx?page=2&Issuer=&Type=' },\n    ]\n  },\n   {\n    categoryTitle: 'פודקאסטים מומלצים',\n    color: 'purple-500',\n    links: [\n      { name: 'חיות כיס', desc: 'הפודקאסט הכלכלי של כאן, בהגשת שאול אמסטרדמסקי.', url: 'https://open.spotify.com/show/6if3f2252g3OTdTHE22iR5' },\n      { name: 'התמונה המלאה', desc: 'פודקאסט על כלכלה, עסקים ויזמות בהנחיית מתן חודורוב.', url: 'https://open.spotify.com/show/3xXKEgYt8nHDsACf70bYpQ' },\n      { name: 'עושים חשבון', desc: 'פודקאסט שמנגיש מושגים כלכליים מורכבים בצורה פשוטה.', url: 'https://open.spotify.com/show/2I722Ec2jPbe26f50pG5xS' },\n      { name: 'השקעות לעצלנים', desc: 'פודקאסט פרקטי על השקעות בשוק ההון למתחילים.', url: 'https://open.spotify.com/show/5P4kZ8k3G5A2M8d9JkS7xQ' },\n    ]\n  },\n  {\n    categoryTitle: 'אפליקציות שימושיות',\n    color: 'purple-500',\n    links: [\n      { name: 'השכר שלי', desc: 'אפליקציה למעקב וחישוב שכר העבודה שלכם.', url: 'https://play.google.com/store/apps/details?id=salary.com&pcampaignid=web_share' },\n    ]\n  },\n  {\n    categoryTitle: 'חיפוש עבודה',\n    color: 'yellow-500',\n    links: [\n      { name: 'שירות התעסוקה לנוער', desc: 'מידע, זכויות ועבודות לבני נוער בישראל.', url: 'https://www.taasuka.gov.il/he/pages/noar.aspx' },\n      { name: 'AllJobs', desc: 'אחד מאתרי הדרושים הגדולים בישראל.', url: 'https://www.alljobs.co.il/' },\n    ]\n  },\n];\n\nconst Quiz: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = [\n        { q: \"באמצעות 'מחשבון שכר נטו', מהו בערך שכר הנטו עבור שכר ברוטו של 8,000 ש\\\"ח לרווק/ה ללא ילדים?\", a: \"כ-7,100 ש\\\"ח\" },\n        { q: \"לפי אתר 'רשות המסים' או 'כל זכות', כמה נקודות זיכוי מקבל תושב ישראל (גבר)?\", a: \"2.25 נקודות\" },\n        { q: \"איזה סוג מידע ניתן למצוא באתר 'המוסד לביטוח לאומי'?\", a: \"מידע על קצבאות וזכויות סוציאליות\" },\n        { q: \"מהי המטרה העיקרית של אתר 'כמה זה?'?\", a: \"השוואת מחירים בתחום התקשורת\" },\n        { q: \"לפי אתר 'שירות התעסוקה', מהו בדרך כלל גיל המינימום להעסקת נוער בחופשת לימודים?\", a: \"גיל 14\" },\n    ];\n    const options = [\n        [\"כ-6,500 ש\\\"ח\", \"כ-7,100 ש\\\"ח\", \"כ-8,000 ש\\\"ח\"],\n        [\"נקודה אחת\", \"2.25 נקודות\", \"5 נקודות\"],\n        [\"מידע על מניות בבורסה\", \"מידע על קצבאות וזכויות סוציאליות\", \"מידע על החזרי מס\"],\n        [\"קניית מוצרים באינטרנט\", \"השוואת מחירים בתחום התקשורת\", \"מכירת רכבים\"],\n        [\"גיל 16\", \"גיל 14\", \"אין הגבלת גיל\"]\n    ];\n    \n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [finished, setFinished] = useState(false);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].a) {\n            setScore(s => s + 1);\n        }\n    };\n    \n    const handleNext = () => {\n        if(current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setFinished(true);\n            if (score + (selected === questions[current].a ? 1 : 0) >= 4) {\n              onComplete();\n            }\n        }\n    };\n    \n    if (finished) {\n        const finalScore = score;\n        const isCompleted = finalScore >= 4;\n        const resultMessage = isCompleted\n            ? \"כל הכבוד! עמדתם ביעד והשלמתם את המודול!\"\n            : \"עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.\";\n        return (\n            <div className=\"text-center\">\n                <TrophyIcon className=\"w-16 h-16 mx-auto text-yellow-500\" />\n                <h3 className=\"text-3xl font-bold mt-2\">סיימתם את הבוחן!</h3>\n                <p className=\"text-lg\">{resultMessage}</p>\n                <p className=\"text-2xl my-2\">הציון שלך: <span className=\"font-bold\">{finalScore} / {questions.length}</span></p>\n            </div>\n        )\n    }\n\n    return (\n        <div>\n            <h4 className=\"font-bold text-xl mb-2\">{questions[current].q}</h4>\n            <div className=\"space-y-2\">\n                {options[current].map(opt => (\n                    <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                        className={`block w-full text-right p-2 rounded-md text-lg ${selected ? (opt === questions[current].a ? 'bg-green-500 text-white' : (opt === selected ? 'bg-red-500 text-white' : 'bg-white/40')) : 'bg-white/80 hover:bg-white'}`}>\n                        {opt}\n                    </button>\n                ))}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-4 bg-brand-teal text-white p-2 rounded w-full text-lg\">הבא</button>}\n        </div>\n    )\n};\n\n\nconst getCategoryStyles = (color: string) => {\n    switch (color) {\n        case 'brand-light-blue': return { border: 'border-brand-light-blue/50', text: 'text-brand-light-blue' };\n        case 'brand-teal': return { border: 'border-brand-teal/50', text: 'text-brand-teal' };\n        case 'brand-magenta': return { border: 'border-brand-magenta/50', text: 'text-brand-magenta' };\n        case 'yellow-500': return { border: 'border-yellow-500/50', text: 'text-yellow-500' };\n        case 'purple-500': return { border: 'border-purple-500/50', text: 'text-purple-500' };\n        default: return { border: 'border-gray-300', text: 'text-gray-800' };\n    }\n};\n\nconst LinkCard: React.FC<{name: string, desc: string, url: string}> = ({ name, desc, url }) => (\n    <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block bg-white/70 p-4 rounded-xl hover:bg-white transition-all transform hover:scale-105 shadow-md hover:shadow-lg backdrop-blur-sm\">\n        <h4 className=\"font-bold text-xl text-brand-dark-blue\">{name}</h4>\n        <p className=\"text-sm text-brand-dark-blue/80\">{desc}</p>\n        <span className=\"text-xs text-brand-light-blue font-bold mt-2 inline-block\">עבור לאתר &raquo;</span>\n    </a>\n);\n\nconst DocumentCard: React.FC<{name: string, desc: string, url: string}> = ({ name, desc, url }) => (\n    <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"block bg-white/70 p-4 rounded-xl hover:bg-white transition-all transform hover:scale-105 shadow-md hover:shadow-lg backdrop-blur-sm\">\n        <div className=\"flex items-center justify-between\">\n            <h4 className=\"font-bold text-xl text-brand-dark-blue\">{name}</h4>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-brand-teal\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n            </svg>\n        </div>\n        <p className=\"text-sm text-brand-dark-blue/80\">{desc}</p>\n        <span className=\"text-xs text-brand-light-blue font-bold mt-2 inline-block\">הורד מסמך &raquo;</span>\n    </a>\n);\n\n\nconst LinksModule: React.FC<LinksModuleProps> = ({ onBack, title, onComplete }) => {\n  const [activeTab, setActiveTab] = useState<'documents' | 'links'>('documents');\n  const [showQuiz, setShowQuiz] = useState(false);\n  \n  return (\n    <ModuleView title={title} onBack={onBack}>\n      <p className=\"text-center text-xl text-brand-dark-blue/90 mb-8\">\n        ריכזנו עבורכם מסמכים, קישורים וכלים שימושיים שיעזרו לכם בצעדים הראשונים בעולם הפיננסי.\n      </p>\n\n       {/* Tab Buttons */}\n        <div className=\"flex justify-center mb-6 border-b-2 border-gray-300/50\">\n            <button \n                onClick={() => setActiveTab('documents')}\n                className={`px-6 py-3 text-lg font-bold transition-colors ${activeTab === 'documents' ? 'border-b-4 border-brand-teal text-brand-teal' : 'text-gray-500 hover:text-brand-teal'}`}\n            >\n                מסמכים שימושיים\n            </button>\n            <button \n                onClick={() => setActiveTab('links')}\n                className={`px-6 py-3 text-lg font-bold transition-colors ${activeTab === 'links' ? 'border-b-4 border-brand-teal text-brand-teal' : 'text-gray-500 hover:text-brand-teal'}`}\n            >\n                קישורים שימושיים\n            </button>\n        </div>\n\n        {/* Tab Content */}\n        {activeTab === 'documents' && (\n            <div className=\"animate-fade-in\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                    <DocumentCard \n                        name=\"טופס 101\"\n                        desc=\"טופס פרטים אישיים של עובד שיש למלא בתחילת כל עבודה.\"\n                        url=\"https://drive.google.com/file/d/1aokcfi-KvsxWS8apQTw0182rWklOQM6K/view?usp=sharing\"\n                    />\n                    <DocumentCard \n                        name=\"דוח מעקב שעות עבודה\"\n                        desc=\"טבלה למעקב אחר שעות העבודה שלכם כדי לוודא שהשכר תקין.\"\n                        url=\"https://drive.google.com/file/d/1M8weOLwKROpStPdiYrNZ1pSS5-2YVPzK/view?usp=sharing\"\n                    />\n                </div>\n            </div>\n        )}\n\n        {activeTab === 'links' && (\n            <div className=\"animate-fade-in\">\n                <div className=\"space-y-8\">\n                    {linkCategories.map(category => {\n                        const styles = getCategoryStyles(category.color);\n                        return (\n                            <div key={category.categoryTitle}>\n                                <h3 className={`text-3xl font-bold mb-4 border-b-2 pb-2 ${styles.border} ${styles.text}`}>\n                                    {category.categoryTitle}\n                                </h3>\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                                    {category.links.map(link => <LinkCard key={link.name} {...link} />)}\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n                \n                <div className=\"mt-8 pt-8 border-t-2 border-brand-teal/30\">\n                    <h3 className=\"text-3xl font-bold mb-4 text-center text-brand-teal\">בחן את עצמך!</h3>\n                    <div className=\"bg-white/40 p-6 rounded-lg\">\n                        {!showQuiz ? (\n                            <div className=\"text-center\">\n                                <p className=\"mb-4 text-brand-dark-blue/90 text-lg\">\n                                    לאחר שעברת על הקישורים השונים במודול זה, הגיע הזמן לבחון את עצמך.\n                                    <br/>\n                                    <strong>משימתכם היא להשתמש בקישורים שסקרתם כדי לענות על השאלות הבאות.</strong>\n                                    <br/>\n                                    עליכם לענות נכון על 4 מתוך 5 שאלות כדי להשלים את המודול.\n                                </p>\n                                <button onClick={() => setShowQuiz(true)} className=\"bg-brand-magenta text-white font-bold p-3 rounded-lg text-lg\">אני מוכן/ה לבוחן</button>\n                            </div>\n                        ) : (\n                            <Quiz onComplete={onComplete} />\n                        )}\n                    </div>\n                </div>\n            </div>\n        )}\n    </ModuleView>\n  );\n};\n\nexport default LinksModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\n\ninterface SelfEmployedModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"ההבדלים העיקריים\", \"משחק מיון\", \"סוגי עצמאיים\", \"החשבון, בבקשה!\", \"ניתוח SWOT\"];\n\n// --- Step 1: Differences Introduction (New) ---\nconst DifferencesStep: React.FC = () => {\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-teal mb-2 text-center\">שכיר או עצמאי: מה ההבדל?</h3>\n            <p className=\"text-center text-3xl mb-8 text-brand-dark-blue/90\">לפני שנצלול פנימה, בואו נבין את ההבדלים המרכזיים בין שתי דרכי התעסוקה.</p>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                <div className=\"bg-white/60 p-6 rounded-xl border-2 border-brand-light-blue shadow-xl transform hover:-translate-y-1.5 transition-all\">\n                    <h4 className=\"text-5xl font-bold text-brand-light-blue mb-4 text-center\">👨‍💼 שכיר</h4>\n                    <ul className=\"list-disc list-inside space-y-3 text-2xl\">\n                        <li>מקבל משכורת קבועה וידועה מראש מהמעסיק.</li>\n                        <li>זכאי לזכויות סוציאליות כמו ימי חופשה, ימי מחלה והפרשות לפנסיה.</li>\n                        <li>עובד בשעות מוגדרות וכפוף למנהל.</li>\n                        <li>המעסיק אחראי על תשלום המיסים והביטוח הלאומי.</li>\n                    </ul>\n                </div>\n                <div className=\"bg-white/60 p-6 rounded-xl border-2 border-brand-magenta shadow-xl transform hover:-translate-y-1.5 transition-all\">\n                    <h4 className=\"text-5xl font-bold text-brand-magenta mb-4 text-center\">👩‍💻 עצמאי</h4>\n                    <ul className=\"list-disc list-inside space-y-3 text-2xl\">\n                        <li>ההכנסה אינה קבועה ותלויה בהצלחת העסק.</li>\n                        <li>אחראי בעצמו על הפרשות לפנסיה ואין לו ימי חופשה בתשלום.</li>\n                        <li>קובע לעצמו את שעות העבודה והוא הבוס של עצמו.</li>\n                        <li>אחראי באופן אישי על דיווח ותשלום המיסים לרשויות.</li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 2: Sorting Game (Restyled) ---\nconst SortingGameStep: React.FC<{ onGameComplete: () => void }> = ({ onGameComplete }) => {\n    const initialItems = [\n        { name: 'משכורת קבועה', category: 'שכיר' },\n        { name: 'גמישות בשעות העבודה', category: 'עצמאי' },\n        { name: 'זכויות סוציאליות (פנסיה, חופשה)', category: 'שכיר' },\n        { name: 'אחריות מלאה על ההצלחה', category: 'עצמאי' },\n        { name: 'עבודה לפי הנחיות מנהל', category: 'שכיר' },\n        { name: 'פוטנציאל רווח בלתי מוגבל', category: 'עצמאי' },\n    ];\n    const [unassignedItems, setUnassignedItems] = useState(initialItems.map(i => i.name));\n    const [assignments, setAssignments] = useState<Record<string, { category: string, isCorrect: boolean }>>({});\n    const gameFinished = unassignedItems.length === 0;\n    const score = (Object.values(assignments) as { isCorrect: boolean }[]).filter(a => a.isCorrect).length;\n\n    useEffect(() => {\n        if (gameFinished) {\n            onGameComplete();\n        }\n    }, [gameFinished, onGameComplete]);\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, itemName: string) => {\n        e.dataTransfer.setData('text', itemName);\n    };\n\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, category: 'שכיר' | 'עצמאי') => {\n        e.preventDefault();\n        const itemName = e.dataTransfer.getData('text');\n        const item = initialItems.find(i => i.name === itemName);\n        if (item && !assignments[itemName]) {\n            setUnassignedItems(prev => prev.filter(i => i !== itemName));\n            setAssignments(prev => ({ ...prev, [itemName]: { category, isCorrect: item.category === category } }));\n        }\n    };\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-dark-blue mb-2 text-center\">משחק מיון: שכיר או עצמאי?</h3>\n            <p className=\"text-center text-3xl mb-6 text-brand-dark-blue/90\">גררו כל מאפיין לעמודה הנכונה כדי ללמוד על ההבדלים המרכזיים.</p>\n            <div className=\"bg-brand-dark-blue p-4 rounded-xl mb-4 text-white\">\n                <h4 className=\"text-3xl font-bold text-center mb-2 text-yellow-300\">מאפיינים למיון:</h4>\n                <div className=\"flex flex-wrap justify-center gap-3 min-h-[50px]\">\n                    {unassignedItems.map(item => <div key={item} draggable onDragStart={e => handleDragStart(e, item)} className=\"p-3 rounded bg-yellow-200 text-black shadow-md cursor-grab text-2xl\">{item}</div>)}\n                    {gameFinished && <p className=\"text-3xl font-bold text-green-300\">כל הכבוד! סיימתם למיין.</p>}\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                <div onDrop={(e) => handleDrop(e, 'שכיר')} onDragOver={(e) => e.preventDefault()} className=\"bg-brand-light-blue/10 p-4 rounded-xl border-2 border-dashed border-brand-light-blue min-h-[250px]\">\n                    <h4 className=\"text-4xl font-bold text-brand-light-blue mb-4 text-center\">👨‍💼 שכיר</h4>\n                    <div className=\"space-y-2\">\n                        {(Object.entries(assignments) as [string, { category: string; isCorrect: boolean }][]).filter(([, val]) => val.category === 'שכיר').map(([name, { isCorrect }]) => <div key={name} className={`p-2 rounded text-white font-semibold text-2xl ${isCorrect ? 'bg-brand-teal' : 'bg-brand-magenta'}`}>{name}</div>)}\n                    </div>\n                </div>\n                <div onDrop={(e) => handleDrop(e, 'עצמאי')} onDragOver={(e) => e.preventDefault()} className=\"bg-brand-magenta/10 p-4 rounded-xl border-2 border-dashed border-brand-magenta min-h-[250px]\">\n                    <h4 className=\"text-4xl font-bold text-brand-magenta mb-4 text-center\">👩‍💻 עצמאי</h4>\n                    <div className=\"space-y-2\">\n                        {(Object.entries(assignments) as [string, { category: string; isCorrect: boolean }][]).filter(([, val]) => val.category === 'עצמאי').map(([name, { isCorrect }]) => <div key={name} className={`p-2 rounded text-white font-semibold text-2xl ${isCorrect ? 'bg-brand-teal' : 'bg-brand-magenta'}`}>{name}</div>)}\n                    </div>\n                </div>\n            </div>\n            {gameFinished && <p className=\"mt-6 p-3 bg-white/40 rounded-lg font-bold text-center text-2xl\">סיימתם את המיון עם {score} הצלחות מתוך {initialItems.length}!</p>}\n        </div>\n    );\n};\n\n// --- Step 3: Types of Self-Employed (Improved Quiz) ---\nconst SelfEmployedTypes: React.FC<{ onQuizComplete: () => void }> = ({ onQuizComplete }) => {\n    const scenarios = [\n        { id: 1, icon: '🎨', case: 'מעצבת גרפית שצופה להכניס כ-80,000 ₪ בשנה.', answer: 'עוסק פטור', explanation: 'נכון! מכיוון שההכנסה השנתית הצפויה נמוכה מתקרת העוסק הפטור, זו האפשרות הפשוטה והמתאימה ביותר.' },\n        { id: 2, icon: '💻', case: 'מתכנת שבונה אתרים וההכנסה הצפויה שלו היא כ-150,000 ₪ בשנה.', answer: 'עוסק מורשה', explanation: 'נכון! ההכנסה הצפויה גבוהה מהתקרה, ולכן הוא חייב להירשם כעוסק מורשה.' },\n    ];\n    const [answers, setAnswers] = useState<Record<number, { selected: string; isCorrect: boolean }>>({});\n    \n    useEffect(() => {\n        if (Object.keys(answers).length === scenarios.length) {\n            onQuizComplete();\n        }\n    }, [answers, onQuizComplete, scenarios.length]);\n\n    const handleAnswer = (scenarioId: number, selected: string) => {\n        if (answers[scenarioId]) return;\n        const scenario = scenarios.find(s => s.id === scenarioId);\n        if (!scenario) return;\n        const isCorrect = selected === scenario.answer;\n        setAnswers(prev => ({ ...prev, [scenarioId]: { selected, isCorrect } }));\n    };\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-teal mb-6 text-center\">סוגי עצמאיים נפוצים</h3>\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\n                <div className=\"bg-white/50 p-6 rounded-xl border-2 border-brand-light-blue flex flex-col shadow-xl transform hover:-translate-y-1.5 transition-all\">\n                    <h4 className=\"text-4xl font-bold text-brand-light-blue mb-3\">עוסק פטור</h4>\n                    <ul className=\"list-disc list-inside space-y-2 text-2xl flex-grow\">\n                        <li><strong>למי זה מתאים?</strong> לעסקים קטנים בתחילת הדרך, עם מחזור הכנסות שנתי נמוך (עד כ-120,000 ₪, נכון ל-2024).</li>\n                        <li><strong>מע\"מ:</strong> <strong>פטור</strong> מגביית מע\"מ מלקוחות. זה הופך את המחיר שלכם לאטרקטיבי יותר עבור לקוחות פרטיים.</li>\n                        <li><strong>חסרון:</strong> לא ניתן לקזז (לקבל החזר) על המע\"מ ששילמתם על הוצאות העסק (כמו קניית ציוד).</li>\n                        <li><strong>דיווחים:</strong> התנהלות פשוטה יותר מול רשויות המס - בדרך כלל דיווח שנתי אחד בלבד.</li>\n                         <li><strong>הגבלות:</strong> מקצועות מסוימים (כמו רופאים, עורכי דין) חייבים להירשם כ\"עוסק מורשה\" ללא קשר לגובה ההכנסה.</li>\n                    </ul>\n                </div>\n                <div className=\"bg-white/50 p-6 rounded-xl border-2 border-brand-magenta flex flex-col shadow-xl transform hover:-translate-y-1.5 transition-all\">\n                    <h4 className=\"text-4xl font-bold text-brand-magenta mb-3\">עוסק מורשה</h4>\n                     <ul className=\"list-disc list-inside space-y-2 text-2xl flex-grow\">\n                        <li><strong>למי זה מתאים?</strong> לעסקים שהכנסתם השנתית צפויה לעבור את תקרת העוסק הפטור, או למקצועות חופשיים מסוימים.</li>\n                        <li><strong>מע\"מ:</strong> <strong>חייב</strong> להוסיף מע\"מ (18%) לכל עסקה ולהעביר אותו למדינה.</li>\n                        <li><strong>יתרון:</strong> ניתן לקזז את המע\"מ ששולם על הוצאות העסק (למשל, קניית מחשב או תשלום על פרסום).</li>\n                        <li><strong>דיווחים:</strong> התנהלות מורכבת יותר, הדורשת דיווחים חודשיים או דו-חודשיים למע\"מ.</li>\n                         <li><strong>תדמית:</strong> לעיתים נתפס כעסק \"גדול\" ורציני יותר, במיוחד בעבודה מול חברות אחרות.</li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"pt-8 border-t-2 border-brand-teal/30\">\n                <h3 className=\"text-4xl font-bold text-brand-dark-blue mb-4 text-center\">מיני-בוחן: איזה עוסק אני?</h3>\n                <div className=\"space-y-6\">\n                    {scenarios.map((scenario, index) => {\n                        const answer = answers[scenario.id];\n                        const bgColor = index === 0 ? 'bg-cyan-100/70' : 'bg-pink-100/70';\n                        return (\n                            <div key={scenario.id} className={`${bgColor} p-6 rounded-2xl shadow-lg`}>\n                                <p className=\"font-semibold text-3xl mb-4 text-center\"><span className=\"text-5xl\">{scenario.icon}</span> תיק לקוח: {scenario.case}</p>\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                    <button onClick={() => handleAnswer(scenario.id, 'עוסק פטור')} disabled={!!answer} className={`p-3 rounded-lg font-bold transition-colors text-2xl ${!answer ? 'bg-gray-200 hover:bg-gray-300' : (scenario.answer === 'עוסק פטור' ? 'bg-brand-teal text-white' : (answer.selected === 'עוסק פטור' ? 'bg-brand-magenta text-white' : 'bg-gray-200 opacity-60'))}`}>עוסק פטור</button>\n                                    <button onClick={() => handleAnswer(scenario.id, 'עוסק מורשה')} disabled={!!answer} className={`p-3 rounded-lg font-bold transition-colors text-2xl ${!answer ? 'bg-gray-200 hover:bg-gray-300' : (scenario.answer === 'עוסק מורשה' ? 'bg-brand-teal text-white' : (answer.selected === 'עוסק מורשה' ? 'bg-brand-magenta text-white' : 'bg-gray-200 opacity-60'))}`}>עוסק מורשה</button>\n                                </div>\n                                {answer && <p className=\"mt-3 text-xl text-center p-2 bg-yellow-100/70 rounded-md\">{scenario.explanation}</p>}\n                            </div>\n                        )\n                    })}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 4: Business Expenses (Invoice Version) ---\nconst RestaurantExercise: React.FC = () => {\n    const menu = {\n        'המבורגר': { price: 75, costs: { 'חומרי גלם': 20, 'שכירות וחשבונות': 15, 'משכורות': 18, 'שיווק': 5, 'מיסים וביטוחים': 5, 'פחת ציוד': 3 }, icon: '🍔' },\n        'פיצה': { price: 80, costs: { 'חומרי גלם': 18, 'שכירות וחשבונות': 15, 'משכורות': 20, 'שיווק': 6, 'מיסים וביטוחים': 7, 'פחת ציוד': 4 }, icon: '🍕' },\n        'סלט': { price: 60, costs: { 'חומרי גלם': 15, 'שכירות וחשבונות': 12, 'משכורות': 15, 'שיווק': 4, 'מיסים וביטוחים': 4, 'פחת ציוד': 2 }, icon: '🥗' }\n    };\n    const [selectedDish, setSelectedDish] = useState<keyof typeof menu>('המבורגר');\n    const dishData = menu[selectedDish];\n    const totalCosts = (Object.values(dishData.costs) as number[]).reduce((sum, cost) => sum + cost, 0);\n    const netProfit = dishData.price - totalCosts;\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-teal mb-2 text-center\">החשבון, בבקשה!</h3>\n            <p className=\"text-center text-3xl mb-6 text-brand-dark-blue/90\">בעל עסק לא \"לוקח הביתה\" את כל הכסף שהוא מקבל. בחרו מנה כדי לראות את פירוט החשבונית.</p>\n            <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-6\">\n                <div className=\"lg:col-span-2 bg-white/50 p-4 rounded-xl border border-white/40\">\n                    <h4 className=\"text-4xl font-bold text-brand-dark-blue mb-4 text-center\">תפריט</h4>\n                    {Object.entries(menu).map(([name, data]) => (\n                        <button key={name} onClick={() => setSelectedDish(name as keyof typeof menu)}\n                            className={`w-full text-right p-3 my-2 rounded-lg transition-colors ${selectedDish === name ? 'bg-brand-light-blue text-white shadow-lg' : 'bg-white/70 hover:bg-white'}`}>\n                            <span className=\"font-bold text-3xl\">{data.icon} {name}</span> - <span className=\"text-2xl\">{data.price} ₪</span>\n                        </button>\n                    ))}\n                </div>\n                <div className=\"lg:col-span-3 bg-white/80 p-6 rounded-2xl shadow-lg font-mono\">\n                    <h4 className=\"font-sans font-bold text-4xl text-center border-b-2 border-dashed border-gray-400 pb-2 mb-4\">חשבונית עבור: {selectedDish}</h4>\n                    <div className=\"space-y-2 text-3xl\">\n                        <div className=\"flex justify-between font-bold text-4xl mb-4\">\n                            <span>מחיר ללקוח:</span>\n                            <span>{dishData.price.toFixed(2)} ₪</span>\n                        </div>\n                        <p className=\"font-sans font-bold text-2xl text-gray-600\">פירוט עלויות:</p>\n                        {(Object.entries(dishData.costs) as [string, number][]).map(([name, value]) => (\n                            <div key={name} className=\"flex justify-between text-2xl text-red-600\"><span>- {name}</span><span>({value.toFixed(2)} ₪)</span></div>\n                        ))}\n                        <div className=\"flex justify-between font-bold border-t pt-2 mt-2 text-red-700\"><span>סה\"כ עלויות</span><span>({totalCosts.toFixed(2)} ₪)</span></div>\n\n                        <div className=\"flex justify-between font-bold text-4xl border-t-4 border-brand-dark-blue pt-4 mt-4 text-green-600\">\n                            <span>רווח נקי לבעל העסק:</span>\n                            <span>{netProfit.toFixed(2)} ₪</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 5: SWOT Analysis (Restyled) ---\nconst SwotPractice: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const categories: Record<string, { icon: string, style: string }> = {\n        'חוזקות': { icon: '👍', style: 'teal' },\n        'חולשות': { icon: '👎', style: 'magenta' },\n        'הזדמנויות': { icon: '💡', style: 'light-blue' },\n        'איומים': { icon: '⚠️', style: 'yellow' }\n    };\n    const initialItems = [\n        { name: 'מתכון מיץ סודי ומנצח', category: 'חוזקות' }, { name: 'תחרות מדוכני גלידה סמוכים', category: 'איומים' },\n        { name: 'יום גשום שיבריח לקוחות', category: 'איומים' }, { name: 'אין לי ניסיון קודם במכירות', category: 'חולשות' },\n        { name: 'החברים שלי יכולים לעזור', category: 'חוזקות' }, { name: 'טרנד של אוכל בריא', category: 'הזדמנויות' },\n        { name: 'תקציב התחלתי נמוך', category: 'חולשות' }, { name: 'החופש הגדול מביא הרבה תיירים', category: 'הזדמנויות' },\n    ];\n    const [unassigned, setUnassigned] = useState(initialItems.map(i => i.name));\n    const [assignments, setAssignments] = useState<Record<string, { name: string, isCorrect: boolean }[]>>({});\n    const [submitted, setSubmitted] = useState(false);\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, itemName: string) => e.dataTransfer.setData('text', itemName);\n    const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => e.preventDefault();\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, category: string) => {\n        e.preventDefault();\n        const itemName = e.dataTransfer.getData('text');\n        const item = initialItems.find(i => i.name === itemName);\n        if (item && unassigned.includes(itemName)) {\n            setUnassigned(prev => prev.filter(i => i !== itemName));\n            setAssignments(prev => ({ ...prev, [category]: [...(prev[category] || []), { name: itemName, isCorrect: item.category === category }] }));\n        }\n    };\n\n    const handleSubmit = () => {\n        setSubmitted(true);\n        const correctCount = (Object.values(assignments).flat() as { name: string, isCorrect: boolean }[]).filter(item => item.isCorrect).length;\n        if (correctCount / initialItems.length >= 0.8) { onComplete(); }\n    };\n    \n    const correctCount = (Object.values(assignments).flat() as { name: string, isCorrect: boolean }[]).filter(item => item.isCorrect).length;\n    const resultMessage = correctCount / initialItems.length >= 0.8 ? `כל הכבוד! ${correctCount}/${initialItems.length} תשובות נכונות. השלמתם!` : `עבודה טובה, אבל לא מספיק. ${correctCount}/${initialItems.length} תשובות נכונות. נסו שוב!`;\n\n    return (\n        <div className=\"bg-white/40 p-6 rounded-2xl\">\n            <h3 className=\"text-4xl font-bold text-center mb-2\">מודל SWOT: איך מנתחים רעיון עסקי?</h3>\n            <div className=\"text-right text-[1.65rem] mb-6 text-brand-dark-blue/90 leading-relaxed max-w-4xl mx-auto bg-white/50 p-6 rounded-xl\">\n                <p>מודל SWOT הוא כלי ניתוח אסטרטגי חיוני, המשמש עסקים ויזמים להערכת מצבם ולקבלת החלטות מושכלות. הניתוח מתבסס על ארבעה רכיבים מרכזיים, המתחלקים לגורמים פנימיים (שבשליטת העסק) וגורמים חיצוניים (השפעות הסביבה):</p>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-8 mt-4\">\n                    <div>\n                        <h5 className=\"font-bold text-brand-light-blue\">גורמים פנימיים:</h5>\n                        <ul className=\"list-disc list-inside space-y-2\">\n                            <li><strong className=\"font-semibold\">חוזקות (Strengths):</strong> היתרונות הפנימיים של העסק. מה מייחד אתכם? במה אתם טובים יותר מהמתחרים? (למשל: מוצר ייחודי, צוות מיומן).</li>\n                            <li><strong className=\"font-semibold\">חולשות (Weaknesses):</strong> החסרונות הפנימיים של העסק. מהן המגבלות שלכם? איפה אתם צריכים להשתפר? (למשל: חוסר בתקציב, ניסיון מועט).</li>\n                        </ul>\n                    </div>\n                    <div>\n                        <h5 className=\"font-bold text-brand-magenta\">גורמים חיצוניים:</h5>\n                        <ul className=\"list-disc list-inside space-y-2\">\n                            <li><strong className=\"font-semibold\">הזדמנויות (Opportunities):</strong> גורמים חיצוניים חיוביים שהעסק יכול לנצל. אילו טרנדים או שינויים בשוק יכולים לעזור לכם? (למשל: טכנולוגיה חדשה, צורך חדש בקרב לקוחות).</li>\n                            <li><strong className=\"font-semibold\">איומים (Threats):</strong> גורמים חיצוניים שליליים שעלולים לפגוע בעסק. מהם המכשולים והסיכונים בסביבה? (למשל: כניסת מתחרים חדשים, משבר כלכלי).</li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div className=\"text-center mb-4\">\n                 <a href=\"https://www.youtube.com/watch?v=gmm_g2i51oE\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center gap-2 bg-brand-magenta text-white font-bold py-2 px-4 rounded-lg text-xl\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                    מה זה מודל SWOT? (סרטון הסבר)\n                </a>\n            </div>\n            <p className=\"text-center text-[1.725rem] mb-2 font-bold\">הרעיון: <strong>פתיחת דוכן מיצים טבעיים בחוף הים.</strong></p>\n            <p className=\"text-center text-2xl mb-4\">גררו כל פתק לקטגוריה הנכונה.</p>\n            <div className=\"bg-brand-dark-blue p-4 rounded-xl mb-4 text-white\">\n                <h4 className=\"text-2xl font-bold text-center mb-2 text-yellow-300\">פתקים למיון:</h4>\n                <div className=\"flex flex-wrap justify-center gap-3 min-h-[50px]\">\n                    {unassigned.map(item => <div key={item} draggable onDragStart={e => handleDragStart(e, item)} className=\"p-3 rounded-xl bg-yellow-200 text-black shadow-md cursor-grab text-2xl\">{item}</div>)}\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {Object.entries(categories).map(([cat, { icon, style }]) => {\n                    const colors = {\n                        'teal': { bg: 'bg-brand-teal/10', border: 'border-brand-teal', text: 'text-brand-teal' },\n                        'magenta': { bg: 'bg-brand-magenta/10', border: 'border-brand-magenta', text: 'text-brand-magenta' },\n                        'light-blue': { bg: 'bg-brand-light-blue/10', border: 'border-brand-light-blue', text: 'text-brand-light-blue' },\n                        'yellow': { bg: 'bg-yellow-400/10', border: 'border-yellow-500', text: 'text-yellow-600' },\n                    }[style] || { bg: 'bg-gray-100', border: 'border-gray-400', text: 'text-gray-700' };\n\n                    return (\n                        <div key={cat} onDrop={e => handleDrop(e, cat)} onDragOver={handleDragOver} className={`p-4 rounded-lg min-h-[200px] border-2 border-dashed shadow-lg ${colors.bg} ${colors.border}`}>\n                            <h4 className={`text-center font-bold text-3xl ${colors.text} pb-2 mb-2`}>{icon} {cat}</h4>\n                            <div className=\"space-y-2\">\n                                {(assignments[cat] || []).map(item => <div key={item.name} className={`p-2 rounded-lg text-center text-white font-semibold shadow-sm text-2xl ${submitted ? (item.isCorrect ? 'bg-brand-teal' : 'bg-brand-magenta') : 'bg-white text-brand-dark-blue'}`}>{item.name}</div>)}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            {unassigned.length === 0 && !submitted && <button onClick={handleSubmit} className=\"mt-6 w-full bg-brand-magenta text-white font-bold p-3 rounded-lg text-2xl\">בדיקת תשובות</button>}\n            {submitted && <p className=\"mt-6 p-3 bg-white/40 rounded-lg font-bold text-center text-2xl\">{resultMessage}</p>}\n        </div>\n    );\n};\n\nconst SelfEmployedModule: React.FC<SelfEmployedModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [completedSteps, setCompletedSteps] = useState<boolean[]>([false, false, false, false]);\n\n    const handleStepCompletion = (stepIndex: number) => {\n        setCompletedSteps(prev => {\n            const newCompleted = [...prev];\n            newCompleted[stepIndex] = true;\n            return newCompleted;\n        });\n    };\n\n    return (\n        <ModuleView title=\"המסלול לקריירה: שכיר או עצמאי?\" onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-12 h-12 rounded-full flex items-center justify-center border-2 text-2xl ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-lg text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            {currentStep === 0 && <DifferencesStep />}\n            {currentStep === 1 && <SortingGameStep onGameComplete={() => handleStepCompletion(1)} />}\n            {currentStep === 2 && <SelfEmployedTypes onQuizComplete={() => handleStepCompletion(2)} />}\n            {currentStep === 3 && <RestaurantExercise />}\n            {currentStep === 4 && <SwotPractice onComplete={onComplete} />}\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default SelfEmployedModule;","import React from 'react';\n\ninterface ProgramCardProps {\n  title: string;\n  audience: string;\n  topics: string[];\n  color: 'teal' | 'light-blue' | 'magenta' | 'gray';\n  isComingSoon: boolean;\n  onClick: () => void;\n}\n\nconst colorSchemes = {\n    teal: {\n        bg: 'bg-brand-teal',\n        hoverBg: 'hover:bg-teal-500',\n        border: 'border-brand-teal',\n        shadow: 'hover:shadow-brand-teal/20',\n        text: 'text-brand-teal'\n    },\n    'light-blue': {\n        bg: 'bg-brand-light-blue',\n        hoverBg: 'hover:bg-cyan-500',\n        border: 'border-brand-light-blue',\n        shadow: 'hover:shadow-brand-light-blue/20',\n        text: 'text-brand-light-blue'\n    },\n    magenta: {\n        bg: 'bg-brand-magenta',\n        hoverBg: 'hover:bg-pink-700',\n        border: 'border-brand-magenta',\n        shadow: 'hover:shadow-brand-magenta/20',\n        text: 'text-brand-magenta'\n    },\n    gray: {\n        bg: 'bg-gray-400',\n        hoverBg: 'bg-gray-400',\n        border: 'border-gray-300',\n        shadow: '',\n        text: 'text-gray-500'\n    }\n};\n\nconst ProgramCard: React.FC<ProgramCardProps> = ({ title, audience, topics, color, isComingSoon, onClick }) => {\n    const scheme = colorSchemes[color] || colorSchemes.gray;\n    const cardClasses = `\n        bg-white/60 backdrop-blur-lg p-6 rounded-3xl border-2\n        transition-all duration-300 flex flex-col items-start shadow-xl\n        h-full relative\n        ${isComingSoon ? scheme.border : `${scheme.border} ${scheme.shadow} transform hover:-translate-y-1.5 cursor-pointer`}\n    `;\n    \n    return (\n        <div onClick={isComingSoon ? undefined : onClick} className={cardClasses}>\n            {isComingSoon && <div className=\"absolute top-4 left-4 bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full z-10\">בקרוב</div>}\n            \n            <h3 className={`text-3xl md:text-4xl font-bold font-display ${isComingSoon ? 'text-gray-500' : scheme.text}`}>{title}</h3>\n            <p className={`font-semibold mb-4 text-lg ${isComingSoon ? 'text-gray-400' : 'text-brand-dark-blue/80'}`}>{audience}</p>\n            \n            <ul className=\"list-disc list-inside space-y-1 text-brand-dark-blue/90 flex-grow mb-6 text-lg sm:text-xl\">\n                {topics.map(topic => <li key={topic}>{topic}</li>)}\n            </ul>\n            \n            <button\n                disabled={isComingSoon}\n                className={`w-full mt-auto font-bold py-3 px-6 rounded-lg text-xl text-white transition-colors ${\n                    isComingSoon \n                    ? 'bg-gray-400 cursor-not-allowed' \n                    : `${scheme.bg} ${scheme.hoverBg}`\n                }`}\n            >\n                {isComingSoon ? 'בקרוב...' : 'התחלת למידה'}\n            </button>\n        </div>\n    );\n};\n\nexport default ProgramCard;","import React from 'react';\nimport ProgramCard from './ProgramCard';\nimport Header from './Header';\n\ninterface LandingPageProps {\n  onSelectProgram: (programId: string) => void;\n  onBack: () => void;\n}\n\ninterface ProgramData {\n  id: string;\n  title: string;\n  audience: string;\n  color: 'teal' | 'light-blue' | 'magenta' | 'gray';\n  topics: string[];\n  isComingSoon: boolean;\n}\n\nconst programs: { [key: string]: ProgramData } = {\n    hachamBakis: {\n        id: 'hacham-bakis',\n        title: 'תוכנית \"חכם בכיס\"',\n        audience: 'תוכנית הדגל לכיתות ט\\'-י\"א',\n        color: 'teal',\n        topics: [\n            'בניית תקציב (\"מונופול החיים\")',\n            'פענוח תלוש שכר וזכויות עובדים',\n            'התנהלות כלכלית נכונה (מינוס וחיסכון)',\n            'הכרת עולם ההשקעות ושוק ההון',\n            'השוואה בין שכירים לעצמאיים',\n        ],\n        isComingSoon: false\n    },\n    maBakis: {\n        id: 'ma-bakis',\n        title: 'תוכנית \"מה בכיס\"',\n        audience: 'תוכנית לכיתות ה\\'-ח\\'',\n        color: 'light-blue',\n        topics: [\n            'היכרות עם עולם הכסף',\n            'צרכנות נבונה וניהול תקציב',\n            'חיסכון והצבת מטרות',\n            'הכרת מונופולים ומותגים',\n            'יזמות וחשיבה עסקית',\n        ],\n        isComingSoon: false\n    },\n    kisonim: {\n        id: 'kisonim',\n        title: 'תוכנית \"כיסונים פיננסים\"',\n        audience: 'תוכנית לכיתות א\\'-ד\\'',\n        color: 'magenta',\n        topics: [\n            'מהו כסף ואיך משתמשים בו?',\n            'הבחנה בין צרכים לרצונות',\n            'חשיבות החיסכון ודחיית סיפוקים',\n            'קבלת החלטות פיננסיות פשוטות',\n            'מושגי יסוד: עבודה, תגמול וערך',\n        ],\n        isComingSoon: false\n    }\n};\n\n\nconst LandingPage: React.FC<LandingPageProps> = ({ onSelectProgram, onBack }) => {\n  return (\n    <div className=\"animate-fade-in\">\n        <button \n            onClick={onBack}\n            className=\"mb-8 w-full sm:w-auto bg-brand-magenta hover:bg-pink-700 text-white font-bold py-2.5 sm:py-3 px-5 sm:px-8 text-base sm:text-xl rounded-full flex items-center justify-center transition-colors duration-300\"\n        >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n            חזרה לבחירת משתמש\n        </button>\n\n        <Header />\n         <div className=\"text-center my-8 max-w-3xl mx-auto\">\n            <h2 className=\"text-2xl sm:text-4xl font-bold font-display text-brand-dark-blue mb-2\">ברוכים הבאים למרחב הלמידה החוויתי של \"חכם בכיס\"</h2>\n            <p className=\"text-lg sm:text-2xl text-brand-dark-blue/90\">\n                ביחרו את התוכנית שלם והתחילו במסע הלמידה\n            </p>\n        </div>\n        <main className=\"mt-12 grid grid-cols-1 lg:grid-cols-3 gap-8 items-stretch\">\n            <ProgramCard \n                {...programs.hachamBakis}\n                onClick={() => onSelectProgram(programs.hachamBakis.id)}\n            />\n            <ProgramCard\n                {...programs.maBakis}\n                onClick={() => onSelectProgram(programs.maBakis.id)}\n            />\n            <ProgramCard\n                {...programs.kisonim}\n                onClick={() => onSelectProgram(programs.kisonim.id)}\n            />\n        </main>\n    </div>\n  );\n};\n\nexport default LandingPage;","import React from 'react';\nimport Header from './Header';\nimport { PodiumIcon, RightsIcon, HeartIcon } from './icons/Icons'; \n\ninterface UserTypeCardProps {\n  title: string;\n  description: string;\n  icon: React.ComponentType<{ className?: string }>;\n  onClick?: () => void;\n  isComingSoon: boolean;\n}\n\nconst UserTypeCard: React.FC<UserTypeCardProps> = ({ title, description, icon: Icon, onClick, isComingSoon }) => {\n    const cardClasses = `\n        relative text-center bg-white/60 backdrop-blur-lg p-6 sm:p-8 rounded-4xl border-2\n        transition-all duration-300 flex flex-col items-center justify-center shadow-xl\n        h-full\n        ${isComingSoon \n            ? 'border-gray-300' \n            : 'border-brand-teal hover:shadow-brand-teal/20 transform hover:-translate-y-2 cursor-pointer'\n        }\n    `;\n\n    return (\n        <div onClick={isComingSoon ? undefined : onClick} className={cardClasses}>\n            {isComingSoon && <div className=\"absolute top-4 right-4 bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full z-10\">בקרוב</div>}\n            \n            <div className={`p-4 rounded-full mb-4 shadow-md ${isComingSoon ? 'bg-gray-300' : 'bg-brand-teal shadow-brand-teal/30'}`}>\n                <Icon className=\"w-12 h-12 text-white\" />\n            </div>\n\n            <h3 className={`text-3xl sm:text-5xl font-bold font-display ${isComingSoon ? 'text-gray-500' : 'text-brand-dark-blue'}`}>{title}</h3>\n            <p className={`text-lg sm:text-2xl mt-2 ${isComingSoon ? 'text-gray-400' : 'text-brand-dark-blue/80'}`}>{description}</p>\n        </div>\n    );\n};\n\ninterface MainLandingPageProps {\n  onSelectStudents: () => void;\n  onSelectInstructors: () => void;\n  onSelectParents: () => void;\n}\n\nconst MainLandingPage: React.FC<MainLandingPageProps> = ({ onSelectStudents, onSelectInstructors, onSelectParents }) => {\n  return (\n    <div className=\"animate-fade-in\">\n        <Header />\n        <main className=\"mt-12 sm:mt-16 grid grid-cols-1 lg:grid-cols-3 gap-8 items-stretch md:min-h-[50vh]\">\n            <UserTypeCard \n                title=\"תלמידים\"\n                description=\"מרחב למידה חוויתי לתלמידי התוכנית\"\n                icon={RightsIcon}\n                onClick={onSelectStudents}\n                isComingSoon={false}\n            />\n            <UserTypeCard \n                title=\"מדריכים\"\n                description=\"מרחב ניהול הדרכה ומאגר עזרים\"\n                icon={PodiumIcon}\n                onClick={onSelectInstructors}\n                isComingSoon={false}\n            />\n            <UserTypeCard \n                title=\"הורים\"\n                description=\"מרחב למידה ומעקב אחר תהליכי הלמידה\"\n                icon={HeartIcon}\n                onClick={onSelectParents}\n                isComingSoon={false}\n            />\n        </main>\n    </div>\n  );\n};\n\nexport default MainLandingPage;","import React from 'react';\nimport Header from './Header';\nimport { SalaryIcon, BusinessIcon, PiggyBankIcon, PodiumIcon } from './icons/Icons';\n\ninterface InstructorsPageProps {\n  onBack: () => void;\n}\n\ninterface ActionCardProps {\n    title: string;\n    description: string;\n    icon: React.ComponentType<{ className?: string }>;\n}\n\nconst ActionCard: React.FC<ActionCardProps> = ({ title, description, icon: Icon }) => (\n    <div className=\"relative text-center bg-white/60 backdrop-blur-lg p-8 rounded-4xl border-2 border-gray-300 flex flex-col items-center justify-center shadow-xl h-full\">\n        <div className=\"absolute top-4 right-4 bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full z-10\">בקרוב</div>\n        <div className=\"p-4 rounded-full mb-4 shadow-md bg-gray-300\">\n            <Icon className=\"w-12 h-12 text-white\" />\n        </div>\n        <h3 className=\"text-4xl sm:text-5xl font-bold font-display text-gray-500\">{title}</h3>\n        <p className=\"text-xl sm:text-2xl mt-2 text-gray-400\">{description}</p>\n    </div>\n);\n\nconst InstructorsPage: React.FC<InstructorsPageProps> = ({ onBack }) => {\n  return (\n    <div className=\"animate-fade-in container mx-auto px-4 py-8\">\n       <button \n        onClick={onBack}\n        className=\"mb-8 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-8 text-xl rounded-full flex items-center transition-colors duration-300\"\n      >\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        חזרה לבחירת משתמש\n      </button>\n\n      <Header />\n      <div className=\"text-center my-8 max-w-3xl mx-auto\">\n        <h2 className=\"text-4xl sm:text-5xl font-bold font-display text-brand-dark-blue mb-2\">מרחב מדריכים</h2>\n        <p className=\"text-2xl sm:text-3xl text-brand-dark-blue/90\">\n            כאן תוכלו למצוא את כל הכלים הדרושים לכם להדרכה מוצלחת.\n        </p>\n      </div>\n      <main className=\"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch\">\n        <ActionCard \n            title=\"תוכנית 'חכם בכיס'\"\n            description=\"גישה למערכי שיעור, עזרים וסרטונים\"\n            icon={SalaryIcon}\n        />\n        <ActionCard \n            title=\"תוכנית 'מה בכיס'\"\n            description=\"גישה למערכי שיעור, עזרים וסרטונים\"\n            icon={BusinessIcon}\n        />\n        <ActionCard \n            title=\"תוכנית 'כיסונים פיננסים'\"\n            description=\"גישה למערכי שיעור, עזרים וסרטונים\"\n            icon={PiggyBankIcon}\n        />\n        <ActionCard \n            title=\"מעקב אחר קבוצות למידה\"\n            description=\"ניהול התקדמות התלמידים וצפייה בתוצרים\"\n            icon={PodiumIcon}\n        />\n      </main>\n    </div>\n  );\n};\n\nexport default InstructorsPage;","import React from 'react';\nimport { BookOpenIcon } from '../icons/Icons';\n\ninterface GuideSectionProps {\n    title: string;\n    description: string;\n    icon: React.ComponentType<{ className?: string }>;\n}\n\nconst GuideSection: React.FC<GuideSectionProps> = ({ title, description, icon: Icon }) => (\n    <div className=\"relative text-center bg-white/60 backdrop-blur-lg p-8 rounded-4xl border-2 border-gray-300 flex flex-col items-center justify-center shadow-xl h-full\">\n        <div className=\"absolute top-4 right-4 bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full z-10\">בקרוב</div>\n        <div className=\"p-4 rounded-full mb-4 shadow-md bg-gray-300\">\n            <Icon className=\"w-12 h-12 text-white\" />\n        </div>\n        <h3 className=\"text-4xl sm:text-5xl font-bold font-display text-gray-500\">{title}</h3>\n        <p className=\"text-xl sm:text-2xl mt-2 text-gray-400\">{description}</p>\n    </div>\n);\n\ninterface FinancialParentGuideProps {\n    onBack: () => void;\n}\n\nconst FinancialParentGuide: React.FC<FinancialParentGuideProps> = ({ onBack }) => {\n    return (\n        <div className=\"animate-fade-in\">\n            <button \n                onClick={onBack}\n                className=\"mb-8 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-8 text-xl rounded-full flex items-center transition-colors duration-300\"\n            >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n                </svg>\n                חזרה למרחב הורים\n            </button>\n\n            <div className=\"text-center my-8 max-w-3xl mx-auto\">\n                <h2 className=\"text-4xl sm:text-5xl font-bold font-display text-brand-dark-blue mb-2\">'הורה פיננסי'</h2>\n                <p className=\"text-2xl sm:text-3xl text-brand-dark-blue/90\">\n                    עזרים, טיפים וקישורים לחינוך פיננסי בבית.\n                </p>\n            </div>\n\n            <main className=\"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch\">\n                <GuideSection \n                    title=\"המדריך לחינוך פיננסי ביתי\"\n                    description=\"מאמרים, סרטונים ופעילויות משותפות לביצוע בבית.\"\n                    icon={BookOpenIcon}\n                />\n            </main>\n        </div>\n    );\n};\n\nexport default FinancialParentGuide;","import React, { useState } from 'react';\nimport Header from './Header';\nimport { ResearchIcon, LinksIcon } from './icons/Icons';\nimport FinancialParentGuide from './parents/FinancialParentGuide';\n\ninterface ParentsPageProps {\n  onBack: () => void;\n}\n\ninterface ActionCardProps {\n    title: string;\n    description: string;\n    icon: React.ComponentType<{ className?: string }>;\n    onClick?: () => void;\n    isComingSoon: boolean;\n}\n\nconst ActionCard: React.FC<ActionCardProps> = ({ title, description, icon: Icon, onClick, isComingSoon }) => {\n    const cardClasses = `\n        relative text-center bg-white/60 backdrop-blur-lg p-8 rounded-4xl border-2\n        transition-all duration-300 flex flex-col items-center justify-center shadow-xl h-full\n        ${isComingSoon \n            ? 'border-gray-300' \n            : 'border-brand-teal hover:shadow-brand-teal/20 transform hover:-translate-y-2 cursor-pointer'\n        }\n    `;\n\n    const iconBgClass = isComingSoon ? 'bg-gray-300' : 'bg-brand-teal shadow-brand-teal/30';\n    const titleClass = isComingSoon ? 'text-gray-500' : 'text-brand-dark-blue';\n    const descriptionClass = isComingSoon ? 'text-gray-400' : 'text-brand-dark-blue/80';\n\n    return (\n        <div onClick={isComingSoon ? undefined : onClick} className={cardClasses}>\n            {isComingSoon && <div className=\"absolute top-4 right-4 bg-gray-500 text-white text-xs font-bold px-3 py-1 rounded-full z-10\">בקרוב</div>}\n            <div className={`p-4 rounded-full mb-4 shadow-md ${iconBgClass}`}>\n                <Icon className=\"w-12 h-12 text-white\" />\n            </div>\n            <h3 className={`text-4xl sm:text-5xl font-bold font-display ${titleClass}`}>{title}</h3>\n            <p className={`text-xl sm:text-2xl mt-2 ${descriptionClass}`}>{description}</p>\n        </div>\n    );\n};\n\nconst ParentsPage: React.FC<ParentsPageProps> = ({ onBack }) => {\n  const [view, setView] = useState<'main' | 'guide'>('main');\n\n  if (view === 'guide') {\n    return <FinancialParentGuide onBack={() => setView('main')} />;\n  }\n\n  return (\n    <div className=\"animate-fade-in container mx-auto px-4 py-8\">\n       <button \n        onClick={onBack}\n        className=\"mb-8 bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-8 text-xl rounded-full flex items-center transition-colors duration-300\"\n      >\n         <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        חזרה לבחירת משתמש\n      </button>\n\n      <Header />\n      <div className=\"text-center my-8 max-w-3xl mx-auto\">\n        <h2 className=\"text-4xl sm:text-5xl font-bold font-display text-brand-dark-blue mb-2\">מרחב הורים</h2>\n        <p className=\"text-2xl sm:text-3xl text-brand-dark-blue/90\">\n            כלים ומידע שיעזרו לכם להמשיך את החינוך הפיננסי בבית.\n        </p>\n      </div>\n      <main className=\"mt-12 grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch\">\n        <ActionCard \n            title=\"תהליך הלמידה של הילד/ה שלי\"\n            description=\"מעקב אחר התקדמות הילדים וצפייה בתוצרים\"\n            icon={ResearchIcon}\n            isComingSoon={true}\n        />\n        <ActionCard \n            title=\"'הורה פיננסי'\"\n            description=\"עזרים, טיפים וקישורים לחינוך פיננסי בבית\"\n            icon={LinksIcon}\n            isComingSoon={false}\n            onClick={() => setView('guide')}\n        />\n      </main>\n    </div>\n  );\n};\n\nexport default ParentsPage;","import React, { useState } from 'react';\nimport Header from './Header';\n\ninterface LoginPageProps {\n    userType: string;\n    description: string;\n    icon: React.ComponentType<{ className?: string }>;\n    onLogin: (grade?: string) => void;\n    onBack: () => void;\n    showGradeSelector?: boolean;\n}\n\nconst LoginPage: React.FC<LoginPageProps> = ({ userType, description, icon: Icon, onLogin, onBack, showGradeSelector = false }) => {\n    const [selectedGrade, setSelectedGrade] = useState('');\n    const grades = ['א', 'ב', 'ג', 'ד', 'ה', 'ו', 'ז', 'ח', 'ט', 'י', 'י\"א', 'י\"ב'];\n\n    const handleGuestLogin = () => {\n        if (showGradeSelector) {\n            // If a grade is selected, log in with it. Otherwise, log in without it (will lead to program selection).\n            onLogin(selectedGrade || undefined);\n        } else {\n            onLogin();\n        }\n    };\n\n    return (\n        <div className=\"animate-fade-in\">\n            <button \n                onClick={onBack}\n                className=\"mb-8 w-full sm:w-auto bg-brand-magenta hover:bg-pink-700 text-white font-bold py-2.5 sm:py-3 px-5 sm:px-8 text-base sm:text-xl rounded-full flex items-center justify-center transition-colors duration-300\"\n            >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n                </svg>\n                חזרה\n            </button>\n            <Header />\n\n            <div className=\"max-w-md mx-auto mt-10 sm:mt-12 bg-white/60 backdrop-blur-lg p-5 sm:p-8 rounded-4xl border-2 border-brand-teal shadow-2xl\">\n                <div className=\"flex flex-col items-center text-center\">\n                    <div className=\"p-4 rounded-full mb-4 shadow-md bg-brand-teal shadow-brand-teal/30\">\n                        <Icon className=\"w-12 h-12 text-white\" />\n                    </div>\n                    <h2 className=\"text-3xl sm:text-5xl font-bold font-display text-brand-dark-blue\">כניסת {userType}</h2>\n                    <p className=\"mt-2 text-lg sm:text-2xl text-brand-dark-blue/80\">{description}</p>\n                </div>\n\n                <div className=\"mt-8 space-y-4\">\n                    {showGradeSelector && (\n                         <div>\n                            <label className=\"block text-xl font-medium text-brand-dark-blue\">כיתה</label>\n                            <select\n                                value={selectedGrade}\n                                onChange={(e) => setSelectedGrade(e.target.value)}\n                                className=\"w-full mt-1 bg-white p-3 sm:p-4 rounded-lg border-2 border-gray-300 focus:border-brand-teal focus:ring-brand-teal transition text-lg sm:text-xl\"\n                            >\n                                <option value=\"\" disabled>-- בחרו את כיתתכם --</option>\n                                {grades.map(g => <option key={g} value={g}>{g}</option>)}\n                            </select>\n                        </div>\n                    )}\n                    <div>\n                        <label className=\"block text-xl font-medium text-brand-dark-blue\">שם משתמש</label>\n                        <input\n                            type=\"text\"\n                            placeholder=\"הזינו שם משתמש\"\n                            className=\"w-full mt-1 bg-white p-3 sm:p-4 rounded-lg border-2 border-gray-300 focus:border-brand-teal focus:ring-brand-teal transition text-lg sm:text-xl\"\n                        />\n                    </div>\n                    <div>\n                        <label className=\"block text-xl font-medium text-brand-dark-blue\">סיסמה</label>\n                        <input\n                            type=\"password\"\n                            placeholder=\"הזינו סיסמה\"\n                            className=\"w-full mt-1 bg-white p-3 sm:p-4 rounded-lg border-2 border-gray-300 focus:border-brand-teal focus:ring-brand-teal transition text-lg sm:text-xl\"\n                        />\n                    </div>\n                </div>\n\n                <div className=\"mt-8\">\n                     <button\n                        disabled={showGradeSelector && !selectedGrade}\n                        onClick={() => onLogin(selectedGrade)}\n                        className=\"w-full bg-brand-teal hover:bg-teal-500 text-white font-bold py-3.5 sm:py-4 px-6 rounded-lg text-xl sm:text-2xl transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                    >\n                        כניסה\n                    </button>\n                    <button\n                        onClick={handleGuestLogin}\n                        className=\"w-full mt-3 bg-transparent hover:bg-brand-light-blue/20 text-brand-light-blue font-bold py-3.5 sm:py-4 px-6 rounded-lg text-xl sm:text-2xl border-2 border-brand-light-blue transition-colors disabled:bg-gray-300/50 disabled:border-gray-400 disabled:text-gray-500 disabled:cursor-not-allowed\"\n                    >\n                        כניסת אורח\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default LoginPage;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface StoryOfMoneyModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"מהו סחר חליפין?\", \"אתגר הברטר\", \"מבוך הזהב\", \"ההיסטוריה של הכסף\", \"בוחן ידע\"];\n\n// Step 1: Barter Introduction\nconst BarterIntroduction: React.FC = () => (\n    <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in space-y-6\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4 text-center\">העולם שלפני הכסף: סחר חליפין</h3>\n        <p className=\"text-2xl text-center text-brand-dark-blue/90\">\n            פעם, לפני שהיו מטבעות ושטרות, כדי להשיג משהו הייתם צריכים לתת משהו אחר בתמורה. לשיטה הזו קוראים <strong>\"ברטר\"</strong>.\n        </p>\n        <div className=\"flex items-center justify-around gap-4 my-8 p-6 bg-white/50 rounded-2xl shadow-inner w-full max-w-3xl mx-auto\">\n            <div className=\"text-center\">\n                <div className=\"text-9xl mb-2\">👨‍🌾</div>\n                <p className=\"font-bold text-2xl bg-white/70 px-3 py-1 rounded-full\">חקלאי עם תפוח</p>\n            </div>\n            <div className=\"flex flex-col items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-20 w-20 text-brand-light-blue\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" />\n                </svg>\n            </div>\n            <div className=\"text-center\">\n                <div className=\"text-9xl mb-2\">🎣</div>\n                <p className=\"font-bold text-2xl bg-white/70 px-3 py-1 rounded-full\">דייג עם דג</p>\n            </div>\n        </div>\n        <p className=\"text-3xl font-bold text-brand-dark-blue/90 text-center bg-white/40 p-4 rounded-xl\">\n           הבעיה? היה צריך \"צירוף מקרים כפול\" - למצוא מישהו שגם רוצה את מה שיש לכם וגם יש לו את מה שאתם צריכים.\n        </p>\n    </div>\n);\n\n\n// Step 2: Barter Game\nconst BarterGame: React.FC = () => {\n    const traders = [\n        { name: 'דייג', icon: '🐟', wants: '🔱', gives: '🐟' },\n        { name: 'חוטב עצים', icon: '🌳', wants: '🐟', gives: '🌳' },\n        { name: 'אופה', icon: '🍞', wants: '🌳', gives: '🍞' },\n        { name: 'אורגת', icon: '🧣', wants: '🍞', gives: '🧣' },\n        { name: 'חקלאי', icon: '🍎', wants: '🧣', gives: '🍎' },\n        { name: 'קדר', icon: '🏺', wants: '🍎', gives: '🏺' }\n    ];\n    \n    const startItem = { name: 'חנית', icon: '🔱' };\n    const goalItem = { name: 'כד', icon: '🏺' };\n\n    const [inventory, setInventory] = useState<{name:string, icon:string}[]>([startItem]);\n    const [selectedItem, setSelectedItem] = useState<{name:string, icon:string} | null>(null);\n    const [message, setMessage] = useState('');\n    const hasWon = inventory.some(item => item.icon === goalItem.icon);\n\n    const handleTrade = (trader: typeof traders[0]) => {\n        if (!selectedItem) {\n            setMessage('בחר פריט מהתיק שלך קודם!');\n            return;\n        }\n\n        if (selectedItem.icon === trader.wants) {\n            const newItem = traders.find(t => t.gives === trader.gives);\n            if (newItem) {\n                setInventory(prev => [...prev.filter(i => i.name !== selectedItem.name), {name: newItem.name, icon: newItem.gives}]);\n                setMessage(`החלפת ${selectedItem.name} ב${newItem.name}!`);\n                setSelectedItem(null);\n            }\n        } else {\n            setMessage(`הסוחר הזה לא רוצה ${selectedItem.name}... הוא רוצה ${trader.wants}`);\n        }\n    };\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">אתגר הברטר</h3>\n             <div className=\"bg-white/50 p-4 rounded-lg text-center mb-6 max-w-3xl mx-auto border-2 border-brand-teal/50\">\n                <p className=\"font-bold text-3xl mb-2\">📜 המשימה שלכם:</p>\n                <p className=\"text-2xl\">התחלתם עם <strong>{startItem.name} {startItem.icon}</strong>. עליכם לבצע סדרת החלפות עם הסוחרים בשוק כדי להשיג <strong>{goalItem.name} {goalItem.icon}</strong>.</p>\n                <p className=\"font-bold text-2xl mt-4\">איך משחקים?</p>\n                <ol className=\"list-decimal list-inside text-left mx-auto max-w-md text-xl\">\n                    <li>לחצו על פריט מהתיק שלכם כדי לבחור בו.</li>\n                    <li>לחצו על הסוחר שאיתו תרצו לבצע החלפה.</li>\n                    <li>כל סוחר רוצה פריט אחר! בדקו מה כל אחד רוצה.</li>\n                </ol>\n            </div>\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                <div>\n                    <h4 className=\"font-bold text-3xl mb-4 text-center\">הסוחרים בשוק:</h4>\n                    <div className=\"grid grid-cols-3 gap-6\">\n                        {traders.map(trader => (\n                            <div key={trader.name} onClick={() => handleTrade(trader)} className=\"text-center p-4 bg-white/70 rounded-2xl cursor-pointer hover:bg-white transform hover:scale-105 transition-transform shadow-lg border border-white/50\">\n                                <span className=\"text-8xl\">{trader.icon}</span>\n                                <p className=\"font-bold text-2xl mt-2\">{trader.name}</p>\n                                <p className=\"font-bold text-xl mt-2 bg-gray-200/70 p-1 rounded-md\">רוצה: <span className=\"text-3xl\">{trader.wants}</span></p>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <div>\n                    <h4 className=\"font-bold text-3xl mb-4 flex items-center gap-2\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-yellow-800\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                            <path d=\"M5 4a2 2 0 012-2h6a2 2 0 012 2v2h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V7a1 1 0 011-1h2V4zm2 0h6V3a1 1 0 00-1-1H8a1 1 0 00-1 1v1z\" />\n                        </svg>\n                        התיק שלך:\n                    </h4>\n                     <div className=\"flex gap-4 p-4 bg-yellow-800/20 border-2 border-yellow-800/50 rounded-2xl min-h-[160px] flex-wrap\">\n                        {inventory.map(item => (\n                            <div key={item.name} onClick={() => setSelectedItem(item)}\n                                className={`p-4 rounded-2xl cursor-pointer transition-all ${selectedItem?.name === item.name ? 'bg-brand-light-blue ring-4 ring-brand-teal' : 'bg-white/80'}`}>\n                                <span className=\"text-6xl\">{item.icon}</span>\n                                <p className=\"font-bold text-center text-lg\">{item.name}</p>\n                            </div>\n                        ))}\n                    </div>\n                     {message && <p className=\"text-center font-bold mt-6 text-2xl p-3 bg-white/50 rounded-lg\">{message}</p>}\n                    {hasWon && <p className=\"text-center font-bold mt-4 text-3xl text-green-600 animate-bounce\">כל הכבוד! הצלחתם במשימה!</p>}\n                </div>\n            </div>\n           \n        </div>\n    )\n};\n\n\n// Step 3: Maze Game\nconst MazeGame: React.FC = () => {\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\n    const [message, setMessage] = useState('השתמשו במקשי החצים כדי לזוז. אספו את כל 8 המטבעות!');\n\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        const cellSize = 30;\n        const maze = [\n            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n            [1, 0, 0, 2, 1, 0, 1, 2, 0, 0, 1, 0, 2, 0, 1],\n            [1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1],\n            [1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1],\n            [1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1],\n            [1, 0, 0, 0, 1, 0, 0, 2, 0, 0, 1, 0, 0, 0, 1],\n            [1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1],\n            [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1],\n            [1, 0, 1, 1, 1, 0, 1, 2, 1, 1, 1, 0, 1, 1, 1],\n            [1, 2, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0, 0, 0, 1],\n            [1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 3, 1],\n            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n        ];\n        let player = { x: 1, y: 1 };\n        let coins = 8;\n        \n        canvas.width = maze[0].length * cellSize;\n        canvas.height = maze.length * cellSize;\n\n        const draw = () => {\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            for (let y = 0; y < maze.length; y++) {\n                for (let x = 0; x < maze[y].length; x++) {\n                    if (maze[y][x] === 1) { // Wall\n                        ctx.fillStyle = '#1b2550';\n                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);\n                    } else if (maze[y][x] === 2) { // Coin\n                        ctx.fillStyle = 'gold';\n                        ctx.beginPath();\n                        ctx.arc(x * cellSize + cellSize / 2, y * cellSize + cellSize / 2, cellSize / 3, 0, 2 * Math.PI);\n                        ctx.fill();\n                    } else if (maze[y][x] === 3) { // Exit\n                        ctx.fillStyle = '#00b1a6';\n                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);\n                    }\n                }\n            }\n             // Player\n            ctx.fillStyle = '#d52963';\n            ctx.fillRect(player.x * cellSize + 5, player.y * cellSize + 5, cellSize - 10, cellSize - 10);\n        };\n\n        const handleKeyDown = (e: KeyboardEvent) => {\n            let newX = player.x;\n            let newY = player.y;\n            if (e.key === 'ArrowUp') newY--;\n            if (e.key === 'ArrowDown') newY++;\n            if (e.key === 'ArrowLeft') newX--;\n            if (e.key === 'ArrowRight') newX++;\n\n            if (maze[newY]?.[newX] !== 1) {\n                player = { x: newX, y: newY };\n                if (maze[newY][newX] === 2) {\n                    maze[newY][newX] = 0;\n                    coins--;\n                    setMessage(`נשארו ${coins} מטבעות!`);\n                }\n                if (maze[newY][newX] === 3) {\n                    if (coins === 0) {\n                        setMessage('כל הכבוד! הגעת ליציאה והוכחת שזהב הוא אמצעי חליפין טוב!');\n                        window.removeEventListener('keydown', handleKeyDown);\n                    } else {\n                        setMessage(`אתה צריך לאסוף עוד ${coins} מטבעות לפני שתוכל לצאת!`);\n                    }\n                }\n                draw();\n            }\n        };\n\n        draw();\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, []);\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl text-center\">\n            <h3 className=\"text-4xl font-bold mb-4\">מבוך הזהב</h3>\n            <p className=\"mb-4 text-xl\">כדי לפתור את בעיית הברטר, אנשים התחילו להשתמש במתכות יקרות כמו זהב. זהב הוא נדיר, ניתן לחלוקה, וכולם רוצים אותו! </p>\n            <canvas ref={canvasRef} className=\"bg-white/50 rounded-lg mx-auto border-2 border-brand-dark-blue\"></canvas>\n            <p className=\"font-bold text-2xl mt-4\">{message}</p>\n        </div>\n    );\n};\n\n\n// Step 4: Money Evolution\nconst MoneyEvolution: React.FC = () => {\n    const timeline = [\n        { year: '9000 לפנה\"ס', title: 'סחר חליפין', icon: '🤝', desc: 'החלפת סחורות ושירותים ישירות, ללא שימוש בכסף.' },\n        { year: '1200 לפנה\"ס', title: 'כסף סחורות', icon: '🐚', desc: 'שימוש בחפצים כמו צדפים, מלח או תבלינים כאמצעי תשלום.' },\n        { year: '600 לפנה\"ס', title: 'מטבעות ראשונים', icon: '🪙', desc: 'בממלכת לידיה (טורקיה של היום) הוטבעו המטבעות הראשונים מזהב וכסף.' },\n        { year: 'המאה ה-7', title: 'שטרות נייר', icon: '📜', desc: 'הסינים המציאו את שטרות הנייר הראשונים, שהיו קלים ונוחים יותר לנשיאה.' },\n        { year: '1950', title: 'כרטיסי אשראי', icon: '💳', desc: 'הופעת כרטיסי האשראי הראשונים, ששינו את צורת התשלום בעולם המודרני.' },\n        { year: 'היום', title: 'כסף דיגיטלי', icon: '📱', desc: 'תשלומים באפליקציות, מטבעות קריפטוגרפיים - הכסף הופך ליותר ויותר וירטואלי.' },\n    ];\n    return (\n         <div className=\"bg-white/40 p-8 rounded-2xl\">\n            <h3 className=\"text-4xl font-bold text-center mb-8\">ציר הזמן של הכסף</h3>\n            <div className=\"relative wrap overflow-hidden p-10 h-full\">\n                <div className=\"absolute h-full border-4 border-brand-light-blue/50\" style={{left: '50%'}}></div>\n                {timeline.map((item, index) => (\n                    <div key={index} className={`mb-8 flex justify-between items-center w-full ${index % 2 === 0 ? 'flex-row-reverse left-timeline' : 'right-timeline'}`}>\n                        <div className=\"order-1 w-5/12\"></div>\n                        <div className=\"z-20 flex items-center order-1 bg-brand-teal shadow-xl w-16 h-16 rounded-full\">\n                            <h1 className=\"mx-auto font-semibold text-3xl text-white\">{item.icon}</h1>\n                        </div>\n                        <div className=\"order-1 bg-gradient-to-br from-white/90 to-gray-100/90 rounded-xl shadow-2xl w-5/12 px-6 py-4 border border-white/50\">\n                            <p className=\"font-black text-3xl text-brand-magenta mb-1\">{item.year}</p>\n                            <h4 className=\"mb-2 font-bold text-brand-dark-blue text-3xl\">{item.title}</h4>\n                            <p className=\"text-xl leading-snug tracking-wide text-brand-dark-blue/80\">\n                                {item.desc}\n                            </p>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n\n// Step 5: Quiz\nconst Quiz: React.FC<{onComplete: () => void}> = ({onComplete}) => {\n    const quizQuestions = [\n        { q: 'מה הייתה הבעיה העיקרית בסחר חליפין (ברטר)?', o: ['זה היה איטי מדי', 'הצורך ב\"צירוף מקרים כפול\"', 'לא היו מספיק סחורות', 'היה צריך לשלם מס'], a: 'הצורך ב\"צירוף מקרים כפול\"' },\n        { q: 'היכן הוטבעו המטבעות הראשונים בעולם?', o: ['מצרים העתיקה', 'יוון העתיקה', 'ממלכת לידיה', 'האימפריה הרומית'], a: 'ממלכת לידיה' },\n        { q: 'מי המציא את שטרות הנייר הראשונים?', o: ['האיטלקים', 'היוונים', 'הסינים', 'הבריטים'], a: 'הסינים' },\n        { q: 'מהי דוגמה ל\"כסף סחורות\" שהיה בשימוש בעבר?', o: ['צדפים ומלח', 'זהב', 'דולרים', 'אפליקציות תשלום'], a: 'צדפים ומלח' },\n        { q: 'מה הופך את הזהב לאמצעי חליפין טוב, בניגוד לברטר?', o: ['הוא נדיר וכולם רוצים אותו', 'הוא מבריק ויפה', 'אפשר למצוא אותו בכל מקום', 'הוא כבד מאוד'], a: 'הוא נדיר וכולם רוצים אותו' }\n    ];\n\n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [answerState, setAnswerState] = useState<'pending' | 'correct' | 'incorrect' | null>(null);\n    const [finished, setFinished] = useState(false);\n    const prizeLevels = [100, 500, 1000, 5000, 10000].reverse();\n\n    useEffect(() => {\n        if (finished) {\n            if (score / quizQuestions.length >= 0.8) { \n                onComplete();\n            }\n        }\n    }, [finished, score, onComplete, quizQuestions.length]);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        setAnswerState('pending');\n\n        setTimeout(() => {\n             if(opt === quizQuestions[current].a) {\n                setScore(s => s + 1);\n                setAnswerState('correct');\n            } else {\n                setAnswerState('incorrect');\n            }\n        }, 1500);\n    };\n    \n    const handleNext = () => {\n        if (current === quizQuestions.length - 1) {\n            setFinished(true);\n        } else {\n            setCurrent(c => c + 1);\n            setSelected('');\n            setAnswerState(null);\n        }\n    };\n    \n    if (finished) {\n        return (\n            <div className=\"text-center bg-white/80 p-6 rounded-lg shadow-2xl\">\n                <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                <h3 className=\"text-4xl font-bold mt-4\">סיימתם את החידון!</h3>\n                <p className=\"text-2xl my-4\">הציון שלכם: <span className=\"font-bold text-brand-light-blue text-3xl\">{score} / {quizQuestions.length}</span></p>\n                {(score/quizQuestions.length >= 0.8) ?\n                    <p className=\"text-green-600 font-bold text-xl\">כל הכבוד! השלמתם את המודול!</p> :\n                    <p className=\"text-red-600 font-bold text-xl\">עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.</p>\n                }\n            </div>\n        )\n    }\n\n    const q = quizQuestions[current];\n    return (\n        <div className=\"bg-brand-dark-blue p-4 sm:p-6 rounded-2xl text-white shadow-2xl\">\n            <p className=\"text-center mb-4 text-gray-300 text-xl\">ברוכים הבאים לחידון \"סיפורו של כסף\"! ענו נכון כדי לזכות בפרס הגדול.</p>\n             <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                <div className=\"lg:col-span-3\">\n                    <div className=\"bg-white/10 p-6 rounded-xl border-2 border-brand-light-blue min-h-[120px] flex items-center justify-center\">\n                        <p className=\"font-bold text-3xl text-center\">{q.q}</p>\n                    </div>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6\">\n                        {q.o.map((opt) => {\n                             const isSelected = selected === opt;\n                             const isCorrect = answerState && q.a === opt;\n                             let stateClass = '';\n                             if (answerState === 'pending' && isSelected) stateClass = 'bg-yellow-500 animate-pulse';\n                             else if (answerState === 'correct' && isCorrect) stateClass = 'bg-green-500';\n                             else if (answerState === 'incorrect' && isSelected) stateClass = 'bg-red-500';\n                             else if (answerState === 'incorrect' && isCorrect) stateClass = 'bg-green-500/50 border-green-400';\n\n                            return (\n                                <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                                    className={`flex items-center p-4 rounded-lg border-2 border-brand-light-blue transition-all duration-300 min-h-[80px] text-xl ${stateClass || 'bg-brand-dark-blue hover:bg-brand-light-blue/20'}`}>\n                                    {opt}\n                                </button>\n                            )\n                        })}\n                    </div>\n                     {answerState && answerState !== 'pending' && (\n                        <button onClick={handleNext} className=\"mt-6 w-full bg-brand-magenta font-bold p-3 rounded-lg text-2xl animate-fade-in\">\n                            {current === quizQuestions.length - 1 ? 'סיים חידון' : 'לשאלה הבאה'}\n                        </button>\n                    )}\n                </div>\n                 <div className=\"lg:col-span-1 bg-white/10 p-4 rounded-xl flex flex-col-reverse\">\n                    {prizeLevels.map((level, index) => (\n                        <div key={level} className={`p-2 my-1 rounded text-center font-bold text-lg ${\n                            score > (prizeLevels.length - 1 - index) ? 'bg-green-500 text-white' : \n                            current === (prizeLevels.length - 1 - index) ? 'bg-yellow-400 text-black' : \n                            'bg-brand-dark-blue'\n                        }`}>\n                           <span className=\"text-gray-400 mr-2\">{prizeLevels.length - index}</span> {level.toLocaleString()} ₪\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\nconst StoryOfMoneyModule: React.FC<StoryOfMoneyModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <BarterIntroduction />;\n            case 1: return <BarterGame />;\n            case 2: return <MazeGame />;\n            case 3: return <MoneyEvolution />;\n            case 4: return <Quiz onComplete={onComplete} />;\n            default: return <BarterIntroduction />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal text-white' : 'bg-white/50'}`}>{index + 1}</div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            {renderStepContent()}\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default StoryOfMoneyModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface MoneyAndMeModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"הרגשות שלי\", \"מציבים מטרה\", \"איך מרוויחים?\", \"הסכנה שבמינוס\", \"בוחן ידע\"];\n\n// --- Visual Components for Quiz ---\nconst CheckIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n    </svg>\n);\nconst CrossIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n);\n\n\n// Step 1: Feelings Step\nconst FeelingsStep: React.FC = () => {\n    const feelings = [\n        { word: 'שמחה', emoji: '😄' }, { word: 'ביטחון', emoji: '🛡️' }, { word: 'חרדה', emoji: '😟' },\n        { word: 'לחץ', emoji: '😥' }, { word: 'חופש', emoji: '🕊️' }, { word: 'בלבול', emoji: '😵' },\n        { word: 'אחריות', emoji: '🧑‍⚖️' }, { word: 'סקרנות', emoji: '🤔' }, { word: 'כוח', emoji: '💪' }\n    ];\n    const [selectedFeelings, setSelectedFeelings] = useState<string[]>([]);\n    const toggleFeeling = (feeling: string) => {\n        setSelectedFeelings(prev =>\n            prev.includes(feeling) ? prev.filter(f => f !== feeling) : [...prev, feeling]\n        );\n    };\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">איך כסף גורם לכם להרגיש?</h3>\n            <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">\n                לכסף יש השפעה גדולה על הרגשות שלנו. בחרו את המילים שמתארות הכי טוב את מה שאתם מרגישים כשאתם חושבים על כסף.\n            </p>\n            <div className=\"flex flex-wrap justify-center gap-4\">\n                {feelings.map(f => (\n                    <button\n                        key={f.word}\n                        onClick={() => toggleFeeling(f.word)}\n                        className={`p-4 rounded-2xl text-3xl font-bold transition-all duration-300 transform hover:scale-105 shadow-md ${selectedFeelings.includes(f.word) ? 'bg-brand-light-blue text-white ring-4 ring-brand-teal' : 'bg-white/80'}`}\n                    >\n                        <span className=\"mr-2 text-3xl\">{f.emoji}</span> {f.word}\n                    </button>\n                ))}\n            </div>\n             {selectedFeelings.length > 0 && (\n                <p className=\"mt-8 p-4 bg-yellow-100/60 rounded-lg text-yellow-800 font-semibold text-xl\">\n                    זה נורמלי לגמרי להרגיש מגוון של רגשות כלפי כסף. המטרה שלנו היא להרגיש יותר ביטחון ושליטה ופחות לחץ וחרדה.\n                </p>\n            )}\n        </div>\n    );\n};\n\n// Step 2: Goal Setting Step\nconst GoalSettingStep: React.FC = () => {\n    const [goal, setGoal] = useState<{ name: string; cost: number; savings: number }>({ name: '', cost: 500, savings: 50 });\n    const monthsToGoal = goal.savings > 0 ? Math.ceil(goal.cost / goal.savings) : 0;\n    const commonGoals = [\n        { name: 'טלפון חדש', cost: 3000, icon: '📱' },\n        { name: 'משחק וידאו', cost: 250, icon: '🎮' },\n        { name: 'טיול לחו\"ל', cost: 5000, icon: '✈️' },\n        { name: 'נעליים חדשות', cost: 400, icon: '👟' },\n    ];\n    const handleGoalSelect = (name: string, cost: number) => {\n        setGoal(prev => ({ ...prev, name, cost }));\n    };\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">הגדירו מטרה וחסכו עבורה!</h3>\n            <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">חיסכון הוא הרבה יותר קל כשיש מטרה ברורה. בואו נתכנן איך להשיג את המטרה שלכם.</p>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-6\">\n                    <div>\n                        <h4 className=\"font-bold text-3xl mb-2\">1. בחרו מטרה או כתבו אחת משלכם</h4>\n                        <div className=\"flex flex-wrap justify-center gap-2 mb-2\">\n                             {commonGoals.map(g => (\n                                <button key={g.name} onClick={() => handleGoalSelect(g.name, g.cost)} className={`p-2 rounded-lg transition-colors ${goal.name === g.name ? 'bg-brand-light-blue text-white' : 'bg-white/70'}`}>\n                                    <span className=\"text-2xl\">{g.icon}</span> {g.name}\n                                </button>\n                            ))}\n                        </div>\n                        <input type=\"text\" value={goal.name} onChange={e => setGoal({...goal, name: e.target.value})} placeholder=\"מטרה אישית\" className=\"w-full bg-white p-2 rounded-lg border-2 border-gray-300 text-lg\"/>\n                    </div>\n                    <div>\n                        <h4 className=\"font-bold text-3xl mb-2\">2. כמה זה עולה? (בש\"ח)</h4>\n                        <input type=\"number\" value={goal.cost} onChange={e => setGoal({...goal, cost: Number(e.target.value)})} className=\"w-full bg-white p-2 rounded-lg border-2 border-gray-300 text-lg\"/>\n                    </div>\n                     <div>\n                        <h4 className=\"font-bold text-3xl mb-2\">3. כמה תחסכו כל חודש? (בש\"ח)</h4>\n                        <input type=\"number\" value={goal.savings} onChange={e => setGoal({...goal, savings: Number(e.target.value)})} className=\"w-full bg-white p-2 rounded-lg border-2 border-gray-300 text-lg\"/>\n                    </div>\n                </div>\n                <div className=\"bg-white/50 p-6 rounded-2xl flex flex-col justify-center items-center\">\n                    {goal.name && goal.savings > 0 ? (\n                        <>\n                            <p className=\"text-3xl\">כדי להשיג את ה<strong className=\"text-brand-light-blue\">{goal.name}</strong> שלכם,</p>\n                            <p className=\"text-2xl\">תצטרכו לחסוך במשך:</p>\n                            <p className=\"text-7xl font-bold text-brand-teal my-4\">{monthsToGoal}</p>\n                            <p className=\"text-4xl\">חודשים</p>\n                        </>\n                    ) : (\n                         <p className=\"text-gray-500 text-xl\">הזינו את פרטי המטרה כדי לראות את החישוב.</p>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Step 3: Earning Money Step\nconst EarningMoneyStep: React.FC = () => {\n    const waysToEarn = [\n        { name: 'עזרה בבית', desc: 'משימות מיוחדות מעבר למטלות הרגילות, כמו ניקיון יסודי של הרכב או סידור המחסן.', icon: '🏠' },\n        { name: 'עבודות קטנות לשכנים', desc: 'בייביסיטר, דוגיסיטר, עזרה בקניות, כיסוח דשא.', icon: '🏘️' },\n        { name: 'למכור דברים', desc: 'צעצועים ישנים, בגדים שכבר לא בשימוש, או דברים שהכנתם בעצמכם.', icon: '🛍️' },\n        { name: 'יזמות קטנה', desc: 'למכור לימונדה, להכין צמידים, להעביר שיעורים פרטיים במשהו שאתם טובים בו.', icon: '💡' },\n    ];\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-6 text-center\">אז... איך מרוויחים כסף?</h3>\n            <p className=\"text-center text-2xl mb-8\">חוץ מדמי כיס, יש הרבה דרכים יצירתיות להרוויח כסף. הנה כמה רעיונות:</p>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {waysToEarn.map(way => (\n                    <div key={way.name} className=\"bg-white/60 p-6 rounded-xl border border-white/40 text-center\">\n                        <span className=\"text-5xl\">{way.icon}</span>\n                        <h4 className=\"text-3xl font-bold text-brand-light-blue mt-3 mb-2\">{way.name}</h4>\n                        <p className=\"text-brand-dark-blue/90 text-xl\">{way.desc}</p>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n\n// Step 4: Overdraft Step (Motorcycle Game)\nconst GOAL_SCORE = 500;\nconst MotorcycleGame: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\n    const [gameState, setGameState] = useState<'start' | 'playing' | 'crashed' | 'gameOver' | 'win'>('start');\n    const [score, setScore] = useState(100);\n    const [lives, setLives] = useState(3);\n    const [gameOverReason, setGameOverReason] = useState<'fall' | 'score' | null>(null);\n\n    // Game state refs\n    const playerRef = useRef({ x: 400, y: 350, vx: 0, vy: 0, onGround: true, direction: 1, canDoubleJump: false });\n    const platformsRef = useRef<{ x: number; y: number; width: number }[]>([]);\n    const collectiblesRef = useRef<any[]>([]);\n    const floatingTextsRef = useRef<any[]>([]);\n    const particlesRef = useRef<any[]>([]);\n    const cameraYRef = useRef(0);\n    const highestPlatformY = useRef(400);\n    const cloudsRef = useRef<{x: number, y: number, size: number, speed: number}[]>([]);\n\n    const keysRef = useRef({ left: false, right: false, up: false });\n\n    const startGame = (isFullReset = false) => {\n        if (isFullReset) {\n            setLives(3);\n        }\n        playerRef.current = { x: 400, y: 350, vx: 0, vy: 0, onGround: true, direction: 1, canDoubleJump: false };\n        keysRef.current = { left: false, right: false, up: false }; // Bug fix\n        cameraYRef.current = 0;\n        highestPlatformY.current = 380;\n        setScore(100);\n        setGameOverReason(null);\n        floatingTextsRef.current = [];\n        particlesRef.current = [];\n        collectiblesRef.current = [];\n        \n        if (isFullReset || cloudsRef.current.length === 0) {\n            cloudsRef.current = [];\n            for(let i = 0; i < 15; i++) {\n                cloudsRef.current.push({\n                    x: Math.random() * 800,\n                    y: Math.random() * 800 - 400,\n                    size: Math.random() * 30 + 20,\n                    speed: Math.random() * 0.3 + 0.1\n                });\n            }\n        }\n\n        // Generate initial platforms\n        const initialPlatforms: { x: number; y: number; width: number }[] = [{ x: 0, y: 400, width: 800 }];\n        for (let i = 1; i < 20; i++) {\n            const y = initialPlatforms[i-1].y - (Math.random() * 60 + 60);\n            const x = Math.random() * (800 - 100);\n            initialPlatforms.push({ x, y, width: Math.random() * 50 + 80 });\n            highestPlatformY.current = y;\n        }\n        platformsRef.current = initialPlatforms;\n\n        setGameState('playing');\n    };\n\n    const drawMotorcycle = (ctx: CanvasRenderingContext2D) => {\n        ctx.save();\n        ctx.translate(-30, 0); \n    \n        // Rider Body\n        ctx.fillStyle = '#4a5568';\n        ctx.beginPath();\n        ctx.moveTo(20, -35);\n        ctx.lineTo(35, -35);\n        ctx.lineTo(28, -10);\n        ctx.lineTo(17, -10);\n        ctx.closePath();\n        ctx.fill();\n\n        // Rider Head\n        ctx.beginPath();\n        ctx.arc(22.5, -45, 10, 0, Math.PI * 2);\n        ctx.fillStyle = '#f7d3a1'; // Skin tone\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(22.5, -45, 12, 0, Math.PI * 2);\n        ctx.fillStyle = '#4a5568'; // Helmet\n        ctx.fill();\n\n        // Motorcycle Body\n        ctx.fillStyle = '#d52963';\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(10, -20);\n        ctx.lineTo(55, -15);\n        ctx.lineTo(60, 0);\n        ctx.closePath();\n        ctx.fill();\n\n        // Handlebars\n        ctx.strokeStyle = '#1b2550';\n        ctx.lineWidth = 4;\n        ctx.beginPath();\n        ctx.moveTo(50, -17);\n        ctx.lineTo(55, -27);\n        ctx.stroke();\n\n        // Wheels\n        ctx.fillStyle = '#1b2550';\n        ctx.beginPath();\n        ctx.arc(10, 5, 10, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(55, 5, 10, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.fillStyle = '#9ca3af';\n        ctx.beginPath();\n        ctx.arc(10, 5, 4, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.beginPath();\n        ctx.arc(55, 5, 4, 0, Math.PI * 2);\n        ctx.fill();\n    \n        ctx.restore();\n    };\n\n\n    useEffect(() => {\n        if (gameState !== 'playing') return;\n\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        \n        const GRAVITY = 0.45;\n        const MOVE_FORCE = 1.2;\n        const JUMP_FORCE = -12;\n        const DOUBLE_JUMP_FORCE = -10;\n        const FRICTION = 0.8;\n        const MAX_VX = 7;\n\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.code === 'ArrowLeft') keysRef.current.left = true;\n            if (e.code === 'ArrowRight') keysRef.current.right = true;\n            if (e.code === 'Space') {\n                if (playerRef.current.onGround) {\n                    playerRef.current.vy = JUMP_FORCE;\n                    playerRef.current.onGround = false;\n                    playerRef.current.canDoubleJump = true;\n                } else if (playerRef.current.canDoubleJump) {\n                    playerRef.current.vy = DOUBLE_JUMP_FORCE;\n                    playerRef.current.canDoubleJump = false;\n                }\n            }\n        };\n        const handleKeyUp = (e: KeyboardEvent) => {\n            if (e.code === 'ArrowLeft') keysRef.current.left = false;\n            if (e.code === 'ArrowRight') keysRef.current.right = false;\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        window.addEventListener('keyup', handleKeyUp);\n\n        let animationFrameId: number;\n\n        const gameLoop = () => {\n            if (!canvasRef.current) return;\n            \n            // --- Update Physics & Controls ---\n            if (keysRef.current.left) {\n                playerRef.current.vx -= MOVE_FORCE;\n                playerRef.current.direction = 1;\n            }\n            if (keysRef.current.right) {\n                playerRef.current.vx += MOVE_FORCE;\n                playerRef.current.direction = -1;\n            }\n\n            playerRef.current.vx *= FRICTION;\n            if (Math.abs(playerRef.current.vx) > MAX_VX) {\n                playerRef.current.vx = Math.sign(playerRef.current.vx) * MAX_VX;\n            }\n\n            playerRef.current.x += playerRef.current.vx;\n            \n            playerRef.current.vy += GRAVITY;\n            playerRef.current.y += playerRef.current.vy;\n\n            if (playerRef.current.x > 800) playerRef.current.x = 0;\n            if (playerRef.current.x < 0) playerRef.current.x = 800;\n\n            // --- Platform Collisions ---\n            playerRef.current.onGround = false;\n            if (playerRef.current.vy > 0) {\n                 for(const platform of platformsRef.current) {\n                    if ( playerRef.current.x > platform.x && playerRef.current.x < platform.x + platform.width && playerRef.current.y + 40 > platform.y && playerRef.current.y + 40 < platform.y + 20) {\n                        playerRef.current.vy = 0;\n                        playerRef.current.y = platform.y - 40;\n                        playerRef.current.onGround = true;\n                        playerRef.current.canDoubleJump = false; // Disable double jump on land\n                    }\n                }\n            }\n\n            // --- Camera ---\n            if (playerRef.current.y < cameraYRef.current + 150) {\n                cameraYRef.current = playerRef.current.y - 150;\n            }\n\n            // --- Platform Generation & Cleanup ---\n            if (highestPlatformY.current > cameraYRef.current - 100) {\n                const newY = highestPlatformY.current - (Math.random() * 50 + 60);\n                const newX = Math.random() * (800 - 100);\n                platformsRef.current.push({ x: newX, y: newY, width: Math.random() * 50 + 80 });\n                highestPlatformY.current = newY;\n\n                 if (Math.random() > 0.4) {\n                    const isPositive = Math.random() > 0.3;\n                    collectiblesRef.current.push({\n                        x: newX + (Math.random() * 40 + 20),\n                        y: newY - 30,\n                        type: isPositive ? '+' : '-',\n                        value: isPositive ? 50 : -25,\n                    });\n                }\n            }\n            platformsRef.current = platformsRef.current.filter(p => p.y < cameraYRef.current + 500);\n            \n            // Collectibles\n            collectiblesRef.current = collectiblesRef.current.filter(c => {\n                 const distance = Math.sqrt(Math.pow(playerRef.current.x - c.x, 2) + Math.pow(playerRef.current.y - c.y, 2));\n                if (distance < 50) {\n                    setScore(s => s + c.value);\n                    floatingTextsRef.current.push({ id: Date.now(), text: `${c.value > 0 ? '+' : ''}${c.value}`, x: playerRef.current.x, y: playerRef.current.y - 50, opacity: 1 });\n                    for (let i = 0; i < 15; i++) {\n                        const angle = Math.random() * Math.PI * 2;\n                        const speed = Math.random() * 3 + 1;\n                        particlesRef.current.push({ id: Date.now() + i, x: c.x, y: c.y, radius: Math.random() * 3 + 2, opacity: 1, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, color: c.type === '+' ? 'rgba(74, 222, 128,' : 'rgba(239, 68, 68,' });\n                    }\n                    return false;\n                }\n                return c.y < cameraYRef.current + 500;\n            });\n            \n            // --- Game State Checks ---\n            if (score >= GOAL_SCORE) {\n                setGameState('win');\n                onComplete();\n            } else if (playerRef.current.y > cameraYRef.current + 400 || score < 0) {\n                const reason = playerRef.current.y > cameraYRef.current + 400 ? 'fall' : 'score';\n                if (lives > 1) {\n                    setLives(l => l - 1);\n                    setGameState('crashed');\n                    setGameOverReason(reason);\n                } else {\n                    setGameState('gameOver');\n                    setGameOverReason(reason);\n                }\n            }\n            \n            // --- Drawing ---\n            ctx.clearRect(0, 0, 800, 400);\n            const skyGradient = ctx.createLinearGradient(0, 0, 0, 400);\n            skyGradient.addColorStop(0, '#87CEEB');\n            skyGradient.addColorStop(1, '#E0F6FF');\n            ctx.fillStyle = skyGradient;\n            ctx.fillRect(0, 0, 800, 400);\n\n            // Clouds\n            cloudsRef.current.forEach(cloud => {\n                const parallaxY = cloud.y - cameraYRef.current * (cloud.speed * 0.5); // Slower vertical scroll\n                ctx.fillStyle = `rgba(255, 255, 255, 0.8)`;\n                ctx.beginPath();\n                ctx.arc(cloud.x, parallaxY, cloud.size, 0, Math.PI * 2);\n                ctx.arc(cloud.x + cloud.size * 0.8, parallaxY, cloud.size * 0.8, 0, Math.PI * 2);\n                ctx.arc(cloud.x - cloud.size * 0.8, parallaxY, cloud.size * 0.7, 0, Math.PI * 2);\n                ctx.closePath();\n                ctx.fill();\n            });\n\n\n            ctx.save();\n            ctx.translate(0, -cameraYRef.current);\n\n            // Platforms\n            platformsRef.current.forEach(p => {\n                ctx.fillStyle = '#8B4513';\n                ctx.fillRect(p.x, p.y, p.width, 10);\n                ctx.fillStyle = '#34D399';\n                ctx.fillRect(p.x, p.y, p.width, 4);\n            });\n\n            // Collectibles\n            collectiblesRef.current.forEach(c => {\n                 ctx.beginPath();\n                ctx.arc(c.x, c.y, 15, 0, Math.PI * 2);\n                ctx.fillStyle = c.type === '+' ? 'gold' : '#A9A9A9';\n                ctx.fill();\n                ctx.strokeStyle = c.type === '+' ? '#DAA520' : '#808080';\n                ctx.lineWidth = 2;\n                ctx.stroke();\n                ctx.font = 'bold 20px sans-serif';\n                ctx.fillStyle = c.type === '+' ? 'darkgreen' : 'darkred';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillText(c.type, c.x, c.y);\n            });\n\n            ctx.save();\n            ctx.translate(playerRef.current.x, playerRef.current.y);\n            ctx.scale(playerRef.current.direction, 1);\n            drawMotorcycle(ctx);\n            ctx.restore();\n\n            floatingTextsRef.current.forEach(ft => {\n                ctx.font = 'bold 20px sans-serif';\n                ctx.fillStyle = ft.text.startsWith('+') ? `rgba(0, 128, 0, ${ft.opacity})` : `rgba(255, 0, 0, ${ft.opacity})`;\n                ctx.fillText(ft.text, ft.x, ft.y);\n            });\n            floatingTextsRef.current = floatingTextsRef.current.map(ft => ({ ...ft, y: ft.y - 0.5, opacity: ft.opacity - 0.015 })).filter(ft => ft.opacity > 0);\n\n            particlesRef.current.forEach(p => {\n                ctx.beginPath();\n                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);\n                ctx.fillStyle = p.color + `${p.opacity})`;\n                ctx.fill();\n            });\n            particlesRef.current = particlesRef.current.map(p => ({ ...p, x: p.x + p.vx, y: p.y + p.vy, opacity: p.opacity - 0.03 })).filter(p => p.opacity > 0);\n            \n            ctx.restore();\n            \n            animationFrameId = requestAnimationFrame(gameLoop);\n        };\n\n        gameLoop();\n        return () => {\n            window.removeEventListener('keydown', handleKeyDown);\n            window.removeEventListener('keyup', handleKeyUp);\n            cancelAnimationFrame(animationFrameId);\n        };\n    }, [gameState, onComplete, score, lives]);\n\n\n    return (\n        <div className=\"flex flex-col items-center\">\n            <div className=\"relative w-full max-w-[800px] h-[55vw] min-h-[260px] max-h-[400px] bg-gray-200 rounded-lg overflow-hidden border-4 border-brand-dark-blue\">\n                <canvas ref={canvasRef} width=\"800\" height=\"400\" className=\"w-full h-full\" />\n                {gameState === 'start' && (\n                    <div className=\"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white p-4\">\n                        <h4 className=\"text-5xl font-bold\">טפסו לפלוס!</h4>\n                        <p className=\"text-2xl mt-2\">השתמשו בחצים ימינה ושמאלה כדי לזוז ובמקש הרווח כדי לקפוץ.</p>\n                        <button onClick={() => startGame(true)} className=\"mt-6 bg-brand-magenta text-white font-bold py-3 px-6 rounded-lg text-xl\">התחל משחק</button>\n                    </div>\n                )}\n                 {gameState === 'win' && (\n                    <div className=\"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white\">\n                        <h4 className=\"text-5xl font-bold text-green-400\">ניצחת!</h4>\n                        <p className=\"text-2xl mt-2\">הגעת ליעד ונשארת בפלוס!</p>\n                        <button onClick={() => startGame(true)} className=\"mt-6 bg-brand-teal text-white font-bold py-3 px-6 rounded-lg text-xl\">שחק שוב</button>\n                    </div>\n                )}\n                 {gameState === 'crashed' && (\n                    <div className=\"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white p-4\">\n                        <h4 className=\"text-5xl font-bold text-yellow-400\">התרסקת!</h4>\n                        <p className=\"text-2xl mt-2\">{gameOverReason === 'fall' ? 'נפלת לתהום...' : 'ירדת למינוס!'}</p>\n                        <p className=\"text-3xl mt-4\">נשארו לך <span className=\"text-yellow-400\">{lives}</span> נסיונות</p>\n                        <button onClick={() => startGame(false)} className=\"mt-6 bg-brand-magenta text-white font-bold py-3 px-6 rounded-lg text-xl\">נסה שוב</button>\n                    </div>\n                )}\n                {gameState === 'gameOver' && (\n                    <div className=\"absolute inset-0 bg-black/50 flex flex-col justify-center items-center text-white p-4\">\n                        <h4 className=\"text-5xl font-bold text-red-500\">המשחק נגמר!</h4>\n                         <p className=\"text-2xl mt-2\">{gameOverReason === 'fall' ? 'נפלת ולא נשארו לך נסיונות.' : 'ירדת למינוס ולא נשארו לך נסיונות.'}</p>\n                        <button onClick={() => startGame(true)} className=\"mt-6 bg-brand-magenta text-white font-bold py-3 px-6 rounded-lg text-xl\">התחל מחדש</button>\n                    </div>\n                )}\n                 <div className=\"absolute top-2 sm:top-4 left-2 sm:left-4 bg-white/70 p-2 rounded-lg text-lg sm:text-3xl font-bold\">\n                    מאזן: <span className={score < 0 ? 'text-red-500' : 'text-green-600'}>{score} / {GOAL_SCORE} ₪</span>\n                </div>\n                 <div className=\"absolute top-2 sm:top-4 right-2 sm:right-4 bg-white/70 p-2 rounded-lg text-lg sm:text-3xl font-bold flex gap-2\">\n                   {Array.from({length: lives}).map((_, i) => <span key={i}>❤️</span>)}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst OverdraftStep: React.FC<{ onComplete: () => void }> = ({ onComplete }) => (\n    <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n        <h3 className=\"text-5xl font-bold text-brand-magenta mb-4\">משחק: טפסו לפלוס!</h3>\n        <div className=\"bg-white/50 p-4 rounded-lg text-3xl text-brand-dark-blue/90 mb-6 max-w-4xl mx-auto shadow-inner leading-relaxed\">\n            אתם רוכבי אופנוע אמיצים והמטרה שלכם היא להגיע למאזן של <strong className=\"text-brand-teal\">{GOAL_SCORE} ₪</strong>!\n            <br/>\n            השתמשו ב<strong>חיצים ימינה ושמאלה</strong> כדי לזוז וב<strong>מקש הרווח</strong> כדי לקפוץ. <strong>לחצו שוב על רווח באוויר כדי לבצע קפיצה כפולה!</strong>\n            <br/>\n            <strong className=\"text-yellow-600\">💡 טיפ: אפשר לעבור דרך קצוות המסך כדי להופיע בצד השני!</strong>\n            <br/>\n            טפסו על הפלטפורמות, אספו מטבעות <strong className=\"text-green-600\">ירוקים (+)</strong>, והימנעו ממטבעות <strong className=\"text-red-600\">אדומים (-)</strong>. \n            <br/>\n            יש לכם 3 נסיונות לפני שהמשחק מתחיל מחדש!\n        </div>\n        <MotorcycleGame onComplete={onComplete} />\n    </div>\n);\n\n\n// Step 5: Quiz\nconst QuizStep: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = [\n        { q: \"מהי הדרך הטובה ביותר להתחיל לחסוך כסף?\", options: [\"לחכות שיהיה לך הרבה כסף\", \"להציב מטרה ברורה וברת השגה\", \"לבקש מההורים יותר דמי כיס\", \"לקנות רק דברים יקרים\"], answer: \"להציב מטרה ברורה וברת השגה\" },\n        { q: \"מה קורה כשנכנסים ל'מינוס' בבנק?\", options: [\"הבנק נותן לך כסף במתנה\", \"החשבון ננעל אוטומטית\", \"מתחילים לשלם ריבית גבוהה על החוב לבנק\", \"מקבלים הנחה על הקנייה הבאה\"], answer: \"מתחילים לשלם ריבית גבוהה על החוב לבנק\" },\n        { q: \"יוסי רוצה לקנות אופניים שעולים 1,200 ₪. הוא חוסך 150 ₪ כל חודש. כמה זמן ייקח לו לחסוך?\", options: [\"6 חודשים\", \"8 חודשים\", \"10 חודשים\", \"שנה\"], answer: \"8 חודשים\" },\n        { q: \"איזה מהבאים הוא דוגמה טובה לדרך יזמית להרוויח כסף?\", options: [\"לבקש העלאה בדמי הכיס\", \"לעשות בייביסיטר לשכנים\", \"להכין ולמכור צמידים\", \"לקבל מתנה ליום הולדת\"], answer: \"להכין ולמכור צמידים\" },\n    ];\n    \n    const [quizState, setQuizState] = useState<'not_started' | 'in_progress' | 'finished'>('not_started');\n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].answer) {\n            setScore(s => s + 1);\n        }\n    };\n    \n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setQuizState('finished');\n        }\n    };\n\n    const restartQuiz = () => {\n        setQuizState('in_progress');\n        setCurrent(0);\n        setScore(0);\n        setSelected('');\n    };\n    \n    useEffect(() => {\n        if (quizState === 'finished') {\n            if (score / questions.length >= 0.75) { \n              onComplete();\n            }\n        }\n    }, [quizState, score, onComplete, questions.length]);\n    \n    if (quizState === 'finished') {\n        const isCompleted = score >= 3;\n        const resultMessage = isCompleted\n            ? \"כל הכבוד! עמדתם ביעד והשלמתם את המודול!\"\n            : \"עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.\";\n        return (\n             <div className=\"relative text-center p-6 bg-white/80 border-4 border-yellow-400 rounded-lg shadow-2xl\">\n                <TrophyIcon className=\"w-20 h-20 mx-auto text-yellow-500\" />\n                <h3 className=\"text-4xl font-bold mb-2 mt-4 text-brand-dark-blue\">סיימת את הבוחן!</h3>\n                <p className=\"text-2xl mb-4 text-brand-dark-blue/80\">{resultMessage}</p>\n                <div className=\"bg-brand-light-blue/20 p-3 rounded-lg my-4\">\n                    <p className=\"text-3xl\">הציון שלך:</p>\n                    <p className=\"text-5xl font-bold text-brand-light-blue\">{score} / {questions.length}</p>\n                </div>\n                <button onClick={restartQuiz} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg text-xl\">שחק/י שוב</button>\n            </div>\n        );\n    }\n\n    if (quizState === 'not_started') {\n         return (\n            <div className=\"bg-white/60 backdrop-blur-sm p-6 rounded-lg text-center\">\n                <h3 className=\"text-4xl font-bold mb-2\">מוכנים? בחנו את עצמכם</h3>\n                <p className=\"mb-6 text-xl\">עליכם לענות נכון על 3 מתוך 4 שאלות כדי להשלים את המודול.</p>\n                <button onClick={() => setQuizState('in_progress')} className=\"bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-lg text-xl\">התחל בוחן</button>\n            </div>\n        );\n    }\n\n    const q = questions[current];\n    return (\n        <div className=\"bg-white/50 p-6 rounded-lg\">\n            <div className=\"mb-4\">\n                <div className=\"bg-gray-300 rounded-full h-2.5\">\n                    <div className=\"bg-brand-teal h-2.5 rounded-full\" style={{ width: `${((current + 1) / questions.length) * 100}%` }}></div>\n                </div>\n            </div>\n            <h3 className=\"text-2xl font-bold mb-4 text-center\">{q.q}</h3>\n            <div className=\"space-y-3\">\n                {q.options.map(opt => {\n                     const isCorrect = opt === q.answer;\n                     const isSelected = opt === selected;\n                     let buttonClass = 'bg-white/60 hover:bg-white';\n                     if(selected) {\n                         if(isCorrect) buttonClass = 'bg-green-500 text-white';\n                         else if (isSelected) buttonClass = 'bg-red-500 text-white';\n                         else buttonClass = 'bg-gray-200/50 opacity-60';\n                     }\n                    return (\n                        <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                            className={`flex justify-between items-center w-full text-right p-3 rounded-lg transition-colors text-xl ${buttonClass}`}>\n                            <span>{opt}</span>\n                            {selected && isCorrect && <CheckIcon />}\n                            {selected && isSelected && !isCorrect && <CrossIcon />}\n                        </button>\n                    );\n                })}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-6 w-full bg-brand-light-blue text-white font-bold py-3 rounded-lg text-xl\">\n                {current === questions.length - 1 ? 'סיים בוחן' : 'השאלה הבאה'}\n            </button>}\n        </div>\n    );\n};\n\n\n// Main Module Component\nconst MoneyAndMeModule: React.FC<MoneyAndMeModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [overdraftGameCompleted, setOverdraftGameCompleted] = useState(false);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <FeelingsStep />;\n            case 1: return <GoalSettingStep />;\n            case 2: return <EarningMoneyStep />;\n            case 3: return <OverdraftStep onComplete={() => setOverdraftGameCompleted(true)} />;\n            case 4: return <QuizStep onComplete={onComplete} />;\n            default: return <FeelingsStep />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50'}`}>{index + 1}</div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            \n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button \n                  onClick={() => setCurrentStep(s => s + 1)} \n                  disabled={currentStep === steps.length - 1 || (currentStep === 3 && !overdraftGameCompleted)} \n                  className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={currentStep === 3 && !overdraftGameCompleted ? 'עליך לנצח במשחק כדי להמשיך' : ''}\n                >\n                    {currentStep === 3 && !overdraftGameCompleted ? 'השלם את המשחק' : 'הבא'}\n                </button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default MoneyAndMeModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface HowMuchCostModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst CheckIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n    </svg>\n);\nconst CrossIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n);\n\nconst steps = [\"יוצאים לקניות!\", \"האתגר בסופרמרקט\", \"הגיע הזמן לשלם\", \"מה למדנו?\", \"בוחן ידע\"];\n\ntype ItemType = 'צריך' | 'רוצה';\ninterface Item {\n    id: number;\n    name: string;\n    price: number;\n    icon: string;\n    type: ItemType;\n}\n\nconst allItems: Item[] = [\n    { id: 1, name: 'חלב', price: 7, icon: '🥛', type: 'צריך' },\n    { id: 2, name: 'לחם', price: 8, icon: '🍞', type: 'צריך' },\n    { id: 3, name: 'ביצים', price: 13, icon: '🥚', type: 'צריך' },\n    { id: 4, name: 'גבינה', price: 15, icon: '🧀', type: 'צריך' },\n    { id: 5, name: 'תפוח', price: 2, icon: '🍎', type: 'צריך' },\n    { id: 6, name: 'חטיף שוקולד', price: 6, icon: '🍫', type: 'רוצה' },\n    { id: 7, name: 'שתיה מוגזת', price: 7, icon: '🥤', type: 'רוצה' },\n    { id: 8, name: 'מסטיקים', price: 4, icon: '🍬', type: 'רוצה' },\n    { id: 9, name: 'עוגיות', price: 12, icon: '🍪', type: 'רוצה' },\n    { id: 10, name: 'גלידה', price: 25, icon: '🍦', type: 'רוצה' },\n    { id: 11, name: 'מלפפונים', price: 4, icon: '🥒', type: 'צריך' },\n    { id: 12, name: 'עוף', price: 35, icon: '🍗', type: 'צריך' },\n];\n\nconst shoppingList = ['חלב', 'לחם', 'ביצים', 'גבינה', 'תפוח'];\nconst BUDGET = 50;\n\n\n// Step 1: Introduction\nconst IntroductionStep: React.FC = () => {\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">יוצאים למשימת קניות!</h3>\n            <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n                קיבלתם תקציב מוגבל ורשימת קניות. המטרה שלכם היא לקנות את כל מה שברשימה מבלי לחרוג מהתקציב. היזהרו מפיתויים בדרך!\n            </p>\n            <div className=\"flex flex-col md:flex-row justify-center items-center gap-8\">\n                <div className=\"bg-green-100/70 p-6 rounded-2xl border-2 border-green-300\">\n                    <h4 className=\"text-3xl font-bold text-green-700\">התקציב שלכם</h4>\n                    <p className=\"text-7xl font-bold text-green-600 my-2\">{BUDGET} ₪</p>\n                </div>\n                <div className=\"bg-yellow-100/70 p-6 rounded-2xl border-2 border-yellow-300\">\n                    <h4 className=\"text-3xl font-bold text-yellow-800\">רשימת הקניות</h4>\n                    <ul className=\"text-2xl mt-2 space-y-1\">\n                        {shoppingList.map(item => <li key={item} className=\"text-2xl\">- {item}</li>)}\n                    </ul>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Step 2: Shopping Game\nconst ShoppingChallenge: React.FC<{\n    cart: Item[];\n    setCart: React.Dispatch<React.SetStateAction<Item[]>>;\n    budget: number;\n    setBudget: React.Dispatch<React.SetStateAction<number>>;\n}> = ({ cart, setCart, budget, setBudget }) => {\n    const [specialOffer, setSpecialOffer] = useState<Item | null>(null);\n    const [offerCountdown, setOfferCountdown] = useState(0);\n\n    const cartTotal = cart.reduce((sum, item) => sum + item.price, 0);\n\n    useEffect(() => {\n        const offerTimer = setInterval(() => {\n            if (specialOffer) return;\n            const wantItems = allItems.filter(i => i.type === 'רוצה' && !cart.some(c => c.id === i.id));\n            if (wantItems.length > 0) {\n                const randomOffer = wantItems[Math.floor(Math.random() * wantItems.length)];\n                setSpecialOffer(randomOffer);\n                setOfferCountdown(5);\n            }\n        }, 8000 + Math.random() * 4000); // Between 8-12 seconds\n        return () => clearInterval(offerTimer);\n    }, [cart, specialOffer]);\n\n    useEffect(() => {\n        if (offerCountdown > 0) {\n            const countdownTimer = setTimeout(() => setOfferCountdown(c => c - 1), 1000);\n            return () => clearTimeout(countdownTimer);\n        } else if (specialOffer) {\n            setSpecialOffer(null);\n        }\n    }, [offerCountdown, specialOffer]);\n\n    const addToCart = (item: Item) => {\n        if (budget - item.price >= 0) {\n            setCart(prev => [...prev, item]);\n            setBudget(prev => prev - item.price);\n            if (specialOffer && specialOffer.id === item.id) {\n                setSpecialOffer(null);\n            }\n        } else {\n            alert(\"אין מספיק כסף בתקציב!\");\n        }\n    };\n\n    const removeFromCart = (itemToRemove: Item) => {\n        setCart(prev => prev.filter(item => item.id !== itemToRemove.id));\n        setBudget(prev => prev + itemToRemove.price);\n    };\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-4 rounded-2xl animate-fade-in relative\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4 text-center\">האתגר בסופרמרקט</h3>\n            \n            {specialOffer && (\n                <div className=\"absolute inset-0 bg-black/70 flex flex-col justify-center items-center z-20 rounded-2xl animate-fade-in\">\n                    <div className=\"bg-yellow-300 p-8 rounded-3xl text-center border-4 border-dashed border-red-500 shadow-2xl\">\n                        <h4 className=\"text-5xl font-bold text-red-600 animate-pulse\">מבצע בזק!</h4>\n                        <div className=\"my-4\">\n                            <span className=\"text-8xl\">{specialOffer.icon}</span>\n                            <p className=\"font-bold text-4xl\">{specialOffer.name}</p>\n                            <p className=\"text-3xl\">{specialOffer.price} ₪</p>\n                        </div>\n                        <button onClick={() => addToCart(specialOffer)} className=\"bg-brand-magenta text-white font-bold p-3 rounded-lg text-xl\">הוסף לעגלה!</button>\n                        <p className=\"mt-4 text-2xl\">ההצעה מסתיימת בעוד: <span className=\"font-bold text-3xl\">{offerCountdown}</span></p>\n                    </div>\n                </div>\n            )}\n            \n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                {/* Left Column: List & Budget */}\n                <div className=\"lg:col-span-1 bg-white/50 p-4 rounded-2xl space-y-4\">\n                    <div>\n                        <h4 className=\"font-bold text-2xl\">💰 התקציב שלך:</h4>\n                        <p className={`font-bold text-5xl ${budget < 10 ? 'text-red-500' : 'text-green-600'}`}>{budget.toFixed(2)} ₪</p>\n                    </div>\n                    <div>\n                        <h4 className=\"font-bold text-2xl\">📝 רשימת קניות:</h4>\n                        <ul className=\"space-y-1 mt-2 text-xl\">\n                            {shoppingList.map(name => {\n                                const inCart = cart.some(c => c.name === name);\n                                return (\n                                    <li key={name} className={`flex items-center gap-2 transition-colors ${inCart ? 'text-gray-400 line-through' : ''}`}>\n                                        <div className={`w-6 h-6 rounded-md flex items-center justify-center ${inCart ? 'bg-green-500' : 'bg-gray-300'}`}>\n                                            {inCart && <CheckIcon className=\"w-4 h-4 text-white\"/>}\n                                        </div>\n                                        <span>{name}</span>\n                                    </li>\n                                );\n                            })}\n                        </ul>\n                    </div>\n                </div>\n\n                {/* Center Column: Shelves */}\n                <div className=\"lg:col-span-2 bg-blue-100/30 p-4 rounded-2xl\">\n                    <h4 className=\"font-bold text-2xl text-center mb-2\">מדפי הסופר</h4>\n                    <div className=\"grid grid-cols-3 sm:grid-cols-4 gap-4\">\n                        {allItems.filter(item => !cart.some(c => c.id === item.id)).map(item => (\n                            <button key={item.id} onClick={() => addToCart(item)} className=\"text-center bg-white p-2 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all\">\n                                <span className=\"text-4xl\">{item.icon}</span>\n                                <p className=\"font-bold\">{item.name}</p>\n                                <p className=\"text-sm\">{item.price} ₪</p>\n                            </button>\n                        ))}\n                    </div>\n                </div>\n                \n                {/* Right Column: Cart */}\n                <div className=\"lg:col-span-1 bg-white/50 p-4 rounded-2xl flex flex-col\">\n                    <h4 className=\"font-bold text-2xl mb-2\">🛒 עגלת הקניות:</h4>\n                    <div className=\"flex-grow space-y-2 overflow-y-auto\">\n                        {cart.length === 0 ? <p className=\"text-gray-500 text-lg\">העגלה ריקה</p> :\n                        cart.map(item => (\n                            <div key={item.id} className=\"flex items-center justify-between bg-white/70 p-2 rounded-md\">\n                                <div className=\"flex items-center gap-2\">\n                                    <span className=\"text-2xl\">{item.icon}</span>\n                                    <span className=\"text-lg\">{item.name}</span>\n                                </div>\n                                <button onClick={() => removeFromCart(item)} className=\"text-red-500\">✖</button>\n                            </div>\n                        ))}\n                    </div>\n                    <div className=\"border-t-2 pt-2 mt-2\">\n                        <p className=\"font-bold text-2xl\">סה\"כ: {cartTotal.toFixed(2)} ₪</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Step 3: Checkout\nconst CheckoutStep: React.FC<{ cart: Item[], budget: number }> = ({ cart, budget }) => {\n    const listItemsInCart = cart.filter(item => shoppingList.includes(item.name));\n    const allListItemsBought = shoppingList.every(itemName => cart.some(cartItem => cartItem.name === itemName));\n    const needs = cart.filter(i => i.type === 'צריך');\n    const wants = cart.filter(i => i.type === 'רוצה');\n    const totalCost = cart.reduce((sum, i) => sum + i.price, 0);\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in flex justify-center\">\n            <div className=\"w-full max-w-md bg-gray-100 p-6 rounded-lg shadow-lg font-mono text-xl\" style={{border: '1px solid #ccc'}}>\n                <h3 className=\"text-center font-sans font-bold text-4xl mb-4 border-b-2 border-dashed border-gray-400 pb-2\">חשבונית</h3>\n                <div className=\"space-y-1\">\n                    {needs.length > 0 && <p className=\"font-bold\">--- צרכים ---</p>}\n                    {needs.map(item => (\n                         <div key={item.id} className=\"flex justify-between\"><span>{item.name}</span><span>{item.price.toFixed(2)}</span></div>\n                    ))}\n                    {wants.length > 0 && <p className=\"font-bold mt-2\">--- רצונות ---</p>}\n                    {wants.map(item => (\n                         <div key={item.id} className=\"flex justify-between\"><span>{item.name}</span><span>{item.price.toFixed(2)}</span></div>\n                    ))}\n                </div>\n                 <div className=\"border-t-2 border-dashed border-gray-400 mt-4 pt-2 space-y-2\">\n                    <div className=\"flex justify-between font-bold text-2xl\"><span>סה\"כ:</span><span>{totalCost.toFixed(2)} ₪</span></div>\n                    <div className=\"flex justify-between text-2xl\"><span>תקציב:</span><span>{BUDGET.toFixed(2)} ₪</span></div>\n                    <div className=\"flex justify-between font-bold text-2xl\"><span>עודף:</span><span>{budget.toFixed(2)} ₪</span></div>\n                </div>\n                 <div className=\"mt-6 font-sans text-center\">\n                    {allListItemsBought ? (\n                        <div className=\"p-2 bg-green-200 text-green-800 rounded\">\n                            <h4 className=\"font-bold text-2xl\">כל הכבוד! קניתם הכל מהרשימה!</h4>\n                        </div>\n                    ) : (\n                        <div className=\"p-2 bg-yellow-200 text-yellow-800 rounded\">\n                            <h4 className=\"font-bold text-2xl\">שימו לב!</h4>\n                            <p className=\"text-xl\">לא קניתם את כל הפריטים מהרשימה.</p>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Step 4: Summary\nconst SummaryStep: React.FC = () => {\n     const tips = [\n        { title: 'הכינו רשימה', text: 'תכנון מראש עוזר לכם להישאר ממוקדים ולהימנע מקניות מיותרות.', icon: '📝' },\n        { title: 'הבדילו בין צורך לרצון', text: 'שאלו את עצמכם \"האם אני באמת צריך את זה?\" לפני שאתם מכניסים משהו לעגלה.', icon: '🤔' },\n        { title: 'היזהרו ממבצעים', text: 'מבצעים נראים מפתים, אבל הם נועדו לגרום לכם לקנות דברים שלא תכננתם.', icon: '💸' },\n        { title: 'עקבו אחר התקציב', text: 'דעו תמיד כמה כסף נשאר לכם כדי לא להיכנס להוצאות בלתי צפויות.', icon: '📊' }\n    ];\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-5xl font-bold text-brand-teal mb-6 text-center\">מה למדנו על צרכנות נבונה?</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {tips.map(tip => (\n                    <div key={tip.title} className=\"bg-white/60 p-6 rounded-xl border border-white/40 text-center\">\n                        <span className=\"text-5xl\">{tip.icon}</span>\n                        <h4 className=\"text-4xl font-bold text-brand-light-blue mt-3 mb-2\">{tip.title}</h4>\n                        <p className=\"text-brand-dark-blue/90 text-xl\">{tip.text}</p>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// Step 5: Quiz\nconst QuizStep: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = [\n        { q: \"מהי הדרך הטובה ביותר להימנע מקניות לא מתוכננות בסופר?\", options: [\"ללכת לקניות כשאתם רעבים\", \"להכין רשימת קניות מראש ולהיצמד אליה\", \"לקנות כל מה שנראה טעים\", \"להסתובב בכל המעברים\"], answer: \"להכין רשימת קניות מראש ולהיצמד אליה\" },\n        { q: \"מהי המטרה העיקרית של 'מוצרי קופה' קטנים וזולים?\", options: [\"לעזור לכם לחסוך כסף\", \"לגרום לכם לקנות בדחף משהו שלא תכננתם\", \"לבדוק אם אתם ערניים\", \"אלה מתנות מהחנות\"], answer: \"לגרום לכם לקנות בדחף משהו שלא תכננתם\" },\n        { q: \"מה ההבדל בין 'צורך' ל'רצון'?\", options: [\"אין הבדל, זה אותו דבר\", \"צורך הוא משהו חיוני (כמו לחם), רצון הוא מותרות (כמו גלידה)\", \"רצון הוא משהו זול, צורך הוא משהו יקר\", \"צרכים קונים במכולת, רצונות קונים בקניון\"], answer: \"צורך הוא משהו חיוני (כמו לחם), רצון הוא מותרות (כמו גלידה)\" },\n        { q: \"אם מוצר עולה 10 ש\\\"ח, ויש עליו מבצע '2+1 מתנה', כמה עולה כל יחידה אם קונים את המבצע?\", options: [\"10 ש\\\"ח\", \"5 ש\\\"ח\", \"כ-6.67 ש\\\"ח\", \"3.33 ש\\\"ח\"], answer: \"כ-6.67 ש\\\"ח\" },\n    ];\n    \n    const [quizState, setQuizState] = useState<'not_started' | 'in_progress' | 'finished'>('not_started');\n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].answer) {\n            setScore(s => s + 1);\n        }\n    };\n    \n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setQuizState('finished');\n        }\n    };\n\n    const restartQuiz = () => {\n        setQuizState('in_progress');\n        setCurrent(0);\n        setScore(0);\n        setSelected('');\n    };\n    \n    useEffect(() => {\n        if (quizState === 'finished') {\n            if (score / questions.length >= 0.75) { // 80% is 3 out of 4\n              onComplete();\n            }\n        }\n    }, [quizState, score, onComplete, questions.length]);\n    \n    if (quizState === 'finished') {\n        const isCompleted = score >= 3;\n        const resultMessage = isCompleted\n            ? \"כל הכבוד! עמדתם ביעד והשלמתם את המודול!\"\n            : \"עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.\";\n        return (\n             <div className=\"relative text-center p-6 bg-white/80 border-4 border-yellow-400 rounded-lg shadow-2xl\">\n                <TrophyIcon className=\"w-20 h-20 mx-auto text-yellow-500\" />\n                <h3 className=\"text-4xl font-bold mb-2 mt-4 text-brand-dark-blue\">סיימת את הבוחן!</h3>\n                <p className=\"text-2xl mb-4 text-brand-dark-blue/80\">{resultMessage}</p>\n                <div className=\"bg-brand-light-blue/20 p-3 rounded-lg my-4\">\n                    <p className=\"text-3xl\">הציון שלך:</p>\n                    <p className=\"text-5xl font-bold text-brand-light-blue\">{score} / {questions.length}</p>\n                </div>\n                <button onClick={restartQuiz} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg text-xl\">שחק/י שוב</button>\n            </div>\n        );\n    }\n\n    if (quizState === 'not_started') {\n         return (\n            <div className=\"bg-white/60 backdrop-blur-sm p-6 rounded-lg text-center\">\n                <h3 className=\"text-4xl font-bold mb-2\">מוכנים? בחנו את עצמכם</h3>\n                <p className=\"mb-6 text-xl\">עליכם לענות נכון על 3 מתוך 4 שאלות כדי להשלים את המודול.</p>\n                <button onClick={() => setQuizState('in_progress')} className=\"bg-brand-magenta hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-lg text-xl\">התחל בוחן</button>\n            </div>\n        );\n    }\n\n    const q = questions[current];\n    return (\n        <div className=\"bg-white/50 p-6 rounded-lg\">\n            <div className=\"mb-4\">\n                <div className=\"bg-gray-300 rounded-full h-2.5\">\n                    <div className=\"bg-brand-teal h-2.5 rounded-full\" style={{ width: `${((current + 1) / questions.length) * 100}%` }}></div>\n                </div>\n            </div>\n            <h3 className=\"text-2xl font-bold mb-4 text-center\">{q.q}</h3>\n            <div className=\"space-y-3\">\n                {q.options.map(opt => {\n                     const isCorrect = opt === q.answer;\n                     const isSelected = opt === selected;\n                     let buttonClass = 'bg-white/60 hover:bg-white';\n                     if(selected) {\n                         if(isCorrect) buttonClass = 'bg-green-500 text-white';\n                         else if (isSelected) buttonClass = 'bg-red-500 text-white';\n                         else buttonClass = 'bg-gray-200/50 opacity-60';\n                     }\n                    return (\n                        <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                            className={`flex justify-between items-center w-full text-right p-3 rounded-lg transition-colors text-xl ${buttonClass}`}>\n                            <span>{opt}</span>\n                            {selected && isCorrect && <CheckIcon />}\n                            {selected && isSelected && !isCorrect && <CrossIcon />}\n                        </button>\n                    );\n                })}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-6 w-full bg-brand-light-blue text-white font-bold py-3 rounded-lg text-xl\">\n                {current === questions.length - 1 ? 'סיים בוחן' : 'השאלה הבאה'}\n            </button>}\n        </div>\n    );\n};\n\n\n// Main Module Component\nconst HowMuchCostModule: React.FC<HowMuchCostModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [cart, setCart] = useState<Item[]>([]);\n    const [budget, setBudget] = useState(BUDGET);\n    \n    const restartModule = () => {\n        setCurrentStep(0);\n        setCart([]);\n        setBudget(BUDGET);\n    }\n    \n    const handleSetStep = (step: number) => {\n         if (step < 2 && currentStep >= 2) {\n             // If going back to the game or intro, reset the game state\n             setCart([]);\n             setBudget(BUDGET);\n         }\n        setCurrentStep(step);\n    }\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <ShoppingChallenge cart={cart} setCart={setCart} budget={budget} setBudget={setBudget} />;\n            case 2: return <CheckoutStep cart={cart} budget={budget} />;\n            case 3: return <SummaryStep />;\n            case 4: return <QuizStep onComplete={onComplete} />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            \n            {renderStepContent()}\n\n            <div className=\"flex justify-between items-center mt-8\">\n                <button onClick={() => handleSetStep(currentStep - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                {currentStep === 2 && <button onClick={restartModule} className=\"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-6 rounded-lg\">התחל מחדש</button>}\n                <button onClick={() => handleSetStep(currentStep + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default HowMuchCostModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface MonopoliesModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"מהו מונופול?\", \"אתגר השוקו\", \"דוגמאות מהשוק\", \"מי השופט?\", \"חידון המונופולים\"];\n\n// --- Step 1: Introduction ---\nconst IntroductionStep: React.FC = () => (\n    <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">מהו מונופול?</h3>\n        <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">\n            דמיינו שוק. בשוק תחרותי יש הרבה מוכרים, והם מתחרים ביניהם על המחיר והאיכות כדי שתקנו מהם. אבל מה קורה כשיש רק מוכר אחד?\n        </p>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            <div className=\"bg-green-100/60 p-6 rounded-xl border-2 border-green-300\">\n                <h4 className=\"font-bold text-3xl text-green-700 mb-3\">✅ שוק תחרותי</h4>\n                <div className=\"flex justify-around items-end text-5xl mb-3\"><span>🏪</span><span>🏪</span><span>🏪</span></div>\n                <p className=\"text-xl\">הרבה מוכרים, מחירים נמוכים, איכות גבוהה, ומבחר גדול.</p>\n            </div>\n            <div className=\"bg-red-100/60 p-6 rounded-xl border-2 border-red-300\">\n                <h4 className=\"font-bold text-3xl text-red-700 mb-3\">❌ שוק מונופוליסטי</h4>\n                <div className=\"flex justify-around items-end text-7xl mb-3\"><span>🏢</span></div>\n                <p className=\"text-xl\">מוכר אחד שולט, מחירים גבוהים, איכות נמוכה, ואין לכם ברירה אחרת.</p>\n            </div>\n        </div>\n    </div>\n);\n\n// Step 2: Monopoly Game\nconst MonopolyGame: React.FC = () => {\n    const [round, setRound] = useState(1);\n    const [boughtItem, setBoughtItem] = useState<string | null>(null);\n    const [takeover, setTakeover] = useState(false);\n\n    const competitiveStores = [\n        { name: 'שוקו-כיף', price: 6, logo: '🥛', quality: 'טעם מעולה!', color: 'bg-blue-400' },\n        { name: 'שוקו-לנד', price: 5, logo: '🧃', quality: 'הכי זול!', color: 'bg-green-400' },\n        { name: 'שוקו-פרימיום', price: 8, logo: '✨', quality: 'הכי איכותי!', color: 'bg-yellow-400' },\n    ];\n    const monopolyStore = { name: 'תאגיד השוקו הגדול', price: 10, logo: '👑', quality: 'טעם חדש (פחות שוקולד)', color: 'bg-red-500' };\n\n    const handleBuy = (name: string) => {\n        if (boughtItem) return;\n        setBoughtItem(name);\n    };\n\n    const handleNextRound = () => {\n        setTakeover(true);\n        setTimeout(() => {\n            setRound(2);\n            setBoughtItem(null);\n        }, 1500);\n    };\n    \n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אתגר השוקו!</h3>\n            {round === 1 && (\n                 <>\n                    <p className=\"text-2xl mb-6\">סיבוב 1: שוק תחרותי. אתם רוצים לקנות שוקו. בחרו את האפשרות המועדפת עליכם.</p>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                        {competitiveStores.map((store, i) => (\n                            <div \n                                key={store.name} \n                                onClick={() => handleBuy(store.name)}\n                                className={`p-6 rounded-2xl border-4 transition-all duration-300 transform ${boughtItem ? (boughtItem === store.name ? 'scale-110 shadow-2xl' : 'opacity-50 scale-90') : 'hover:scale-105 cursor-pointer'} ${store.color}`}\n                                style={{transitionDelay: `${i * 100}ms`}}\n                            >\n                                <p className=\"text-6xl mb-2\">{store.logo}</p>\n                                <h4 className=\"font-bold text-3xl text-white\">{store.name}</h4>\n                                <p className=\"text-white font-semibold text-xl\">{store.quality}</p>\n                                <p className=\"text-5xl font-bold text-white mt-2\">{store.price} ₪</p>\n                            </div>\n                        ))}\n                    </div>\n                    {boughtItem && <button onClick={handleNextRound} className=\"mt-8 bg-brand-magenta text-white font-bold p-3 rounded-lg animate-pulse\">לסיבוב הבא</button>}\n                </>\n            )}\n            {round === 2 && (\n                <div className=\"relative\">\n                    <p className=\"text-2xl mb-6\">סיבוב 2: השתלטות מונופוליסטית! \"תאגיד השוקו הגדול\" קנה את כל המתחרים.</p>\n                     <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 relative h-64\">\n                        {competitiveStores.map((store, i) => (\n                             <div key={store.name} className={`p-6 rounded-2xl border-4 ${store.color} absolute top-0 w-1/3 transition-all duration-1000 ${takeover ? 'left-1/3 top-1/2 opacity-0' : 'left-[calc(33.33%*'+i+')]'}`}>\n                                <p className=\"text-6xl\">{store.logo}</p>\n                            </div>\n                        ))}\n                    </div>\n                    <div className={`p-6 rounded-2xl border-4 ${monopolyStore.color} max-w-sm mx-auto ${takeover ? 'animate-fade-in' : 'opacity-0'}`} style={{animationDelay: '1s'}}>\n                        <p className=\"text-6xl mb-2\">{monopolyStore.logo}</p>\n                        <h4 className=\"font-bold text-3xl text-white\">{monopolyStore.name}</h4>\n                        <p className=\"text-white font-semibold text-xl\">{monopolyStore.quality}</p>\n                        <p className=\"text-5xl font-bold text-white mt-2\">{monopolyStore.price} ₪</p>\n                    </div>\n                    <p className=\"text-3xl font-bold mt-6\">עכשיו יש רק אפשרות אחת. המחיר עלה והאיכות ירדה. זוהי המשמעות של מונופול!</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\n// Step 3: Real World Examples\nconst ExamplesStep: React.FC = () => {\n     const examples = [\n        { name: 'חברת החשמל', logo: '⚡', desc: 'החברה היחידה שמספקת חשמל לרוב הבתים בישראל.' },\n        { name: 'אסם', logo: '🥨', desc: 'שולטת בחלק גדול מאוד משוק החטיפים (למשל, במבה) והפסטה.' },\n        { name: 'תנובה', logo: '🐄', desc: 'בעלת נתח שוק עצום במוצרי חלב רבים, כמו גבינה קוטג\\'.' },\n    ];\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-6 text-center\">מונופולים וריכוזיות בשוק הישראלי</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {examples.map(ex => (\n                    <div key={ex.name} className=\"bg-white/50 p-6 rounded-xl border text-center\">\n                        <p className=\"text-6xl mb-3\">{ex.logo}</p>\n                        <h4 className=\"text-3xl font-bold text-brand-light-blue\">{ex.name}</h4>\n                        <p className=\"mt-2 text-brand-dark-blue/90 text-xl\">{ex.desc}</p>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// Step 4: Competition Authority\nconst AuthorityStep: React.FC = () => (\n     <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אז מי שומר עלינו?</h3>\n         <p className=\"text-6xl mb-4\">👮‍♀️</p>\n        <h4 className=\"text-3xl font-bold text-brand-light-blue mb-3\">רשות התחרות</h4>\n        <p className=\"text-2xl max-w-2xl mx-auto text-brand-dark-blue/90\">\n           בישראל קיים גוף ממשלתי שנקרא \"רשות התחרות\". תפקידה הוא להיות ה\"שופט\" של השוק. היא מפקחת על חברות גדולות, מונעת מהן להפוך למונופולים שפוגעים בצרכנים, ובודקת שחברות לא מתאמות מחירים ביניהן. המטרה שלה היא לשמור על תחרות הוגנת לטובת כולנו.\n        </p>\n    </div>\n);\n\n// Step 5: \"Millionaire\" Quiz Game\nconst MillionaireQuiz: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const questions = [\n        { product: 'במבה', productImage: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Bamba-2020-new.jpg/440px-Bamba-2020-new.jpg', options: ['אסם', 'תנובה', 'שטראוס', 'החברה המרכזית למשקאות'], correctAnswer: 'אסם' },\n        { product: 'קוטג\\'', productImage: 'https://upload.wikimedia.org/wikipedia/he/thumb/e/e6/Tnuva_Cottage_2020.jpg/500px-Tnuva_Cottage_2020.jpg', options: ['טרה', 'שטראוס', 'תנובה', 'גד'], correctAnswer: 'תנובה' },\n        { product: 'קטשופ', productImage: 'https://www.osem.co.il/tm-content/uploads/2021/11/7290000053912.jpg', options: ['היינץ', 'אסם', 'ויליפוד', 'יכין'], correctAnswer: 'אסם' },\n        { product: 'שוקולד פרה', productImage: 'https://upload.wikimedia.org/wikipedia/he/b/bd/Elite_Cow_Chocolate.jpg', options: ['שטראוס', 'כרמית', 'אסם', 'תנובה'], correctAnswer: 'שטראוס' },\n        { product: 'קוקה קולה', productImage: 'https://m.pricez.co.il/ProductPictures/7290000189035.jpg', options: ['טמפו', 'יפאורה', 'החברה המרכזית למשקאות', 'אסם'], correctAnswer: 'החברה המרכזית למשקאות' },\n        { product: 'פסטה פרפקטו', productImage: 'https://www.osem.co.il/tm-content/uploads/2021/11/7290000062754.jpg', options: ['ברילה', 'אסם', 'שופרסל', 'ויליפוד'], correctAnswer: 'אסם' },\n        { product: 'מילקי', productImage: 'https://res.cloudinary.com/shufersal/image/upload/f_auto,q_auto/v1551801217/prod/product_images/products_zoom/YAK44_Z_P_7296007000105_1.png', options: ['תנובה', 'טרה', 'שטראוס', 'יופלה'], correctAnswer: 'שטראוס' },\n        { product: 'מי עדן', productImage: 'https://res.cloudinary.com/shufersal/image/upload/f_auto,q_auto/v1551801217/prod/product_images/products_zoom/UQL20_Z_P_7290000114037_1.png', options: ['נביעות', 'החברה המרכזית למשקאות', 'טמפו', 'יפאורה'], correctAnswer: 'החברה המרכזית למשקאות' },\n        { product: 'שמן זית יד מרדכי', productImage: 'https://res.cloudinary.com/shufersal/image/upload/f_auto,q_auto/v1551801217/prod/product_images/products_zoom/VEG54_Z_P_7290000130839_1.png', options: ['זיתא', 'עץ הזית', 'שטראוס', 'תנובה'], correctAnswer: 'שטראוס' },\n        { product: 'גבינה לבנה', productImage: 'https://res.cloudinary.com/shufersal/image/upload/f_auto,q_auto/v1551801217/prod/product_images/products_zoom/AUK40_Z_P_7290000042022_1.png', options: ['שטראוס', 'גד', 'טרה', 'תנובה'], correctAnswer: 'תנובה' },\n    ];\n    const companyLogos: Record<string, string> = {\n        'אסם': 'https://upload.wikimedia.org/wikipedia/he/thumb/1/13/Osem_Logo.svg/440px-Osem_Logo.svg.png',\n        'תנובה': 'https://upload.wikimedia.org/wikipedia/he/thumb/9/91/Tnuva_logo_2017.svg/440px-Tnuva_logo_2017.svg.png',\n        'שטראוס': 'https://upload.wikimedia.org/wikipedia/he/thumb/e/e2/Strauss_Group_logo.svg/440px-Strauss_Group_logo.svg.png',\n        'החברה המרכזית למשקאות': 'https://upload.wikimedia.org/wikipedia/he/thumb/c/c3/Central_Bottling_Company_logo.svg/600px-Central_Bottling_Company_logo.svg.png',\n        'טרה': 'https://upload.wikimedia.org/wikipedia/he/thumb/8/8c/Tara_logo.svg/440px-Tara_logo.svg.png',\n        'גד': 'https://www.gad-dairy.co.il/wp-content/uploads/2021/08/logo.svg',\n        'יפאורה': 'https://upload.wikimedia.org/wikipedia/he/thumb/e/e9/Yafura_tavori_logo.svg/440px-Yafura_tavori_logo.svg.png',\n        'טמפו': 'https://upload.wikimedia.org/wikipedia/he/thumb/a/a2/Tempo_Beer_Industries_logo.svg/440px-Tempo_Beer_Industries_logo.svg.png',\n        'היינץ': 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Heinz_logo.svg/440px-Heinz_logo.svg.png',\n        'ויליפוד': 'https://www.globes.co.il/news/article.aspx?did=1001323381#:~:text=images/NewGlobeLogo.png',\n        'יכין': 'https://www.yachin.co.il/wp-content/themes/yachin/images/logo.png',\n        'כרמית': 'https://www.carmit.co.il/wp-content/uploads/2020/09/logo.png',\n        'ברילה': 'https://www.barilla.com/-/media/images/se/logo/barilla-logo.png',\n        'שופרסל': 'https://upload.wikimedia.org/wikipedia/he/thumb/9/95/Shufersal_logo_2017.svg/440px-Shufersal_logo_2017.svg.png',\n        'יופלה': 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b3/Yoplait_logo.svg/440px-Yoplait_logo.svg.png',\n        'נביעות': 'https://upload.wikimedia.org/wikipedia/he/a/ab/Neviot_Logo_2021.svg',\n        'זיתא': 'https://www.zeta.co.il/wp-content/uploads/2020/07/logo.png',\n        'עץ הזית': 'https://www.etz-hayit.co.il/wp-content/themes/etz-hayit/img/logo.png'\n\n    };\n\n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState<string | null>(null);\n    const [answerState, setAnswerState] = useState<'pending' | 'correct' | 'incorrect' | null>(null);\n    const [finished, setFinished] = useState(false);\n    \n    useEffect(() => {\n        if (finished && (score / questions.length) >= 0.8) {\n            onComplete();\n        }\n    }, [finished, score, onComplete, questions.length]);\n\n    const handleSelect = (option: string) => {\n        if (selected) return;\n        setSelected(option);\n        setAnswerState('pending');\n\n        setTimeout(() => {\n            if (option === questions[current].correctAnswer) {\n                setScore(s => s + 1);\n                setAnswerState('correct');\n            } else {\n                setAnswerState('incorrect');\n            }\n        }, 2000);\n    };\n\n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected(null);\n            setAnswerState(null);\n        } else {\n            setFinished(true);\n        }\n    };\n\n    if (finished) {\n        return (\n            <div className=\"text-center p-6 bg-white/80 rounded-lg\">\n                <TrophyIcon className=\"w-16 h-16 mx-auto text-yellow-500\" />\n                <h3 className=\"text-4xl font-bold mt-2\">סיימתם את החידון!</h3>\n                <p className=\"text-3xl my-2\">הציון שלך: <span className=\"font-bold\">{score} / {questions.length}</span></p>\n                {(score / questions.length) >= 0.8 ?\n                    <p className=\"text-green-600 font-bold text-2xl\">כל הכבוד! זיהיתם את המונופולים והשלמתם את המודול.</p> :\n                    <p className=\"text-red-600 font-bold text-2xl\">עבודה טובה! נסו שוב כדי להגיע ל-80% הצלחה.</p>\n                }\n            </div>\n        )\n    }\n    \n    const q = questions[current];\n    const prizeLevels = [1000, 2000, 5000, 10000, 25000, 50000, 100000, 250000, 500000, 1000000].reverse();\n\n    return (\n        <div className=\"bg-brand-dark-blue p-4 sm:p-6 rounded-2xl animate-fade-in text-white shadow-2xl\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n                <div className=\"lg:col-span-3\">\n                    <div className=\"bg-white/10 p-6 rounded-xl border-2 border-brand-light-blue text-center\">\n                        <p className=\"font-bold text-4xl mb-4\">מי שולט במוצר: {q.product}?</p>\n                        <img src={q.productImage} alt={q.product} className=\"h-48 mx-auto object-contain rounded-lg\"/>\n                    </div>\n                    <div className=\"grid grid-cols-2 gap-4 mt-6\">\n                        {q.options.map((opt) => {\n                            const isSelected = selected === opt;\n                            const isCorrect = answerState && q.correctAnswer === opt;\n                            let stateClass = '';\n                            if (answerState === 'pending' && isSelected) stateClass = 'bg-yellow-500 animate-pulse';\n                            else if (answerState === 'correct' && isCorrect) stateClass = 'bg-green-500';\n                            else if (answerState === 'incorrect' && isSelected) stateClass = 'bg-red-500';\n                            else if (answerState === 'incorrect' && isCorrect) stateClass = 'bg-green-500';\n\n                            return (\n                                <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                                    className={`flex items-center justify-center p-3 rounded-lg border-2 border-brand-light-blue transition-all duration-300 min-h-[80px]\n                                    ${stateClass || 'bg-brand-dark-blue hover:bg-brand-light-blue/20'}`}\n                                >\n                                    <img src={companyLogos[opt] || 'https://via.placeholder.com/100x40?text='+opt} alt={opt} className=\"h-10 object-contain\"/>\n                                </button>\n                            )\n                        })}\n                    </div>\n                    {answerState && answerState !== 'pending' && (\n                        <button onClick={handleNext} className=\"mt-6 w-full bg-brand-magenta font-bold p-3 rounded-lg text-xl\">\n                            {current === questions.length - 1 ? 'סיים משחק' : 'לשאלה הבאה'}\n                        </button>\n                    )}\n                </div>\n                <div className=\"lg:col-span-1 bg-white/10 p-4 rounded-xl flex flex-col-reverse\">\n                    {prizeLevels.map((level, index) => (\n                        <div key={level} className={`p-2 my-1 rounded text-center font-bold text-lg sm:text-xl ${\n                            score > (prizeLevels.length - 1 - index) ? 'bg-green-500 text-white' : \n                            current === (prizeLevels.length - 1 - index) ? 'bg-yellow-400 text-black' : \n                            'bg-brand-dark-blue'\n                        }`}>\n                           <span className=\"text-gray-400 mr-2\">{prizeLevels.length - index}</span> {level.toLocaleString()} ₪\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Main Component\nconst MonopoliesModule: React.FC<MonopoliesModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <MonopolyGame />;\n            case 2: return <ExamplesStep />;\n            case 3: return <AuthorityStep />;\n            case 4: return <MillionaireQuiz onComplete={onComplete} />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            \n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default MonopoliesModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface SmartConsumerismModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"עולם הצרכנות\", \"זהו את הטריק!\", \"אתגר השוואת המחירים\", \"דעו את זכויותיכם\", \"משחק זיכרון\"];\n\n// --- Helper Icons ---\nconst CheckIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" /></svg>);\nconst CrossIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>);\n\n\n// --- Step 1: Introduction ---\nconst IntroductionStep: React.FC = () => (\n    <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">ברוכים הבאים לעולם הצרכנות!</h3>\n        <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n            כולנו צרכנים - אנחנו קונים אוכל, בגדים, משחקים ועוד. אבל האם ידעתם שחנויות ופרסומות משתמשות בטריקים פסיכולוגיים כדי לגרום לנו לקנות יותר ממה שתכננו?\n        </p>\n        <div className=\"flex justify-center items-center gap-4 text-6xl\">\n            <span>🛒</span>\n            <span className=\"text-4xl text-brand-magenta font-bold animate-pulse\">→</span>\n            <span>💰</span>\n            <span className=\"text-4xl text-brand-magenta font-bold animate-pulse\">→</span>\n            <span>😄</span>\n        </div>\n        <p className=\"mt-6 text-2xl font-semibold\">במודול הזה נלמד להיות צרכנים חכמים, לזהות את הטריקים, ולקנות רק את מה שאנחנו באמת צריכים ורוצים!</p>\n    </div>\n);\n\n\n// --- Step 2: Spot the Trick Game (New Version) ---\nconst SpotTheTrickGame: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const tricksQuiz = [\n        {\n            icon: '🛒',\n            question: 'למה עגלות הקניות בסופר כל כך גדולות?',\n            options: [\n                'כדי שיהיה מקום לילדים לשבת.',\n                'כדי לגרום לנו להרגיש שלא קנינו הרבה, ולמלא אותן יותר.',\n                'כי זה הגודל הסטנדרטי בכל העולם.',\n            ],\n            answer: 'כדי לגרום לנו להרגיש שלא קנינו הרבה, ולמלא אותן יותר.',\n        },\n        {\n            icon: '👀',\n            question: 'למה המוצרים היקרים והמותגים המוכרים נמצאים בגובה העיניים?',\n            options: [\n                'כי הם המוצרים הכי פופולריים.',\n                'כדי שיהיה לנו קל לראות ולקחת אותם בלי להתאמץ.',\n                'כי המוצרים הזולים כבדים יותר ושמים אותם למטה.',\n            ],\n            answer: 'כדי שיהיה לנו קל לראות ולקחת אותם בלי להתאמץ.',\n        },\n        {\n            icon: '💸',\n            question: 'למה מחירים רבים מסתיימים ב-99 אגורות (למשל, 9.99 ₪)?',\n            options: [\n                'כי זה מספר שמביא מזל.',\n                'כדי לחסוך בעודף.',\n                'כדי שהמחיר ייראה נמוך משמעותית מהמספר העגול הבא (10 ₪).',\n            ],\n            answer: 'כדי שהמחיר ייראה נמוך משמעותית מהמספר העגול הבא (10 ₪).',\n        },\n        {\n            icon: '🍬',\n            question: 'למה יש כל כך הרבה ממתקים וחטיפים ליד הקופות?',\n            options: [\n                'כי זה המקום האחרון שנשאר פנוי בסופר.',\n                'כדי לפתות אותנו לקנות אותם באופן אימפולסיבי בזמן שאנחנו מחכים בתור.',\n                'כדי שלקופאי/ת יהיה משהו לנשנש.',\n            ],\n            answer: 'כדי לפתות אותנו לקנות אותם באופן אימפולסיבי בזמן שאנחנו מחכים בתור.',\n        },\n        {\n            icon: '💰',\n            question: 'למה מוצרי יסוד כמו חלב וביצים נמצאים בדרך כלל בסוף הסופר?',\n            options: [\n                'כי שם המקררים הכי חזקים.',\n                'כדי לחסוך מקום בקדמת החנות.',\n                'כדי לגרום לנו לעבור דרך כל החנות, ולקנות עוד דברים בדרך.',\n            ],\n            answer: 'כדי לגרום לנו לעבור דרך כל החנות, ולקנות עוד דברים בדרך.',\n        },\n    ];\n\n    const [gameState, setGameState] = useState<'intro' | 'quiz' | 'finished'>('intro');\n    const [currentQuestion, setCurrentQuestion] = useState(0);\n    const [selectedAnswer, setSelectedAnswer] = useState<string | null>(null);\n    const [score, setScore] = useState(0);\n\n    const handleAnswer = (answer: string) => {\n        if (selectedAnswer) return;\n        setSelectedAnswer(answer);\n        if (answer === tricksQuiz[currentQuestion].answer) {\n            setScore(prev => prev + 1);\n        }\n    };\n\n    const handleNext = () => {\n        if (currentQuestion < tricksQuiz.length - 1) {\n            setCurrentQuestion(prev => prev + 1);\n            setSelectedAnswer(null);\n        } else {\n            setGameState('finished');\n            onComplete(); // Mark step as complete\n        }\n    };\n    \n    const restartQuiz = () => {\n        setGameState('quiz');\n        setCurrentQuestion(0);\n        setSelectedAnswer(null);\n        setScore(0);\n    }\n\n    if (gameState === 'intro') {\n        return (\n            <div className=\"bg-white/40 p-8 rounded-2xl text-center\">\n                <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">שלב 2: זהו את הטריק!</h3>\n                <p className=\"text-2xl mb-6\">הסופרמרקט מלא בטריקים שנועדו לגרום לנו לבזבז יותר. צפו בסרטון של \"כאן\" כדי ללמוד לזהות אותם, ואז בחנו את עצמכם!</p>\n                <a href=\"https://youtu.be/X285zJJjRyc\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-flex items-center justify-center w-full sm:w-auto px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors mb-6\">\n                    <svg className=\"w-6 h-6 ml-2\" fill=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z\"></path></svg>\n                    <span>צפייה בסרטון</span>\n                </a>\n                <button onClick={() => setGameState('quiz')} className=\"block mx-auto bg-brand-magenta text-white font-bold py-3 px-8 rounded-lg text-xl\">אני מוכן/ה לחידון!</button>\n            </div>\n        );\n    }\n\n    if (gameState === 'finished') {\n        return (\n            <div className=\"text-center bg-white/60 p-8 rounded-2xl\">\n                <TrophyIcon className=\"w-20 h-20 mx-auto text-yellow-500\" />\n                <h3 className=\"text-4xl font-bold mt-4\">סיימתם את החידון!</h3>\n                <p className=\"text-3xl my-4\">הציון שלכם: <span className=\"font-bold text-brand-light-blue\">{score} / {tricksQuiz.length}</span></p>\n                <p className=\"text-2xl\">עכשיו אתם יודעים לזהות את הטריקים בסופר!</p>\n                <button onClick={restartQuiz} className=\"mt-6 bg-brand-teal text-white font-bold py-2 px-6 rounded-lg text-xl\">שחק שוב</button>\n            </div>\n        );\n    }\n\n    const q = tricksQuiz[currentQuestion];\n    return (\n        <div className=\"bg-white/50 p-6 rounded-2xl\">\n            <div className=\"text-center mb-6\">\n                <p className=\"text-6xl\">{q.icon}</p>\n                <h4 className=\"font-bold text-3xl mt-2\">{q.question}</h4>\n            </div>\n            <div className=\"space-y-3\">\n                {q.options.map(opt => {\n                    const isCorrect = opt === q.answer;\n                    const isSelected = opt === selectedAnswer;\n                    let buttonClass = 'bg-white/80 hover:bg-white';\n                    if (selectedAnswer) {\n                        if (isCorrect) buttonClass = 'bg-green-500 text-white';\n                        else if (isSelected) buttonClass = 'bg-red-500 text-white';\n                        else buttonClass = 'bg-white/50 opacity-60';\n                    }\n                    return (\n                        <button key={opt} onClick={() => handleAnswer(opt)} disabled={!!selectedAnswer}\n                            className={`flex justify-between items-center w-full text-right p-4 rounded-lg transition-all duration-300 text-xl ${buttonClass}`}>\n                            <span>{opt}</span>\n                            {selectedAnswer && isCorrect && <CheckIcon className=\"w-6 h-6 text-white\"/>}\n                            {selectedAnswer && isSelected && !isCorrect && <CrossIcon className=\"w-6 h-6 text-white\"/>}\n                        </button>\n                    );\n                })}\n            </div>\n            {selectedAnswer && (\n                <button onClick={handleNext} className=\"mt-6 w-full bg-brand-light-blue text-white font-bold py-3 rounded-lg text-xl animate-pulse hover:animate-none\">\n                    {currentQuestion < tricksQuiz.length - 1 ? 'הטריק הבא' : 'סיים חידון'}\n                </button>\n            )}\n        </div>\n    );\n};\n\n\n// --- Step 3: Price Comparison Challenge ---\nconst PriceComparisonChallenge: React.FC = () => {\n    const products = [\n        { name: 'בקבוק קטן', size: 500, price: 8, icon: '🧃' },\n        { name: 'בקבוק בינוני', size: 1000, price: 12, icon: '🥤' },\n        { name: 'בקבוק גדול', size: 1500, price: 15, icon: '🍾' },\n    ];\n    const [guesses, setGuesses] = useState<{[key:string]: string}>({});\n    const [submitted, setSubmitted] = useState(false);\n    \n    const correctAnswers = products.map(p => ({...p, per100ml: (p.price / (p.size / 100))}));\n    const bestValue = correctAnswers.sort((a,b) => a.per100ml - b.per100ml)[0];\n\n    const handleGuess = (name: string, value: string) => {\n        setGuesses(prev => ({...prev, [name]: value}));\n    }\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-2\">אתגר השוואת המחירים</h3>\n            <p className=\"text-2xl mb-6\">אתם רוצים לקנות מיץ תפוזים. איזה בקבוק הכי משתלם? חשבו את המחיר ל-100 מ\"ל עבור כל בקבוק.</p>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {products.map(p => {\n                    const isCorrect = submitted && parseFloat(guesses[p.name]) === parseFloat((p.price / (p.size / 100)).toFixed(2));\n                    return (\n                        <div key={p.name} className={`p-6 rounded-2xl border-2 ${submitted ? (isCorrect ? 'border-green-400 bg-green-100/50' : 'border-red-400 bg-red-100/50') : 'border-brand-light-blue bg-white/50'}`}>\n                            <span className=\"text-6xl\">{p.icon}</span>\n                            <h4 className=\"font-bold text-3xl mt-2\">{p.name}</h4>\n                            <p className=\"text-xl\">{p.size} מ\"ל | {p.price} ₪</p>\n                            <div className=\"mt-4\">\n                                <label className=\"font-semibold text-xl\">מחיר ל-100 מ\"ל:</label>\n                                <div className=\"flex items-center justify-center gap-2\">\n                                    <input type=\"number\" step=\"0.01\" value={guesses[p.name] || ''} onChange={e => handleGuess(p.name, e.target.value)} disabled={submitted}\n                                           className=\"w-24 p-2 rounded-lg border-2 border-gray-300 text-center text-lg\" /> \n                                    <span>₪</span>\n                                </div>\n                                {submitted && <p className={`font-bold mt-1 text-lg ${isCorrect ? 'text-green-600' : 'text-red-600'}`}>התשובה הנכונה: {(p.price / (p.size / 100)).toFixed(2)} ₪</p>}\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            \n            {!submitted ? (\n                <button onClick={() => setSubmitted(true)} className=\"mt-8 bg-brand-magenta text-white font-bold py-3 px-8 rounded-lg text-xl\">בדיקה</button>\n            ) : (\n                <div className=\"mt-8 p-4 bg-yellow-100/70 rounded-lg animate-fade-in\">\n                    <h4 className=\"font-bold text-2xl text-yellow-800\">המסקנה:</h4>\n                    <p className=\"text-2xl\">הבקבוק ה<strong>{bestValue.name}</strong> הוא המשתלם ביותר! לא תמיד האריזה הגדולה ביותר היא הכי זולה. תמיד כדאי לבדוק את המחיר ליחידת מידה.</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\n\n// --- Step 4: Know Your Rights ---\nconst KnowYourRightsStep: React.FC = () => {\n    const rights = [\n        { title: 'הצגת מחיר', text: 'החוק מחייב להציג מחיר על כל מוצר. אם המחיר בקופה שונה, אתם זכאים לשלם את המחיר הנמוך מביניהם.', icon: '🏷️' },\n        { title: 'ביטול עסקה', text: 'קניתם משהו והתחרטתם? לרוב ניתן לבטל עסקה ולקבל החזר כספי תוך 14 יום, בתנאים מסוימים.', icon: '🔄' },\n        { title: 'מוצר פגום', text: 'קניתם מוצר שהתקלקל או היה פגום? אתם זכאים לתיקון, החלפה או החזר כספי מהחנות.', icon: '🔧' },\n    ];\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-6 text-center\">צרכנים חכמים מכירים את הזכויות שלהם!</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {rights.map(r => (\n                    <div key={r.title} className=\"bg-white/60 p-6 rounded-xl border border-white/40 text-center\">\n                        <span className=\"text-5xl\">{r.icon}</span>\n                        <h4 className=\"text-3xl font-bold text-brand-light-blue mt-3 mb-2\">{r.title}</h4>\n                        <p className=\"text-brand-dark-blue/90 text-xl\">{r.text}</p>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// --- Step 5: Memory Game ---\nconst MemoryGame: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const cardItems = [\n        { name: 'חלב', icon: '🥛' }, { name: 'לחם', icon: '🍞' }, { name: 'ביצים', icon: '🥚' },\n        { name: 'גבינה', icon: '🧀' }, { name: 'עגבניות', icon: '🍅' }, { name: 'שוקולד', icon: '🍫' },\n        { name: 'שתיה', icon: '🥤' }, { name: 'עוגיות', icon: '🍪' },\n    ];\n\n    const generateShuffledCards = () => {\n        return [...cardItems, ...cardItems]\n            .map((item, index) => ({ ...item, id: index }))\n            .sort(() => Math.random() - 0.5);\n    };\n\n    const [cards, setCards] = useState(generateShuffledCards);\n    const [flippedIndices, setFlippedIndices] = useState<number[]>([]);\n    const [matchedNames, setMatchedNames] = useState<string[]>([]);\n    const [isChecking, setIsChecking] = useState(false);\n\n    useEffect(() => {\n        if (flippedIndices.length === 2) {\n            setIsChecking(true);\n            const [firstIndex, secondIndex] = flippedIndices;\n            if (cards[firstIndex].name === cards[secondIndex].name) {\n                setMatchedNames(prev => [...prev, cards[firstIndex].name]);\n                setFlippedIndices([]);\n                setIsChecking(false);\n            } else {\n                setTimeout(() => {\n                    setFlippedIndices([]);\n                    setIsChecking(false);\n                }, 1200);\n            }\n        }\n    }, [flippedIndices, cards]);\n    \n    useEffect(() => {\n        if (matchedNames.length === cardItems.length) {\n            onComplete();\n        }\n    }, [matchedNames, cardItems.length, onComplete]);\n\n    const handleCardClick = (index: number) => {\n        if (isChecking || flippedIndices.includes(index) || matchedNames.includes(cards[index].name)) {\n            return;\n        }\n        setFlippedIndices(prev => [...prev, index]);\n    };\n\n    const handleRestart = () => {\n        setCards(generateShuffledCards());\n        setFlippedIndices([]);\n        setMatchedNames([]);\n        setIsChecking(false);\n    }\n    \n    const isGameFinished = matchedNames.length === cardItems.length;\n\n    return (\n        <div className=\"bg-white/40 backdrop-blur-md border border-white/30 p-8 rounded-2xl animate-fade-in text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-2\">משחק זיכרון: מצאו את הזוגות!</h3>\n            <p className=\"text-2xl mb-6\">מצאו את כל זוגות המוצרים כדי להשלים את המודול.</p>\n\n            {isGameFinished ? (\n                 <div className=\"text-center p-6 bg-white/80 rounded-lg\">\n                    <TrophyIcon className=\"w-16 h-16 mx-auto text-yellow-500\" />\n                    <h3 className=\"text-4xl font-bold mt-2\">כל הכבוד! מצאתם את כל הזוגות!</h3>\n                    <p className=\"text-xl\">השלמתם את המודול בהצלחה.</p>\n                    <button onClick={handleRestart} className=\"mt-4 bg-brand-teal text-white font-bold py-2 px-4 rounded-lg text-lg\">שחק שוב</button>\n                </div>\n            ) : (\n                <div className=\"grid grid-cols-4 gap-4 max-w-lg mx-auto\" style={{ perspective: '1000px' }}>\n                    {cards.map((card, index) => {\n                        const isFlipped = flippedIndices.includes(index) || matchedNames.includes(card.name);\n                        return (\n                            <div key={card.id} onClick={() => handleCardClick(index)} \n                                className={`relative w-full aspect-square cursor-pointer transition-transform duration-500 ${isFlipped ? '[transform:rotateY(180deg)]' : ''}`}\n                                style={{ transformStyle: 'preserve-3d' }}>\n                                {/* Card Front (Facedown) */}\n                                <div className=\"absolute w-full h-full bg-brand-teal rounded-lg flex items-center justify-center\" style={{ backfaceVisibility: 'hidden' }}>\n                                    <span className=\"text-white text-5xl font-bold\">?</span>\n                                </div>\n                                {/* Card Back (Faceup) */}\n                                <div className=\"absolute w-full h-full bg-white rounded-lg flex flex-col items-center justify-center p-2 border-2 border-brand-teal\" style={{ transform: 'rotateY(180deg)', backfaceVisibility: 'hidden' }}>\n                                    <span className=\"text-4xl\">{card.icon}</span>\n                                    <span className=\"text-xs font-bold\">{card.name}</span>\n                                </div>\n                            </div>\n                        );\n                    })}\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst SmartConsumerismModule: React.FC<SmartConsumerismModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [trickGameCompleted, setTrickGameCompleted] = useState(false);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <SpotTheTrickGame onComplete={() => setTrickGameCompleted(true)} />;\n            case 2: return <PriceComparisonChallenge />;\n            case 3: return <KnowYourRightsStep />;\n            case 4: return <MemoryGame onComplete={onComplete} />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n\n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button \n                    onClick={() => setCurrentStep(s => s + 1)} \n                    disabled={currentStep === steps.length - 1 || (currentStep === 1 && !trickGameCompleted)} \n                    className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                    title={currentStep === 1 && !trickGameCompleted ? 'עליך לסיים את החידון כדי להמשיך' : ''}\n                >\n                    {currentStep === 1 && !trickGameCompleted ? 'השלם את החידון' : 'הבא'}\n                </button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default SmartConsumerismModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\ninterface RelationshipsMoneyModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"אישיות פיננסית\", \"דילמות חברתיות\", \"אומרים את זה נכון\"];\n\n// --- Chapter 1: Money Personality Quiz ---\ntype Superpower = 'Saver' | 'Spender' | 'Giver' | 'Avoider';\nconst MoneyPersonalityQuiz: React.FC<{ onQuizComplete: (power: Superpower) => void }> = ({ onQuizComplete }) => {\n    const questions = [\n        { q: 'קיבלת 100₪ במתנה. מה הדבר הראשון שאתה עושה?', options: { Spender: 'חושב מה אפשר לקנות עם זה', Saver: 'מכניס אותו ישר לקופת החיסכון', Giver: 'חושב איך לפנק חבר או בן משפחה', Avoider: 'שם אותו בארנק ושוכח ממנו' } },\n        { q: 'חברים מציעים יציאה יקרה. המחשבה הראשונה שלך היא...', options: { Giver: 'ברור, אני אשלם על כולם!', Spender: 'נשמע כיף! יאללה נזרום', Avoider: 'אלך, ואדאג לגבי הכסף אחר כך', Saver: 'אולי נציע משהו זול יותר?' } },\n        { q: 'כשאתה חושב על כסף, אתה מרגיש בעיקר...', options: { Saver: 'ביטחון כשיש, לחץ כשאין', Avoider: 'לחץ ובלבול, מעדיף לא לחשוב על זה', Spender: 'שמחה וריגוש מהאפשרויות', Giver: 'שזה כלי לעזור לאחרים' } },\n        { q: 'כשאת/ה רואה מבצע בחנות, את/ה...', options: { Spender: 'קונה דברים שלא תכננת רק בגלל ההנחה', Saver: 'בודק/ת אם זה משהו שבאמת היית צריך/ה', Avoider: 'מרגיש/ה מוצף/ת ועוזב/ת את החנות', Giver: 'מיד חושב/ת למי אפשר לקנות את זה כמתנה' } },\n        { q: 'חבר מבקש ממך הלוואה קטנה. התגובה הראשונית שלך היא...', options: { Giver: 'לתת לו בשמחה בלי לשאול שאלות', Avoider: 'להסכים, אבל להרגיש מאוד לא בנוח עם זה', Saver: 'לשאול בנימוס מתי יוכל להחזיר', Spender: 'להסכים, ולהציע שתשלם עליו ביציאה הבאה' } },\n        { q: 'איך היית מתאר/ת את חשבון הבנק שלך?', options: { Saver: 'אני בודק אותו כל יום', Spender: 'זה כסף שנועד שישתמשו בו!', Giver: 'זה משאב שיכול לעזור לאחרים', Avoider: 'אני משתדל/ת לא להסתכל עליו יותר מדי' } },\n    ];\n    const [answers, setAnswers] = useState<Record<number, Superpower | null>>({});\n    \n    const handleAnswer = (qIndex: number, power: Superpower) => {\n        setAnswers(prev => ({ ...prev, [qIndex]: power }));\n    };\n\n    useEffect(() => {\n        if (Object.keys(answers).length === questions.length) {\n            const counts: Record<Superpower, number> = { Saver: 0, Spender: 0, Giver: 0, Avoider: 0 };\n            Object.values(answers).forEach(power => { if (typeof power === 'string') counts[power as Superpower]++; });\n            const dominantPower = (Object.keys(counts) as Superpower[]).reduce((a, b) => (counts[a] > counts[b] ? a : b));\n            setTimeout(() => onQuizComplete(dominantPower), 500);\n        }\n    }, [answers, questions.length, onQuizComplete]);\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">פרק 1: מהי אישיות הכסף שלכם?</h3>\n            <p className=\"text-2xl mb-8\">ענו על השאלות וגלו איך אתם מתנהלים עם כסף.</p>\n            <div className=\"space-y-8\">\n                {questions.map((q, i) => (\n                    <div key={i}>\n                        <h4 className=\"font-bold text-3xl mb-4\">{q.q}</h4>\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                            {Object.entries(q.options).map(([power, text]) => (\n                                <button key={power} onClick={() => handleAnswer(i, power as Superpower)}\n                                    className={`p-4 rounded-lg transition-all text-xl ${answers[i] === power ? 'bg-brand-light-blue text-white ring-4 ring-brand-teal' : 'bg-white/70 hover:bg-white'}`}>\n                                    {text}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nconst QuizResult: React.FC<{ result: Superpower }> = ({ result }) => {\n    const resultsInfo: Record<Superpower, { name: string; icon: string; desc: string }> = {\n        Saver: { name: 'החסכן', icon: '🐷', desc: 'אתה חושב לטווח ארוך ומעולה בלחסוך למטרות. לפעמים זה יכול למנוע ממך ליהנות מהרגע.' },\n        Spender: { name: 'הבזבזן', icon: '🛍️', desc: 'אתה אוהב לחיות את הרגע וליהנות מהכסף שלך! לפעמים, זה עלול להקשות על חיסכון למטרות גדולות.' },\n        Giver: { name: 'הנותן', icon: '🎁', desc: 'אתה נדיב ואוהב להשתמש בכסף כדי לשמח אחרים. חשוב לוודא שאתה לא שוכח לדאוג גם לעצמך.' },\n        Avoider: { name: 'הנמנע', icon: '🙈', desc: 'אתה מעדיף לא לחשוב על כסף כי זה מלחיץ אותך. התעלמות עלולה לגרום לבעיות בעתיד.' },\n    };\n    const info = resultsInfo[result];\n    return (\n         <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אישיות הכסף שלכם היא:</h3>\n            <div className=\"bg-white/60 p-6 rounded-2xl inline-block\">\n                <p className=\"text-6xl\">{info.icon}</p>\n                <h4 className=\"text-5xl font-bold mt-2\">{info.name}</h4>\n            </div>\n            <p className=\"text-2xl mt-6 max-w-2xl mx-auto\">{info.desc}</p>\n            <p className=\"mt-4 p-3 bg-yellow-100/70 text-yellow-800 rounded-lg text-xl font-semibold\">\n                <b>הערה:</b> זוהי רק הגדרה כללית ורובנו מורכבים משילוב של כמה אישיויות. המטרה היא להכיר את הנטיות שלנו כדי לקבל החלטות טובות יותר.\n            </p>\n        </div>\n    )\n};\n\n\n// --- Chapter 2: Financial Snake Game ---\nconst BOARD_SIZE = 20;\nconst INITIAL_SPEED = 150;\nconst MIN_SPEED = 60;\nconst SPEED_INCREMENT = 4;\n\ninterface Dilemma {\n  id: number;\n  question: string;\n  options: { text: string; feedback: string }[];\n}\n\nconst dilemmas: Dilemma[] = [\n    { id: 1, question: \"חבר שכח את הארנק ומבקש שתשלם עליו כרטיס לסרט (50₪), ומבטיח להחזיר לך. מה תעשה?\", options: [{ text: \"אשלם בשמחה. חברים עוזרים אחד לשני.\", feedback: \"נדיב מצידך! רק ודא שאתה יכול להרשות זאת לעצמך ושנעים לך להזכיר לו אם ישכח.\" }, { text: \"אהסס ואומר שאני גם בתקציב דחוק.\", feedback: \"זה בסדר גמור לתעדף את התקציב שלך. כנות היא דבר חשוב בחברות.\" }, { text: \"אשלם, אבל מיד אשלח לו תזכורת עם פרטי הבנק שלי.\", feedback: \"זה פרקטי, אבל עלול להרגיש קצת רשמי מדי. תזכורת חברית בעל פה מאוחר יותר יכולה לעבוד טוב יותר.\" }]},\n    { id: 2, question: \"החברים רוצים ללכת למסעדה יקרה, אבל אתה מנסה לחסוך כסף. מה תעשה?\", options: [{ text: \"אלך בכל מקרה ואדאג לגבי הכסף אחר כך.\", feedback: \"זה עלול להוביל ללחץ וחובות. עדיף להיות כנה לגבי המצב שלך.\" }, { text: \"אציע חלופה זולה יותר, כמו פיצה או פיקניק.\", feedback: \"רעיון מצוין! זה מראה שאתה רוצה לבלות איתם אבל גם מכבד את התקציב שלך.\" }, { text: \"אגיד שאני לא יכול לבוא בלי להסביר למה.\", feedback: \"זה עלול לגרום לחברים שלך להרגיש דחויים. להסביר שאתה חוסך כסף זה בדרך כלל מובן.\" }]},\n    { id: 3, question: \"יצאתם לארוחה. הזמנת סלט ב-30₪ והחבר הזמין סטייק וקינוח ב-100₪. הוא מציע 'בוא נחלק חצי-חצי'.\", options: [{ text: \"אסכים לחלק כדי למנוע אי נעימות.\", feedback: \"זה קורה הרבה, אבל זה לא הוגן כלפיך. זה בסדר לדבר על זה.\" }, { text: \"אומר בנימוס, 'בגלל שיש הפרש גדול, אכפת לך שנשלם כל אחד על מה שהזמין?'\", feedback: \"מושלם! זו דרך הוגנת ומנומסת להתמודד עם המצב.\" }, { text: \"אחשב בקול רם בדיוק כמה כל אחד חייב.\", feedback: \"זה קצת תוקפני מדי. גישה עדינה יותר בדרך כלל עדיפה.\" }]},\n    { id: 4, question: \"חבר נותן לך מתנת יום הולדת יקרה מאוד. אתה יודע שלא תוכל להרשות לעצמך מתנה דומה עבורו.\", options: [{ text: \"ארגיש לחוץ ואתחיל לחסוך כדי לקנות לו מתנה יקרה באותה מידה.\", feedback: \"מתנות הן לא תחרות. חברים אמיתיים מעריכים את המחשבה, לא את המחיר.\" }, { text: \"אודה לו מכל הלב ואקנה לו מתנה אישית וצנועה יותר ליום הולדתו.\", feedback: \"זו הגישה הטובה ביותר. מתנה אישית ומושקעת משמעותית יותר ממתנה יקרה.\" }, { text: \"אתחמק ממנו לקראת יום הולדתו כדי לא לתת מתנה.\", feedback: \"זה עלול לפגוע ברגשותיו של החבר שלך ולהרוס את החברות.\" }]},\n];\n\nconst FinancialSnakeGame: React.FC<{ onGameComplete: () => void }> = ({ onGameComplete }) => {\n  const [gameState, setGameState] = useState<'intro' | 'playing' | 'paused' | 'gameOver'>('intro');\n  const [score, setScore] = useState(0);\n  const [snake, setSnake] = useState([{ x: 10, y: 10 }]);\n  const [food, setFood] = useState({ x: 15, y: 15 });\n  const [direction, setDirection] = useState({ x: 0, y: -1 });\n  const [speed, setSpeed] = useState(INITIAL_SPEED);\n\n  const [moneyCollected, setMoneyCollected] = useState(0);\n  const [dilemmasAnswered, setDilemmasAnswered] = useState(0);\n  const [specialCollectible, setSpecialCollectible] = useState<{ x: number; y: number } | null>(null);\n\n  const [isDilemmaVisible, setIsDilemmaVisible] = useState(false);\n  const [currentDilemma, setCurrentDilemma] = useState<Dilemma | null>(null);\n  const [dilemmaFeedback, setDilemmaFeedback] = useState<string | null>(null);\n  const [usedDilemmaIds, setUsedDilemmaIds] = useState<number[]>([]);\n\n  const directionRef = useRef(direction);\n  directionRef.current = direction;\n\n  useEffect(() => {\n    if (gameState !== 'playing') return;\n    const moveSnake = () => {\n      setSnake(prevSnake => {\n        const newSnake = [...prevSnake];\n        const head = { ...newSnake[0] };\n        head.x += directionRef.current.x;\n        head.y += directionRef.current.y;\n        if (head.x < 0) head.x = BOARD_SIZE - 1; if (head.x >= BOARD_SIZE) head.x = 0;\n        if (head.y < 0) head.y = BOARD_SIZE - 1; if (head.y >= BOARD_SIZE) head.y = 0;\n        for (let i = 1; i < newSnake.length; i++) { if (head.x === newSnake[i].x && head.y === newSnake[i].y) { setGameState('gameOver'); return prevSnake; }}\n        newSnake.unshift(head);\n        if (head.x === food.x && head.y === food.y) {\n          setScore(s => s + 10); setSpeed(s => Math.max(MIN_SPEED, s - SPEED_INCREMENT)); setMoneyCollected(c => c + 1);\n          let newFoodPos; do { newFoodPos = { x: Math.floor(Math.random() * BOARD_SIZE), y: Math.floor(Math.random() * BOARD_SIZE) }; } while (newSnake.some(s => s.x === newFoodPos.x && s.y === newFoodPos.y));\n          setFood(newFoodPos);\n        } else if (specialCollectible && head.x === specialCollectible.x && head.y === specialCollectible.y) {\n          setSpecialCollectible(null); pauseAndShowDilemma();\n        } else { newSnake.pop(); }\n        return newSnake;\n      });\n    };\n    const gameInterval = setInterval(moveSnake, speed);\n    return () => clearInterval(gameInterval);\n  }, [gameState, food, speed, specialCollectible]);\n\n  useEffect(() => {\n      if (gameState === 'playing' && moneyCollected >= 3 && !specialCollectible && dilemmasAnswered < 4) {\n          setMoneyCollected(0);\n          let newSpecialPos; do { newSpecialPos = { x: Math.floor(Math.random() * BOARD_SIZE), y: Math.floor(Math.random() * BOARD_SIZE) }; } while (snake.some(s => s.x === newSpecialPos.x && s.y === newSpecialPos.y) || (food.x === newSpecialPos.x && food.y === newSpecialPos.y));\n          setSpecialCollectible(newSpecialPos);\n      }\n  }, [moneyCollected, gameState, snake, food, specialCollectible, dilemmasAnswered]);\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) e.preventDefault();\n      const { x: dx, y: dy } = directionRef.current;\n      switch (e.key) {\n        case 'ArrowUp': if (dy === 0) setDirection({ x: 0, y: -1 }); break;\n        case 'ArrowDown': if (dy === 0) setDirection({ x: 0, y: 1 }); break;\n        case 'ArrowRight': if (dx === 0) setDirection({ x: -1, y: 0 }); break;\n        case 'ArrowLeft': if (dx === 0) setDirection({ x: 1, y: 0 }); break;\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  useEffect(() => { if (dilemmasAnswered >= 4) { onGameComplete(); }}, [dilemmasAnswered, onGameComplete]);\n\n  const resetGame = () => {\n    setSnake([{ x: 10, y: 10 }]); setFood({ x: 15, y: 15 }); setDirection({ x: 0, y: -1 }); setScore(0); setSpeed(INITIAL_SPEED);\n    setMoneyCollected(0); setDilemmasAnswered(0); setSpecialCollectible(null); setIsDilemmaVisible(false); setCurrentDilemma(null);\n    setDilemmaFeedback(null); setUsedDilemmaIds([]); setGameState('playing');\n  };\n\n  const pauseAndShowDilemma = () => {\n      setGameState('paused'); const available = dilemmas.filter(d => !usedDilemmaIds.includes(d.id));\n      if (available.length > 0) { const next = available[Math.floor(Math.random() * available.length)]; setCurrentDilemma(next); setUsedDilemmaIds(p => [...p, next.id]); setIsDilemmaVisible(true); } else { setGameState('playing'); }\n  };\n  \n  const handleDilemmaAnswer = (feedback: string) => setDilemmaFeedback(feedback);\n  const closeDilemmaAndResume = () => { setIsDilemmaVisible(false); setDilemmaFeedback(null); setCurrentDilemma(null); setDilemmasAnswered(p => p + 1); setGameState('playing'); };\n\n  const renderGameBoard = () => (\n    <div className=\"flex flex-col items-center\">\n      <div className=\"text-center mb-4 p-3 bg-white/50 rounded-lg\">\n          <h4 className=\"font-bold text-3xl text-brand-teal\">פרק 2: התמודדות עם דילמות חברתיות</h4>\n          <p className=\"text-brand-dark-blue/90 text-xl\">אספו 3 שקי כסף (💰) כדי לחשוף דילמה (❓). ענו על 4 דילמות כדי להשלים.</p>\n      </div>\n      <div className=\"flex justify-between w-full max-w-lg mb-4 text-4xl font-bold\"><span>ניקוד: {score}</span><span>דילמות: {dilemmasAnswered} / 4</span></div>\n      <div className=\"grid bg-green-100/50 border-4 border-brand-dark-blue rounded-lg relative\" style={{ gridTemplateColumns: `repeat(${BOARD_SIZE}, 1fr)`, width: '500px', height: '500px' }}>\n        {isDilemmaVisible && currentDilemma && ( <div className=\"absolute inset-0 bg-black/70 flex items-center justify-center z-10 rounded-lg\"><div className=\"bg-white p-6 rounded-xl max-w-md w-full text-brand-dark-blue animate-fade-in\"><h4 className=\"font-bold text-2xl mb-4\">{currentDilemma.question}</h4>{!dilemmaFeedback ? (<div className=\"space-y-2\">{currentDilemma.options.map(opt => (<button key={opt.text} onClick={() => handleDilemmaAnswer(opt.feedback)} className=\"w-full p-2 bg-gray-200 hover:bg-gray-300 rounded text-right text-xl\">{opt.text}</button>))}</div>) : (<div><p className=\"p-3 bg-yellow-100/70 rounded-lg text-xl\">{dilemmaFeedback}</p><button onClick={closeDilemmaAndResume} className=\"mt-4 w-full bg-brand-teal text-white font-bold p-2 rounded-lg text-xl\">המשך לשחק</button></div>)}</div></div> )}\n        {Array.from({ length: BOARD_SIZE * BOARD_SIZE }).map((_, i) => {\n            const x = i % BOARD_SIZE; const y = Math.floor(i / BOARD_SIZE);\n            const isSnake = snake.some(s => s.x === x && s.y === y); const isHead = isSnake && snake[0].x === x && snake[0].y === y;\n            const isFood = food.x === x && food.y === y; const isSpecial = specialCollectible && specialCollectible.x === x && specialCollectible.y === y;\n            return ( <div key={i} className={`flex items-center justify-center p-0.5`}><div className={`w-full h-full ${isHead ? 'bg-brand-teal rounded-sm' : isSnake ? 'bg-brand-light-blue rounded-sm' : ''}`}>{isFood && <span className=\"text-xl animate-pulse\">💰</span>}{isSpecial && <span className=\"text-xl animate-pulse\">❓</span>}</div></div> );\n        })}\n      </div>\n    </div>\n  );\n\n  if (gameState === 'intro') { return <div className=\"text-center bg-white/40 p-8 rounded-2xl\"><h3 className=\"text-4xl font-bold mb-4 text-brand-teal\">משחק הסנייק הפיננסי</h3><p className=\"text-3xl mb-6\">כסף, כמו מערכות יחסים, דורש ניהול זהיר.<br />הובילו את הסנייק, אספו כסף וענו על דילמות מהחיים!</p><button onClick={resetGame} className=\"mt-8 bg-brand-magenta text-white font-bold py-3 px-8 rounded-lg text-xl\">התחל משחק</button></div>; }\n  if (gameState === 'gameOver') { return <div className=\"text-center bg-white/40 p-8 rounded-2xl\"><h3 className=\"text-5xl font-bold text-brand-magenta mb-4\">המשחק נגמר!</h3><p className=\"text-4xl mb-8\">הניקוד הסופי שלך: {score}</p><button onClick={resetGame} className=\"mt-8 bg-brand-teal text-white font-bold py-3 px-8 rounded-lg text-xl\">שחק שוב</button></div>; }\n  return renderGameBoard();\n};\n\n// --- Chapter 3: Communication Practice ---\nconst CommunicationPractice: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const scenarios = [\n        { id: 1, scenario: \"חבר עדיין לא החזיר לך 50 ₪ שהלווית לו. איך תזכיר לו?\", options: [{ text: \"'היי, מה קורה? רק רציתי להזכיר לגבי ה-50 שקל מהסרט כשיהיה לך נוח.'\", feedback: \"מעולה! גישה חברית, לא מאשימה וברורה.\", isGood: true }, { text: \"'איפה הכסף שלי?!'\", feedback: \"זה עלול להישמע תוקפני ולגרום לחבר שלך להתגונן.\", isGood: false }, { text: \"*לא אומר כלום ומקווה שהוא יזכור לבד*\", feedback: \"הימנעות עלולה ליצור תסכול ואי נעימות. עדיף לדבר על זה בפתיחות.\", isGood: false }]},\n        { id: 2, scenario: \"החברים רוצים לקנות מתנה משותפת שעולה יותר ממה שתכננת להוציא. איך תגיב?\", options: [{ text: \"'אין מצב, זה יקר מדי.'\", feedback: \"זה קצת ישיר מדי. אפשר לנסח את זה בצורה רכה יותר.\", isGood: false }, { text: \"'רעיון מעולה! התקציב שלי קצת יותר נמוך, אולי נמצא משהו באזור ה-X שקלים?'\", feedback: \"דרך מצוינת! אתה מביע הסכמה עם הרעיון הכללי אבל מציב את הגבול שלך.\", isGood: true }, { text: \"'בסדר, אני בפנים' (ואז נכנס ללחץ מההוצאה).\", feedback: \"זה עלול להוביל אותך ללחץ כלכלי. חשוב לשמור על התקציב שלך.\", isGood: false }]},\n    ];\n    const [current, setCurrent] = useState(0);\n    const [feedback, setFeedback] = useState<string | null>(null);\n    const [selected, setSelected] = useState<string | null>(null);\n\n    const handleSelect = (option: typeof scenarios[0]['options'][0]) => {\n        if (selected) return;\n        setSelected(option.text);\n        setFeedback(option.feedback);\n    };\n\n    const handleNext = () => {\n        if (current < scenarios.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected(null);\n            setFeedback(null);\n        } else {\n            onComplete();\n        }\n    };\n    \n    const q = scenarios[current];\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">פרק 3: אומרים את זה נכון 🗣️</h3>\n            <div className=\"bg-white/60 p-6 rounded-xl text-center\">\n                <p className=\"text-3xl font-semibold mb-4\">{q.scenario}</p>\n                <div className=\"space-y-3\">\n                    {q.options.map(opt => (\n                        <button key={opt.text} onClick={() => handleSelect(opt)} disabled={!!selected}\n                            className={`w-full p-3 rounded-lg text-xl text-right transition-colors ${selected ? 'bg-gray-200' : 'bg-gray-100 hover:bg-gray-200'}`}>\n                            {opt.text}\n                        </button>\n                    ))}\n                </div>\n            </div>\n            {feedback && (\n                <div className=\"mt-6 p-4 bg-yellow-100/70 rounded-lg animate-fade-in\">\n                    <p className=\"font-bold text-xl\">משוב:</p>\n                    <p className=\"text-xl\">{feedback}</p>\n                    <button onClick={handleNext} className=\"mt-4 w-full bg-brand-teal text-white font-bold p-2 rounded-lg text-xl\">\n                        {current < scenarios.length - 1 ? \"לתרחיש הבא\" : \"סיימתי\"}\n                    </button>\n                </div>\n            )}\n        </div>\n    )\n};\n\n\n// --- Main Module Component ---\nconst RelationshipsMoneyModule: React.FC<RelationshipsMoneyModuleProps> = ({ onBack, title, onComplete }) => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [quizResult, setQuizResult] = useState<Superpower | null>(null);\n  const [completedSteps, setCompletedSteps] = useState([false, false, false]);\n\n  const handleStepCompletion = (stepIndex: number) => {\n      setCompletedSteps(prev => {\n          const newCompleted = [...prev];\n          newCompleted[stepIndex] = true;\n          return newCompleted;\n      });\n  };\n  \n  useEffect(() => {\n      if(completedSteps.every(Boolean)) {\n          onComplete();\n      }\n  }, [completedSteps, onComplete]);\n\n  const renderContent = () => {\n      if (currentStep === 0) {\n          return quizResult ? <QuizResult result={quizResult} /> : <MoneyPersonalityQuiz onQuizComplete={(result) => { setQuizResult(result); handleStepCompletion(0); }} />;\n      }\n      if (currentStep === 1) {\n          return <FinancialSnakeGame onGameComplete={() => handleStepCompletion(1)} />;\n      }\n      if (currentStep === 2) {\n          return <CommunicationPractice onComplete={() => handleStepCompletion(2)} />;\n      }\n      return null;\n  };\n\n  return (\n    <ModuleView title={title} onBack={onBack}>\n         <div className=\"mb-8\">\n            <div className=\"flex justify-between items-center mb-2\">\n                {steps.map((step, index) => (\n                    <React.Fragment key={index}>\n                        <div className=\"flex flex-col items-center flex-1\">\n                            <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                {completedSteps[index] ? '✔' : index + 1}\n                            </div>\n                            <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                        </div>\n                        {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                    </React.Fragment>\n                ))}\n            </div>\n        </div>\n      {renderContent()}\n      <div className=\"flex justify-between mt-8\">\n            <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n            <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1 || !completedSteps[currentStep]} className=\"bg-brand-teal text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">\n                {completedSteps[currentStep] ? \"הבא\" : \"השלם את הפרק\"}\n            </button>\n        </div>\n    </ModuleView>\n  );\n};\n\nexport default RelationshipsMoneyModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\nimport { GoogleGenAI } from \"@google/genai\";\nimport { getClientSimulationResponse } from '../../services/geminiService';\n\ninterface HowToEarnModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ntype Message = { sender: 'client' | 'user'; text: string };\n\nconst steps = [\"גלו את כוח העל\", \"שוק הרעיונות\", \"הלקוח הראשון\", \"צרו מודעה\", \"בוחן ידע\"];\n\n// --- Visual Components ---\nconst CheckIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" /></svg>\n);\nconst CrossIcon: React.FC = () => (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M6 18L18 6M6 6l12 12\" /></svg>\n);\n\n// --- Step 1: Superpower Quiz ---\ntype Superpower = 'creative' | 'social' | 'analytical' | 'practical';\nconst SuperpowerQuiz: React.FC<{ onQuizComplete: (power: Superpower) => void }> = ({ onQuizComplete }) => {\n    const questions = [\n        { q: 'כשחברים צריכים עזרה, הם פונים אליך בעיקר בשביל...', options: { creative: 'רעיונות מקוריים', social: 'אוזן קשבת ועצה טובה', analytical: 'תכנון הגיוני של הצעדים', practical: 'עזרה מעשית בלתקן משהו' } },\n        { q: 'את/ה מרגיש/ה הכי במיטבך כשאת/ה...', options: { creative: 'יוצר/ת משהו חדש (ציור, סיפור)', social: 'מבלה ומדבר/ת עם אנשים', analytical: 'פותר/ת חידה או בעיה מורכבת', practical: 'בונה או מרכיב/ה משהו' } },\n        { q: 'פרויקט החלומות שלך לסוף השבוע הוא...', options: { creative: 'לצלם ולערוך סרטון קצר', social: 'לארגן מפגש חברים קטן', analytical: 'ללמוד שפת תכנות בסיסית', practical: 'לשפץ רהיט ישן' } },\n    ];\n    const [answers, setAnswers] = useState<Record<number, Superpower | null>>({});\n    \n    const handleAnswer = (qIndex: number, power: Superpower) => {\n        setAnswers(prev => ({ ...prev, [qIndex]: power }));\n    };\n\n    useEffect(() => {\n        if (Object.keys(answers).length === questions.length) {\n            const counts: Record<Superpower, number> = { creative: 0, social: 0, analytical: 0, practical: 0 };\n            Object.values(answers).forEach(power => { if (typeof power === 'string') counts[power as Superpower]++; });\n            const dominantPower = (Object.keys(counts) as Superpower[]).reduce((a, b) => (counts[a] > counts[b] ? a : b));\n            setTimeout(() => onQuizComplete(dominantPower), 500);\n        }\n    }, [answers, questions.length, onQuizComplete]);\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">מהו כוח העל שלכם?</h3>\n            <p className=\"text-2xl mb-8\">ענו על השאלות הקצרות וגלו מהי החוזקה המיוחדת שלכם שתעזור לכם להרוויח כסף.</p>\n            <div className=\"space-y-8\">\n                {questions.map((q, i) => (\n                    <div key={i}>\n                        <h4 className=\"font-bold text-3xl mb-4\">{q.q}</h4>\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                            {Object.entries(q.options).map(([power, text]) => (\n                                <button key={power} onClick={() => handleAnswer(i, power as Superpower)}\n                                    className={`p-4 rounded-lg transition-all text-xl min-h-[100px] flex items-center justify-center text-center ${answers[i] === power ? 'bg-brand-light-blue text-white ring-4 ring-brand-teal' : 'bg-white/70 hover:bg-white'}`}>\n                                    {text}\n                                </button>\n                            ))}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// --- Step 2: Idea Market ---\nconst IdeaMarket: React.FC<{ superpower: Superpower; onIdeaSelected: (idea: string) => void }> = ({ superpower, onIdeaSelected }) => {\n    const superpowersInfo: Record<Superpower, { name: string; icon: string; desc: string; ideas: string[] }> = {\n        creative: { name: 'יצירתיות', icon: '🎨', desc: 'אתם אוהבים להמציא, לעצב וליצור דברים חדשים.', ideas: ['עיצוב לוגואים', 'כתיבת ברכות', 'ניהול רשתות חברתיות'] },\n        social: { name: 'כישורים חברתיים', icon: '💬', desc: 'אתם טובים עם אנשים, אוהבים לעזור, להקשיב וללמד.', ideas: ['בייביסיטר', 'דוגיסיטר', 'שיעורים פרטיים'] },\n        analytical: { name: 'חשיבה אנליטית', icon: '🧠', desc: 'אתם אוהבים סדר, פתרון בעיות וארגון מידע.', ideas: ['עזרה בשיעורי בית', 'בניית מצגות', 'ארגון קבצים במחשב'] },\n        practical: { name: 'ידיים טובות', icon: '🛠️', desc: 'אתם אוהבים לבנות, לתקן ולהשתמש בכלים.', ideas: ['תיקון אופניים', 'עזרה בגינון', 'סידור ארונות'] },\n    };\n    const info = superpowersInfo[superpower];\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl text-center\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">כוח העל שלכם: {info.icon} {info.name}!</h3>\n            <p className=\"text-2xl mb-8\">{info.desc}</p>\n            <h4 className=\"text-3xl font-bold mb-4\">שוק הרעיונות</h4>\n            <p className=\"mb-6 text-xl\">אלו רק כמה רעיונות לעסקים קטנים שמתאימים לכם. בחרו אחד כדי להמשיך:</p>\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\n                {info.ideas.map(idea => (\n                    <button key={idea} onClick={() => onIdeaSelected(idea)}\n                        className=\"p-6 rounded-2xl bg-white/70 hover:bg-white shadow-lg transform hover:-translate-y-2 transition-all\">\n                        <p className=\"text-4xl font-bold text-brand-light-blue\">{idea}</p>\n                    </button>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 3: Client Chat ---\nconst ClientChat: React.FC<{ businessIdea: string, onChatComplete: () => void }> = ({ businessIdea, onChatComplete }) => {\n    const [messages, setMessages] = useState<Message[]>([{ sender: 'client', text: `היי! ראיתי שאת/ה מציע/ה שירותי ${businessIdea}. אני צריך/ה עזרה.` }]);\n    const [userInput, setUserInput] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const [feedbackHistory, setFeedbackHistory] = useState<string[]>([]);\n    const [chatEnded, setChatEnded] = useState(false);\n    const messagesEndRef = useRef<null | HTMLDivElement>(null);\n\n    const scrollToBottom = () => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }\n\n    useEffect(scrollToBottom, [messages]);\n\n    const handleSend = async () => {\n        if (!userInput.trim() || isLoading) return;\n\n        const newMessages: Message[] = [...messages, { sender: 'user', text: userInput }];\n        setMessages(newMessages);\n        setUserInput('');\n        setIsLoading(true);\n\n        try {\n            const aiResponse = await getClientSimulationResponse(businessIdea, newMessages);\n            \n            setMessages(prev => [...prev, { sender: 'client', text: aiResponse.responseText }]);\n            if (aiResponse.feedbackText) {\n                setFeedbackHistory(prev => [...prev, aiResponse.feedbackText]);\n            }\n        } catch(e) {\n            console.error(e);\n            setMessages(prev => [...prev, { sender: 'client', text: 'אופס, הייתה בעיה. בוא/י ננסה שוב.' }]);\n        } finally {\n            setIsLoading(false);\n        }\n\n        if (newMessages.filter(m => m.sender === 'user').length >= 3) {\n            setTimeout(() => {\n                setChatEnded(true);\n                onChatComplete();\n            }, 1500);\n        }\n    };\n    \n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">סימולציה: הלקוח/ה הראשונ/ה שלכם!</h3>\n            <div className=\"bg-gray-200/50 h-80 p-4 rounded-lg overflow-y-auto flex flex-col gap-3 mb-4\">\n                {messages.map((msg, i) => (\n                    <div key={i} className={`p-3 rounded-lg max-w-xs text-xl ${msg.sender === 'client' ? 'bg-white self-start' : 'bg-blue-200 self-end'}`}>\n                        {msg.text}\n                    </div>\n                ))}\n                {isLoading && <div className=\"p-3 rounded-lg max-w-xs bg-white self-start animate-pulse text-xl\">Alex מקליד/ה...</div>}\n                <div ref={messagesEndRef} />\n            </div>\n            \n            {chatEnded ? (\n                <div className=\"text-center p-4 bg-green-100/70 rounded-lg border-2 border-green-300\">\n                    <h4 className=\"font-bold text-3xl text-green-700\">כל הכבוד, סיימתם את הסימולציה!</h4>\n                    <div className=\"text-right mt-4\">\n                        <p className=\"font-bold text-xl\">נקודות למחשבה מהשיחה:</p>\n                        <ul className=\"list-disc list-inside text-xl\">\n                            {feedbackHistory.map((fb, i) => <li key={i}>{fb}</li>)}\n                        </ul>\n                    </div>\n                </div>\n            ) : (\n                <>\n                    <div className=\"flex gap-2\">\n                        <input \n                            type=\"text\" \n                            value={userInput} \n                            onChange={(e) => setUserInput(e.target.value)}\n                            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n                            placeholder=\"כתבו את תשובתכם...\"\n                            className=\"flex-1 p-3 rounded-lg border-2 border-gray-300 text-xl\"\n                            disabled={isLoading}\n                        />\n                        <button onClick={handleSend} className=\"p-3 bg-brand-teal text-white rounded-lg font-bold disabled:bg-gray-400\" disabled={isLoading}>שלח</button>\n                    </div>\n                    {feedbackHistory.length > 0 && (\n                        <div className=\"mt-4 p-2 bg-yellow-100/60 rounded-lg text-yellow-800 text-lg\">\n                            <strong>💡 טיפ מהמאמן:</strong> {feedbackHistory[feedbackHistory.length - 1]}\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\n// --- Step 4: Ad Creator ---\nconst AdCreator: React.FC<{ businessIdea: string }> = ({ businessIdea }) => {\n    const [adInfo, setAdInfo] = useState({\n        name: '',\n        slogan: '',\n        audience: '',\n        services: '',\n        style: 'modern and professional'\n    });\n    const [logoUrl, setLogoUrl] = useState('');\n    const [logoLoading, setLogoLoading] = useState(false);\n    const [logoError, setLogoError] = useState('');\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        setAdInfo({ ...adInfo, [e.target.name]: e.target.value });\n    };\n\n    const handleGenerateLogo = async () => {\n        if (!adInfo.name || !adInfo.services) {\n            alert('אנא מלאו לפחות שם עסק ותיאור שירותים.');\n            return;\n        }\n        setLogoLoading(true);\n        setLogoError('');\n        setLogoUrl('');\n\n        const prompt = `Logo for a new small business called \"${adInfo.name}\". \n        It provides \"${adInfo.services}\" for a target audience of \"${adInfo.audience}\". \n        The business slogan is \"${adInfo.slogan}\". \n        The desired style is \"${adInfo.style}\". \n        Create a simple, iconic, vector-style logo on a clean white background.`;\n\n        try {\n            const ai = new GoogleGenAI({ apiKey: process.env.API_KEY as string });\n            const response = await ai.models.generateImages({\n                model: 'imagen-4.0-generate-001',\n                prompt: prompt,\n                config: {\n                    numberOfImages: 1,\n                    outputMimeType: 'image/png',\n                    aspectRatio: '1:1',\n                },\n            });\n            const base64ImageBytes = response.generatedImages[0].image.imageBytes;\n            setLogoUrl(`data:image/png;base64,${base64ImageBytes}`);\n        } catch (error) {\n            console.error(\"Error generating logo:\", error);\n            setLogoError('אופס, יצירת הלוגו נכשלה. נסו שוב מאוחר יותר.');\n        } finally {\n            setLogoLoading(false);\n        }\n    };\n\n    return (\n         <div className=\"bg-white/40 p-8 rounded-2xl\">\n            <h3 className=\"text-4xl font-bold text-center mb-6\">עצבו את המודעה הראשונה שלכם!</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n                <div className=\"space-y-4\">\n                    <input type=\"text\" name=\"name\" value={adInfo.name} onChange={handleInputChange} placeholder=\"שם העסק\" className=\"w-full p-2 rounded text-xl\"/>\n                    <input type=\"text\" name=\"slogan\" value={adInfo.slogan} onChange={handleInputChange} placeholder=\"סלוגן קליט\" className=\"w-full p-2 rounded text-xl\"/>\n                    <input type=\"text\" name=\"audience\" value={adInfo.audience} onChange={handleInputChange} placeholder=\"קהל יעד (למשל: בני נוער, הורים)\" className=\"w-full p-2 rounded text-xl\"/>\n                    <input type=\"text\" name=\"services\" value={adInfo.services} onChange={handleInputChange} placeholder=\"השירותים העיקריים\" className=\"w-full p-2 rounded text-xl\"/>\n                    <select name=\"style\" value={adInfo.style} onChange={handleInputChange} className=\"w-full p-2 rounded bg-white text-xl\">\n                        <option value=\"modern and professional\">מודרני ומקצועי</option>\n                        <option value=\"fun and playful\">כיפי ומשחקי</option>\n                        <option value=\"handmade and rustic\">בעבודת יד וכפרי</option>\n                        <option value=\"minimalist and clean\">מינימליסטי ונקי</option>\n                    </select>\n                    <button onClick={handleGenerateLogo} disabled={logoLoading} className=\"w-full p-3 bg-brand-magenta text-white font-bold rounded-lg disabled:bg-gray-400 text-xl\">\n                        {logoLoading ? 'יוצר לוגו...' : 'צור לוגו עם AI!'}\n                    </button>\n                </div>\n                <div className=\"bg-white p-6 rounded-lg border-4 border-dashed border-brand-teal text-center flex flex-col justify-center items-center\">\n                    <div className=\"w-32 h-32 mb-4 flex items-center justify-center bg-gray-200 rounded-full\">\n                        {logoLoading ? (\n                           <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-brand-teal\"></div>\n                        ) : logoUrl ? (\n                            <img src={logoUrl} alt=\"Generated Logo\" className=\"w-full h-full object-cover rounded-full\" />\n                        ) : (\n                            <span className=\"text-gray-500\">הלוגו שלכם</span>\n                        )}\n                    </div>\n                    {logoError && <p className=\"text-red-500 text-sm\">{logoError}</p>}\n                    <h4 className=\"text-4xl font-bold\">{adInfo.name || 'שם העסק שלך'}</h4>\n                    <p className=\"text-2xl italic text-gray-600\">{businessIdea}</p>\n                    <p className=\"mt-4 text-3xl font-semibold\">\"{adInfo.slogan || 'הסלוגן שלך כאן'}\"</p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n\n// --- Step 5: Quiz ---\nconst QuizStep: React.FC<{ onComplete: () => void }> = ({ onComplete }) => {\n    const questions = [\n        { q: 'מהו \"כוח העל\" העיקרי של אדם שאוהב לפתור חידות ובעיות?', a: 'חשיבה אנליטית' },\n        { q: 'בסימולציית הצ\\'אט, מה הייתה התגובה המומלצת לשאלת המחיר של הלקוח?', a: 'להבין קודם את הצורך' },\n        { q: 'איזה מהבאים הוא דוגמה לעסק שמתאים למישהו עם \"ידיים טובות\"?', a: 'תיקון אופניים' },\n        { q: 'מהי המטרה של יצירת סלוגן קליט במודעה?', a: 'לגרום לאנשים לזכור את העסק' },\n    ];\n    const options = [\n        ['יצירתיות', 'כישורים חברתיים', 'חשיבה אנליטית'],\n        ['לקבוע מחיר קבוע', 'לשאול מה התקציב', 'להבין קודם את הצורך'],\n        ['כתיבת סיפורים', 'תיקון אופניים', 'בייביסיטר'],\n        ['להראות כמה העסק גדול', 'לגרום לאנשים לזכור את העסק', 'לבלבל את המתחרים'],\n    ];\n    \n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [finished, setFinished] = useState(false);\n\n    useEffect(() => {\n        if (finished) {\n            if (score / questions.length >= 0.75) {\n              onComplete();\n            }\n        }\n    }, [finished, score, onComplete, questions.length]);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].a) {\n            setScore(s => s + 1);\n        }\n    };\n    \n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setFinished(true);\n        }\n    };\n    \n    if (finished) return <div className=\"text-center p-6 bg-white/70 rounded-xl\"><TrophyIcon className=\"w-16 h-16 mx-auto text-yellow-500\" /><h3 className=\"text-4xl font-bold mt-2\">סיימת!</h3><p className=\"text-2xl\">הציון: {score}/{questions.length}</p></div>;\n\n    return (\n        <div className=\"bg-white/50 p-6 rounded-lg\">\n            <h3 className=\"font-bold text-2xl mb-4\">{questions[current].q}</h3>\n            <div className=\"space-y-2\">\n                {options[current].map(opt => (\n                    <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                        className={`block w-full text-right p-3 rounded-md transition-colors text-xl ${selected ? (opt === questions[current].a ? 'bg-green-500 text-white' : (opt === selected ? 'bg-red-500 text-white' : 'bg-white/40')) : 'bg-white/80 hover:bg-white'}`}>\n                         {opt}\n                    </button>\n                ))}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-4 w-full bg-brand-teal text-white p-3 rounded-lg text-xl\">הבא</button>}\n        </div>\n    );\n};\n\n\n// --- Main Module Component ---\nconst HowToEarnModule: React.FC<HowToEarnModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [userSuperpower, setUserSuperpower] = useState<Superpower | null>(null);\n    const [userBusinessIdea, setUserBusinessIdea] = useState<string | null>(null);\n    const [isChatCompleted, setIsChatCompleted] = useState(false);\n\n    const handleQuizComplete = (power: Superpower) => {\n        setUserSuperpower(power);\n        setCurrentStep(1);\n    };\n    const handleIdeaSelected = (idea: string) => {\n        setUserBusinessIdea(idea);\n        setCurrentStep(2);\n    };\n     const handleChatComplete = () => {\n        setIsChatCompleted(true);\n        // We don't auto-advance here to let user see feedback\n    };\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <SuperpowerQuiz onQuizComplete={handleQuizComplete} />;\n            case 1: return userSuperpower ? <IdeaMarket superpower={userSuperpower} onIdeaSelected={handleIdeaSelected} /> : null;\n            case 2: return userBusinessIdea ? <ClientChat businessIdea={userBusinessIdea} onChatComplete={handleChatComplete} /> : null;\n            case 3: return userBusinessIdea ? <AdCreator businessIdea={userBusinessIdea} /> : null;\n            case 4: return <QuizStep onComplete={onComplete} />;\n            default: return null;\n        }\n    };\n    \n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal text-white' : 'bg-white/50'}`}>{index + 1}</div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            {renderStepContent()}\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button \n                  onClick={() => setCurrentStep(s => s + 1)} \n                  disabled={\n                    currentStep === steps.length - 1 || \n                    (currentStep === 0 && !userSuperpower) || \n                    (currentStep === 1 && !userBusinessIdea) ||\n                    (currentStep === 2 && !isChatCompleted)\n                  } \n                  className=\"bg-brand-teal text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">\n                    הבא\n                </button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default HowToEarnModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../ModuleView';\nimport { TrophyIcon } from '../icons/Icons';\n\n// Props interface\ninterface TimeManagementModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\n// --- Helper Icons ---\nconst CheckIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" /></svg>);\nconst CrossIcon: React.FC<{className?: string}> = ({className}) => (<svg xmlns=\"http://www.w3.org/2000/svg\" className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" /></svg>);\n\nconst stepData = [\n    { title: \"זמן=כסף\", icon: '💰' },\n    { title: \"דחוף או חשוב?\", icon: '⚖️' },\n    { title: \"מד האנרגיה\", icon: '🔋' },\n    { title: \"יום בחיי\", icon: '🗓️' },\n    { title: \"בוחן סיום\", icon: '🏆' }\n];\n\n\n// Step 1: Introduction\nconst IntroductionStep: React.FC = () => {\n    const [hourlyRate, setHourlyRate] = useState(30);\n    const [hoursSpent, setHoursSpent] = useState(2);\n    const opportunityCost = hourlyRate * hoursSpent;\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">למה אומרים שזמן שווה כסף?</h3>\n            <p className=\"text-2xl mb-6 text-brand-dark-blue/80\">כל שעה שאתם \"מבזבזים\" על משהו אחד, היא שעה שיכלתם להשקיע במשהו אחר - למשל, לעבוד ולהרוויח כסף. לזה קוראים <strong>\"עלות אלטרנטיבית\"</strong>.</p>\n            <div className=\"bg-white/60 p-6 rounded-xl max-w-lg mx-auto shadow-lg\">\n                <h4 className=\"text-3xl font-bold mb-4\">מחשבון עלות אלטרנטיבית:</h4>\n                <div className=\"grid grid-cols-2 gap-4 items-center mb-4\">\n                    <div>\n                        <label className=\"font-semibold text-xl\">אם אני מרוויח/ה בשעה:</label>\n                        <div className=\"flex items-center justify-center gap-2 mt-1\">\n                            <input type=\"number\" value={hourlyRate} onChange={e => setHourlyRate(Number(e.target.value))} className=\"w-24 p-2 rounded-lg text-center text-2xl font-bold\" />\n                            <span>ש\"ח</span>\n                        </div>\n                    </div>\n                    <div>\n                        <label className=\"font-semibold text-xl\">ובזבזתי על X שעות:</label>\n                         <div className=\"flex items-center justify-center gap-2 mt-1\">\n                            <input type=\"number\" value={hoursSpent} onChange={e => setHoursSpent(Number(e.target.value))} className=\"w-24 p-2 rounded-lg text-center text-2xl font-bold\" />\n                            <span>שעות</span>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"bg-yellow-100/70 p-4 rounded-lg border-2 border-yellow-300\">\n                    <p className=\"text-2xl\">ה\"מחיר\" האמיתי של הפעילות הזו הוא:</p>\n                    <p className=\"text-6xl font-bold text-brand-magenta animate-pulse\">{opportunityCost.toLocaleString()} ₪</p>\n                    <p className=\"text-base\">(הכסף שיכלתם להרוויח בזמן הזה)</p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// Step 2: Eisenhower Matrix\nconst EisenhowerMatrixStep: React.FC = () => {\n    const quadrants = {\n        'חשוב ודחוף': [], 'חשוב ולא דחוף': [],\n        'לא חשוב ודחוף': [], 'לא חשוב ולא דחוף': []\n    } as Record<string, {name: string, isCorrect: boolean}[]>;\n\n    const initialTasks = [\n        { name: 'שיעורי בית למחר', category: 'חשוב ודחוף' },\n        { name: 'לתכנן פרויקט ארוך טווח', category: 'חשוב ולא דחוף' },\n        { name: 'לענות להודעת וואטסאפ', category: 'לא חשוב ודחוף' },\n        { name: 'לגלוש בטיקטוק', category: 'לא חשוב ולא דחוף' },\n        { name: 'לקבוע תור לרופא שיניים', category: 'חשוב ולא דחוף' },\n        { name: 'לסדר את החדר לפני שאורחים מגיעים', category: 'חשוב ודחוף' }\n    ];\n\n    const [tasks, setTasks] = useState(initialTasks.map(t => t.name));\n    const [assignedTasks, setAssignedTasks] = useState(quadrants);\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, taskName: string) => {\n        e.dataTransfer.setData('taskName', taskName);\n    };\n\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, category: string) => {\n        e.preventDefault();\n        const taskName = e.dataTransfer.getData('taskName');\n        const task = initialTasks.find(t => t.name === taskName);\n\n        if (task && tasks.includes(taskName)) {\n            setTasks(prev => prev.filter(t => t !== taskName));\n            setAssignedTasks(prev => ({\n                ...prev,\n                [category]: [...prev[category], { name: taskName, isCorrect: task.category === category }]\n            }));\n        }\n    };\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">מטריצת אייזנהאואר: דחוף או חשוב?</h3>\n            <p className=\"text-2xl text-center mb-6\">לא כל משימה \"דחופה\" היא באמת חשובה. למדו לתעדף: גררו כל משימה לרביע המתאים.</p>\n            \n            <div className=\"p-4 bg-white/30 rounded-lg mb-6 shadow-inner\">\n                <h4 className=\"font-bold text-center mb-2 text-2xl\">משימות למיון:</h4>\n                <div className=\"flex flex-wrap justify-center gap-3 min-h-[40px]\">\n                    {tasks.map(task => (\n                        <div key={task} draggable onDragStart={(e) => handleDragStart(e, task)}\n                             className=\"p-3 rounded-lg bg-yellow-200 cursor-grab shadow-md hover:bg-yellow-300 transition-colors text-lg\">{task}</div>\n                    ))}\n                </div>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-4\">\n                <div onDrop={(e) => handleDrop(e, 'חשוב ודחוף')} onDragOver={(e) => e.preventDefault()} className=\"bg-red-100/70 p-4 rounded-lg min-h-[150px] border-2 border-dashed border-red-300\"><h4 className=\"font-bold text-red-700 text-2xl text-center\">🔥 חשוב ודחוף (לעשות מיד)</h4>{assignedTasks['חשוב ודחוף'].map(t => <div key={t.name} className={`p-1 rounded mt-1 text-xl flex justify-between items-center ${t.isCorrect ? 'bg-green-200' : 'bg-red-300'}`}><span>{t.name}</span><span>{t.isCorrect ? '✔' : '✖'}</span></div>)}</div>\n                <div onDrop={(e) => handleDrop(e, 'חשוב ולא דחוף')} onDragOver={(e) => e.preventDefault()} className=\"bg-blue-100/70 p-4 rounded-lg min-h-[150px] border-2 border-dashed border-blue-300\"><h4 className=\"font-bold text-blue-700 text-2xl text-center\">🗓️ חשוב ולא דחוף (לתכנן)</h4>{assignedTasks['חשוב ולא דחוף'].map(t => <div key={t.name} className={`p-1 rounded mt-1 text-xl flex justify-between items-center ${t.isCorrect ? 'bg-green-200' : 'bg-red-300'}`}><span>{t.name}</span><span>{t.isCorrect ? '✔' : '✖'}</span></div>)}</div>\n                <div onDrop={(e) => handleDrop(e, 'לא חשוב ודחוף')} onDragOver={(e) => e.preventDefault()} className=\"bg-yellow-100/70 p-4 rounded-lg min-h-[150px] border-2 border-dashed border-yellow-300\"><h4 className=\"font-bold text-yellow-700 text-2xl text-center\">🤝 לא חשוב ודחוף (להאציל)</h4>{assignedTasks['לא חשוב ודחוף'].map(t => <div key={t.name} className={`p-1 rounded mt-1 text-xl flex justify-between items-center ${t.isCorrect ? 'bg-green-200' : 'bg-red-300'}`}><span>{t.name}</span><span>{t.isCorrect ? '✔' : '✖'}</span></div>)}</div>\n                <div onDrop={(e) => handleDrop(e, 'לא חשוב ולא דחוף')} onDragOver={(e) => e.preventDefault()} className=\"bg-gray-200/70 p-4 rounded-lg min-h-[150px] border-2 border-dashed border-gray-400\"><h4 className=\"font-bold text-gray-700 text-2xl text-center\">🗑️ לא חשוב ולא דחוף (למחוק)</h4>{assignedTasks['לא חשוב ולא דחוף'].map(t => <div key={t.name} className={`p-1 rounded mt-1 text-xl flex justify-between items-center ${t.isCorrect ? 'bg-green-200' : 'bg-red-300'}`}><span>{t.name}</span><span>{t.isCorrect ? '✔' : '✖'}</span></div>)}</div>\n            </div>\n        </div>\n    );\n};\n\n// Step 3: Energy Meter Game\nconst EnergyMeterStep: React.FC = () => {\n    const tasks = [\n        { name: 'ללמוד למבחן', cost: -40, icon: '📚' }, { name: 'לסדר את החדר', cost: -20, icon: '🧹' },\n        { name: 'לצאת להליכה', cost: 15, icon: '🚶‍♂️' }, { name: 'לשחק במחשב', cost: -30, icon: '🎮' },\n        { name: 'לשמוע מוזיקה', cost: 20, icon: '🎵' }, { name: 'שיעורי בית', cost: -25, icon: '✏️' }\n    ];\n    const [energy, setEnergy] = useState(100);\n    const [completedTasks, setCompletedTasks] = useState<string[]>([]);\n\n    const handleTaskClick = (task: typeof tasks[0]) => {\n        if (completedTasks.includes(task.name)) return;\n        const newEnergy = energy + task.cost;\n        if (newEnergy < 0) {\n            alert(\"אין לך מספיק אנרגיה למשימה הזו! בחר פעילות מרגיעה קודם.\");\n            return;\n        }\n        setEnergy(newEnergy > 100 ? 100 : newEnergy);\n        setCompletedTasks(prev => [...prev, task.name]);\n    };\n    \n    const energyColor = energy > 60 ? 'bg-green-500' : energy > 30 ? 'bg-yellow-500' : 'bg-red-500';\n\n    return (\n         <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">משחק: מד האנרגיה 🔋</h3>\n            <p className=\"text-center text-2xl mb-6\">ניהול זמן הוא גם ניהול אנרגיה. בצעו משימות (שמורידות אנרגיה) ופעילויות מרגיעות (שמעלות אנרגיה) כדי להשלים את כל המטלות בלי להתעייף!</p>\n            <div className=\"flex flex-col md:flex-row items-center justify-center gap-8\">\n                <div className=\"w-full md:w-1/3\">\n                    <h4 className=\"font-bold text-3xl mb-2 text-center\">מד האנרגיה שלך</h4>\n                    <div className=\"w-48 h-48 mx-auto bg-gray-200 rounded-full flex items-center justify-center relative overflow-hidden\">\n                        <div className={`absolute bottom-0 w-full ${energyColor} transition-all duration-500`} style={{ height: `${energy}%` }}></div>\n                        <span className=\"relative text-5xl font-bold text-white\" style={{textShadow: '2px 2px 4px #00000080'}}>{energy}%</span>\n                    </div>\n                </div>\n                <div className=\"w-full md:w-2/3\">\n                     <h4 className=\"font-bold text-3xl mb-2 text-center\">בחר פעילות:</h4>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        {tasks.map(task => {\n                            const isCompleted = completedTasks.includes(task.name);\n                            return (\n                                <button key={task.name} onClick={() => handleTaskClick(task)} disabled={isCompleted}\n                                    className={`p-4 rounded-xl text-center transition-all ${isCompleted ? 'bg-gray-300 opacity-50' : 'bg-white/70 hover:bg-white transform hover:scale-105'}`}>\n                                    <span className=\"text-4xl\">{task.icon}</span>\n                                    <p className=\"font-bold text-xl\">{task.name}</p>\n                                    <p className={`font-semibold text-lg ${task.cost > 0 ? 'text-green-600' : 'text-red-600'}`}>\n                                        {task.cost > 0 ? `+${task.cost}` : task.cost} אנרגיה\n                                    </p>\n                                </button>\n                            )\n                        })}\n                    </div>\n                </div>\n            </div>\n            {completedTasks.length === tasks.length && <p className=\"mt-6 text-center text-2xl font-bold text-green-600\">כל הכבוד! ניהלתם את האנרגיה שלכם בצורה מושלמת!</p>}\n        </div>\n    );\n};\n\n// Step 4: A Day in the Life Game\nconst DayInLifeStep: React.FC = () => {\n    const initialTasks = [\n        { id: 1, name: 'שיעורי בית', duration: 2, importance: 'High', icon: '📚' },\n        { id: 2, name: 'לסדר את החדר', duration: 1, importance: 'Medium', icon: '🧹' },\n        { id: 3, name: 'לשחק במחשב', duration: 3, importance: 'Low', icon: '🎮' },\n        { id: 4, name: 'להתכונן למבחן', duration: 2, importance: 'High', icon: '🧠' },\n    ] as const;\n    const distractions = [\n        { name: 'חבר מתקשר להזמין אותך לצאת', duration: 2, happiness: 20 },\n        { name: 'פרק חדש בסדרה האהובה עליך יצא', duration: 1, happiness: 10 },\n    ] as const;\n\n    type Task = typeof initialTasks[number];\n    type Distraction = typeof distractions[number] & { icon: string };\n    type TimelineItem = Task | Distraction;\n    \n    const TOTAL_HOURS = 8;\n    const [tasks, setTasks] = useState(initialTasks);\n    const [timeline, setTimeline] = useState<(TimelineItem | null)[]>(Array(TOTAL_HOURS).fill(null));\n    const [distraction, setDistraction] = useState<(typeof distractions[number]) | null>(null);\n    const [results, setResults] = useState<{ score: number, happiness: number, tasksDone: number } | null>(null);\n\n    const handleDragStart = (e: React.DragEvent<HTMLDivElement>, task: Task) => {\n        e.dataTransfer.setData('task', JSON.stringify(task));\n    };\n    const handleDrop = (e: React.DragEvent<HTMLDivElement>, hourIndex: number) => {\n        const task: Task = JSON.parse(e.dataTransfer.getData('task'));\n        if (hourIndex + task.duration > TOTAL_HOURS || timeline.slice(hourIndex, hourIndex + task.duration).some(h => h)) return;\n        setTasks(prev => prev.filter(t => t.id !== task.id));\n        const newTimeline = [...timeline];\n        for (let i = 0; i < task.duration; i++) newTimeline[hourIndex + i] = task;\n        setTimeline(newTimeline);\n    };\n\n    const handleDistraction = (accept: boolean) => {\n        if (accept && distraction) {\n            let placed = false;\n            for (let i = 0; i <= TOTAL_HOURS - distraction.duration; i++) {\n                if (!timeline.slice(i, i + distraction.duration).some(h => h)) {\n                    const newTimeline = [...timeline];\n                    for (let j = 0; j < distraction.duration; j++) newTimeline[i + j] = { ...distraction, icon: '🥳' };\n                    setTimeline(newTimeline);\n                    placed = true;\n                    break;\n                }\n            }\n        }\n        setDistraction(null);\n    };\n    \n    // FIX: Add type casts to resolve `unknown` type errors from complex type inference.\n    const calculateResults = () => {\n        let score = 0;\n        let happiness = 0;\n        const uniqueTasks = [...new Set(timeline.filter((t): t is TimelineItem => t !== null))];\n        \n        uniqueTasks.forEach(task => {\n            const typedTask = task as TimelineItem;\n            if ('importance' in typedTask) { // Type guard for Task\n                if (typedTask.importance === 'High') score += 50;\n                if (typedTask.importance === 'Medium') score += 20;\n            }\n            if ('happiness' in typedTask) { // Type guard for Distraction\n                happiness += typedTask.happiness;\n            }\n        });\n\n        setResults({ score, happiness, tasksDone: uniqueTasks.filter(t => 'importance' in (t as TimelineItem)).length });\n    };\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            if (tasks.length > 0 && !distraction && !results) {\n                setDistraction(distractions[Math.floor(Math.random() * distractions.length)]);\n            }\n        }, 5000);\n        return () => clearTimeout(timer);\n    }, [tasks, distraction, results]);\n\n    return (\n         <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-4xl font-bold text-center mb-4\">משחק: יום בחיי 🗓️</h3>\n            <p className=\"text-center text-2xl mb-6\">יש לך {TOTAL_HOURS} שעות פנויות. גרור את המשימות לציר הזמן כדי לתכנן את היום, אבל היזהר מהסחות דעת!</p>\n\n            <div className=\"flex gap-6\">\n                <div className=\"w-1/4\">\n                    <h4 className=\"font-bold text-xl text-center\">משימות</h4>\n                    <div className=\"space-y-2\">\n                        {tasks.map(task => (\n                            <div key={task.id} draggable onDragStart={(e) => handleDragStart(e, task)}\n                                className=\"p-2 bg-white/70 rounded-lg cursor-grab text-center\">\n                                <span className=\"text-2xl\">{task.icon}</span>\n                                <p className=\"font-semibold\">{task.name} ({task.duration} שע')</p>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <div className=\"w-3/4\">\n                     <h4 className=\"font-bold text-xl text-center\">לו\"ז ({TOTAL_HOURS} שעות)</h4>\n                    <div className=\"grid grid-cols-8 gap-1 bg-gray-200 p-2 rounded-lg\">\n                        {timeline.map((task, i) => (\n                            <div key={i} onDrop={(e) => handleDrop(e, i)} onDragOver={(e) => e.preventDefault()}\n                                className=\"h-24 border border-gray-300 flex items-center justify-center text-center p-1 rounded bg-white/50\">\n                                {task && <span title={task.name}>{task.icon}</span>}\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            \n            {distraction && <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center rounded-2xl\"><div className=\"bg-yellow-200 p-6 rounded-lg text-center\"><p className=\"text-2xl font-bold mb-4\">{distraction.name}!</p><button onClick={() => handleDistraction(true)} className=\"p-2 bg-green-500 text-white rounded mr-2\">בטח!</button><button onClick={() => handleDistraction(false)} className=\"p-2 bg-red-500 text-white rounded\">לא עכשיו</button></div></div>}\n            \n            {!results ? (\n                <button onClick={calculateResults} className=\"mt-6 block mx-auto bg-brand-magenta text-white font-bold p-3 rounded-lg\">סיים את היום ובדוק תוצאות</button>\n            ) : (\n                <div className=\"mt-6 text-center p-4 bg-white/60 rounded-lg\">\n                    <h4 className=\"font-bold text-3xl\">סיכום היום:</h4>\n                    <p className=\"text-xl\">ציון פרודוקטיביות: {results.score}, מדד כיף: {results.happiness}, משימות שהושלמו: {results.tasksDone}</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\n\n// Step 5: Quiz\nconst QuizStep: React.FC<{onComplete: () => void}> = ({ onComplete }) => {\n    const questions = [\n        { q: 'מהי \"עלות אלטרנטיבית\"?', o: ['המחיר של מוצר בחנות אחרת', 'הרווח שהפסדת כי בחרת באפשרות אחרת', 'מס נוסף על בזבוזים'], a: 'הרווח שהפסדת כי בחרת באפשרות אחרת' },\n        { q: 'במטריצת אייזנהאואר, מה עושים עם משימה שהיא \"חשובה אבל לא דחופה\"?', o: ['עושים מיד', 'לא עושים בכלל', 'מתכננים מתי לעשות אותה'], a: 'מתכננים מתי לעשות אותה' },\n        { q: 'איזו פעילות מעלה את מד האנרגיה?', o: ['ללמוד למבחן', 'לשמוע מוזיקה', 'לשחק במחשב'], a: 'לשמוע מוזיקה' },\n    ];\n    const [current, setCurrent] = useState(0);\n    const [score, setScore] = useState(0);\n    const [selected, setSelected] = useState('');\n    const [finished, setFinished] = useState(false);\n\n    useEffect(() => {\n        if(finished && (score / questions.length) >= 0.75) { onComplete(); }\n    }, [finished, score, onComplete, questions.length]);\n\n    const handleSelect = (opt: string) => {\n        if(selected) return;\n        setSelected(opt);\n        if(opt === questions[current].a) { setScore(s => s + 1); }\n    };\n    \n    const handleNext = () => {\n        if (current < questions.length - 1) {\n            setCurrent(c => c + 1);\n            setSelected('');\n        } else {\n            setFinished(true);\n        }\n    };\n    \n    if (finished) return <div className=\"text-center p-6 bg-white/70 rounded-xl\"><TrophyIcon className=\"w-16 h-16 mx-auto text-yellow-500\" /><h3 className=\"text-3xl font-bold mt-2\">סיימת!</h3><p className=\"text-2xl\">הציון: {score}/{questions.length}</p></div>;\n\n    return (\n        <div className=\"bg-white/50 p-6 rounded-lg\">\n            <h3 className=\"font-bold text-2xl mb-4\">{questions[current].q}</h3>\n            <div className=\"space-y-2\">\n                {questions[current].o.map(opt => (\n                    <button key={opt} onClick={() => handleSelect(opt)} disabled={!!selected}\n                        className={`block w-full text-right p-3 rounded-md transition-colors text-xl ${selected ? (opt === questions[current].a ? 'bg-green-500 text-white' : (opt === selected ? 'bg-red-500 text-white' : 'bg-white/40')) : 'bg-white/80 hover:bg-white'}`}>\n                         {opt}\n                    </button>\n                ))}\n            </div>\n            {selected && <button onClick={handleNext} className=\"mt-4 w-full bg-brand-teal text-white p-3 rounded-lg text-xl\">הבא</button>}\n        </div>\n    );\n};\n\n// Main Component\nconst TimeManagementModule: React.FC<TimeManagementModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    const renderStepContent = () => {\n        // FIX: Replaced 'current' with 'currentStep' to use the correct state variable.\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <EisenhowerMatrixStep />;\n            case 2: return <EnergyMeterStep />;\n            case 3: return <DayInLifeStep />;\n            case 4: return <QuizStep onComplete={onComplete} />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title=\"ניהול זמן (זמן=כסף)\" onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {stepData.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-12 h-12 rounded-full flex items-center justify-center border-2 text-2xl font-bold ${currentStep >= index ? 'bg-brand-teal text-white' : 'bg-white/50'}`}>\n                                    {step.icon}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step.title}</p>\n                            </div>\n                            {index < stepData.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            {renderStepContent()}\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === stepData.length - 1} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-3 px-8 rounded-lg disabled:opacity-50 text-2xl\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\n// FIX: Added default export to match the import statement in App.tsx.\nexport default TimeManagementModule;\n","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\nimport { PodiumIcon } from '../icons/Icons';\n\ninterface PublicSpeakingModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"למה זה חשוב?\", \"סודות הנואם\", \"אתגר הפיץ'\", \"מחוון ההצלחה\", \"סיכום\"];\n\nconst modelItems = [\n    { letter: 'נ', name: 'ניסוח', tip: 'בחרו את המילים הנכונות. מסר ברור ופשוט חזק יותר ממילים מסובכות.' },\n    { letter: 'ס', name: 'סביבה', tip: 'הכירו את המרחב. התהלכו על הבמה, בדקו את המיקרופון, הרגישו בנוח.' },\n    { letter: 'ק', name: 'קול', tip: 'שנו את גובה הקול ואת קצב הדיבור. אל תדברו כמו רובוט! השתמשו בשתיקות קצרות להדגשה.' },\n    { letter: 'ת', name: 'תנועה', tip: 'השתמשו בתנועות ידיים טבעיות כדי להדגיש את המסר. תנועה מתונה על הבמה משדרת אנרגיה.' },\n    { letter: 'י', name: 'ידיים', tip: 'הימנעו משילוב ידיים או החזקתן בכיסים. תנו להן להיות חלק טבעי מהדיבור שלכם.' },\n    { letter: 'מ', name: 'מבט', tip: 'הביטו באנשים שונים בקהל. זה יוצר חיבור אישי וגורם להם להקשיב.' },\n    { letter: 'ב', name: 'ביטחון', tip: 'גם אם אתם לחוצים, \"זייפו את זה עד שתצליחו\". עמדו יציב, חייכו, והאמינו בעצמכם.' },\n    { letter: 'ה', name: 'התלהבות', tip: 'אם אתם לא תהיו נלהבים מהנושא, גם הקהל לא יהיה. הראו שזה חשוב לכם!' }\n];\n\n\n// --- Step Components ---\n\nconst IntroductionStep: React.FC = () => (\n    <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n        <h3 className=\"text-3xl font-bold text-brand-teal mb-4\">עמידה מול קהל היא כוח על! 🦸</h3>\n        <p className=\"text-xl mb-6\">היכולת לדבר מול אנשים, לשכנע ולהעביר מסר היא אחת המיומנויות החשובות ביותר להצלחה. זה לא רק לנאומים גדולים - אנחנו \"מוכרים\" את הרעיונות שלנו כל הזמן: לחברים, למשפחה, ובעתיד גם לבוסים וללקוחות.</p>\n        <div className=\"flex justify-center items-center gap-4 text-7xl\">\n            <span>🗣️</span><span className=\"font-bold text-brand-light-blue text-5xl\">&rarr;</span>\n            <span>💡</span><span className=\"font-bold text-brand-light-blue text-5xl\">&rarr;</span>\n            <span>🤝</span><span className=\"font-bold text-brand-light-blue text-5xl\">&rarr;</span>\n            <span>💰</span>\n        </div>\n        <p className=\"mt-4 font-semibold text-xl\">דיבור &larr; רעיון &larr; שכנוע &larr; הצלחה</p>\n    </div>\n);\n\nconst ModelStep: React.FC = () => {\n    const [activeItem, setActiveItem] = useState<number | null>(null);\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-3xl font-bold text-center mb-4\">סודות הנואם המצליח: מודל נס קתימב\"ה</h3>\n            <p className=\"text-center text-xl mb-6\">לחצו על כל אות כדי לגלות את הסוד שמאחוריה.</p>\n            <div className=\"grid grid-cols-4 md:grid-cols-4 gap-4 max-w-2xl mx-auto\">\n                {modelItems.map((item, index) => (\n                    <div key={index} onClick={() => setActiveItem(index)} className=\"text-center cursor-pointer\">\n                        <div className={`w-20 h-20 rounded-full mx-auto flex items-center justify-center text-4xl font-bold text-white transition-all ${activeItem === index ? 'bg-brand-magenta scale-110' : 'bg-brand-light-blue'}`}>\n                           {item.letter}\n                        </div>\n                        <p className=\"font-bold mt-2 text-lg\">{item.name}</p>\n                    </div>\n                ))}\n            </div>\n            {activeItem !== null && (\n                <div className=\"mt-6 p-4 bg-yellow-100/70 rounded-lg text-center animate-fade-in\">\n                    <h4 className=\"font-bold text-3xl text-yellow-800\">{modelItems[activeItem].letter} - {modelItems[activeItem].name}</h4>\n                    <p className=\"text-xl\">{modelItems[activeItem].tip}</p>\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst PitchChallengeStep: React.FC<{ onStartPitch: () => void }> = ({ onStartPitch }) => (\n    <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n        <h3 className=\"text-3xl font-bold text-brand-teal mb-4\">אתגר הפיץ'! 🎤</h3>\n        <p className=\"text-xl mb-6\">\"פיץ'\" הוא נאום קצר (כדקה) שמטרתו לשכנע. בחרו נושא, הכינו את הטיעונים שלכם, והתאמנו מול המראה או מול חבר. כשתהיו מוכנים, לחצו על הכפתור כדי לעבור להערכה עצמית.</p>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-3xl mx-auto\">\n             <div className=\"bg-white/60 p-6 rounded-2xl border-2 border-brand-teal/50 shadow-lg\">\n                <p className=\"text-6xl mb-4\">👨‍👩‍👧‍👦</p>\n                <h4 className=\"font-bold text-2xl mb-2\">אפשרות 1:</h4>\n                <p className=\"text-xl\">שכנעו את ההורים להעלות לכם את דמי הכיס.</p>\n            </div>\n             <div className=\"bg-white/60 p-6 rounded-2xl border-2 border-brand-teal/50 shadow-lg\">\n                <p className=\"text-6xl mb-4\">🖊️</p>\n                <h4 className=\"font-bold text-2xl mb-2\">אפשרות 2:</h4>\n                <p className=\"text-xl\">\"מכרו\" לחבר חפץ פשוט שיש לכם בחדר (כמו עט או ספר).</p>\n            </div>\n        </div>\n        <button onClick={onStartPitch} className=\"mt-8 bg-brand-magenta text-white font-bold py-3 px-8 rounded-lg text-xl\">אני מוכן/ה להציג!</button>\n    </div>\n);\n\nconst RubricStep: React.FC<{ onRubricComplete: () => void }> = ({ onRubricComplete }) => {\n    const [ratings, setRatings] = useState<Record<string, number>>({});\n    const [submitted, setSubmitted] = useState(false);\n    \n    const handleRatingChange = (category: string, value: number) => {\n        setRatings(prev => ({ ...prev, [category]: value }));\n    };\n\n    const isComplete = Object.keys(ratings).length === modelItems.length;\n    const averageScore = isComplete ? ((Object.values(ratings) as number[]).reduce((a, b) => a + b, 0) / modelItems.length) : 0;\n    \n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-3xl font-bold text-center mb-4\">איך הלך? דרגו את עצמכם!</h3>\n            <p className=\"text-center mb-6 text-lg\">היו כנים עם עצמכם. דרגו מ-1 (צריך שיפור) עד 5 (מעולה) בכל אחד מסעיפי המודל.</p>\n            {!submitted ? (\n                <div className=\"space-y-4\">\n                    {modelItems.map(item => (\n                        <div key={item.name} className=\"bg-white/60 p-4 rounded-lg\">\n                            <h4 className=\"font-bold text-2xl\">{item.letter} - {item.name}</h4>\n                            <div className=\"flex justify-center gap-2 mt-2\">\n                                {[1, 2, 3, 4, 5].map(val => (\n                                    <button key={val} onClick={() => handleRatingChange(item.name, val)}\n                                        className={`w-10 h-10 rounded-full text-lg font-bold transition-colors ${ratings[item.name] === val ? 'bg-brand-teal text-white' : 'bg-gray-200 hover:bg-gray-300'}`}>\n                                        {val}\n                                    </button>\n                                ))}\n                            </div>\n                        </div>\n                    ))}\n                    <button onClick={() => setSubmitted(true)} disabled={!isComplete} className=\"mt-6 w-full bg-brand-magenta text-white font-bold py-3 rounded-lg disabled:bg-gray-400 text-lg\">הצג תוצאות</button>\n                </div>\n            ) : (\n                <div className=\"text-center\">\n                    <h4 className=\"font-bold text-3xl\">סיכום הערכה:</h4>\n                    <p className=\"text-5xl font-bold my-4 text-brand-light-blue\">{averageScore.toFixed(1)}</p>\n                    <p className=\"text-xl\">כל הכבוד על הביקורת העצמית! זו הדרך הטובה ביותר להשתפר. המשיכו להתאמן על הנקודות שקיבלו ציון נמוך.</p>\n                    <button onClick={onRubricComplete} className=\"mt-6 bg-brand-teal text-white font-bold py-3 px-6 rounded-lg text-lg\">לשלב הבא</button>\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst ConclusionStep: React.FC = () => (\n    <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n        <PodiumIcon className=\"w-24 h-24 mx-auto text-brand-teal\" />\n        <h3 className=\"text-3xl font-bold text-brand-teal mt-4 mb-4\">כל הכבוד, נואמים אלופים!</h3>\n        <p className=\"text-xl mb-6\">\n            עברתם את כל השלבים: למדתם את סודות הנואם, התמודדתם עם אתגר הפיץ' ואפילו נתתם לעצמכם משוב.\n            <br />\n            זכרו, עמידה מול קהל היא מיומנות נרכשת. ככל שתתאמנו יותר, כך תהיו טובים יותר!\n        </p>\n        <p className=\"mt-4 text-2xl font-bold\">עכשיו יש לכם את הכלים להשמיע את קולכם ולהצליח.</p>\n    </div>\n);\n\n// --- Main Component ---\nconst PublicSpeakingModule: React.FC<PublicSpeakingModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n\n    useEffect(() => {\n        // Mark module as complete when the final step is reached\n        if (currentStep === steps.length - 1) {\n            onComplete();\n        }\n    }, [currentStep, onComplete]);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <IntroductionStep />;\n            case 1: return <ModelStep />;\n            case 2: return <PitchChallengeStep onStartPitch={() => setCurrentStep(3)} />;\n            case 3: return <RubricStep onRubricComplete={() => setCurrentStep(4)} />;\n            case 4: return <ConclusionStep />;\n            default: return <IntroductionStep />;\n        }\n    };\n\n    return (\n        <ModuleView title=\"הכוח בידיים שלך: עמידה מול קהל\" onBack={onBack}>\n            <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            \n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0 || currentStep === 3} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep >= steps.length - 1 || currentStep === 2} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הבא</button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default PublicSpeakingModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../ModuleView';\n\ninterface BuildBusinessModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst steps = [\"השראה\", \"זיהוי בעיה\", \"הרעיון והתוכנית\", \"סיכום\"];\n\n// Step 1: Inspiration\nconst InspirationStep = () => (\n    <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n        <h3 className=\"text-3xl font-bold text-brand-teal mb-4\">כל עסק גדול מתחיל ברעיון קטן</h3>\n        <p className=\"text-xl mb-8\">יזם הוא אדם שמזהה בעיה או צורך, ויוצר פתרון חדש. בואו נראה כמה דוגמאות:</p>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"bg-white/60 p-6 rounded-xl\">\n                <p className=\"text-8xl mb-3\">🗺️</p>\n                <h4 className=\"font-bold text-2xl\">Waze</h4>\n                <p className=\"font-semibold text-brand-light-blue text-lg\">הבעיה: פקקים מעצבנים בדרך לעבודה.</p>\n                <p className=\"text-lg\">הפתרון: אפליקציה שמשתמשת במידע מכל הנהגים כדי למצוא את הדרך המהירה ביותר בזמן אמת.</p>\n            </div>\n            <div className=\"bg-white/60 p-6 rounded-xl\">\n                <p className=\"text-8xl mb-3\">🍔</p>\n                <h4 className=\"font-bold text-2xl\">Wolt</h4>\n                <p className=\"font-semibold text-brand-light-blue text-lg\">הבעיה: רוצים אוכל ממסעדה, אבל אין כוח לצאת מהבית.</p>\n                <p className=\"text-lg\">הפתרון: אפליקציה שמחברת בין לקוחות, מסעדות ושליחים, ומביאה את האוכל עד הדלת.</p>\n            </div>\n        </div>\n    </div>\n);\n\n// Step 2: Problem Identifier\nconst ProblemSolverStep = () => {\n    const problems = [\n        { problem: 'משעמם לי אחרי בית ספר', solution: 'חוג יצירה או ספורט' },\n        { problem: 'הכלב צריך לצאת אבל יורד גשם', solution: 'שירות \"דוגיסיטר\" שמגיע עד הבית' },\n        { problem: 'קשה למצוא מתנה מקורית לחבר', solution: 'חנות און-ליין למתנות מותאמות אישית' },\n        { problem: 'הצמחים בחדר תמיד מתים', solution: 'ערכה להשקיה אוטומטית' },\n    ];\n    const [flipped, setFlipped] = useState<number | null>(null);\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-3xl font-bold text-center mb-4\">כל עסק פותר בעיה</h3>\n            <p className=\"text-xl text-center mb-6\">לחצו על פתק כדי להפוך אותו ולראות דוגמה לפתרון עסקי.</p>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\n                {problems.map((p, index) => (\n                    <div key={index} onClick={() => setFlipped(flipped === index ? null : index)} className=\"h-48 cursor-pointer group\" style={{ perspective: '1000px' }}>\n                        <div className={`relative w-full h-full transition-transform duration-700 ${flipped === index ? '[transform:rotateY(180deg)]' : ''}`} style={{ transformStyle: 'preserve-3d' }}>\n                            <div className=\"absolute w-full h-full bg-yellow-200 p-4 rounded-lg flex items-center justify-center text-center font-bold text-2xl\" style={{ backfaceVisibility: 'hidden' }}>{p.problem}</div>\n                            <div className=\"absolute w-full h-full bg-green-200 p-4 rounded-lg flex items-center justify-center text-center font-bold text-green-800 text-2xl\" style={{ transform: 'rotateY(180deg)', backfaceVisibility: 'hidden' }}>💡 {p.solution}</div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// Step 3: Idea Generator and Business Plan\nconst IdeaGeneratorStep = ({ onPlanComplete }: { onPlanComplete: () => void }) => {\n    const audiences = ['בני נוער', 'בעלי כלבים', 'גיימרים', 'הורים לילדים קטנים', 'מבוגרים'];\n    const topics = ['אופנה', 'אוכל בריא', 'טכנולוגיה', 'ספורט', 'מחזור'];\n    const [generatedAudience, setGeneratedAudience] = useState('');\n    const [generatedTopic, setGeneratedTopic] = useState('');\n    const [plan, setPlan] = useState({ name: '', problem: '', solution: '', audience: '', revenue: '' });\n    const [isGenerated, setIsGenerated] = useState(false);\n\n    const generateIdea = () => {\n        setGeneratedAudience(audiences[Math.floor(Math.random() * audiences.length)]);\n        setGeneratedTopic(topics[Math.floor(Math.random() * topics.length)]);\n        setIsGenerated(true);\n    };\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        setPlan({ ...plan, [e.target.name]: e.target.value });\n    };\n\n    // FIX: Add a type check to ensure 'field' is a string before calling .trim()\n    const isPlanComplete = Object.values(plan).every(field => typeof field === 'string' && field.trim() !== '');\n    \n    useEffect(() => {\n        if(isPlanComplete) {\n            onPlanComplete();\n        }\n    }, [isPlanComplete, onPlanComplete]);\n\n    return (\n        <div className=\"bg-white/40 p-8 rounded-2xl animate-fade-in\">\n            <h3 className=\"text-3xl font-bold text-center mb-4\">מכונת הרעיונות!</h3>\n            <p className=\"text-center mb-6 text-lg\">לחצו על הכפתור כדי לקבל השראה לרעיון עסקי, ואז מלאו תוכנית עסקית פשוטה.</p>\n            <div className=\"text-center mb-8\">\n                <button onClick={generateIdea} className=\"p-4 bg-brand-magenta text-white font-bold rounded-lg text-xl\">הפעל את המכונה!</button>\n                {isGenerated && <p className=\"mt-4 text-3xl font-bold animate-fade-in\">הרעיון שלך: עסק עבור <span className=\"text-brand-light-blue\">{generatedAudience}</span> שקשור ל<span className=\"text-brand-light-blue\">{generatedTopic}</span></p>}\n            </div>\n\n            <h3 className=\"text-3xl font-bold text-center mb-4 pt-6 border-t-2 border-brand-teal/30\">התוכנית העסקית שלי</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-lg\">\n                <input name=\"name\" value={plan.name} onChange={handleInputChange} placeholder=\"שם העסק\" className=\"w-full p-3 rounded-lg\"/>\n                <input name=\"audience\" value={plan.audience} onChange={handleInputChange} placeholder=\"קהל היעד\" className=\"w-full p-3 rounded-lg\"/>\n                <textarea name=\"problem\" value={plan.problem} onChange={handleInputChange} placeholder=\"מה הבעיה שהעסק פותר?\" className=\"w-full p-3 rounded-lg md:col-span-2\" rows={2}></textarea>\n                <textarea name=\"solution\" value={plan.solution} onChange={handleInputChange} placeholder=\"מה הפתרון (המוצר/השירות)?\" className=\"w-full p-3 rounded-lg md:col-span-2\" rows={2}></textarea>\n                <textarea name=\"revenue\" value={plan.revenue} onChange={handleInputChange} placeholder=\"איך העסק ירוויח כסף?\" className=\"w-full p-3 rounded-lg md:col-span-2\" rows={2}></textarea>\n            </div>\n            {isPlanComplete && <p className=\"mt-4 text-center font-bold text-green-600 text-lg\">כל הכבוד! השלמתם את התוכנית.</p>}\n        </div>\n    );\n};\n\n// Step 4: Summary\nconst SummaryStep: React.FC = () => (\n    <div className=\"bg-white/40 p-8 rounded-2xl text-center animate-fade-in\">\n        <h3 className=\"text-3xl font-bold text-brand-teal mb-4\">עבודה מעולה, יזמים צעירים!</h3>\n        <p className=\"text-xl mb-6\">עברתם את כל הדרך: זיהיתם בעיה, חשבתם על פתרון, ואפילו כתבתם תוכנית עסקית ראשונה. זכרו, כל מסע גדול מתחיל בצעד אחד קטן.</p>\n        <p className=\"text-6xl\">🚀</p>\n        <p className=\"mt-4 text-2xl font-bold\">הרעיון הבא שישנה את העולם יכול להיות שלכם!</p>\n    </div>\n);\n\n\nconst BuildBusinessModule: React.FC<BuildBusinessModuleProps> = ({ onBack, title, onComplete }) => {\n    const [currentStep, setCurrentStep] = useState(0);\n    const [planCompleted, setPlanCompleted] = useState(false);\n\n    useEffect(() => {\n        if (currentStep === steps.length - 1) {\n            onComplete();\n        }\n    }, [currentStep, onComplete]);\n\n    const renderStepContent = () => {\n        switch (currentStep) {\n            case 0: return <InspirationStep />;\n            case 1: return <ProblemSolverStep />;\n            case 2: return <IdeaGeneratorStep onPlanComplete={() => setPlanCompleted(true)} />;\n            case 3: return <SummaryStep />;\n            default: return <InspirationStep />;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <div className=\"mb-8\">\n                <div className=\"flex justify-between items-center mb-2\">\n                    {steps.map((step, index) => (\n                        <React.Fragment key={index}>\n                            <div className=\"flex flex-col items-center flex-1\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center border-2 ${currentStep >= index ? 'bg-brand-teal border-brand-teal text-white' : 'bg-white/50 border-gray-300'}`}>\n                                    {index + 1}\n                                </div>\n                                <p className={`mt-2 text-xs text-center font-bold ${currentStep >= index ? 'text-brand-teal' : 'text-gray-500'}`}>{step}</p>\n                            </div>\n                            {index < steps.length - 1 && <div className={`flex-1 h-1 mx-2 ${currentStep > index ? 'bg-brand-teal' : 'bg-gray-300'}`}></div>}\n                        </React.Fragment>\n                    ))}\n                </div>\n            </div>\n            \n            {renderStepContent()}\n\n            <div className=\"flex justify-between mt-8\">\n                <button onClick={() => setCurrentStep(s => s - 1)} disabled={currentStep === 0} className=\"bg-gray-300 hover:bg-gray-400 text-brand-dark-blue font-bold py-2 px-6 rounded-lg disabled:opacity-50\">הקודם</button>\n                <button onClick={() => setCurrentStep(s => s + 1)} disabled={currentStep === steps.length - 1 || (currentStep === 2 && !planCompleted)} className=\"bg-brand-teal hover:bg-teal-500 text-white font-bold py-2 px-6 rounded-lg disabled:opacity-50\">\n                    { (currentStep === 2 && !planCompleted) ? 'השלימו את התוכנית' : 'הבא' }\n                </button>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default BuildBusinessModule;","import React, { useMemo, useState } from 'react';\nimport ModuleView from '../ModuleView';\n\ninterface HatsarModelModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ntype HatsarType = 'חייב' | 'צריך' | 'רוצה';\ntype Answer = 'כן' | 'לא';\ntype ResultStatus = 'buy' | 'wait';\n\ninterface HatsarState {\n  type: HatsarType | '';\n  q1: Answer | null;\n  q2: Answer | null;\n}\n\ninterface HatsarResult {\n  status: ResultStatus;\n  priority: string;\n  text: string;\n}\n\nconst steps = ['פתיחה', 'בחירת עדיפות', 'שאלה 1', 'שאלה 2', 'תוצאה'];\n\nconst HatsarModelModule: React.FC<HatsarModelModuleProps> = ({ onBack, title, onComplete }) => {\n  const [hatsarStep, setHatsarStep] = useState(0);\n  const [hatsarData, setHatsarData] = useState<HatsarState>({ type: '', q1: null, q2: null });\n  const [isCompleted, setIsCompleted] = useState(false);\n\n  const handleStart = (type: HatsarType) => {\n    setHatsarData({ type, q1: null, q2: null });\n    setHatsarStep(2);\n  };\n\n  const handleFinish = () => {\n    if (!isCompleted) {\n      onComplete();\n      setIsCompleted(true);\n    }\n    setHatsarStep(4);\n  };\n\n  const handleRestart = () => {\n    setHatsarData({ type: '', q1: null, q2: null });\n    setHatsarStep(0);\n  };\n\n  const getHatsarResult = (): HatsarResult | null => {\n    const { type, q1, q2 } = hatsarData;\n\n    if (!type || !q1 || !q2) {\n      return null;\n    }\n\n    if (type === 'חייב') {\n      const priority = 'עדיפות 1: הכרח';\n      if (q1 === 'כן' && q2 === 'לא') {\n        return { status: 'buy', priority, text: 'הסבר: אתה חייב את זה עכשיו ואין מחיר טוב יותר כרגע. זו קנייה נבונה.' };\n      }\n      if (q1 === 'כן' && q2 === 'כן') {\n        return { status: 'wait', priority, text: 'הסבר: למרות שאתה חייב את זה עכשיו, המחיר גבוה. מומלץ לנסות לחפש מקום זול יותר לפני הרכישה.' };\n      }\n      if (q1 === 'לא' && q2 === 'כן') {\n        return { status: 'wait', priority, text: 'הסבר: אתה לא חייב את זה עכשיו וגם המחיר גבוה. כדאי להמתין.' };\n      }\n      return { status: 'wait', priority, text: 'הסבר: למרות שהמחיר טוב, אתה לא חייב את זה עכשיו ולכן מוטב לחסוך למה שאתה חייב קודם.' };\n    }\n\n    if (type === 'צריך') {\n      const priority = 'עדיפות 2: צורך';\n      if (q1 === 'כן' && q2 === 'כן') {\n        return {\n          status: 'buy',\n          priority,\n          text: 'הסבר: אתה צריך ואתה יכול להרשות לעצמך. שים לב שבמידה שיש משהו שאתה \"חייב\" ועוד לא קנית, הוא קודם למה שאתה \"צריך\".'\n        };\n      }\n      if (q1 === 'כן' && q2 === 'לא') {\n        return {\n          status: 'wait',\n          priority,\n          text: 'הסבר: אתה אמנם צריך, אך התקציב כרגע לא מאפשר זאת בצורה בטוחה.'\n        };\n      }\n      if (q1 === 'לא' && q2 === 'כן') {\n        return {\n          status: 'wait',\n          priority,\n          text: 'הסבר: אתה יכול להרשות לעצמך אך אינך צריך כרגע. רכישה כזו עלולה לפגוע ביכולת שלך לקנות דברים שתהיה \"חייב\" בהמשך.'\n        };\n      }\n      return {\n        status: 'wait',\n        priority,\n        text: 'הסבר: אתה לא צריך ולא יכול להרשות לעצמך - אין סיבה כלכלית לבצע את הרכישה.'\n      };\n    }\n\n    const priority = 'עדיפות 3: רצון';\n    if (q1 === 'כן' && q2 === 'כן') {\n      return {\n        status: 'buy',\n        priority,\n        text: 'הסבר: אתה רוצה ואתה יכול להרשות לעצמך. מותר להתפנק מדי פעם, רק ודא שאין משהו שאתה צריך או חייב קודם.'\n      };\n    }\n    if (q1 === 'כן' && q2 === 'לא') {\n      return {\n        status: 'wait',\n        priority,\n        text: 'הסבר: זהו רצון שאינו תואם את היכולת הכלכלית שלך כרגע. כדאי לחסוך עבור זה בנפרד.'\n      };\n    }\n    if (q1 === 'לא' && q2 === 'כן') {\n      return {\n        status: 'wait',\n        priority,\n        text: 'הסבר: למרות שאתה יכול להרשות לעצמך, אתה לא באמת רוצה את זה מספיק. חבל לבזבז כסף על רכישה רגשית חולפת.'\n      };\n    }\n    return {\n      status: 'wait',\n      priority,\n      text: 'הסבר: אתה לא באמת רוצה ואתה לא יכול להרשות לעצמך. זהו בזבוז כסף מוחלט.'\n    };\n  };\n\n  const result = useMemo(() => getHatsarResult(), [hatsarData]);\n\n  const askFirstQuestion = hatsarData.type === 'חייב'\n    ? 'האם אתה חייב את זה עכשיו?'\n    : hatsarData.type === 'צריך'\n      ? 'האם אתה באמת צריך את זה?'\n      : 'האם אתה באמת רוצה את זה?';\n\n  const askSecondQuestion = hatsarData.type === 'חייב'\n    ? 'האם ניתן להשיג במחיר טוב יותר?'\n    : 'האם אתה יכול להרשות לעצמך כרגע?';\n\n  return (\n    <ModuleView title={title} onBack={onBack}>\n      <div className=\"max-w-4xl mx-auto text-right\" dir=\"rtl\">\n        <div className=\"mb-8\">\n          <div className=\"flex items-center justify-between gap-4 mb-3\">\n            <h3 className=\"text-3xl font-bold text-brand-dark-blue\">מחשבון מודל החצ״ר</h3>\n            <span className=\"text-sm bg-brand-light-blue/10 text-brand-dark-blue font-bold px-3 py-1 rounded-full\">\n              שלב {hatsarStep + 1} מתוך {steps.length}\n            </span>\n          </div>\n          <p className=\"text-lg text-brand-dark-blue/80\">\n            קניות מזדמנות הן המקום שבו הכסף \"בורח\" מהכיס. לפני שקונים, עוצרים רגע וחושבים לפי סדר העדיפויות: חייב, צריך, רוצה.\n          </p>\n        </div>\n\n        {hatsarStep === 0 && (\n          <div className=\"bg-white/60 border border-white/40 rounded-3xl p-8 text-center\">\n            <div className=\"text-6xl mb-4\">🧠💸</div>\n            <p className=\"text-xl text-brand-dark-blue/90 mb-8 font-semibold\">\n              בחרו סוג הוצאה כדי להתחיל את תהליך קבלת ההחלטה.\n            </p>\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n              <button onClick={() => handleStart('חייב')} className=\"bg-brand-magenta hover:bg-pink-700 text-white rounded-2xl py-5 text-2xl font-black transition-colors\">חייב</button>\n              <button onClick={() => handleStart('צריך')} className=\"bg-brand-teal hover:bg-teal-600 text-white rounded-2xl py-5 text-2xl font-black transition-colors\">צריך</button>\n              <button onClick={() => handleStart('רוצה')} className=\"bg-brand-light-blue hover:bg-cyan-600 text-white rounded-2xl py-5 text-2xl font-black transition-colors\">רוצה</button>\n            </div>\n          </div>\n        )}\n\n        {(hatsarStep === 2 || hatsarStep === 3) && hatsarData.type && (\n          <div className=\"bg-white/60 border border-white/40 rounded-3xl p-8\">\n            <div className=\"mb-6 flex items-center justify-between\">\n              <button\n                onClick={() => setHatsarStep(prev => (prev === 2 ? 0 : 2))}\n                className=\"bg-brand-magenta/10 hover:bg-brand-magenta/20 text-brand-magenta font-bold px-4 py-2 rounded-xl transition-colors\"\n              >\n                חזרה\n              </button>\n              <span className=\"bg-brand-dark-blue text-white px-4 py-2 rounded-full font-bold\">\n                {hatsarData.type}\n              </span>\n            </div>\n\n            <h4 className=\"text-2xl font-bold text-brand-dark-blue mb-8 text-center\">\n              {hatsarStep === 2 ? askFirstQuestion : askSecondQuestion}\n            </h4>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <button\n                onClick={() => {\n                  if (hatsarStep === 2) {\n                    setHatsarData(prev => ({ ...prev, q1: 'כן' }));\n                    setHatsarStep(3);\n                  } else {\n                    setHatsarData(prev => ({ ...prev, q2: 'כן' }));\n                    handleFinish();\n                  }\n                }}\n                className=\"bg-brand-dark-blue hover:opacity-90 text-white rounded-2xl py-5 text-2xl font-black transition-opacity\"\n              >\n                כן\n              </button>\n              <button\n                onClick={() => {\n                  if (hatsarStep === 2) {\n                    setHatsarData(prev => ({ ...prev, q1: 'לא' }));\n                    setHatsarStep(3);\n                  } else {\n                    setHatsarData(prev => ({ ...prev, q2: 'לא' }));\n                    handleFinish();\n                  }\n                }}\n                className=\"bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-2xl py-5 text-2xl font-black transition-colors\"\n              >\n                לא\n              </button>\n            </div>\n          </div>\n        )}\n\n        {hatsarStep === 4 && result && (\n          <div className=\"bg-white/70 border border-white/50 rounded-3xl p-8 text-center\">\n            <div className=\"mb-4 inline-block px-4 py-1 rounded-full bg-brand-dark-blue/10 text-brand-dark-blue text-sm font-bold\">\n              {result.priority}\n            </div>\n            <div className={`mx-auto mb-6 w-24 h-24 rounded-3xl flex items-center justify-center text-5xl ${result.status === 'buy' ? 'bg-brand-teal' : 'bg-brand-magenta'}`}>\n              {result.status === 'buy' ? '✅' : '🛑'}\n            </div>\n            <h4 className=\"text-3xl font-black mb-5 text-brand-dark-blue\">\n              המלצה: {result.status === 'buy' ? 'קונים' : 'לא קונים'}\n            </h4>\n            <p className=\"bg-white/80 border border-slate-100 p-5 rounded-2xl text-lg text-brand-dark-blue/90 font-semibold leading-relaxed mb-8\">\n              {result.text}\n            </p>\n\n            <button\n              onClick={handleRestart}\n              className=\"bg-brand-dark-blue hover:opacity-90 text-white font-black text-lg px-8 py-3 rounded-full transition-opacity\"\n            >\n              בדיקה נוספת\n            </button>\n          </div>\n        )}\n      </div>\n    </ModuleView>\n  );\n};\n\nexport default HatsarModelModule;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport ModuleView from '../ModuleView';\n\ninterface FutureManagersChallengeModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst INITIAL_BUDGET = 5000;\n\ntype CategoryId = 'food' | 'gaming' | 'style' | 'entertainment' | 'gifts';\n\ninterface Category {\n  id: CategoryId;\n  title: string;\n  icon: string;\n  color: string;\n  isWeekly: boolean;\n}\n\nconst CATEGORIES: Record<CategoryId, Category> = {\n  food: { id: 'food', title: 'אוכל ופינוקים', icon: '🍔', color: '#f97316', isWeekly: true },\n  gaming: { id: 'gaming', title: 'מסכים וגיימינג', icon: '🎮', color: '#6366f1', isWeekly: false },\n  style: { id: 'style', title: 'בגדים וסטייל', icon: '🛍️', color: '#ec4899', isWeekly: false },\n  entertainment: { id: 'entertainment', title: 'יציאות ובילויים', icon: '🎡', color: '#22c55e', isWeekly: true },\n  gifts: { id: 'gifts', title: 'מתנות ואירועים', icon: '🎁', color: '#ef4444', isWeekly: false }\n};\n\ninterface GroupTask {\n  desc: string;\n  steps: string[];\n  res: string;\n}\n\nconst GROUP_TASKS: Record<number, Record<CategoryId, GroupTask>> = {\n  1: {\n    food: { desc: 'ערב פיצה משפחתי', steps: ['בחרו פיצרייה מוכרת.', 'מצאו מחיר ל-2 מגשי משפחתית.', 'הוסיפו שתייה ומשלוח.'], res: 'חפשו \"מבצעי משלוחים\" באתרי פיצה.' },\n    gaming: { desc: 'משחק AAA חדש', steps: ['בחרו משחק שיצא השנה.', 'מצאו מחיר עותק פיזי בחנות.', 'בדקו אם יש הנחת מועדון.'], res: 'חפשו שם משחק + מחיר.' },\n    style: { desc: 'נעלי ספורט למותג', steps: ['מצאו דגם Nike Air Force 1.', 'חפשו מחיר בחנות אונליין.', 'ודאו שהמחיר מקורי.'], res: 'חפשו \"נעלי נייקי מחיר\".' },\n    entertainment: { desc: 'קולנוע זוגי', steps: ['מחיר ל-2 כרטיסים.', 'הוסיפו פופקורן ושתייה.', 'בדקו הנחות 1+1.'], res: 'אתר סינמה סיטי או יס פלאנט.' },\n    gifts: { desc: 'מתנה לחבר טוב', steps: ['בחרו אוזניות גיימינג או בובה.', 'מצאו מחיר לדגם ספציפי.', 'הוסיפו 15 ש\"ח עטיפה.'], res: 'חפשו \"אוזניות גיימינג מחיר\".' }\n  },\n  2: {\n    food: { desc: 'ארוחת המבורגרים', steps: ['מצאו מחיר ל-4 ארוחות קומבו.', 'בדקו ברשת מקדונלדס.', 'חפשו \"ארוחה משפחתית\".'], res: 'חפשו \"מקדונלדס תפריט\".' },\n    gaming: { desc: 'מנויי סטרימינג', steps: ['מחיר חודשי לנטפליקס.', 'מחיר חודשי לספוטיפיי.', 'חברו את המחירים.'], res: 'חפשו \"מחיר נטפליקס ישראל\".' },\n    style: { desc: 'חליפת טרנינג', steps: ['חפשו מכנסיים + קפוצון.', 'בחרו רשת (קסטרו/פוקס).', 'חברו את המחירים.'], res: 'חפשו \"חליפת טרנינג\" באתרי אופנה.' },\n    entertainment: { desc: 'תחרות באולינג', steps: ['מחיר ל-2 משחקים לאדם.', 'הכפילו ב-4 חברים.', 'הוסיפו השכרת נעליים.'], res: 'חפשו \"באולינג מחירים\".' },\n    gifts: { desc: 'יום הולדת להורים', steps: ['זר פרחים או שוקולד יוקרתי.', 'מצאו מחיר למארז הכי יפה.', 'הוסיפו מחיר משלוח.'], res: 'חפשו \"משלוח פרחים מחיר\".' }\n  },\n  3: {\n    food: { desc: 'מסיבת ממתקים', steps: ['חפשו 10 שקיות חטיפים.', 'הוסיפו 4 בקבוקי שתייה.', 'חשבו עלות שבועית.'], res: 'אתר \"שופרסל Online\".' },\n    gaming: { desc: 'מטבעות וירטואליים', steps: ['בחרו פורטנייט או רובלוקס.', 'חפשו חבילת מטבעות.', 'המרו לשקלים (3.7 לדולר).'], res: 'חפשו \"Fortnite V-Bucks price\".' },\n    style: { desc: 'עיצוב החדר', steps: ['בחרו פס לד וכרית נוי.', 'מצאו מחיר באיקאה.', 'חברו את המחירים.'], res: 'חפשו \"אקססוריז לחדר\".' },\n    entertainment: { desc: 'פארק טרמפולינות', steps: ['מחיר לשעה קפיצה.', 'הוסיפו גרביים מונעות החלקה.', 'מחיר לאדם אחד.'], res: 'חפשו \"איי גאמפ מחירים\".' },\n    gifts: { desc: 'מתנה למורה', steps: ['בחרו עציץ או ספר.', 'מצאו מחיר בחנות.', 'הוסיפו כרטיס ברכה.'], res: 'חפשו \"סטימצקי\" או \"משתלה\".' }\n  },\n  4: {\n    food: { desc: 'גלידה משפחתית', steps: ['מחיר ל-1 ק\"ג גלידה.', 'הוסיפו 4 גביעים.', 'הוסיפו רטבים בתשלום.'], res: 'חפשו \"גולדה מחיר קילו\".' },\n    gaming: { desc: 'ציוד למחשב', steps: ['עכבר גיימינג או מקלדת.', 'חפשו דגם מותג בינוני.', 'מצאו מחיר בחנות.'], res: 'חפשו \"עכבר גיימינג מחיר\".' },\n    style: { desc: 'חולצת כדורגל', steps: ['בחרו קבוצה אהובה.', 'חפשו חולצה רשמית 2024.', 'בדקו בחנות ספורט.'], res: 'חפשו \"חולצת כדורגל רשמית מחיר\".' },\n    entertainment: { desc: 'חדר בריחה', steps: ['חדר שמתאים לילדים.', 'מחיר לאדם בקבוצה של 5.', 'שימו לב: המחיר יורד כשיש יותר אנשים.'], res: 'חפשו \"חדר בריחה מחירים\".' },\n    gifts: { desc: 'מתנה לאח/אחות', steps: ['ערכת לגו או משחק קופסה.', 'מצאו מחיר בחנות צעצועים.', 'ודאו שזה דגם פופולרי.'], res: 'חפשו \"ערכת לגו מחיר\".' }\n  }\n};\n\nconst RANDOM_EVENTS = [\n  { text: 'איבדתם את הרב-קו! עלות חדש: 100 ₪.', cost: 100 },\n  { text: 'סבא וסבתא הביאו דמי כיס: 200 ₪ בונוס!', cost: -200 },\n  { text: 'קניתם ממתקים בטעות ב-150 ₪.', cost: 150 },\n  { text: 'עזרתם לשכנה וקיבלתם 50 ₪.', cost: -50 }\n];\n\ninterface Group {\n  id: number;\n  name: string;\n  salary: number;\n  expenses: Partial<Record<CategoryId, number>>;\n  balance: number;\n}\n\nconst allCategoryIds: CategoryId[] = ['food', 'gaming', 'style', 'entertainment', 'gifts'];\n\nconst FutureManagersChallengeModule: React.FC<FutureManagersChallengeModuleProps> = ({ onBack, title, onComplete }) => {\n  const [groups, setGroups] = useState<Group[]>([\n    { id: 1, name: 'צוות אלפא', salary: INITIAL_BUDGET, expenses: {}, balance: INITIAL_BUDGET },\n    { id: 2, name: 'צוות גלקסיה', salary: INITIAL_BUDGET, expenses: {}, balance: INITIAL_BUDGET },\n    { id: 3, name: 'צוות פניקס', salary: INITIAL_BUDGET, expenses: {}, balance: INITIAL_BUDGET },\n    { id: 4, name: 'צוות דרקון', salary: INITIAL_BUDGET, expenses: {}, balance: INITIAL_BUDGET }\n  ]);\n  const [activeCategoryId, setActiveCategoryId] = useState<CategoryId | null>(null);\n  const [selectedGroup, setSelectedGroup] = useState<Group | null>(null);\n  const [inputValue, setInputValue] = useState('');\n  const [eventMessage, setEventMessage] = useState('');\n  const [isCompleted, setIsCompleted] = useState(false);\n\n  const calculateTotalExpenses = (group: Group) => Object.values(group.expenses).reduce((sum, value) => sum + (value ?? 0), 0);\n\n  const closeModal = () => {\n    setActiveCategoryId(null);\n    setSelectedGroup(null);\n    setInputValue('');\n  };\n\n  const updateBudget = (groupId: number, catId: CategoryId, amount: string) => {\n    const numericAmount = Number(amount);\n    if (Number.isNaN(numericAmount) || numericAmount < 0) {\n      return;\n    }\n\n    const isWeekly = CATEGORIES[catId].isWeekly;\n    const finalAmount = isWeekly ? numericAmount * 4 : numericAmount;\n\n    setGroups(prev => prev.map(group => {\n      if (group.id !== groupId) {\n        return group;\n      }\n      const newExpenses = { ...group.expenses, [catId]: finalAmount };\n      const totalExpenses = Object.values(newExpenses).reduce((sum, value) => sum + (value ?? 0), 0);\n      return {\n        ...group,\n        expenses: newExpenses,\n        balance: group.salary - totalExpenses\n      };\n    }));\n\n    closeModal();\n  };\n\n  const triggerEvent = (groupId: number) => {\n    const event = RANDOM_EVENTS[Math.floor(Math.random() * RANDOM_EVENTS.length)];\n    const groupName = groups.find(group => group.id === groupId)?.name ?? '';\n    setEventMessage(`${groupName}: ${event.text}`);\n\n    setGroups(prev => prev.map(group => {\n      if (group.id !== groupId) {\n        return group;\n      }\n      return { ...group, balance: group.balance - event.cost };\n    }));\n\n    setTimeout(() => setEventMessage(''), 6000);\n  };\n\n  const hasCompletedAnyGroup = useMemo(\n    () => groups.some(group => allCategoryIds.every(categoryId => typeof group.expenses[categoryId] === 'number')),\n    [groups]\n  );\n\n  useEffect(() => {\n    if (hasCompletedAnyGroup && !isCompleted) {\n      onComplete();\n      setIsCompleted(true);\n    }\n  }, [hasCompletedAnyGroup, isCompleted, onComplete]);\n\n  return (\n    <ModuleView title={title} onBack={onBack}>\n      <div className=\"min-h-screen bg-slate-100 p-4 md:p-8 font-sans text-slate-800\" dir=\"rtl\">\n        <div className=\"max-w-7xl mx-auto mb-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center gap-6 bg-white p-6 rounded-[2.5rem] shadow-sm border-b-4 border-indigo-200\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"bg-indigo-600 p-4 rounded-3xl text-white text-3xl\">💼</div>\n              <div className=\"text-right\">\n                <h1 className=\"text-3xl md:text-4xl font-black text-indigo-900\">מנהלי העתיד: אתגר ה-5,000</h1>\n                <p className=\"text-indigo-500 font-bold\">לוח בקרה מרכזי לניהול כיתתי</p>\n              </div>\n            </div>\n\n            <div className=\"flex-1 max-w-2xl bg-slate-900 text-white p-4 rounded-[2rem] shadow-xl flex items-center gap-4 border-r-8 border-indigo-500\">\n              <span className=\"text-indigo-400 shrink-0 text-2xl\">✅</span>\n              <p className=\"text-sm md:text-base leading-snug\">\n                <span className=\"font-bold text-indigo-300\">איך מנצחים?</span> מסיימים 5 משימות חקר, מוכיחים למורה את המחיר האמיתי, ומנסים להישאר עם היתרה הגבוהה ביותר.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {eventMessage && (\n          <div className=\"fixed top-10 left-1/2 -translate-x-1/2 z-[110] bg-yellow-400 border-4 border-yellow-600 p-4 rounded-2xl shadow-2xl animate-bounce\">\n            <div className=\"flex items-center gap-3 text-yellow-950 font-black\">\n              <span className=\"text-2xl\">⚠️</span>\n              {eventMessage}\n            </div>\n          </div>\n        )}\n\n        <div className=\"max-w-7xl mx-auto overflow-x-auto\">\n          <table className=\"w-full bg-white rounded-[3rem] shadow-2xl overflow-hidden border-collapse\">\n            <thead>\n              <tr className=\"bg-indigo-700 text-white\">\n                <th className=\"p-6 text-right text-xl font-black border-l border-indigo-600 w-1/6 italic opacity-70\">\n                  קטגוריה \\ צוות\n                </th>\n                {groups.map(group => (\n                  <th key={group.id} className=\"p-6 text-center border-l border-indigo-600 w-1/5\">\n                    <div className=\"flex flex-col items-center gap-2\">\n                      <div className=\"flex items-center gap-2 text-2xl font-black\">👥 {group.name}</div>\n                      <button\n                        onClick={() => triggerEvent(group.id)}\n                        className=\"bg-white/20 hover:bg-white/40 px-4 py-1.5 rounded-xl text-xs font-bold transition-all\"\n                      >\n                        בלת\"ם! 🎲\n                      </button>\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              <tr className=\"bg-slate-50 border-b border-slate-200\">\n                <td className=\"p-6 font-black text-slate-500\">📉 יתרה נוכחית</td>\n                {groups.map(group => (\n                  <td key={group.id} className=\"p-6 text-center\">\n                    <div className={`text-3xl font-black ${group.balance < 0 ? 'text-red-500' : 'text-indigo-600'}`}>\n                      ₪{group.balance.toLocaleString()}\n                    </div>\n                  </td>\n                ))}\n              </tr>\n\n              {allCategoryIds.map(categoryId => {\n                const category = CATEGORIES[categoryId];\n                return (\n                  <tr key={category.id} className=\"border-b border-slate-100 hover:bg-slate-50 transition-colors\">\n                    <td className=\"p-6\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2.5 rounded-xl text-white shadow-sm text-lg\" style={{ backgroundColor: category.color }}>\n                          {category.icon}\n                        </div>\n                        <div>\n                          <div className=\"font-black text-lg text-slate-800\">{category.title}</div>\n                          <div className=\"text-[10px] text-slate-400 font-bold uppercase\">{category.isWeekly ? 'שבועי x 4' : 'חודשי'}</div>\n                        </div>\n                      </div>\n                    </td>\n                    {groups.map(group => (\n                      <td key={group.id} className=\"p-6\">\n                        <div className=\"flex justify-center\">\n                          <button\n                            onClick={() => {\n                              setActiveCategoryId(category.id);\n                              setSelectedGroup(group);\n                            }}\n                            className={`group relative flex flex-col items-center justify-center min-w-[120px] p-4 rounded-3xl border-4 transition-all ${\n                              typeof group.expenses[category.id] === 'number'\n                                ? 'bg-slate-900 border-slate-900 text-white shadow-lg'\n                                : 'bg-white border-slate-100 text-slate-300 hover:border-indigo-300 hover:text-indigo-600'\n                            }`}\n                          >\n                            {typeof group.expenses[category.id] === 'number' ? (\n                              <div className=\"text-xl font-black\">₪{group.expenses[category.id]?.toLocaleString()}</div>\n                            ) : (\n                              <div className=\"flex flex-col items-center gap-1\">\n                                <span className=\"text-lg\">🔎</span>\n                                <span className=\"text-[10px] font-bold\">לחץ להזנה</span>\n                              </div>\n                            )}\n                          </button>\n                        </div>\n                      </td>\n                    ))}\n                  </tr>\n                );\n              })}\n\n              <tr className=\"bg-indigo-50 font-black border-t-4 border-indigo-200\">\n                <td className=\"p-6 text-indigo-900 text-lg\">🧮 סה\"כ הוצאות חודשיות</td>\n                {groups.map(group => (\n                  <td key={group.id} className=\"p-6 text-center\">\n                    <div className=\"text-2xl text-slate-700 bg-white inline-block px-6 py-2 rounded-2xl shadow-inner border border-indigo-100\">\n                      ₪{calculateTotalExpenses(group).toLocaleString()}\n                    </div>\n                  </td>\n                ))}\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        {activeCategoryId && selectedGroup && (\n          <div className=\"fixed inset-0 bg-indigo-950/95 backdrop-blur-xl flex items-center justify-center p-4 z-[100] cursor-pointer\" onClick={closeModal}>\n            <div className=\"bg-white rounded-[4rem] max-w-2xl w-full shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 cursor-default\" onClick={(event) => event.stopPropagation()}>\n              <div className=\"p-8 text-white relative\" style={{ backgroundColor: CATEGORIES[activeCategoryId].color }}>\n                <div className=\"flex justify-between items-center\">\n                  <div className=\"flex items-center gap-6\">\n                    <div className=\"bg-white/20 p-4 rounded-[1.5rem] shadow-inner text-3xl\">{CATEGORIES[activeCategoryId].icon}</div>\n                    <div>\n                      <h2 className=\"text-2xl md:text-3xl font-black\">{CATEGORIES[activeCategoryId].title}</h2>\n                      <p className=\"opacity-90 font-bold text-lg mt-1\">משימת {selectedGroup.name}</p>\n                    </div>\n                  </div>\n                  <button onClick={closeModal} className=\"bg-black/10 hover:bg-black/20 p-2 rounded-full transition-all text-2xl\">\n                    ✕\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"p-10 space-y-8\">\n                <section className=\"bg-indigo-50 p-6 rounded-[2.5rem] border-2 border-indigo-100\">\n                  <h3 className=\"text-xl font-black text-indigo-900 mb-4 underline decoration-indigo-200 underline-offset-4\">\n                    {GROUP_TASKS[selectedGroup.id][activeCategoryId].desc}\n                  </h3>\n\n                  <div className=\"space-y-4 mb-6\">\n                    {GROUP_TASKS[selectedGroup.id][activeCategoryId].steps.map((step, index) => (\n                      <div key={step} className=\"flex gap-3 items-center\">\n                        <div className=\"bg-indigo-600 text-white w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 font-bold text-xs\">\n                          {index + 1}\n                        </div>\n                        <p className=\"text-slate-700 font-medium\">{step}</p>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"bg-white p-3 rounded-xl border border-dashed border-indigo-300 text-sm italic font-bold text-indigo-800\">\n                    🔎 {GROUP_TASKS[selectedGroup.id][activeCategoryId].res}\n                  </div>\n                </section>\n\n                <div className=\"pt-4 border-t-2 border-slate-100 text-center\">\n                  <label className=\"text-xs font-black text-slate-400 uppercase tracking-widest block mb-4\">\n                    {CATEGORIES[activeCategoryId].isWeekly ? 'הזינו סכום שבועי (יוכפל פי 4)' : 'הזינו סכום חודשי'}\n                  </label>\n                  <div className=\"flex gap-3 max-w-md mx-auto\">\n                    <input\n                      type=\"number\"\n                      min={0}\n                      value={inputValue}\n                      onChange={event => setInputValue(event.target.value)}\n                      placeholder=\"₪ סכום...\"\n                      className=\"flex-1 bg-slate-100 border-4 border-slate-100 focus:border-indigo-500 rounded-3xl p-4 text-3xl font-black text-center outline-none\"\n                      autoFocus\n                    />\n                    <button\n                      onClick={() => updateBudget(selectedGroup.id, activeCategoryId, inputValue)}\n                      disabled={!inputValue}\n                      className=\"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white font-black text-xl px-10 rounded-3xl transition-all shadow-xl\"\n                    >\n                      אישור\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"max-w-7xl mx-auto mt-6 flex justify-center gap-8 text-xs font-bold text-slate-400 italic\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 bg-slate-900 rounded-sm\"></div> סעיף הושלם\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-3 h-3 bg-white border border-slate-200 rounded-sm\"></div> מחכה למחקר\n          </div>\n          {hasCompletedAnyGroup && (\n            <div className=\"flex items-center gap-2 text-green-600 not-italic\">\n              <span>🏁</span>\n              הושלמה יחידה לצוות אחד — כל הכבוד!\n            </div>\n          )}\n        </div>\n      </div>\n    </ModuleView>\n  );\n};\n\nexport default FutureManagersChallengeModule;\n","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst jobs = [\n    { id: 'baker', name: 'אופה', icon: '👨‍🍳', tool: 'מאפה', x: 50 },\n    { id: 'doctor', name: 'רופאה', icon: '👩‍⚕️', tool: 'סטטוסקופ', x: 130 },\n    { id: 'programmer', name: 'מתכנת', icon: '👨‍💻', tool: 'מחשב', x: 210 },\n    { id: 'farmer', name: 'חקלאית', icon: '👩‍🌾', tool: 'גזר', x: 290 },\n    { id: 'painter', name: 'ציירת', icon: '👩‍🎨', tool: 'מכחול', x: 370 },\n    { id: 'builder', name: 'פועל בניין', icon: '👷', tool: 'פטיש', x: 450 },\n    { id: 'firefighter', name: 'כבאית', icon: '👩‍🚒', tool: 'מטף', x: 530 },\n    { id: 'scientist', name: 'מדען', icon: '👨‍🔬', tool: 'מבחנה', x: 610 },\n];\n\nconst tools = [\n    { name: 'מאפה', icon: '🥐' },\n    { name: 'סטטוסקופ', icon: '🩺' },\n    { name: 'מחשב', icon: '💻' },\n    { name: 'גזר', icon: '🥕' },\n    { name: 'מכחול', icon: '🖌️' },\n    { name: 'פטיש', icon: '🔨' },\n    { name: 'מטף', icon: '🧯' },\n    { name: 'מבחנה', icon: '🧪' },\n];\n\nconst GAME_WIDTH = 700;\nconst TOOL_WIDTH = 60;\n\n// Function to shuffle an array\nconst shuffleArray = (array: any[]) => {\n  const shuffled = [...array];\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n  return shuffled;\n};\n\n\nconst WhereMoneyComesFromModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [gameState, setGameState] = useState<'intro' | 'playing'>('intro');\n    const [fallingTool, setFallingTool] = useState<{name: string; icon: string; x: number; y: number} | null>(null);\n    const [score, setScore] = useState(0);\n    const [message, setMessage] = useState('השתמשו בחיצים כדי להזיז את הכלי ולעזור לבעל המקצוע הנכון!');\n    const [gameQueue, setGameQueue] = useState<(typeof jobs)[0][]>([]);\n    const animationFrameId = useRef<number>();\n\n    const spawnTool = (queue: (typeof jobs)[0][]) => {\n        if (queue.length === 0) return;\n        \n        const nextJob = queue[0];\n        const toolIcon = tools.find(t => t.name === nextJob.tool)?.icon || '';\n        setFallingTool({\n            name: nextJob.tool,\n            icon: toolIcon,\n            x: GAME_WIDTH / 2 - TOOL_WIDTH / 2,\n            y: -50,\n        });\n    };\n    \n    const startGame = () => {\n        setScore(0);\n        const shuffledJobs = shuffleArray(jobs);\n        setGameQueue(shuffledJobs);\n        setGameState('playing');\n        spawnTool(shuffledJobs);\n    }\n\n\n    useEffect(() => {\n        if (gameState !== 'playing') return;\n\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (!fallingTool) return;\n            setFallingTool(prev => {\n                if (!prev) return null;\n                let newX = prev.x;\n                if (e.key === 'ArrowLeft') {\n                    newX = Math.max(0, prev.x - 20);\n                } else if (e.key === 'ArrowRight') {\n                    newX = Math.min(GAME_WIDTH - TOOL_WIDTH, prev.x + 20);\n                }\n                return {...prev, x: newX};\n            });\n        };\n\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [fallingTool, gameState]);\n\n    useEffect(() => {\n        if (gameState !== 'playing' || gameQueue.length === 0) return;\n\n        const gameLoop = () => {\n            if (fallingTool) {\n                setFallingTool(prevTool => {\n                    if (!prevTool) return null;\n                    const newY = prevTool.y + 3;\n                    \n                    const correctJob = gameQueue[0];\n                    if (newY > 400 && newY < 450) {\n                        const jobWidth = 80;\n\n                        if (prevTool.x > correctJob.x - jobWidth/2 && prevTool.x < correctJob.x + jobWidth/2) {\n                             if (prevTool.name === correctJob.tool) {\n                                setMessage('מעולה! התאמה נכונה!');\n                                setScore(s => s + 1);\n                                const nextQueue = gameQueue.slice(1);\n                                setGameQueue(nextQueue);\n                                spawnTool(nextQueue);\n                                return null;\n                             }\n                        }\n                    }\n\n                    if (newY > 500) {\n                        setMessage('אופס! נסו שוב.');\n                        spawnTool(gameQueue);\n                        return null;\n                    }\n\n                    return { ...prevTool, y: newY };\n                });\n            }\n            animationFrameId.current = requestAnimationFrame(gameLoop);\n        };\n        animationFrameId.current = requestAnimationFrame(gameLoop);\n        return () => cancelAnimationFrame(animationFrameId.current as number);\n    }, [fallingTool, score, gameState, gameQueue]);\n    \n     useEffect(() => {\n        if (gameQueue.length === 0 && gameState === 'playing' && jobs.length > 0) {\n            setMessage('כל הכבוד! התאמתם את כל הכלים ועזרתם לכולם לעבוד!');\n            onComplete();\n        }\n    }, [gameQueue, gameState, onComplete]);\n\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                 <h3 className=\"text-[2.75rem] font-bold text-brand-teal mb-4\">עבודה ומשכורת</h3>\n                 <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-3xl mx-auto shadow-inner border border-white/50\">\n                    <h4 className=\"text-[2rem] font-bold mb-2 text-brand-dark-blue\">איך מרוויחים כסף? 💰</h4>\n                    <p className=\"text-[1.65rem] leading-relaxed\">כדי להרוויח כסף, מבוגרים הולכים לעבודה. לכל עבודה יש מקצוע, כמו רופאה או אופה. בסוף כל חודש, הם מקבלים 'משכורת' - כסף עבור העבודה שהם עשו. במשחק הזה, עזרו לכל בעל מקצוע לקבל את כלי העבודה שלו כדי שיוכל לעבוד ולהרוויח משכורת!</p>\n                </div>\n\n                {gameState === 'intro' ? (\n                     <button onClick={startGame} className=\"bg-brand-magenta text-white font-bold py-3 px-8 rounded-2xl text-2xl mb-6 shadow-lg hover:scale-105 transform transition-transform\">\n                        התחל משחק\n                    </button>\n                ) : (\n                    <>\n                        <div className=\"bg-white/50 p-4 rounded-xl shadow-inner mb-6\">\n                            <p className=\"text-2xl text-brand-dark-blue/90 mb-2\">\n                                הזיזו את הכלי הנופל עם החיצים (ימין ושמאל) והפילו אותו על בעל המקצוע הנכון!\n                            </p>\n                            <p className=\"text-3xl font-bold\">הצלחות: {score}/{jobs.length}</p>\n                        </div>\n\n                        <div className={`relative w-full max-w-[${GAME_WIDTH}px] h-[68vw] min-h-[320px] max-h-[500px] bg-sky-100 mx-auto rounded-3xl border-4 border-brand-light-blue overflow-hidden shadow-2xl`}>\n                             <div className=\"absolute inset-0 bg-gradient-to-b from-sky-300 to-sky-100\"></div>\n                             <div className=\"absolute bottom-0 w-full h-40 bg-green-400\"></div>\n                             <div className=\"absolute bottom-32 w-full h-8 bg-green-500 rounded-t-full\"></div>\n                            \n                            {fallingTool && (\n                                <div className=\"absolute text-6xl transform -translate-x-1/2\" style={{ left: fallingTool.x + TOOL_WIDTH/2, top: fallingTool.y }}>\n                                    {fallingTool.icon}\n                                </div>\n                            )}\n\n                            <div className=\"absolute bottom-0 left-0 right-0 h-40\">\n                                {jobs.map((job) => (\n                                    <div key={job.id} className={`absolute bottom-16 text-center transition-all duration-300`}\n                                        style={{ left: `${job.x}px`, transform: 'translateX(-50%)' }}\n                                    >\n                                        <div className=\"text-5xl sm:text-7xl drop-shadow-lg\">{job.icon}</div>\n                                        <div className=\"font-bold text-sm sm:text-lg bg-white/70 px-2 py-1 rounded-md\">{job.name}</div>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                        {message && <p className=\"mt-6 text-2xl sm:text-3xl font-bold text-brand-magenta\">{message}</p>}\n                    </>\n                )}\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default WhereMoneyComesFromModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ntype Category = 'צורך' | 'רצון';\ninterface Item {\n  id: number;\n  name: string;\n  icon: string;\n  category: Category;\n}\n\nconst initialItems: Item[] = [\n    { id: 1, name: 'בית', icon: '🏠', category: 'צורך' },\n    { id: 2, name: 'מים', icon: '💧', category: 'צורך' },\n    { id: 3, name: 'אוכל', icon: '🍎', category: 'צורך' },\n    { id: 4, name: 'משחק וידאו', icon: '🎮', category: 'רצון' },\n    { id: 5, name: 'ממתקים', icon: '🍭', category: 'רצון' },\n    { id: 6, name: 'בגדים', icon: '👕', category: 'צורך' },\n    { id: 7, name: 'צעצוע', icon: '🧸', category: 'רצון' },\n    { id: 8, name: 'אופניים', icon: '🚲', category: 'רצון' },\n    { id: 9, name: 'מיטה', icon: '🛏️', category: 'צורך' },\n    { id: 10, name: 'גלידה', icon: '🍦', category: 'רצון' },\n    { id: 11, name: 'תרופה', icon: '💊', category: 'צורך' },\n    { id: 12, name: 'ספר לימוד', icon: '📚', category: 'צורך' },\n    { id: 13, name: 'נעליים', icon: '👟', category: 'צורך' },\n    { id: 14, name: 'סרט בקולנוע', icon: '🎬', category: 'רצון' },\n    { id: 15, name: 'חופשה', icon: '✈️', category: 'רצון' },\n    { id: 16, name: 'טלפון נייד', icon: '📱', category: 'רצון' },\n    { id: 17, name: 'מקלחת', icon: '🚿', category: 'צורך' },\n    { id: 18, name: 'חימום בחורף', icon: '🔥', category: 'צורך' },\n    { id: 19, name: 'מכונית צעצוע', icon: '🚗', category: 'רצון' },\n    { id: 20, name: 'כדור', icon: '⚽', category: 'רצון' },\n    { id: 21, name: 'חיבוק', icon: '🤗', category: 'צורך' },\n    { id: 22, name: 'חשמל', icon: '💡', category: 'צורך' },\n    { id: 23, name: 'ברד', icon: '🍧', category: 'רצון' },\n    { id: 24, name: 'לימודים', icon: '🏫', category: 'צורך' },\n    { id: 25, name: 'טלוויזיה', icon: '📺', category: 'רצון' },\n    { id: 26, name: 'סבון', icon: '🧼', category: 'צורך' },\n    { id: 27, name: 'עוגה', icon: '🎂', category: 'רצון' },\n    { id: 28, name: 'רופא', icon: '👨‍⚕️', category: 'צורך' },\n    { id: 29, name: 'בובה', icon: '🎎', category: 'רצון' },\n    { id: 30, name: 'בגד חם', icon: '🧥', category: 'צורך' },\n    { id: 31, name: 'מחשב', icon: '💻', category: 'רצון' },\n    { id: 32, name: 'ירקות', icon: '🥦', category: 'צורך' },\n    { id: 33, name: 'רובוט', icon: '🤖', category: 'רצון' },\n    { id: 34, name: 'משפחה', icon: '👨‍👩‍👧‍👦', category: 'צורך' },\n    { id: 35, name: 'מכונית מרוץ', icon: '🏎️', category: 'רצון' },\n];\n\nconst GOAL = 20;\n\nconst BasketballHoop: React.FC<{ color: 'light-blue' | 'magenta' }> = ({ color }) => {\n    const colors = {\n        'light-blue': { border: 'border-cyan-500', shadow: 'shadow-cyan-500/50' },\n        'magenta': { border: 'border-pink-500', shadow: 'shadow-pink-500/50' }\n    };\n    return (\n        <div className=\"relative w-48 h-32 flex flex-col items-center drop-shadow-lg group-hover:-translate-y-2 transition-transform duration-300\">\n            {/* Backboard */}\n            <div className={`w-full h-24 bg-gradient-to-br from-white/80 via-gray-100/70 to-white/80 backdrop-blur-sm rounded-lg border-4 shadow-xl ${colors[color].border} ${colors[color].shadow}`}>\n                <div className={`w-12 h-12 border-2 ${colors[color].border} absolute top-8 left-1/2 -translate-x-1/2 rounded-sm opacity-60`}></div>\n            </div>\n            {/* Rim */}\n            <div className=\"absolute top-16 w-24 h-8 border-[10px] border-orange-500 rounded-full [transform:rotateX(60deg)] shadow-inner\"></div>\n            {/* Net */}\n            <div className=\"absolute top-20 w-16 h-12 border-l-2 border-r-2 border-b-2 border-gray-400/80\"\n                 style={{clipPath: 'polygon(0 0, 100% 0, 80% 100%, 20% 100%)'}}>\n            </div>\n        </div>\n    );\n};\n\n\nconst NeedsVsWantsModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [items, setItems] = useState(() => {\n        // Create a longer, shuffled list for continuous play\n        const extended = [];\n        for (let i = 0; i < 3; i++) {\n            extended.push(...initialItems);\n        }\n        return extended.sort(() => Math.random() - 0.5);\n    });\n    \n    const [currentItemIndex, setCurrentItemIndex] = useState(0);\n    const [score, setScore] = useState(0);\n    const [feedback, setFeedback] = useState<{ icon: string; position: {x: number, y: number} } | null>(null);\n    const [animation, setAnimation] = useState<{ active: boolean; targetX: number; targetY: number; rotation: number } | null>(null);\n    const [hoopPositions, setHoopPositions] = useState({\n        needs: { x: 50, dir: 1, speed: 3.5 },\n        wants: { x: 450, dir: -1, speed: 3.8 }\n    });\n    const [gameWon, setGameWon] = useState(false);\n\n    const gameAreaRef = useRef<HTMLDivElement>(null);\n    const needsHoopRef = useRef<HTMLDivElement>(null);\n    const wantsHoopRef = useRef<HTMLDivElement>(null);\n    const itemContainerRef = useRef<HTMLDivElement>(null);\n    \n    const currentItem = items[currentItemIndex];\n\n    useEffect(() => {\n        let animationFrameId: number;\n        const moveHoops = () => {\n            if (gameAreaRef.current && !gameWon) {\n                const gameWidth = gameAreaRef.current.offsetWidth;\n                const hoopWidth = 192; // w-48\n\n                setHoopPositions(prev => {\n                    let newNeedsX = prev.needs.x + prev.needs.dir * prev.needs.speed;\n                    let newNeedsDir = prev.needs.dir;\n                    if (newNeedsX <= 0 || newNeedsX >= gameWidth - hoopWidth) {\n                        newNeedsDir *= -1;\n                        newNeedsX = prev.needs.x + newNeedsDir * prev.needs.speed;\n                    }\n\n                    let newWantsX = prev.wants.x + prev.wants.dir * prev.wants.speed;\n                    let newWantsDir = prev.wants.dir;\n                    if (newWantsX <= 0 || newWantsX >= gameWidth - hoopWidth) {\n                        newWantsDir *= -1;\n                        newWantsX = prev.wants.x + newWantsDir * prev.wants.speed;\n                    }\n\n                    return {\n                        needs: { ...prev.needs, x: newNeedsX, dir: newNeedsDir },\n                        wants: { ...prev.wants, x: newWantsX, dir: newWantsDir }\n                    };\n                });\n            }\n            animationFrameId = requestAnimationFrame(moveHoops);\n        };\n        animationFrameId = requestAnimationFrame(moveHoops);\n        return () => cancelAnimationFrame(animationFrameId);\n    }, [gameWon]);\n\n    const handleHoopClick = (targetCategory: Category, hoopRef: React.RefObject<HTMLDivElement>) => {\n        if (animation || !currentItem || gameWon || !hoopRef.current || !gameAreaRef.current || !itemContainerRef.current) return;\n\n        const gameAreaRect = gameAreaRef.current.getBoundingClientRect();\n        const hoopRect = hoopRef.current.getBoundingClientRect();\n        const itemRect = itemContainerRef.current.getBoundingClientRect();\n\n        const itemInitialX = itemRect.left - gameAreaRect.left + itemRect.width / 2;\n        const itemInitialY = itemRect.top - gameAreaRect.top + itemRect.height / 2;\n\n        const targetX = (hoopRect.left - gameAreaRect.left) + hoopRect.width / 2;\n        const targetY = (hoopRect.top - gameAreaRect.top) + 70;\n\n        setAnimation({ \n            active: true, \n            targetX: targetX - itemInitialX, \n            targetY: targetY - itemInitialY,\n            rotation: Math.random() > 0.5 ? 360 : -360\n        });\n\n        const isCorrect = currentItem.category === targetCategory;\n        const newScore = isCorrect ? score + 1 : Math.max(0, score - 1);\n        setScore(newScore);\n        \n        setFeedback({ icon: isCorrect ? '✅' : '❌', position: { x: targetX, y: targetY - 50 } });\n\n        setTimeout(() => {\n            if (newScore >= GOAL) {\n                setGameWon(true);\n                onComplete();\n            } else {\n                const newIndex = currentItemIndex + 1;\n                // If we reach the end of the list, reshuffle and start from the beginning\n                if (newIndex >= items.length) {\n                    setItems(prevItems => [...prevItems].sort(() => Math.random() - 0.5));\n                    setCurrentItemIndex(0);\n                } else {\n                    setCurrentItemIndex(newIndex);\n                }\n            }\n            setFeedback(null);\n            setAnimation(null);\n        }, 800);\n    };\n    \n    const itemStyle: React.CSSProperties = animation ? {\n        transition: 'all 0.8s cubic-bezier(0.4, 0, 0.6, 1)',\n        transform: `translate(${animation.targetX}px, ${animation.targetY}px) scale(0.2) rotate(${animation.rotation}deg)`,\n        opacity: 0,\n    } : {\n        transition: 'opacity 0.3s',\n        transform: 'translate(0,0) scale(1) rotate(0deg)',\n        opacity: 1,\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <h3 className=\"text-[2.75rem] font-bold text-brand-teal mb-4\">קליעה למטרה: צורך או רצון?</h3>\n                \n                <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-4xl mx-auto shadow-inner border border-white/50\">\n                    <h4 className=\"text-[2rem] font-bold mb-4 text-brand-dark-blue\">מה ההבדל?</h4>\n                    <div className=\"flex flex-col md:flex-row justify-center items-stretch gap-8 text-[1.65rem]\">\n                        <div className=\"text-center p-6 bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border-b-8 border-gray-200/50 transform transition-transform hover:scale-105 hover:-rotate-1 flex-1\">\n                            <span className=\"text-7xl\">🏠</span>\n                            <p className=\"font-bold text-brand-light-blue text-[2rem]\">צורך</p>\n                            <p>משהו שאנחנו חייבים כדי לחיות, כמו אוכל, מים ובית.</p>\n                        </div>\n                        <div className=\"text-center p-6 bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border-b-8 border-gray-200/50 transform transition-transform hover:scale-105 hover:rotate-1 flex-1\">\n                            <span className=\"text-7xl\">🎁</span>\n                            <p className=\"font-bold text-brand-magenta text-[2rem]\">רצון</p>\n                            <p>משהו שכיף לנו שיש, אבל אנחנו יכולים להסתדר גם בלעדיו, כמו צעצוע או ממתק.</p>\n                        </div>\n                    </div>\n                     <div className=\"mt-6 bg-yellow-100/70 p-4 rounded-2xl border-2 border-yellow-300\">\n                        <p className=\"text-yellow-900 font-bold text-2xl\">💡 חשוב לזכור: קודם כל דואגים למה שצריכים. את מה שרוצים קונים רק אם נשאר מספיק כסף!</p>\n                    </div>\n                </div>\n\n                <div className=\"bg-white/50 p-4 rounded-xl shadow-inner mb-6\">\n                    <div className=\"flex justify-between items-center mb-2 text-3xl font-bold\">\n                        <p>התקדמות ליעד</p>\n                        <p>{score} / {GOAL}</p>\n                    </div>\n                    <div className=\"w-full bg-gray-200 rounded-full h-6 border-2 border-white/50 shadow-inner\">\n                        <div \n                            className=\"bg-gradient-to-r from-brand-teal to-brand-light-blue h-full rounded-full transition-all duration-500 text-white flex items-center justify-end pr-2 font-bold\"\n                            style={{ width: `${Math.min(100, (score / GOAL) * 100)}%` }}\n                        >\n                            {score > 0 && `${Math.round((score / GOAL) * 100)}%`}\n                        </div>\n                    </div>\n                </div>\n\n                <div ref={gameAreaRef} className=\"relative p-4 bg-blue-100/30 rounded-2xl h-[650px] overflow-hidden shadow-inner\">\n                    {/* Item to Shoot */}\n                    <div ref={itemContainerRef} className=\"absolute w-full flex justify-center pointer-events-none\" style={{ top: '15%' }}>\n                         {currentItem && !gameWon && (\n                            <div style={itemStyle} className={`text-center p-4 bg-white/90 rounded-2xl shadow-2xl border-4 border-white`}>\n                                <span className=\"text-8xl drop-shadow-lg\">{currentItem.icon}</span>\n                                <p className=\"font-bold text-3xl\">{currentItem.name}</p>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Needs Target */}\n                    <div\n                        ref={needsHoopRef}\n                        onClick={() => handleHoopClick('צורך', needsHoopRef)}\n                        className=\"absolute bottom-4 cursor-pointer group\"\n                        style={{ left: `${hoopPositions.needs.x}px` }}\n                    >\n                        <BasketballHoop color=\"light-blue\" />\n                        <h4 className=\"text-5xl font-bold text-brand-light-blue mt-2 text-center\">צורך</h4>\n                    </div>\n\n                    {/* Wants Target */}\n                    <div\n                        ref={wantsHoopRef}\n                        onClick={() => handleHoopClick('רצון', wantsHoopRef)}\n                        className=\"absolute bottom-4 cursor-pointer group\"\n                        style={{ left: `${hoopPositions.wants.x}px` }}\n                    >\n                        <BasketballHoop color=\"magenta\" />\n                        <h4 className=\"text-5xl font-bold text-brand-magenta mt-2 text-center\">רצון</h4>\n                    </div>\n\n                    {feedback && (\n                        <div className=\"absolute text-8xl animate-ping pointer-events-none\" style={{ left: feedback.position.x, top: feedback.position.y }}>\n                            {feedback.icon}\n                        </div>\n                    )}\n                </div>\n                {gameWon && (\n                    <p className=\"mt-8 text-4xl font-bold text-green-600 animate-bounce\">כל הכבוד! השגתם את היעד!</p>\n                )}\n                <div className=\"mt-8 bg-purple-100/70 p-4 rounded-2xl border-2 border-purple-300 max-w-4xl mx-auto\">\n                    <p className=\"text-purple-900 font-semibold text-2xl\">\n                       <span className=\"font-bold\">🧐 למחשבה:</span> ההבדל בין 'צורך' ל'רצון' הוא לא תמיד חד משמעי. לפעמים, מה ש'רצון' עבור אדם אחד הוא 'צורך' עבור אחר (למשל, מחשב לעבודה). המטרה היא ללמוד לחשוב על ההבדל לפני כל קנייה.\n                    </p>\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default NeedsVsWantsModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst GOAL_AMOUNT = 20;\nconst GAME_WIDTH = 700;\nconst SQUIRREL_WIDTH = 80;\n\nconst Squirrel: React.FC = () => (\n    <div className=\"relative w-20 h-20\">\n        {/* Tail */}\n        <div className=\"absolute bottom-8 right-0 w-12 h-16 bg-gradient-to-br from-[#a16207] to-[#854d0e] rounded-t-full rounded-br-full rounded-bl-sm transform -rotate-45 origin-bottom-right shadow-inner\"></div>\n        {/* Body */}\n        <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-12 h-14 bg-gradient-to-b from-[#ca8a04] to-[#a16207] rounded-t-full rounded-b-lg\">\n            <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-8 h-8 bg-[#fef3c7] rounded-t-full\"></div>\n        </div>\n        {/* Head */}\n        <div className=\"absolute bottom-12 left-1/2 -translate-x-1/2 w-10 h-10 bg-[#ca8a04] rounded-full\"></div>\n        {/* Ears */}\n        <div className=\"absolute bottom-[80px] left-[18px] w-4 h-5 bg-[#854d0e] rounded-t-full transform -rotate-12\">\n             <div className=\"w-2 h-3 bg-[#fef3c7]/50 rounded-t-full absolute top-1 left-1\"></div>\n        </div>\n        <div className=\"absolute bottom-[80px] right-[18px] w-4 h-5 bg-[#854d0e] rounded-t-full transform rotate-12\">\n             <div className=\"w-2 h-3 bg-[#fef3c7]/50 rounded-t-full absolute top-1 left-1\"></div>\n        </div>\n        {/* Eyes & Nose */}\n        <div className=\"absolute top-[-2px] left-1 w-3 h-3 bg-white rounded-full border border-black/50\"><div className=\"w-1 h-1 bg-black rounded-full absolute top-1 left-1\"></div></div>\n        <div className=\"absolute top-[-2px] right-1 w-3 h-3 bg-white rounded-full border border-black/50\"><div className=\"w-1 h-1 bg-black rounded-full absolute top-1 right-1\"></div></div>\n        <div className=\"absolute top-[10px] left-1/2 -translate-x-1/2 w-2 h-1 bg-black rounded-full\"></div>\n    </div>\n);\n\nconst Acorn: React.FC = () => (\n    <div className=\"relative w-8 h-10\">\n      <div className=\"w-full h-3/4 bg-yellow-600 rounded-b-full\"></div>\n      <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-10 h-4 bg-yellow-800 rounded-t-md\"></div>\n      <div className=\"absolute top-[-4px] left-1/2 -translate-x-1/2 w-1 h-2 bg-yellow-900\"></div>\n    </div>\n);\n\nconst Stone: React.FC = () => (\n    <div className=\"text-4xl\">🪨</div>\n);\n\nconst AcornSack: React.FC<{ count: number; goal: number }> = ({ count, goal }) => {\n  const fillPercentage = Math.min(count, goal) / goal;\n\n  return (\n    <div className=\"flex flex-col items-center gap-4 mt-8 md:mt-0\">\n      <div className=\"relative w-48 h-56 bg-amber-800 rounded-b-full rounded-t-xl shadow-lg border-4 border-amber-900\">\n        {/* Rope tie */}\n        <div className=\"absolute top-8 left-0 right-0 h-4 bg-amber-900\"></div>\n        \n        {/* Acorns fill */}\n        <div className=\"absolute bottom-0 left-0 right-0 bg-yellow-600 rounded-b-full transition-all duration-300 ease-out\" style={{ height: `${fillPercentage * 100}%` }}></div>\n        \n        {/* Acorn Icon on top */}\n        <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-20\">\n            <Acorn />\n        </div>\n\n        <p className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl font-bold text-white\" style={{textShadow: '2px 2px 4px rgba(0,0,0,0.5)'}}>\n            {count}\n        </p>\n      </div>\n      <p className=\"text-3xl font-bold mt-2 text-yellow-800\">החיסכון</p>\n    </div>\n  );\n};\n\n\nconst SavingsAdventureModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [gameState, setGameState] = useState<'intro' | 'playing' | 'gameOver'>('intro');\n    const [savedCoins, setSavedCoins] = useState(0);\n    const [message, setMessage] = useState('');\n    \n    const [fallingObject, setFallingObject] = useState<{ x: number, y: number, type: 'acorn' | 'stone' } | null>(null);\n    const [squirrelX, setSquirrelX] = useState(GAME_WIDTH / 2 - SQUIRREL_WIDTH / 2);\n    const [highScore, setHighScore] = useState(0);\n    const [goalMessageShown, setGoalMessageShown] = useState(false);\n    const [animations, setAnimations] = useState<{id: number, x: number, y: number}[]>([]);\n    \n    const animationFrameId = useRef<number>();\n\n    useEffect(() => {\n        const storedHighScore = localStorage.getItem('savingsAdventureHighScore');\n        if (storedHighScore) {\n            setHighScore(parseInt(storedHighScore, 10));\n        }\n    }, []);\n\n    const spawnObject = () => {\n        const type = Math.random() < 0.2 ? 'stone' : 'acorn'; // 20% chance for a stone\n        setFallingObject({ \n            x: Math.random() * (GAME_WIDTH - 40), \n            y: -40,\n            type \n        });\n    };\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if(gameState !== 'playing') return;\n            setSquirrelX(prevX => {\n                if (e.key === 'ArrowLeft') return Math.max(0, prevX - 25);\n                if (e.key === 'ArrowRight') return Math.min(GAME_WIDTH - SQUIRREL_WIDTH, prevX + 25);\n                return prevX;\n            });\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [gameState]);\n\n    useEffect(() => {\n        if (gameState !== 'playing') return;\n\n        const gameLoop = () => {\n            if (fallingObject) {\n                 setFallingObject(prevObject => {\n                    if (!prevObject) return null;\n                    const newY = prevObject.y + 4;\n\n                    // Collision detection\n                    if (newY > 380 && newY < 420 && prevObject.x > squirrelX - 20 && prevObject.x < squirrelX + SQUIRREL_WIDTH - 20) {\n                        if (prevObject.type === 'acorn') {\n                            setSavedCoins(s => s + 1);\n                            const newId = Date.now();\n                            setAnimations(prev => [...prev, {id: newId, x: squirrelX, y: 380}]);\n                            setTimeout(() => setAnimations(prev => prev.filter(a => a.id !== newId)), 1000);\n                        } else { // It's a stone\n                            if (savedCoins === 0) {\n                                setGameState('gameOver');\n                                return null;\n                            }\n                            setSavedCoins(s => Math.max(0, s - 1));\n                            setMessage('אבן! היזהרו!');\n                        }\n                        spawnObject();\n                        return null; // Remove the object\n                    }\n\n                    if (newY > 450) { // Missed\n                        if (prevObject.type === 'acorn') {\n                           setMessage('אופס, פספוס! נסו שוב.');\n                        }\n                        spawnObject();\n                        return null;\n                    }\n                    \n                    return { ...prevObject, y: newY };\n                });\n            }\n            animationFrameId.current = requestAnimationFrame(gameLoop);\n        };\n\n        animationFrameId.current = requestAnimationFrame(gameLoop);\n        return () => cancelAnimationFrame(animationFrameId.current as number);\n    }, [gameState, squirrelX, fallingObject, savedCoins]);\n    \n    useEffect(() => {\n        if(savedCoins === GOAL_AMOUNT && !goalMessageShown) {\n            setMessage('כל הכבוד, הגעת ליעד, מוזמן להמשיך לשבור את השיא האישי');\n            onComplete();\n            setGoalMessageShown(true);\n        }\n    }, [savedCoins, onComplete, goalMessageShown]);\n\n    useEffect(() => {\n        if (gameState === 'gameOver') {\n            if (savedCoins > highScore) {\n                setHighScore(savedCoins);\n                localStorage.setItem('savingsAdventureHighScore', savedCoins.toString());\n            }\n        }\n    }, [gameState, savedCoins, highScore]);\n\n\n    const startGame = () => {\n        setSavedCoins(0);\n        setMessage('');\n        setGameState('playing');\n        setGoalMessageShown(false);\n        spawnObject();\n    }\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <style>{`\n                @keyframes float-up {\n                    from { transform: translateY(0); opacity: 1; }\n                    to { transform: translateY(-50px); opacity: 0; }\n                }\n                .animate-float-up {\n                    animation: float-up 1s ease-out forwards;\n                }\n            `}</style>\n            <div className=\"bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <div className=\"text-center\">\n                    <h3 className=\"text-[2.75rem] font-bold text-brand-teal mb-4\">הרפתקת החיסכון של סנפירי!</h3>\n                    <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-2xl mx-auto shadow-inner border border-white/50\">\n                        <h4 className=\"text-[2rem] font-bold mb-2 text-brand-dark-blue\">מהו חיסכון? 🤔</h4>\n                        <p className=\"text-[1.65rem] leading-relaxed\">חיסכון זה כמו לשמור חתיכת עוגה טעימה לאחרי ארוחת הערב. במקום לבזבז את כל הכסף שלנו מיד, אנחנו שמים קצת בצד כדי שנוכל לקנות משהו גדול וכיפי בעתיד! במשחק הזה, סנפירי הסנאי חוסך בלוטים לחורף. עזרו לו לאסוף כמה שיותר בלוטים!</p>\n                    </div>\n\n                    {gameState === 'intro' && (\n                         <button onClick={startGame} className=\"bg-brand-magenta text-white font-bold py-3 px-8 rounded-2xl text-2xl mb-6 shadow-lg hover:scale-105 transform transition-transform\">\n                            התחל משחק\n                        </button>\n                    )}\n                </div>\n                \n                {gameState !== 'intro' && (\n                    <div className=\"flex flex-col md:flex-row items-center justify-center gap-8 mt-6\">\n                        <div className=\"w-full md:w-auto\">\n                            <AcornSack count={savedCoins} goal={GOAL_AMOUNT} />\n                        </div>\n                        <div className=\"flex-grow flex flex-col items-center\">\n                             <div className=\"bg-white/50 p-4 rounded-xl shadow-inner mb-6 w-full max-w-[${GAME_WIDTH}px]\">\n                                <p className=\"text-2xl text-brand-dark-blue/90 mb-2\">\n                                    הזיזו את סנפירי עם החצים, תפסו בלוטים והיזהרו מהאבנים!\n                                </p>\n                                <div className=\"w-full max-w-sm mx-auto bg-yellow-800/20 p-2 rounded-full flex items-center gap-2\">\n                                    <div className=\"text-2xl\">🌳</div>\n                                    <div className=\"w-full bg-gray-200 rounded-full h-6\">\n                                        <div className=\"bg-gradient-to-r from-yellow-500 to-yellow-700 h-6 rounded-full transition-all duration-500\" style={{width: `${Math.min(100, (savedCoins/GOAL_AMOUNT)*100)}%`}}></div>\n                                    </div>\n                                    <div className=\"text-2xl\">🏠</div>\n                                </div>\n                                <p className=\"text-3xl font-bold mt-2\">בלוטים בסל: {savedCoins}</p>\n                            </div>\n\n                            <div className=\"relative w-full max-w-[700px] h-[65vw] min-h-[320px] max-h-[450px] bg-sky-300 mx-auto rounded-3xl border-4 border-brand-dark-blue overflow-hidden cursor-pointer shadow-2xl\">\n                                 <div className=\"absolute inset-0 bg-gradient-to-b from-sky-400 to-green-300\"></div>\n                                \n                                {/* Falling Object */}\n                                {gameState === 'playing' && fallingObject && (\n                                    <div className=\"absolute\" style={{ left: fallingObject.x, top: fallingObject.y }}>\n                                        {fallingObject.type === 'acorn' ? <Acorn /> : <Stone />}\n                                    </div>\n                                )}\n                                \n                                {/* Squirrel */}\n                                <div className=\"absolute bottom-6 transition-transform duration-100\" style={{ left: squirrelX, width: `${SQUIRREL_WIDTH}px` }}>\n                                   <Squirrel />\n                                </div>\n\n                                {/* Animations */}\n                                {animations.map(anim => (\n                                    <div key={anim.id} className=\"absolute text-3xl font-bold text-yellow-500 animate-float-up\" style={{left: anim.x + 20, top: anim.y, textShadow: '1px 1px 2px black'}}>\n                                        +1\n                                    </div>\n                                ))}\n\n                                {/* Ground */}\n                                <div className=\"absolute bottom-0 w-full h-10 bg-green-600 border-t-4 border-green-700\"></div>\n                                \n                                {gameState === 'gameOver' && (\n                                    <div className=\"absolute inset-0 bg-black/70 flex flex-col items-center justify-center text-white p-4 animate-fade-in\">\n                                        <span className=\"text-8xl\">☠️</span>\n                                        <p className=\"text-5xl font-bold\">המשחק נגמר!</p>\n                                        <p className=\"text-3xl mt-4\">הניקוד שלך: {savedCoins}</p>\n                                        <p className=\"text-2xl mt-2\">השיא שלך: {highScore}</p>\n                                        <p className=\"text-lg mt-4 bg-yellow-500/30 p-2 rounded-md\">נסו לשבור את השיא ושתפו עם חברים!</p>\n                                        <button onClick={startGame} className=\"mt-6 bg-brand-teal py-3 px-6 rounded-xl text-xl font-bold\">שחק שוב</button>\n                                    </div>\n                                )}\n                            </div>\n                            {gameState === 'playing' && <p className=\"mt-6 text-2xl font-bold text-brand-magenta h-8\">{message}</p>}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default SavingsAdventureModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ninterface Item {\n    id: number;\n    name: string;\n    price: number;\n    icon: string;\n}\n\nconst storeItems: Item[] = [\n    { id: 1, name: 'חלב', price: 7, icon: '🥛' },\n    { id: 6, name: 'שוקולד', price: 6, icon: '🍫' },\n    { id: 2, name: 'לחם', price: 8, icon: '🍞' },\n    { id: 7, name: 'מיץ', price: 9, icon: '🧃' },\n    { id: 3, name: 'ביצים', price: 13, icon: '🥚' },\n    { id: 5, name: 'תפוח', price: 2, icon: '🍎' },\n    { id: 8, name: 'גלידה', price: 25, icon: '🍦' },\n    { id: 4, name: 'גבינה', price: 15, icon: '🧀' },\n    { id: 9, name: 'בננה', price: 3, icon: '🍌' },\n    { id: 10, name: 'עוגה', price: 20, icon: '🍰' },\n    { id: 11, name: 'מים', price: 4, icon: '💧' },\n    { id: 12, name: 'יוגורט', price: 5, icon: '🍦' },\n];\n\nconst shoppingList = ['חלב', 'לחם', 'ביצים', 'גבינה', 'תפוח'];\nconst INITIAL_BUDGET = 60;\n\nconst AnimatedWallet: React.FC<{ budget: number; initialBudget: number }> = ({ budget, initialBudget }) => {\n    const fillPercentage = Math.max(0, (budget / initialBudget) * 100);\n    // Scale from 0.9 (thin) to 1.0 (full) on the Y axis to simulate thickness\n    const thicknessScale = 0.9 + (fillPercentage / 100) * 0.1;\n\n    return (\n        <div className=\"bg-white/60 p-6 rounded-2xl shadow-lg border border-white/50 flex flex-col items-center h-full\">\n            <h4 className=\"text-3xl font-bold text-yellow-800\">הארנק</h4>\n            <div className=\"relative w-40 h-28 my-4\" style={{ perspective: '800px' }}>\n                {/* Wallet Body */}\n                <div \n                    className=\"relative w-full h-full bg-amber-800 rounded-lg shadow-inner border-2 border-amber-900 origin-bottom transition-transform duration-500 ease-in-out\"\n                    style={{ transform: `scaleY(${thicknessScale})` }}\n                >\n                    {/* Money inside that slides up */}\n                    <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 w-[95%] h-24 transition-transform duration-500 ease-out\"\n                         style={{ transform: `translateY(${100 - fillPercentage}%)` }}>\n                        {/* Coins */}\n                        <div className={`absolute bottom-2 left-2 w-8 h-8 rounded-full bg-yellow-500 border-2 border-yellow-700 transition-opacity duration-300 ${fillPercentage < 20 ? 'opacity-0' : 'opacity-100'}`}></div>\n                        <div className={`absolute bottom-2 left-8 w-6 h-6 rounded-full bg-gray-400 border-2 border-gray-600 transition-opacity duration-300 ${fillPercentage < 40 ? 'opacity-0' : 'opacity-100'}`}></div>\n                        \n                        {/* Bills */}\n                        <div className={`absolute bottom-0 right-0 w-24 h-20 bg-green-500 rounded-t-md border-2 border-green-700 transition-opacity duration-300 ${fillPercentage < 10 ? 'opacity-0' : 'opacity-100'}`}></div>\n                        <div className={`absolute bottom-0 right-2 w-24 h-20 bg-green-600 rounded-t-md border-2 border-green-800 transform -rotate-3 transition-opacity duration-300 ${fillPercentage < 60 ? 'opacity-0' : 'opacity-100'}`}></div>\n                        <div className={`absolute bottom-0 right-1 w-24 h-20 bg-green-500 rounded-t-md border-2 border-green-700 transform rotate-2 transition-opacity duration-300 ${fillPercentage < 80 ? 'opacity-0' : 'opacity-100'}`}></div>\n                    </div>\n                    {/* Wallet opening slit */}\n                    <div className=\"absolute top-0 left-0 right-0 h-2 bg-amber-900\"></div>\n                </div>\n            </div>\n            <p className=\"text-5xl font-bold text-green-600 drop-shadow-md\">{budget.toFixed(0)} ₪</p>\n        </div>\n    );\n};\n\n\nconst ShoppingCart: React.FC<{ items: Item[] }> = ({ items }) => {\n    return (\n        <div className=\"bg-white/60 p-6 rounded-2xl shadow-lg border border-white/50 h-full flex flex-col\">\n            <h4 className=\"text-3xl font-bold text-yellow-800 mb-4\">העגלה</h4>\n            <div className=\"relative w-full flex-grow\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full text-gray-500 drop-shadow-lg\">\n                    <path d=\"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"/>\n                </svg>\n                <div className=\"absolute top-[25%] left-[15%] right-[15%] h-[40%] grid grid-cols-4 gap-1 items-start content-start overflow-hidden\">\n                    {items.length > 0 ? items.map((item, index) => (\n                        <div key={`${item.id}-${index}`} className=\"relative flex justify-center items-center animate-fade-in\" style={{ animationDelay: `${index * 50}ms` }}>\n                            <span className=\"text-3xl drop-shadow-md\">{item.icon}</span>\n                        </div>\n                    )) : (\n                       <div className=\"col-span-4 text-center text-gray-500 text-lg pt-4\">העגלה ריקה</div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst MagicStoreModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [cart, setCart] = useState<Item[]>([]);\n    const [budget, setBudget] = useState(INITIAL_BUDGET);\n    const [message, setMessage] = useState('לחצו על \"התחל קניות\" והוסיפו את המוצרים מהרשימה!');\n    const [isFinished, setIsFinished] = useState(false);\n    const [gameStarted, setGameStarted] = useState(false);\n\n    const addToCart = (item: Item) => {\n        if (isFinished || !gameStarted || cart.some(cartItem => cartItem.id === item.id)) return;\n        \n        if (budget - item.price >= 0) {\n            setBudget(prev => prev - item.price);\n            setCart(prev => [...prev, item]);\n            setMessage(`${item.name} בסל!`);\n        } else {\n            setMessage('אוי! אין מספיק כסף בארנק!');\n        }\n    };\n    \n    const finishShopping = () => {\n        const hasAllItems = shoppingList.every(itemName => cart.some(cartItem => cartItem.name === itemName));\n        if (hasAllItems) {\n            setMessage(`כל הכבוד! קניתם הכל ונשאר לכם ${budget.toFixed(2)} שקלים!`);\n            onComplete();\n        } else {\n            const missingItems = shoppingList.filter(itemName => !cart.some(cartItem => cartItem.name === itemName));\n            setMessage(`אופס, שכחתם: ${missingItems.join(', ')}. נסו שוב!`);\n        }\n        setIsFinished(true);\n        setGameStarted(false);\n    };\n    \n    const restart = () => {\n        setCart([]);\n        setBudget(INITIAL_BUDGET);\n        setMessage('לחצו על \"התחל קניות\" והוסיפו את המוצרים מהרשימה!');\n        setIsFinished(false);\n        setGameStarted(false);\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <style>{`\n                .conveyor-belt.running {\n                    position: absolute;\n                    animation: conveyor 20s linear infinite;\n                }\n                @keyframes conveyor {\n                    0% { transform: translateX(0%); }\n                    100% { transform: translateX(-50%); }\n                }\n            `}</style>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">מסוע הקניות!</h3>\n                <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-3xl mx-auto shadow-inner border border-white/50\">\n                     <h4 className=\"text-3xl font-bold mb-2 text-brand-dark-blue\">איך קונים חכם? 🛒</h4>\n                     <p className=\"text-[1.65rem] leading-relaxed\">כדי לא לבזבז יותר מדי כסף, חשוב להגיע לחנות עם שני דברים: <strong>תקציב</strong> (כמה כסף מותר לנו להוציא) ו<strong>רשימת קניות</strong>. ככה נקנה רק מה שאנחנו צריכים ולא נתפתה!</p>\n                </div>\n                <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n                    תפסו את המוצרים מהרשימה כשהם עוברים על המסוע.\n                </p>\n\n                <div className=\"flex flex-col gap-6\">\n                    {/* Conveyor */}\n                    <div className=\"bg-white/40 p-6 rounded-2xl shadow-lg border border-white/50\">\n                         <h4 className=\"text-3xl font-bold mb-4\">המסוע</h4>\n                         <div className=\"relative h-48 bg-gray-700 rounded-lg p-2 flex items-center overflow-hidden border-4 border-gray-800 shadow-inner\">\n                             <div className=\"absolute inset-0 bg-repeat-x opacity-20\" style={{backgroundImage: 'url(https://www.transparenttextures.com/patterns/metal-grip.png)'}}></div>\n                             <div className={`conveyor-belt flex items-center gap-8 ${gameStarted ? 'running' : ''}`}>\n                                {[...storeItems, ...storeItems].map((item, index) => {\n                                     const inCart = cart.some(c => c.id === item.id);\n                                     return (\n                                         <div key={`${item.id}-${index}`} onClick={() => addToCart(item)} \n                                         className={`text-center p-4 rounded-2xl transition-all duration-300 bg-white/90 shadow-lg flex-shrink-0 w-32 h-36 flex flex-col justify-center items-center transform \n                                         ${inCart || !gameStarted ? 'opacity-40' : 'cursor-pointer hover:scale-110 hover:-translate-y-2'}`}>\n                                            <span className=\"text-6xl drop-shadow-md\">{item.icon}</span>\n                                            <p className=\"font-bold text-xl\">{item.name}</p>\n                                            <p className=\"font-bold text-lg text-brand-teal\">{item.price} ₪</p>\n                                        </div>\n                                     );\n                                })}\n                             </div>\n                         </div>\n                    </div>\n                    \n                    {/* Wallet, Cart & List Section */}\n                     <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 items-stretch\">\n                        <div className=\"bg-white/60 p-6 rounded-2xl shadow-lg border border-white/50\">\n                            <h4 className=\"text-3xl font-bold text-yellow-800\">הרשימה</h4>\n                            <ul className=\"text-2xl mt-2 space-y-2 text-left\">\n                                {shoppingList.map(item => (\n                                    <li key={item} className={`transition-colors flex items-center gap-3 ${cart.some(c => c.name === item) ? 'line-through text-gray-500' : ''}`}>\n                                        <div className=\"w-7 h-7 border-2 border-gray-400 rounded-md flex items-center justify-center flex-shrink-0\">\n                                            {cart.some(c => c.name === item) && <span className=\"text-green-600 font-bold\">✔</span>}\n                                        </div>\n                                        <span>{item}</span>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                        <AnimatedWallet budget={budget} initialBudget={INITIAL_BUDGET} />\n                        <ShoppingCart items={cart} />\n                    </div>\n\n                    {/* Buttons & Message */}\n                     <div className=\"mt-4\">\n                        <div className=\"flex justify-center gap-4\">\n                            {isFinished ? (\n                                <button onClick={restart} className=\"bg-yellow-500 text-white font-bold py-3 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">קנייה חדשה</button>\n                            ) : !gameStarted ? (\n                                <button onClick={() => setGameStarted(true)} className=\"bg-brand-magenta text-white font-bold py-3 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">התחל קניות</button>\n                            ) : (\n                                <button onClick={finishShopping} className=\"bg-brand-teal text-white font-bold py-3 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">סיימתי, לקופה!</button>\n                            )}\n                        </div>\n                        {message && <p className=\"mt-4 text-2xl font-bold text-brand-magenta bg-white/60 p-2 rounded-lg\">{message}</p>}\n                    </div>\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default MagicStoreModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ntype Player = 'X' | 'O';\nconst questions = [\n    { q: 'קניית צעצוע חדש היא...', a: 'בזבוזים' },\n    { q: 'לשים כסף בצד לטיול גדול זה...', a: 'חיסכון' },\n    { q: 'לתת כסף למישהו שצריך עזרה זה...', a: 'נתינה' },\n    { q: 'לקנות ממתקים זה...', a: 'בזבוזים' },\n    { q: 'לשמור כסף לקנות מתנה לאמא זה...', a: 'נתינה' },\n    { q: 'לא לבזבז את כל דמי הכיס מיד זה...', a: 'חיסכון' },\n];\n\nconst JarBankModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [board, setBoard] = useState(Array(9).fill(null));\n    const [turn, setTurn] = useState<Player>('X');\n    const [winner, setWinner] = useState<Player | 'תיקו' | null>(null);\n    const [showQuestion, setShowQuestion] = useState<{ index: number; question: typeof questions[0] } | null>(null);\n\n    const checkWinner = (currentBoard: (Player | null)[]) => {\n        const lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n        for (let line of lines) {\n            const [a, b, c] = line;\n            if (currentBoard[a] && currentBoard[a] === currentBoard[b] && currentBoard[a] === currentBoard[c]) {\n                return currentBoard[a];\n            }\n        }\n        if (currentBoard.every(cell => cell)) return 'תיקו';\n        return null;\n    };\n    \n    const handleCellClick = (index: number) => {\n        if (board[index] || winner || turn !== 'X') return;\n        const randomQuestion = questions[Math.floor(Math.random() * questions.length)];\n        setShowQuestion({ index, question: randomQuestion });\n    };\n\n    const handleAnswer = (answer: string) => {\n        if (!showQuestion) return;\n        const { index, question } = showQuestion;\n\n        if (answer === question.a) {\n            const newBoard = [...board];\n            newBoard[index] = 'X';\n            setBoard(newBoard);\n            setTurn('O');\n            \n            const gameWinner = checkWinner(newBoard);\n            if(gameWinner) {\n                setWinner(gameWinner);\n                if(gameWinner === 'X' || gameWinner === 'תיקו') onComplete();\n                return;\n            }\n            setTimeout(() => computerMove(newBoard), 500);\n        }\n        setShowQuestion(null);\n    };\n\n    const computerMove = (currentBoard: (Player|null)[]) => {\n        const newBoard = [...currentBoard];\n        const emptyCells = newBoard.map((c, i) => (c === null ? i : null)).filter(i => i !== null);\n        if (emptyCells.length > 0) {\n            const move = emptyCells[Math.floor(Math.random() * emptyCells.length)] as number;\n            newBoard[move] = 'O';\n            setBoard(newBoard);\n            const gameWinner = checkWinner(newBoard);\n            if(gameWinner) {\n                setWinner(gameWinner);\n            } else {\n                setTurn('X');\n            }\n        }\n    };\n    \n    const resetGame = () => {\n        setBoard(Array(9).fill(null));\n        setTurn('X');\n        setWinner(null);\n        setShowQuestion(null);\n    }\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">איקס עיגול פיננסי!</h3>\n                <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-4xl mx-auto shadow-inner border border-white/50\">\n                    <h4 className=\"text-3xl font-bold mb-4 text-brand-dark-blue\">שיטת הצנצנות 🏺</h4>\n                    <p className=\"text-xl leading-relaxed mb-6\">דרך מצוינת ללמוד לנהל דמי כיס היא לחלק אותם ל-3 צנצנות דמיוניות:</p>\n                    <div className=\"flex flex-col md:flex-row justify-center items-stretch gap-6 text-xl\">\n                        <div className=\"flex-1 p-6 bg-white/70 rounded-2xl shadow-lg border border-red-300 transform hover:scale-105 transition-transform\">\n                            <p className=\"text-6xl\">💸</p>\n                            <p className=\"font-bold text-2xl text-red-500 mt-2\">בזבוזים</p>\n                            <p>לדברים כיפיים ומידיים</p>\n                        </div>\n                        <div className=\"flex-1 p-6 bg-white/70 rounded-2xl shadow-lg border border-green-300 transform hover:scale-105 transition-transform\">\n                            <p className=\"text-6xl\">🐷</p>\n                            <p className=\"font-bold text-2xl text-green-500 mt-2\">חיסכון</p>\n                            <p>למטרות גדולות בעתיד</p>\n                        </div>\n                        <div className=\"flex-1 p-6 bg-white/70 rounded-2xl shadow-lg border border-blue-300 transform hover:scale-105 transition-transform\">\n                             <p className=\"text-6xl\">💖</p>\n                            <p className=\"font-bold text-2xl text-blue-500 mt-2\">נתינה</p>\n                            <p>לעזרה לאחרים או מתנות</p>\n                        </div>\n                    </div>\n                </div>\n                <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n                    ענו נכון על השאלה כדי להניח 'איקס'. נסו לנצח את המחשב!\n                </p>\n\n                <div className=\"relative w-full max-w-md mx-auto bg-white/50 p-4 rounded-3xl shadow-2xl border border-white/50\">\n                    <div className=\"grid grid-cols-3 gap-3\">\n                        {board.map((cell, index) => (\n                            <div key={index} onClick={() => handleCellClick(index)} className=\"w-full aspect-square bg-white/80 rounded-2xl flex items-center justify-center text-7xl font-bold cursor-pointer hover:bg-white transition-colors border-4 border-brand-dark-blue/20 shadow-inner\">\n                                {cell === 'X' && <span className=\"text-brand-light-blue drop-shadow-lg\">X</span>}\n                                {cell === 'O' && <span className=\"text-brand-magenta drop-shadow-lg\">O</span>}\n                            </div>\n                        ))}\n                    </div>\n\n                    {showQuestion && (\n                        <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center rounded-3xl animate-fade-in z-10\">\n                            <div className=\"bg-white p-8 rounded-2xl text-brand-dark-blue max-w-sm w-11/12 shadow-2xl\">\n                                <h4 className=\"font-bold text-2xl mb-4\">{showQuestion.question.q}</h4>\n                                <div className=\"flex flex-col gap-3\">\n                                    {['בזבוזים', 'חיסכון', 'נתינה'].map(opt => (\n                                        <button key={opt} onClick={() => handleAnswer(opt)} className=\"p-3 bg-gray-200 hover:bg-gray-300 rounded-lg text-xl font-semibold transition-colors\">\n                                            {opt}\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {winner && (\n                         <div className=\"absolute inset-0 bg-black/80 flex flex-col items-center justify-center rounded-3xl text-white animate-fade-in z-10\">\n                             <p className=\"text-6xl font-bold animate-bounce drop-shadow-lg\">\n                                 {winner === 'X' && 'ניצחת!'}\n                                 {winner === 'O' && 'המחשב ניצח!'}\n                                 {winner === 'תיקו' && 'תיקו!'}\n                            </p>\n                             <button onClick={resetGame} className=\"mt-8 bg-brand-teal text-white py-3 px-6 rounded-2xl font-bold text-xl shadow-lg hover:scale-105 transform transition-transform\">שחק שוב</button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default JarBankModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst countries = [\n    { id: 'usa', name: 'ארצות הברית', currency: 'דולר', symbol: '$', fact: 'הידעתם? על שטר הדולר מסתתרת ינשוף קטן!', position: { top: '35%', left: '20%' }, flag: 'https://flagcdn.com/w160/us.png' },\n    { id: 'eu', name: 'אירופה', currency: 'אירו', symbol: '€', fact: 'על שטרי האירו מצוירים גשרים, אבל אף אחד מהם לא קיים באמת!', position: { top: '30%', left: '48%' }, flag: 'https://flagcdn.com/w160/eu.png' },\n    { id: 'uk', name: 'בריטניה', currency: 'פאונד', symbol: '£', fact: 'הפאונד הבריטי הוא המטבע העתיק בעולם שעדיין נמצא בשימוש!', position: { top: '25%', left: '42%' }, flag: 'https://flagcdn.com/w160/gb.png' },\n    { id: 'japan', name: 'יפן', currency: 'ין', symbol: '¥', fact: 'מטבע של ין יפני אחד כל כך קל שהוא יכול לצוף על המים!', position: { top: '35%', left: '80%' }, flag: 'https://flagcdn.com/w160/jp.png' },\n    { id: 'china', name: 'סין', currency: 'יואן', symbol: '¥', fact: 'בסין, נהוג לתת כסף במעטפות אדומות מיוחדות בחגים!', position: { top: '40%', left: '72%' }, flag: 'https://flagcdn.com/w160/cn.png' },\n    { id: 'india', name: 'הודו', currency: 'רופי', symbol: '₹', fact: 'על כל שטר רופי הודי, הסכום כתוב ב-17 שפות שונות!', position: { top: '55%', left: '65%' }, flag: 'https://flagcdn.com/w160/in.png' },\n    { id: 'australia', name: 'אוסטרליה', currency: 'דולר אוסטרלי', symbol: 'A$', fact: 'השטרות באוסטרליה עשויים מפלסטיק והם עמידים במים!', position: { top: '80%', left: '80%' }, flag: 'https://flagcdn.com/w160/au.png' },\n].sort(() => Math.random() - 0.5);\n\nconst WorldTourModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [matches, setMatches] = useState<string[]>([]);\n    const [message, setMessage] = useState('לחצו על הדגל הנכון עבור המטבע!');\n    const [fact, setFact] = useState<string | null>(null);\n\n    const currentCountry = countries.find(c => !matches.includes(c.id));\n\n    const handleCountryClick = (countryId: string) => {\n        if (!currentCountry || matches.includes(currentCountry.id)) return;\n\n        if (countryId === currentCountry.id) {\n            setMatches(prev => [...prev, countryId]);\n            setMessage('נהדר! התאמה נכונה!');\n            setFact(currentCountry.fact);\n            setTimeout(() => setFact(null), 4000);\n        } else {\n            setMessage('אופס, זו לא המדינה הנכונה. נסו שוב!');\n        }\n    };\n    \n    useEffect(() => {\n        if (matches.length === countries.length) {\n            setMessage('כל הכבוד! השלמתם את המסע העולמי!');\n            onComplete();\n        }\n    }, [matches, onComplete]);\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">מסביב לעולם עם כסף!</h3>\n                <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n                   לכל מדינה כסף משלה. לחצו על הדגל הנכון עבור המטבע שמופיע.\n                </p>\n\n                <div className=\"mb-8 bg-white/60 p-6 rounded-2xl inline-block shadow-lg border border-white/50\">\n                    <h4 className=\"text-3xl font-bold\">המטבע הנוכחי:</h4>\n                    {currentCountry ? (\n                        <div className=\"text-8xl font-bold text-brand-magenta flex items-center justify-center gap-4 drop-shadow-lg\">\n                            {currentCountry.symbol}\n                            <span className=\"text-5xl font-semibold text-brand-dark-blue/80\">({currentCountry.currency})</span>\n                        </div>\n                    ) : (\n                         <div className=\"text-5xl font-bold text-green-600 animate-bounce\">סיימתם! 🎉</div>\n                    )}\n                </div>\n\n\n                <div className=\"relative w-full max-w-4xl mx-auto aspect-[2/1] bg-blue-300 rounded-2xl overflow-hidden border-4 border-brand-light-blue shadow-2xl\">\n                    <img src=\"https://storage.googleapis.com/smartkis-ai-assets/simplified-world-map.svg\" alt=\"מפת העולם\" className=\"w-full h-full object-cover opacity-70\" />\n                    {countries.map(country => (\n                        <button\n                            key={country.id}\n                            onClick={() => handleCountryClick(country.id)}\n                            className=\"absolute transform -translate-x-1/2 -translate-y-1/2 p-1 rounded-full transition-all duration-300 bg-white/50 shadow-lg\"\n                            style={country.position}\n                            disabled={matches.includes(country.id)}\n                        >\n                            {matches.includes(country.id) ? (\n                                <div className=\"text-center bg-green-500 text-white w-24 h-24 flex flex-col items-center justify-center rounded-full shadow-lg animate-fade-in transform scale-110\">\n                                    <div className=\"text-4xl font-bold\">{country.symbol}</div>\n                                    <div className=\"font-bold text-md\">{country.name}</div>\n                                </div>\n                            ) : (\n                                <img src={country.flag} alt={country.name} className=\"w-16 h-16 rounded-full object-cover border-4 border-white transition-transform transform hover:scale-125 hover:rotate-6\"/>\n                            )}\n                        </button>\n                    ))}\n                    {fact && (\n                         <div className=\"absolute top-4 right-4 bg-yellow-200 p-4 rounded-xl shadow-lg max-w-xs text-yellow-900 font-semibold animate-fade-in border-2 border-yellow-300 z-10\">\n                            💡 {fact}\n                        </div>\n                    )}\n                </div>\n\n                {message && <p className=\"mt-8 text-3xl font-bold text-brand-teal\">{message}</p>}\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default WorldTourModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst BOARD_SIZE = 20;\nconst INITIAL_SPEED = 200;\n\nconst tricks = [\n    { id: 1, title: 'הצעצוע נראה גדול יותר!', text: 'בפרסומת משתמשים בזוויות צילום מיוחדות כדי שהצעצוע ייראה ענק, אבל במציאות הוא קטן יותר.' },\n    { id: 2, title: 'סוללות לא כלולות!', text: 'הצעצוע זז ומאיר בפרסומת, אבל שוכחים להגיד שצריך לקנות לו סוללות בנפרד.' },\n    { id: 3, title: 'הילדים תמיד שמחים מדי!', text: 'בפרסומות מראים ילדים שצוחקים וקופצים משמחה, כדי שנחשוב שהצעצוע הזה הוא הדבר הכי כיף בעולם.' },\n    { id: 4, title: 'נמכר בנפרד!', text: 'לפעמים בפרסומת מראים הרבה אביזרים ובובות, אבל באריזה מקבלים רק את הבובה הראשית. את השאר צריך לקנות בנפרד.' },\n];\n\nconst AdSecretsModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [snake, setSnake] = useState([{ x: 10, y: 10 }, { x: 10, y: 11 }, { x: 10, y: 12 }, { x: 10, y: 13 }]);\n    const [food, setFood] = useState({ x: 15, y: 15 });\n    const [direction, setDirection] = useState({ x: 0, y: -1 });\n    const [score, setScore] = useState(0);\n    const [gameState, setGameState] = useState<'intro' | 'playing' | 'paused' | 'gameOver'>('intro');\n    const [special, setSpecial] = useState<{ x: number, y: number } | null>(null);\n    const [activeModal, setActiveModal] = useState<(typeof tricks[0]) | null>(null);\n    const [foundTricks, setFoundTricks] = useState<number[]>([]);\n\n    const directionRef = useRef(direction);\n    directionRef.current = direction;\n\n    const generatePosition = (currentSnake: {x:number, y:number}[]) => {\n        let newPos;\n        do {\n            newPos = { x: Math.floor(Math.random() * BOARD_SIZE), y: Math.floor(Math.random() * BOARD_SIZE) };\n        } while (currentSnake.some(s => s.x === newPos.x && s.y === newPos.y));\n        return newPos;\n    };\n\n    useEffect(() => {\n        if (gameState !== 'playing') return;\n\n        const move = () => {\n            setSnake(prev => {\n                const newSnake = [...prev];\n                const head = { x: newSnake[0].x + directionRef.current.x, y: newSnake[0].y + directionRef.current.y };\n\n                if (head.x < 0) head.x = BOARD_SIZE - 1;\n                if (head.x >= BOARD_SIZE) head.x = 0;\n                if (head.y < 0) head.y = BOARD_SIZE - 1;\n                if (head.y >= BOARD_SIZE) head.y = 0;\n                \n                for (let i = 1; i < newSnake.length; i++) {\n                    if (head.x === newSnake[i].x && head.y === newSnake[i].y) {\n                        setGameState('gameOver');\n                        return prev;\n                    }\n                }\n\n                newSnake.unshift(head);\n                let ate = false;\n\n                if (head.x === food.x && head.y === food.y) {\n                    ate = true;\n                    const newScore = score + 1;\n                    setScore(newScore);\n                    setFood(generatePosition(newSnake));\n                    if (newScore % 5 === 0 && foundTricks.length < tricks.length) {\n                        setSpecial(generatePosition(newSnake));\n                    }\n                }\n\n                if (special && head.x === special.x && head.y === special.y) {\n                    ate = true;\n                    setSpecial(null);\n                    setGameState('paused');\n                    const trickToShow = tricks[foundTricks.length];\n                    setActiveModal(trickToShow);\n                    setFoundTricks(prev => [...prev, trickToShow.id]);\n                }\n\n                if (!ate) {\n                    newSnake.pop();\n                }\n                return newSnake;\n            });\n        };\n\n        const interval = setInterval(move, INITIAL_SPEED);\n        return () => clearInterval(interval);\n    }, [gameState, food, score, special, foundTricks.length]);\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) e.preventDefault();\n            const { x: dx, y: dy } = directionRef.current;\n            switch (e.key) {\n                case 'ArrowUp': if (dy === 0) setDirection({ x: 0, y: -1 }); break;\n                case 'ArrowDown': if (dy === 0) setDirection({ x: 0, y: 1 }); break;\n                case 'ArrowRight': if (dx === 0) setDirection({ x: -1, y: 0 }); break;\n                case 'ArrowLeft': if (dx === 0) setDirection({ x: 1, y: 0 }); break;\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, []);\n    \n     useEffect(() => {\n        if (foundTricks.length === tricks.length) {\n            onComplete();\n        }\n    }, [foundTricks, onComplete]);\n\n    const closeModal = () => {\n        setActiveModal(null);\n        setGameState('playing');\n    };\n\n    const restartGame = () => {\n        setSnake([{ x: 10, y: 10 }, { x: 10, y: 11 }, { x: 10, y: 12 }, { x: 10, y: 13 }]);\n        setFood({ x: 15, y: 15 });\n        setDirection({ x: 0, y: -1 });\n        setScore(0);\n        setGameState('playing');\n        setSpecial(null);\n        setActiveModal(null);\n        setFoundTricks([]);\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                 {gameState === 'intro' ? (\n                     <div className=\"p-8\">\n                        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">נחש פיננסי: סודות הפרסומות</h3>\n                        <p className=\"text-2xl mb-4 leading-relaxed\">\n                            פרסומות נמצאות בכל מקום: בטלוויזיה, בטלפון וברחוב.\n                            <br/>\n                            המטרה שלהן היא לגרום לנו לרצות לקנות דברים, לפעמים גם דברים שאנחנו לא באמת צריכים.\n                            <br/>\n                            הן משתמשות ב<strong>הרבה טריקים</strong> כדי לשכנע אותנו.\n                        </p>\n                         <div className=\"bg-white/50 p-4 rounded-xl shadow-inner my-6 max-w-2xl mx-auto\">\n                            <h4 className=\"font-bold text-2xl mb-2\">איך משחקים?</h4>\n                            <p className=\"text-2xl leading-relaxed\">\n                                אספו <strong>5 מטבעות 💰</strong> כדי לחשוף זכוכית מגדלת 🔍.\n                                <br />\n                                תפסו את <strong>זכוכית המגדלת</strong> כדי לגלות את הסוד!\n                            </p>\n                        </div>\n                        <button onClick={restartGame} className=\"bg-brand-magenta text-white font-bold py-3 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">\n                            התחל משחק\n                        </button>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"flex justify-around items-center font-bold text-3xl mb-4 bg-white/50 p-4 rounded-xl shadow-inner\">\n                            <span>ניקוד: {score}</span>\n                            <span>סודות שגולו: {foundTricks.length} / {tricks.length}</span>\n                        </div>\n                        <div className=\"relative w-full max-w-[500px] h-auto aspect-square bg-brand-dark-blue border-8 border-blue-900 rounded-3xl mx-auto grid shadow-2xl p-4\"\n                            style={{ gridTemplateColumns: `repeat(${BOARD_SIZE}, 1fr)` }}>\n                            \n                             <div className=\"absolute top-1 left-1/2 -translate-x-1/2 w-4 h-4 bg-red-500 rounded-full animate-pulse border-2 border-white\"></div>\n\n                            {Array.from({ length: BOARD_SIZE * BOARD_SIZE }).map((_, i) => {\n                                const x = i % BOARD_SIZE;\n                                const y = Math.floor(i / BOARD_SIZE);\n                                const isSnake = snake.some(s => s.x === x && s.y === y);\n                                const isHead = isSnake && snake[0].x === x && snake[0].y === y;\n                                const isFood = food.x === x && food.y === y;\n                                const isSpecial = special && special.x === x && special.y === y;\n                                return (\n                                    <div key={i} className={`w-full h-full flex items-center justify-center`}>\n                                        <div className={`w-[90%] h-[90%] rounded-sm transition-colors ${\n                                            isHead ? 'bg-brand-teal' : isSnake ? 'bg-brand-light-blue' : 'bg-transparent'\n                                        }`}>\n                                            {isFood && <span className=\"text-3xl\">💰</span>}\n                                            {isSpecial && <span className=\"text-3xl\">🔍</span>}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                            {gameState === 'gameOver' && <div className=\"absolute inset-0 bg-black/80 flex flex-col items-center justify-center rounded-2xl text-white\"><p className=\"text-5xl font-bold\">המשחק נגמר!</p><button onClick={restartGame} className=\"mt-6 bg-brand-teal py-3 px-6 rounded-xl text-xl font-bold\">שחק שוב</button></div>}\n                        </div>\n                        {foundTricks.length === tricks.length && <p className=\"mt-6 text-3xl font-bold text-green-600 animate-bounce\">כל הכבוד! גיליתם את כל הסודות!</p>}\n                    </>\n                 )}\n            </div>\n            {activeModal && (\n                <div className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4\">\n                    <div className=\"bg-gradient-to-br from-white to-gray-100 p-8 rounded-3xl max-w-md text-center animate-fade-in shadow-2xl border border-white/50\">\n                        <h4 className=\"text-4xl font-bold text-brand-teal mb-4\">{activeModal.title}</h4>\n                        <p className=\"text-2xl text-brand-dark-blue/90\">{activeModal.text}</p>\n                        <button onClick={closeModal} className=\"mt-8 bg-brand-magenta text-white font-bold py-3 px-8 rounded-2xl text-xl shadow-lg hover:scale-105 transform transition-transform\">המשך לשחק</button>\n                    </div>\n                </div>\n            )}\n        </ModuleView>\n    );\n};\n\nexport default AdSecretsModule;","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst missions = [\n    { id: 1, name: 'סידור החדר', icon: '🛏️', reward: 2 },\n    { id: 2, name: 'עזרה בגינה', icon: '🌱', reward: 4 },\n    { id: 3, name: 'שטיפת כלים', icon: '🍽️', reward: 1 },\n    { id: 4, name: 'טיול עם הכלב', icon: '🐕', reward: 2 },\n    { id: 5, name: 'עריכת שולחן', icon: '🍴', reward: 1 },\n    { id: 6, name: 'שטיפת המכונית', icon: '🚗', reward: 5 },\n    { id: 7, name: 'בייביסיטר', icon: '👶', reward: 6 },\n    { id: 8, name: 'למכור לימונדה', icon: '🥤', reward: 7 },\n];\n\ninterface ActiveMission {\n    holeIndex: number;\n    missionIndex: number;\n}\n\nconst EarningMissionsModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [gameState, setGameState] = useState<'intro' | 'playing' | 'finished'>('intro');\n    const [totalEarnings, setTotalEarnings] = useState(0);\n    const [activeMissions, setActiveMissions] = useState<ActiveMission[]>([]);\n    const [score, setScore] = useState(0);\n    const gameTimer = useRef<ReturnType<typeof setTimeout>>();\n\n    const showRandomMissions = () => {\n        const holeIndices = Array.from({ length: 6 }, (_, i) => i);\n        const shuffledHoles = holeIndices.sort(() => 0.5 - Math.random());\n        const [hole1, hole2] = shuffledHoles.slice(0, 2);\n\n        const missionIndices = Array.from({ length: missions.length }, (_, i) => i);\n        const shuffledMissions = missionIndices.sort(() => 0.5 - Math.random());\n        const [mission1, mission2] = shuffledMissions.slice(0, 2);\n\n        setActiveMissions([\n            { holeIndex: hole1, missionIndex: mission1 },\n            { holeIndex: hole2, missionIndex: mission2 }\n        ]);\n\n        gameTimer.current = setTimeout(() => {\n            if (score < 10 && gameState === 'playing') {\n                 setActiveMissions([]);\n                 setTimeout(showRandomMissions, 500);\n            }\n        }, 6000); // Increased duration\n    };\n\n    useEffect(() => {\n        if (gameState === 'playing' && score < 10) {\n            const initialTimeout = setTimeout(showRandomMissions, 1000);\n            return () => clearTimeout(initialTimeout);\n        }\n    }, [gameState, score]);\n\n    const handleMissionClick = (missionIndex: number) => {\n        if (activeMissions.length === 0 || gameState !== 'playing') return;\n\n        const mission = missions[missionIndex];\n        setTotalEarnings(prev => prev + mission.reward);\n        const newScore = score + 1;\n        setScore(newScore);\n\n        setActiveMissions([]);\n        clearTimeout(gameTimer.current);\n\n        if (newScore < 10) {\n            setTimeout(showRandomMissions, 400);\n        } else {\n            setGameState('finished');\n        }\n    };\n    \n    useEffect(() => {\n        if (gameState === 'finished') {\n            onComplete();\n        }\n    }, [gameState, onComplete]);\n    \n    const startGame = () => {\n        setScore(0);\n        setTotalEarnings(0);\n        setActiveMissions([]);\n        clearTimeout(gameTimer.current);\n        setGameState('playing');\n    }\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <style>{`\n                @keyframes popup {\n                  0% { transform: translateY(100%) scale(0.8); opacity: 0; }\n                  20%, 80% { transform: translateY(-10%) scale(1); opacity: 1; }\n                  100% { transform: translateY(100%) scale(0.8); opacity: 0; }\n                }\n                .animate-popup {\n                    animation: popup 6s ease-in-out;\n                }\n            `}</style>\n            <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אתגר הבחירה!</h3>\n                <div className=\"my-6 bg-white/50 p-6 rounded-2xl max-w-3xl mx-auto shadow-inner border border-white/50\">\n                    <h4 className=\"text-3xl font-bold mb-2 text-brand-dark-blue\">איך מרוויחים דמי כיס? 💸</h4>\n                    <p className=\"text-2xl leading-relaxed\">במשחק הזה, יופיעו שתי משימות בו-זמנית. עליכם לבחור איזו מהן לבצע כדי להרוויח מטבעות. בחירה במשימה אחת פירושה ויתור על השנייה. השלימו 10 משימות!</p>\n                </div>\n                \n                <div className=\"flex flex-col md:flex-row justify-around items-center mb-8 bg-white/50 p-6 rounded-2xl shadow-inner border border-white/50 gap-4\">\n                     <div className=\"text-center bg-white/70 p-4 rounded-2xl shadow-lg\">\n                        <h4 className=\"text-3xl font-bold\">הצלחות</h4>\n                        <p className=\"text-5xl font-bold\">{score} / 10</p>\n                    </div>\n                    <div className=\"text-center bg-white/70 p-4 rounded-2xl shadow-lg\">\n                        <h4 className=\"text-3xl font-bold\">הרווחים שלכם</h4>\n                        <p className=\"text-5xl font-bold text-yellow-500 drop-shadow-md\">{totalEarnings} 🪙</p>\n                    </div>\n                </div>\n\n                {gameState === 'intro' ? (\n                     <button onClick={startGame} className=\"bg-brand-magenta text-white font-bold py-4 px-10 rounded-2xl text-3xl mb-6 shadow-lg hover:scale-105 transform transition-transform\">\n                        התחל משחק\n                    </button>\n                ) : (\n                    <div className=\"bg-gradient-to-b from-brand-light-blue/30 to-brand-teal/30 p-6 rounded-3xl shadow-2xl\">\n                        <div className=\"grid grid-cols-3 gap-6 h-96\">\n                            {Array.from({ length: 6 }).map((_, index) => {\n                                const activeMissionData = activeMissions.find(m => m.holeIndex === index);\n                                return (\n                                    <div key={index} className=\"relative flex items-end justify-center\">\n                                        <div className=\"w-28 h-28 bg-blue-900/20 rounded-full border-[10px] border-brand-dark-blue/30 shadow-inner\"></div>\n                                        {activeMissionData && gameState === 'playing' && (\n                                            <div \n                                                onClick={() => handleMissionClick(activeMissionData.missionIndex)}\n                                                className=\"absolute bottom-4 text-center cursor-pointer animate-popup w-40\"\n                                            >\n                                                <div className=\"p-4 bg-white/90 rounded-2xl shadow-lg border border-white/50 transform hover:scale-110 transition-transform\">\n                                                    <div className=\"text-7xl drop-shadow-lg\">{missions[activeMissionData.missionIndex].icon}</div>\n                                                    <div className=\"text-black font-bold text-lg p-1 rounded-md\">{missions[activeMissionData.missionIndex].name}</div>\n                                                    <div className=\"font-bold text-xl text-yellow-600\">+{missions[activeMissionData.missionIndex].reward}🪙</div>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                )}\n                \n                <div className=\"mt-8 bg-yellow-100/70 p-4 rounded-2xl border-2 border-yellow-300 max-w-3xl mx-auto\">\n                    <p className=\"text-yellow-900 font-bold text-xl\">💡 חשוב לזכור: עזרה בבית היא קודם כל חלק מהיותנו משפחה, ולא תמיד מקבלים עליה תשלום. לפעמים, אפשר להסכים עם ההורים על משימות מיוחדות שיזכו אתכם בדמי כיס נוספים!</p>\n                </div>\n\n                 {gameState === 'finished' ? (\n                    <div className=\"mt-8\">\n                        <p className=\"text-4xl font-bold text-green-600 animate-bounce\">מעולה! אתם אלופי המשימות!</p>\n                        <button onClick={startGame} className=\"mt-4 bg-brand-magenta text-white font-bold py-2 px-6 rounded-lg text-lg\">שחק שוב</button>\n                    </div>\n                 ) : (\n                    <p className=\"mt-4 text-2xl font-bold h-8\"></p>\n                 )}\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default EarningMissionsModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ntype GameState = 'intro' | 'day1_setup' | 'day1_results' | 'day2_setup' | 'day2_results' | 'day3_setup' | 'day3_results' | 'final';\n\ninterface DayResult {\n    day: number;\n    customers: number;\n    earnings: number;\n    profit: number;\n    message: string;\n    settings: {\n        price: number;\n        quality: number;\n        supply?: number;\n        advertising?: boolean;\n    }\n}\n\n// --- Visual Components ---\n\nconst LemonadeStand: React.FC<{ day: number; advertising?: boolean }> = ({ day, advertising }) => {\n    return (\n        <div className=\"relative w-64 h-80 mx-auto\">\n            {/* Stand Base */}\n            <div className=\"absolute bottom-10 w-full h-40 bg-yellow-300 border-4 border-yellow-500 rounded-lg shadow-lg\">\n                <div className=\"w-full h-8 bg-yellow-400 border-b-4 border-yellow-500 rounded-t-md\"></div>\n                <div className=\"absolute top-10 left-4 right-4 h-20 bg-yellow-200 border-2 border-yellow-400 rounded-md p-2\">\n                    <p className={`font-bold text-3xl text-yellow-800 transition-opacity duration-500 ${day > 0 ? 'opacity-100' : 'opacity-0'}`}>\n                        {day < 3 || !advertising ? 'לימונדה' : 'SUPER לימונדה!'}\n                    </p>\n                </div>\n            </div>\n             {/* Pitcher */}\n            <div className=\"absolute bottom-52 left-1/2 -translate-x-12 w-20 h-24\">\n                <div className=\"w-full h-full bg-cyan-200/70 rounded-b-2xl rounded-tl-2xl border-4 border-cyan-400\"></div>\n                <div className=\"absolute -right-4 top-4 w-6 h-12 border-4 border-cyan-400 rounded-full\"></div>\n                <div className=\"absolute bottom-0 w-full h-3/4 bg-yellow-400/80 rounded-b-xl\"></div>\n            </div>\n            {/* Day 2+ Umbrella */}\n            {day > 1 && (\n                 <div className=\"absolute bottom-48 left-1/2 w-4 h-48 bg-gray-400 transition-all duration-500\">\n                    <div className=\"absolute top-0 -left-20 w-44 h-12 bg-red-500 rounded-t-full border-4 border-white\"></div>\n                    <div className=\"absolute top-0 -left-20 w-44 h-12 bg-white rounded-t-full border-4 border-white [clip-path:polygon(50%_0,100%_0,100%_100%,50%_100%)]\"></div>\n                </div>\n            )}\n             {/* Day 3 Advertising Sign */}\n            {day === 3 && advertising && (\n                <div className=\"absolute bottom-52 right-0 w-24 h-12 bg-pink-500 text-white font-bold text-lg rounded-lg transform -rotate-12 flex items-center justify-center animate-bounce border-4 border-white shadow-lg\">\n                    מבצע!\n                </div>\n            )}\n        </div>\n    );\n};\n\nconst CustomSlider: React.FC<{label: string, value: number, min: number, max: number, onChange: (val: number) => void, labels: string[]}> = ({label, value, min, max, onChange, labels}) => (\n    <div className=\"bg-white/70 p-4 rounded-xl shadow-inner border border-white/50\">\n        <label className=\"text-xl font-bold mb-2 block\">{label}</label>\n        <input \n            type=\"range\" \n            min={min} \n            max={max} \n            value={value} \n            onChange={e => onChange(parseInt(e.target.value))} \n            className=\"w-full h-3 bg-yellow-200 rounded-lg appearance-none cursor-pointer\"\n        />\n        <div className=\"flex justify-between mt-1 text-sm font-semibold\">\n            {labels.map((l, i) => <span key={i}>{l}</span>)}\n        </div>\n    </div>\n);\n\n// --- Screen Components ---\nconst IntroScreen: React.FC<{ onStart: () => void }> = ({ onStart }) => (\n    <div className=\"animate-fade-in text-center p-8\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אתגר דוכן הלימונדה!</h3>\n        <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">\n            אתם עומדים לנהל דוכן לימונדה במשך 3 ימים. בכל יום תלמדו משהו חדש על עסקים!\n            <br/>\n            המטרה: להרוויח כמה שיותר כסף. בהצלחה!\n        </p>\n        <button onClick={onStart} className=\"bg-brand-magenta text-white font-bold py-4 px-10 rounded-2xl text-3xl shadow-lg hover:scale-105 transform transition-transform\">\n            🍹 בואו נתחיל! 🍹\n        </button>\n    </div>\n);\n\nconst SetupScreen: React.FC<{ \n    day: number;\n    settings: any;\n    setters: any;\n    onStartDay: () => void;\n    weather?: 'sunny' | 'cloudy';\n}> = ({ day, settings, setters, onStartDay, weather }) => {\n    const dayInfo: Record<number, {title: string, desc: string}> = {\n        1: { title: \"הגדרות ליום הראשון\", desc: \"התחלה טובה תלויה באיזון הנכון בין איכות המוצר למחיר שלו. מה תבחרו?\" },\n        2: { title: \"הגדרות ליום השני\", desc: \"היום נלמד על היצע וביקוש! מזג האוויר משפיע על כמות הלקוחות. כמה כוסות כדאי להכין מראש?\"},\n        3: { title: \"הגדרות ליום השלישי\", desc: \"היום נלמד על פרסום! האם שלט קטן יעזור לכם למכור יותר?\"}\n    };\n    \n    return (\n        <div className=\"animate-fade-in\">\n             <div className=\"text-center mb-8\">\n                <h4 className=\"text-3xl font-bold mb-2 text-yellow-800\">{dayInfo[day].title}</h4>\n                <p className=\"text-xl\">{dayInfo[day].desc}</p>\n                 {weather && (\n                    <p className=\"mt-2 text-2xl font-bold bg-white/60 p-2 rounded-xl shadow-inner inline-block\">\n                        תחזית להיום: {weather === 'sunny' ? 'יום שמשי ☀️ (ביקוש גבוה!)' : 'יום מעונן ☁️ (ביקוש נמוך!)'}\n                    </p>\n                )}\n            </div>\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start\">\n                <div className=\"space-y-6\">\n                    <CustomSlider \n                        label=\"🍋 איכות הלימונדה (משפיע על עלות)\"\n                        value={settings.quality}\n                        onChange={setters.setQuality}\n                        min={1} max={3}\n                        labels={['רגילה (1₪)', 'טובה (2₪)', 'פרימיום (3₪)']}\n                    />\n                    <CustomSlider \n                        label=\"💰 מחיר לכוס (משפיע על כמות הלקוחות)\"\n                        value={settings.price}\n                        onChange={setters.setPrice}\n                        min={1} max={3}\n                        labels={['זול (3₪)', 'הוגן (4₪)', 'יקר (5₪)']}\n                    />\n                    {day > 1 && (\n                         <CustomSlider \n                            label=\"📦 היצע (כמה כוסות להכין מראש?)\"\n                            value={settings.supply}\n                            onChange={setters.setSupply}\n                            min={5} max={40}\n                            labels={['5', '40']}\n                        />\n                    )}\n                     {day === 3 && (\n                        <div className=\"bg-white/70 p-4 rounded-xl shadow-inner border border-white/50\">\n                            <label className=\"text-xl font-bold mb-2 block\">📣 פרסום (הכנת שלט בעלות 5₪)</label>\n                             <div className=\"flex justify-center items-center gap-4\">\n                                <button onClick={() => setters.setAdvertising(false)} className={`py-2 px-6 rounded-lg font-bold text-lg ${!settings.advertising ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}>לא</button>\n                                <button onClick={() => setters.setAdvertising(true)} className={`py-2 px-6 rounded-lg font-bold text-lg ${settings.advertising ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}>כן</button>\n                            </div>\n                        </div>\n                    )}\n                </div>\n                 <div className=\"flex justify-center items-center\">\n                    <LemonadeStand day={day} advertising={day === 3 && settings.advertising} />\n                </div>\n            </div>\n            <button onClick={onStartDay} className=\"mt-8 bg-brand-teal text-white font-bold py-4 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">\n                פתח את הדוכן!\n            </button>\n        </div>\n    );\n};\n\nconst ResultsScreen: React.FC<{ result: DayResult, onNext: () => void }> = ({ result, onNext }) => {\n    const [animatedCustomers, setAnimatedCustomers] = useState(0);\n\n    useEffect(() => {\n        if (result.customers > 0) {\n            const interval = setInterval(() => {\n                setAnimatedCustomers(c => {\n                    if (c < result.customers) return c + 1;\n                    clearInterval(interval);\n                    return c;\n                });\n            }, 100);\n            return () => clearInterval(interval);\n        }\n    }, [result.customers]);\n    \n    return (\n        <div className=\"bg-blue-100 p-6 rounded-2xl flex flex-col justify-center items-center shadow-lg border-4 border-white animate-fade-in text-center\">\n            <h4 className=\"text-3xl font-bold mb-4\">תוצאות יום {result.day}</h4>\n            <div className=\"flex items-center justify-center gap-1 text-5xl mb-4 h-16 flex-wrap\">\n                {Array.from({ length: animatedCustomers }).map((_, i) => (\n                    <span key={i} className=\"animate-fade-in\" style={{animationDelay: `${i*50}ms`}}>😊</span>\n                ))}\n            </div>\n            <p className=\"text-2xl mb-4\">מכרתם ל-<strong>{result.customers}</strong> לקוחות</p>\n            <div className=\"bg-white/70 p-4 rounded-xl shadow-inner\">\n                <p className=\"text-2xl\">רווח נקי להיום</p>\n                <p className={`text-5xl font-bold ${result.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>{result.profit} ₪</p>\n            </div>\n            <p className=\"mt-4 p-2 bg-yellow-100/70 text-yellow-800 rounded-lg font-semibold\">{result.message}</p>\n            <button onClick={onNext} className=\"mt-6 bg-brand-magenta text-white font-bold py-3 px-6 rounded-lg text-lg\">\n               {result.day === 3 ? 'הצג סיכום' : 'עבור ליום הבא'}\n            </button>\n        </div>\n    );\n};\n\nconst FinalScreen: React.FC<{ results: DayResult[], totalProfit: number, onRestart: () => void }> = ({ results, totalProfit, onRestart }) => (\n    <div className=\"animate-fade-in text-center\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">סיכום האתגר!</h3>\n        <div className=\"grid grid-cols-3 gap-4 my-6\">\n            {results.map(r => (\n                <div key={r.day} className=\"bg-white/70 p-4 rounded-xl shadow-md\">\n                    <p className=\"font-bold text-xl\">יום {r.day}</p>\n                    <p className={`text-3xl font-bold ${r.profit >= 0 ? 'text-green-600' : 'text-red-600'}`}>{r.profit} ₪</p>\n                </div>\n            ))}\n        </div>\n        <div className=\"bg-yellow-100/80 p-6 rounded-2xl shadow-lg border-2 border-white\">\n             <p className=\"text-3xl font-bold\">רווח כולל:</p>\n             <p className={`text-6xl font-bold ${totalProfit >= 0 ? 'text-green-600' : 'text-red-600'}`}>{totalProfit} ₪</p>\n        </div>\n        <p className=\"text-xl mt-4\">{totalProfit > 20 ? \"כל הכבוד, אתם יזמים מצוינים!\" : \"לא נורא, כל יזם לומד מטעויות. נסו שוב!\"}</p>\n        <button onClick={onRestart} className=\"mt-6 bg-brand-teal text-white font-bold py-3 px-6 rounded-lg text-lg\">שחק שוב</button>\n    </div>\n);\n\n\nconst ColorfulMarketModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [gameState, setGameState] = useState<GameState>('intro');\n    const [totalProfit, setTotalProfit] = useState(0);\n    const [dayResults, setDayResults] = useState<DayResult[]>([]);\n    \n    // Settings\n    const [price, setPrice] = useState(2);\n    const [quality, setQuality] = useState(2);\n    const [supply, setSupply] = useState(15);\n    const [advertising, setAdvertising] = useState(false);\n    \n    const [weather, setWeather] = useState<'sunny' | 'cloudy' | null>(null);\n\n     useEffect(() => {\n        if (gameState === 'day2_setup' && !weather) {\n            setWeather(Math.random() > 0.5 ? 'sunny' : 'cloudy');\n        }\n        if (gameState === 'day3_setup' && (weather === null || dayResults.length < 2)) {\n             setWeather(Math.random() > 0.6 ? 'sunny' : 'cloudy');\n        }\n        if (gameState === 'final') {\n            onComplete();\n        }\n    }, [gameState, weather, onComplete, dayResults]);\n\n    const calculateDayResult = () => {\n        const currentDay = dayResults.length + 1;\n        const actualPrice = price + 2;\n        const costPerCup = quality;\n\n        let potentialCustomers = 10 - (price - quality) * 3;\n        \n        if (currentDay > 1 && weather) {\n            potentialCustomers *= (weather === 'sunny' ? 1.5 : 0.7);\n        }\n\n        if (currentDay === 3 && advertising) {\n            potentialCustomers *= 1.4;\n        }\n\n        potentialCustomers = Math.round(Math.max(3, potentialCustomers));\n        \n        let actualCustomers = potentialCustomers;\n        let costs = 0;\n        \n        if (currentDay > 1) {\n            actualCustomers = Math.min(potentialCustomers, supply);\n            costs = supply * costPerCup;\n        } else {\n            costs = actualCustomers * costPerCup;\n        }\n        \n        if(currentDay === 3 && advertising) costs += 5;\n\n        const earnings = actualCustomers * actualPrice;\n        const profit = earnings - costs;\n\n        let message = '';\n        if (profit > 20) message = \"רווח מדהים! מצאתם שילוב מושלם!\";\n        else if (profit > 0) message = \"עבודה טובה! הצלחתם להרוויח.\";\n        else message = \"אוי, הפסדתם כסף. נסו שילוב אחר ביום הבא.\";\n        \n        if(currentDay > 1 && supply < potentialCustomers) message += ` נגמרה לכם הלימונדה מוקדם!`;\n        else if (currentDay > 1 && supply > actualCustomers) message += ` נשארה לכם לימונדה מיותרת.`\n        \n        const result: DayResult = { day: currentDay, customers: actualCustomers, earnings, profit, message, settings: { price, quality, supply, advertising } };\n        setDayResults(prev => [...prev, result]);\n        setTotalProfit(prev => prev + profit);\n        \n        if (currentDay === 1) setGameState('day1_results');\n        if (currentDay === 2) setGameState('day2_results');\n        if (currentDay === 3) setGameState('day3_results');\n    };\n\n    const handleNextDay = () => {\n        if (gameState === 'day1_results') setGameState('day2_setup');\n        if (gameState === 'day2_results') setGameState('day3_setup');\n        if (gameState === 'day3_results') setGameState('final');\n    };\n    \n    const restartGame = () => {\n        setGameState('day1_setup');\n        setTotalProfit(0); setDayResults([]); setPrice(2); setQuality(2);\n        setSupply(15); setAdvertising(false); setWeather(null);\n    };\n\n    const renderContent = () => {\n        switch (gameState) {\n            case 'intro': return <IntroScreen onStart={() => setGameState('day1_setup')} />;\n            case 'day1_setup':\n            case 'day2_setup':\n            case 'day3_setup':\n                const day = dayResults.length + 1;\n                return <SetupScreen \n                    day={day} \n                    settings={{ price, quality, supply, advertising }}\n                    setters={{ setPrice, setQuality, setSupply, setAdvertising }}\n                    onStartDay={calculateDayResult}\n                    weather={day > 1 ? weather! : undefined}\n                />;\n            case 'day1_results':\n            case 'day2_results':\n            case 'day3_results':\n                const lastResult = dayResults[dayResults.length - 1];\n                return <ResultsScreen result={lastResult} onNext={handleNextDay} />;\n            case 'final':\n                return <FinalScreen results={dayResults} totalProfit={totalProfit} onRestart={restartGame} />;\n            default: return null;\n        }\n    }\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n             <div className=\"bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                <div className=\"bg-white/50 p-8 rounded-3xl shadow-inner border border-white/50\">\n                    {renderContent()}\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default ColorfulMarketModule;","import React, { useState, useEffect } from 'react';\nimport ModuleView from '../../ModuleView';\nimport { TrophyIcon } from '../../icons/Icons';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst rounds = [\n    { item: { name: 'תפוח', icon: '🍎', price: 3 }, paid: 5 },\n    { item: { name: 'ארטיק', icon: '🍭', price: 7 }, paid: 10 },\n    { item: { name: 'כדור', icon: '⚽', price: 12 }, paid: 20 },\n    { item: { name: 'ספר', icon: '📚', price: 36 }, paid: 50 },\n    { item: { name: 'בובה', icon: '🧸', price: 68 }, paid: 100 },\n];\n\nconst cashDrawerMoney = [\n    { value: 1, type: 'coin' },\n    { value: 2, type: 'coin' },\n    { value: 5, type: 'coin' },\n    { value: 10, type: 'coin' },\n    { value: 20, type: 'bill' },\n    { value: 50, type: 'bill' },\n];\n\nconst Coin: React.FC<{ value: number; isSelected?: boolean }> = ({ value }) => (\n    <div className={`relative w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-yellow-600 flex items-center justify-center text-3xl font-bold text-yellow-800 border-4 border-yellow-700 shadow-lg`}>\n        {value}\n    </div>\n);\n\nconst Bill: React.FC<{ value: number; isSelected?: boolean }> = ({ value }) => (\n     <div className={`relative w-32 h-16 bg-gradient-to-br from-green-300 to-green-500 flex items-center justify-center text-3xl font-bold text-green-900 border-2 border-green-600 rounded-lg shadow-lg`}>\n        {value} ₪\n    </div>\n);\n\n\nconst CoinsVsBillsModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const [gameState, setGameState] = useState<'intro' | 'playing' | 'finished'>('intro');\n    const [currentRound, setCurrentRound] = useState(0);\n    const [selectedChangeItems, setSelectedChangeItems] = useState<{value: number, id: number}[]>([]);\n    const [message, setMessage] = useState<{text: string, type: 'correct' | 'incorrect' | 'info'} | null>(null);\n\n    const roundData = rounds[currentRound];\n    const requiredChange = roundData.paid - roundData.item.price;\n    const currentChangeTotal = selectedChangeItems.reduce((sum, item) => sum + item.value, 0);\n\n    const handleMoneyClick = (value: number) => {\n        if (gameState !== 'playing' || message) return;\n        setSelectedChangeItems(prev => [...prev, {value, id: Date.now() + Math.random()}]);\n    };\n    \n    const handleUndo = () => {\n        if (gameState !== 'playing' || message) return;\n        setSelectedChangeItems(prev => prev.slice(0, -1));\n    };\n\n    const giveChange = () => {\n        if (message || gameState !== 'playing') return;\n        if (currentChangeTotal === requiredChange) {\n            setMessage({text: 'עודף מדויק! כל הכבוד!', type: 'correct'});\n            setTimeout(() => {\n                if (currentRound < rounds.length - 1) {\n                    setCurrentRound(prev => prev + 1);\n                    setSelectedChangeItems([]);\n                    setMessage(null);\n                } else {\n                    setGameState('finished');\n                    onComplete();\n                }\n            }, 2000);\n        } else {\n            setMessage({text: `אופס! העודף לא נכון. נסו שוב.`, type: 'incorrect'});\n            setTimeout(() => {\n                setSelectedChangeItems([]);\n                setMessage(null);\n            }, 2000);\n        }\n    };\n    \n    const startGame = () => {\n        setGameState('playing');\n        setCurrentRound(0);\n        setSelectedChangeItems([]);\n        setMessage(null);\n    }\n    \n    if (gameState === 'intro') {\n        return (\n             <ModuleView title={title} onBack={onBack}>\n                <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                    <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">אתגר הקופאי!</h3>\n                    <p className=\"text-2xl text-brand-dark-blue/90 mb-6\">\n                       אתם הקופאים בחנות! לקוח קונה מוצר ומשלם במזומן.\n                       <br />\n                       עליכם להחזיר לו עודף מדויק מהקופה.\n                    </p>\n                    <button onClick={startGame} className=\"bg-brand-magenta text-white font-bold py-4 px-10 rounded-2xl text-3xl shadow-lg hover:scale-105 transform transition-transform\">\n                        💰 פתח את הקופה 💰\n                    </button>\n                </div>\n            </ModuleView>\n        );\n    }\n    \n    if (gameState === 'finished') {\n        return (\n            <ModuleView title={title} onBack={onBack}>\n                 <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n                    <TrophyIcon className=\"w-24 h-24 mx-auto text-yellow-500\" />\n                    <h3 className=\"text-4xl font-bold text-brand-teal my-4\">כל הכבוד! אתם קופאים מעולים!</h3>\n                    <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">\n                       השלמתם את כל המשימות בהצלחה.\n                    </p>\n                    <button onClick={startGame} className=\"bg-brand-teal text-white font-bold py-3 px-8 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform\">\n                        שחק שוב\n                    </button>\n                </div>\n            </ModuleView>\n        )\n    }\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"bg-white/40 backdrop-blur-md p-4 sm:p-6 rounded-3xl shadow-xl border border-white/50 space-y-6\">\n                \n                {/* Customer & Item Section */}\n                <div className=\"flex flex-col md:flex-row items-center justify-center gap-8 bg-white/50 p-6 rounded-2xl shadow-inner\">\n                    <div className=\"text-8xl\">😊</div>\n                    <div className=\"text-center\">\n                        <p className=\"text-2xl\">הלקוח רוצה לקנות:</p>\n                        <div className=\"bg-white p-4 rounded-xl shadow-lg my-2 inline-block\">\n                            <div className=\"text-7xl\">{roundData.item.icon}</div>\n                            <div className=\"font-bold text-2xl\">{roundData.item.name}</div>\n                            <div className=\"text-xl\">{roundData.item.price} ₪</div>\n                        </div>\n                        <p className=\"text-2xl\">והוא שילם ב:</p>\n                        <div className=\"mt-2 inline-block\"><Bill value={roundData.paid}/></div>\n                    </div>\n                </div>\n\n                {/* Change Calculation Section */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 items-center bg-white/50 p-6 rounded-2xl shadow-inner\">\n                    <div className=\"text-center\">\n                        <h4 className=\"text-3xl font-bold text-brand-magenta\">צריך להחזיר עודף:</h4>\n                        <p className=\"text-7xl font-bold text-brand-magenta drop-shadow-md\">{requiredChange} ₪</p>\n                    </div>\n                    <div className=\"text-center\">\n                        <h4 className=\"text-3xl font-bold text-brand-dark-blue\">העודף שבחרת:</h4>\n                        <div className={`min-h-[80px] p-2 rounded-lg flex items-center justify-center ${message ? (message.type === 'correct' ? 'bg-green-200' : 'bg-red-200') : 'bg-gray-200'}`}>\n                           <p className=\"text-7xl font-bold text-brand-dark-blue drop-shadow-md\">{currentChangeTotal} ₪</p>\n                        </div>\n                    </div>\n                </div>\n                \n                 {/* Cash Drawer Section */}\n                <div className=\"bg-gray-800 p-6 rounded-3xl shadow-2xl\">\n                    <h4 className=\"text-3xl font-bold text-center mb-4 text-white\">הקופה שלך</h4>\n                    <div className=\"flex justify-center items-center flex-wrap gap-4 bg-gray-700 p-4 rounded-xl shadow-inner\">\n                        {cashDrawerMoney.map((item, index) => (\n                           <button key={index} onClick={() => handleMoneyClick(item.value)} className=\"transition-transform duration-200 transform hover:scale-110 active:scale-95 disabled:opacity-50\" disabled={!!message}>\n                               {item.type === 'coin' ? <Coin value={item.value} /> : <Bill value={item.value} />}\n                           </button>\n                       ))}\n                    </div>\n                    <div className=\"flex justify-center gap-4 mt-4\">\n                        <button onClick={giveChange} className=\"bg-brand-teal text-white font-bold py-4 px-10 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform disabled:bg-gray-500\" disabled={!!message}>\n                            החזר עודף\n                        </button>\n                        <button onClick={handleUndo} className=\"bg-yellow-500 text-white font-bold py-4 px-6 rounded-2xl text-2xl shadow-lg hover:scale-105 transform transition-transform disabled:bg-gray-500\" disabled={selectedChangeItems.length === 0 || !!message}>\n                            בטל\n                        </button>\n                    </div>\n                </div>\n\n                {message && <p className={`mt-4 text-center text-3xl font-bold p-3 rounded-xl animate-fade-in ${message.type === 'correct' ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'}`}>{message.text}</p>}\n\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default CoinsVsBillsModule;","// FIX: The original file content was corrupted. This is a complete rewrite\n// of the PowerOfGivingModule component based on its description in App.tsx.\nimport React, { useState } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\nconst PowerOfGivingModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n  const [choiceMade, setChoiceMade] = useState(false);\n\n  const handleChoice = () => {\n    if (!choiceMade) {\n      setChoiceMade(true);\n      onComplete();\n    }\n  };\n\n  const options = [\n    {\n      icon: '💖',\n      title: 'לתרום לבעלי חיים',\n      description: 'לתרום כסף לעמותה שמטפלת בכלבים וחתולים נטושים.',\n    },\n    {\n      icon: '🌳',\n      title: 'לשמור על הסביבה',\n      description: 'לתרום כסף לארגון שנוטע עצים ומנקה יערות.',\n    },\n    {\n      icon: '🤝',\n      title: 'לעזור לחברים',\n      description: 'לקנות מתנה לחבר/ה שמרגיש/ה קצת עצוב/ה לאחרונה.',\n    },\n  ];\n\n  return (\n    <ModuleView title={title} onBack={onBack}>\n      <div className=\"text-center bg-white/40 backdrop-blur-md p-4 sm:p-8 rounded-3xl shadow-xl border border-white/50\">\n        <h3 className=\"text-4xl font-bold text-brand-teal mb-4\">כוחה של נתינה</h3>\n        <p className=\"text-2xl text-brand-dark-blue/90 mb-8\">\n          כסף הוא לא רק לקניות! אפשר להשתמש בו גם כדי לעשות טוב לאחרים ולעולם.\n          <br/>\n          איך הייתם רוצים לעזור? בחרו אפשרות אחת.\n        </p>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {options.map((option, index) => (\n            <div\n              key={index}\n              onClick={handleChoice}\n              className={`p-6 bg-white/70 rounded-2xl shadow-lg border-4 transition-all duration-300 cursor-pointer ${\n                choiceMade ? 'border-brand-teal scale-105' : 'border-transparent hover:border-brand-light-blue hover:scale-105'\n              }`}\n            >\n              <div className=\"text-7xl mb-4\">{option.icon}</div>\n              <h4 className=\"text-2xl font-bold mb-2 text-brand-dark-blue\">{option.title}</h4>\n              <p className=\"text-lg\">{option.description}</p>\n            </div>\n          ))}\n        </div>\n\n        {choiceMade && (\n          <div className=\"mt-8 p-4 bg-green-100/70 rounded-2xl border-2 border-green-300 animate-fade-in\">\n            <p className=\"text-green-800 font-bold text-2xl\">\n              כל הכבוד! כל בחירה שעושה טוב היא בחירה מצוינת.\n              <br/>\n              השלמתם את המודול!\n            </p>\n          </div>\n        )}\n      </div>\n    </ModuleView>\n  );\n};\n\nexport default PowerOfGivingModule;\n","import React, { useState, useEffect, useRef } from 'react';\nimport ModuleView from '../../ModuleView';\n\ninterface ModuleProps {\n  onBack: () => void;\n  title: string;\n  onComplete: () => void;\n}\n\ninterface Story {\n    id: number;\n    text: string;\n    saveChoice: { text: string, consequence: () => void };\n    spendChoice: { text: string, consequence: () => void };\n}\n\ninterface Level {\n    level: number;\n    rows: number;\n    cols: number;\n    ballSpeed: number;\n}\n\nconst levels: Level[] = [\n    { level: 1, rows: 4, cols: 8, ballSpeed: 4 },\n    { level: 2, rows: 5, cols: 10, ballSpeed: 5 },\n    { level: 3, rows: 6, cols: 10, ballSpeed: 6 },\n];\n\nconst SmallDecisionsModule: React.FC<ModuleProps> = ({ onBack, title, onComplete }) => {\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\n    const [gameState, setGameState] = useState<'intro' | 'level_intro' | 'playing' | 'paused' | 'win' | 'gameOver'>('intro');\n    const [activeStory, setActiveStory] = useState<Story | null>(null);\n    const [currentLevel, setCurrentLevel] = useState(0);\n\n    // Game state refs\n    const paddleRef = useRef({ x: 350, width: 120 });\n    const ballRef = useRef({ x: 400, y: 500, vx: 4, vy: -4, radius: 10, speedMultiplier: 1 });\n    const bricksRef = useRef<any[]>([]);\n    const powerUpsRef = useRef<any[]>([]);\n    const particlesRef = useRef<any[]>([]);\n    const livesRef = useRef(3);\n    const animationFrameId = useRef<number>();\n    const keysRef = useRef({ left: false, right: false });\n\n    const BRICK_WIDTH = 75;\n    const BRICK_HEIGHT = 30;\n\n    const stories: Omit<Story, 'id'>[] = [\n        {\n            text: 'קיבלתם 10 שקלים דמי כיס! מה תעשו?',\n            saveChoice: { text: 'להוסיף לחיסכון למשחק', consequence: () => { livesRef.current++; } },\n            spendChoice: { text: 'לקנות גלידה עכשיו', consequence: () => { ballRef.current.speedMultiplier = 1.2; } },\n        },\n        {\n            text: 'חבר מציע ללכת לסרט. הכרטיס עולה 40 ש\"ח.',\n            saveChoice: { text: 'להציע לשחק בפארק בחינם', consequence: () => { livesRef.current++; } },\n            spendChoice: { text: 'ללכת לסרט ולבזבז', consequence: () => { paddleRef.current.width = Math.max(50, paddleRef.current.width - 20); } },\n        },\n        {\n            text: 'מצאתם צעצוע מגניב בחנות בהנחה!',\n            saveChoice: { text: 'להתאפק ולהישאר עם המטרה', consequence: () => { livesRef.current++; } },\n            spendChoice: { text: 'לקנות אותו בדחף!', consequence: () => { ballRef.current.speedMultiplier = 1.3; } },\n        },\n        {\n            text: 'יש לכם זמן פנוי. מה תעדיפו לעשות?',\n            saveChoice: { text: 'לעזור במטלות הבית ולהרוויח עוד קצת כסף', consequence: () => { livesRef.current++; } },\n            spendChoice: { text: 'לשחק במחשב כל אחר הצהריים', consequence: () => { paddleRef.current.width = Math.max(50, paddleRef.current.width - 20); } },\n        },\n        {\n            text: 'קיבלתם מתנה כספית ליום ההולדת.',\n            saveChoice: { text: 'לחסוך את רוב הכסף למטרה גדולה', consequence: () => { livesRef.current++; } },\n            spendChoice: { text: 'לבזבז הכל על ממתקים וצעצועים קטנים', consequence: () => { ballRef.current.speedMultiplier = 1.2; } },\n        },\n    ];\n\n    const createBricks = (level: Level) => {\n        const newBricks = [];\n        const totalBricks = level.rows * level.cols;\n        const numStoryBricks = Math.floor(totalBricks * 0.1);\n        \n        let storyCounter = 0;\n\n        for (let r = 0; r < level.rows; r++) {\n            for (let c = 0; c < level.cols; c++) {\n                const isStory = storyCounter < numStoryBricks && Math.random() < 0.2; // Distribute stories somewhat randomly\n                const type = isStory ? 'story' : (Math.random() > 0.4 ? 'positive' : 'negative');\n                \n                if (isStory) storyCounter++;\n\n                newBricks.push({\n                    x: c * (BRICK_WIDTH + 5) + (800 - (level.cols * (BRICK_WIDTH + 5) - 5)) / 2,\n                    y: r * (BRICK_HEIGHT + 5) + 60,\n                    w: BRICK_WIDTH, h: BRICK_HEIGHT,\n                    type: type,\n                    icon: type === 'story' ? '📖' : (type === 'positive' ? '➕' : '➖'),\n                    active: true,\n                    storyId: isStory ? (storyCounter % stories.length) + 1 : null\n                });\n            }\n        }\n        bricksRef.current = newBricks;\n    };\n    \n    const startLevel = (levelIndex: number) => {\n        const level = levels[levelIndex];\n        livesRef.current = 3;\n        paddleRef.current = { x: 350, width: 120 };\n        ballRef.current = { x: 400, y: 500, vx: (Math.random() - 0.5) * 8, vy: -level.ballSpeed, radius: 10, speedMultiplier: 1 };\n        powerUpsRef.current = [];\n        particlesRef.current = [];\n        setActiveStory(null);\n        createBricks(level);\n        setGameState('playing');\n    };\n\n    const pauseAndShowStory = (storyId: number) => {\n        setGameState('paused');\n        const storyIndex = (storyId - 1) % stories.length; // Cycle through stories\n        if (stories[storyIndex]) {\n            setActiveStory({ id: storyId, ...stories[storyIndex] });\n        }\n    };\n\n    const handleStoryChoice = (consequence: () => void) => {\n        consequence();\n        setActiveStory(null);\n        setGameState('playing');\n    };\n\n    useEffect(() => {\n        if (gameState !== 'playing' && gameState !== 'paused') {\n             if(animationFrameId.current) cancelAnimationFrame(animationFrameId.current);\n             return;\n        }\n\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        \n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'ArrowLeft') keysRef.current.left = true;\n            if (e.key === 'ArrowRight') keysRef.current.right = true;\n        };\n        const handleKeyUp = (e: KeyboardEvent) => {\n            if (e.key === 'ArrowLeft') keysRef.current.left = false;\n            if (e.key === 'ArrowRight') keysRef.current.right = false;\n        };\n        \n        window.addEventListener('keydown', handleKeyDown);\n        window.addEventListener('keyup', handleKeyUp);\n\n        const gameLoop = () => {\n            if(gameState !== 'playing') {\n                if(animationFrameId.current) animationFrameId.current = requestAnimationFrame(gameLoop);\n                return;\n            };\n\n            // Update paddle\n            if (keysRef.current.left) paddleRef.current.x = Math.max(0, paddleRef.current.x - 8);\n            if (keysRef.current.right) paddleRef.current.x = Math.min(canvas.width - paddleRef.current.width, paddleRef.current.x + 8);\n            \n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n            // Update ball\n            const ball = ballRef.current;\n            ball.x += ball.vx * ball.speedMultiplier;\n            ball.y += ball.vy * ball.speedMultiplier;\n\n            // Ball collisions\n            if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) ball.vx *= -1;\n            if (ball.y - ball.radius < 0) ball.vy *= -1;\n\n            if (ball.y + ball.radius > canvas.height - 20 && ball.x > paddleRef.current.x && ball.x < paddleRef.current.x + paddleRef.current.width) {\n                ball.vy *= -1; ball.speedMultiplier = 1;\n                const hitPoint = (ball.x - (paddleRef.current.x + paddleRef.current.width / 2)) / (paddleRef.current.width / 2);\n                ball.vx = hitPoint * 5;\n            }\n\n            if (ball.y + ball.radius > canvas.height) {\n                livesRef.current--;\n                if (livesRef.current <= 0) { setGameState('gameOver'); } \n                else { ball.x = 400; ball.y = 500; ball.vx = (Math.random() - 0.5) * 8; ball.vy = -levels[currentLevel].ballSpeed; paddleRef.current.width = 120; ball.speedMultiplier = 1;}\n            }\n            \n            ctx.beginPath(); ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2); ctx.fillStyle = '#1b2550'; ctx.fill(); ctx.closePath();\n\n            // Bricks\n            bricksRef.current.forEach(brick => {\n                if (brick.active) {\n                    if (ball.x > brick.x && ball.x < brick.x + brick.w && ball.y > brick.y && ball.y < brick.y + brick.h) {\n                        brick.active = false; ball.vy *= -1;\n                        if (brick.storyId) { pauseAndShowStory(brick.storyId); } \n                        else if (Math.random() < 0.3) { powerUpsRef.current.push({ x: brick.x + brick.w / 2, y: brick.y, type: brick.type, icon: brick.type === 'positive' ? '➕' : '➖' }); }\n                        for (let i = 0; i < 15; i++) { particlesRef.current.push({ x: ball.x, y: ball.y, vx: (Math.random() - 0.5) * 4, vy: (Math.random() - 0.5) * 4, life: 30, color: brick.icon === '📖' ? 'gold' : (brick.type === 'positive' ? '#00b1a6' : '#d52963') }); }\n                    }\n                    ctx.fillStyle = brick.icon === '📖' ? 'gold' : (brick.type === 'positive' ? '#00b1a6' : '#d52963');\n                    ctx.fillRect(brick.x, brick.y, brick.w, brick.h);\n                    ctx.font = '20px sans-serif'; ctx.fillStyle = brick.icon === '📖' ? 'black' : 'white';\n                    ctx.fillText(brick.icon, brick.x + brick.w/2 - 10, brick.y + 22);\n                }\n            });\n\n            // Check win condition for level\n            const remainingGoalBricks = bricksRef.current.filter(b => (b.type === 'positive' || b.type === 'story') && b.active).length;\n            if (remainingGoalBricks === 0) {\n                if (currentLevel < levels.length - 1) {\n                    setCurrentLevel(c => c + 1);\n                    setGameState('level_intro');\n                } else {\n                    setGameState('win');\n                    onComplete();\n                }\n            }\n            \n            // Powerups\n            powerUpsRef.current.forEach((p, index) => {\n                p.y += 2;\n                ctx.font = '30px sans-serif'; ctx.fillText(p.icon, p.x, p.y);\n                if (p.y > canvas.height - 20 && p.x > paddleRef.current.x && p.x < paddleRef.current.x + paddleRef.current.width) {\n                    if (p.type === 'positive') paddleRef.current.width = Math.min(200, paddleRef.current.width + 30);\n                    if (p.type === 'negative') paddleRef.current.width = Math.max(50, paddleRef.current.width - 20);\n                    powerUpsRef.current.splice(index, 1);\n                }\n                if (p.y > canvas.height) powerUpsRef.current.splice(index, 1);\n            });\n            \n            // Particles\n            particlesRef.current.forEach((p, index) => {\n                p.x += p.vx; p.y += p.vy; p.life--;\n                ctx.fillStyle = p.color;\n                ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill();\n                if (p.life <= 0) particlesRef.current.splice(index, 1);\n            });\n            \n            // Paddle & HUD\n            ctx.fillStyle = '#1b2550'; ctx.fillRect(paddleRef.current.x, canvas.height - 20, paddleRef.current.width, 10);\n            ctx.font = '20px sans-serif'; ctx.fillStyle = '#1b2550';\n            ctx.fillText(`חיים: ${'❤️'.repeat(livesRef.current)}`, 10, 30);\n            ctx.fillText(`שלב: ${currentLevel + 1}`, canvas.width / 2 - 30, 30);\n            ctx.fillText(`מטרות: ${remainingGoalBricks}`, canvas.width - 150, 30);\n            \n            animationFrameId.current = requestAnimationFrame(gameLoop);\n        };\n        gameLoop();\n        return () => {\n            window.removeEventListener('keydown', handleKeyDown);\n            window.removeEventListener('keyup', handleKeyUp);\n            if(animationFrameId.current) cancelAnimationFrame(animationFrameId.current);\n        };\n    }, [gameState, onComplete, currentLevel]);\n\n    const renderOverlay = () => {\n        const baseClasses = \"absolute inset-0 bg-black/60 flex flex-col justify-center items-center text-white p-4 animate-fade-in\";\n        switch (gameState) {\n            case 'intro': return (\n                <div className={baseClasses}>\n                    <h3 className=\"text-4xl font-bold\">משחק ההחלטות הקטנות</h3>\n                    <p className=\"text-xl mt-4 max-w-2xl text-center\">\n                        הזיזו את המחבט עם <strong>חיצים ימינה ושמאלה</strong>.\n                        <br/>המטרה: שברו את כל לבני הפלוס (➕) והסיפור (📖) כדי לעבור שלב!\n                        <br/><br/><strong>לבני סיפור (📖):</strong> פוגעים בהן כדי לקבל החלטה שתשפיע על המשחק.\n                        <br/><strong>לבני פלוס (➕):</strong> יכולות לתת לכם בונוסים!\n                        <br/><strong>לבני מינוס (➖):</strong> עלולות להקשות עליכם!\n                    </p>\n                    <button onClick={() => setGameState('level_intro')} className=\"mt-6 bg-brand-magenta font-bold py-3 px-6 rounded-lg text-xl\">התחל משחק</button>\n                </div>\n            );\n             case 'level_intro': return (\n                <div className={baseClasses}>\n                    <h3 className=\"text-5xl font-bold\">שלב {currentLevel + 1}</h3>\n                    <button onClick={() => startLevel(currentLevel)} className=\"mt-6 bg-brand-teal font-bold py-3 px-6 rounded-lg text-xl\">התחל</button>\n                </div>\n             );\n             case 'paused': return (\n                activeStory && (\n                    <div className={baseClasses}>\n                        <div className=\"bg-white text-brand-dark-blue p-8 rounded-2xl max-w-md text-center\">\n                            <h4 className=\"font-bold text-3xl mb-4\">{activeStory.text}</h4>\n                            <div className=\"flex justify-center gap-4\">\n                                <button onClick={() => handleStoryChoice(activeStory.saveChoice.consequence)} className=\"p-4 bg-brand-teal text-white rounded-lg text-lg\">{activeStory.saveChoice.text}</button>\n                                <button onClick={() => handleStoryChoice(activeStory.spendChoice.consequence)} className=\"p-4 bg-brand-magenta text-white rounded-lg text-lg\">{activeStory.spendChoice.text}</button>\n                            </div>\n                        </div>\n                    </div>\n                )\n             );\n            case 'win': return (\n                <div className={baseClasses}>\n                    <h3 className=\"text-4xl font-bold text-green-400\">ניצחת!</h3>\n                    <p className=\"text-xl mt-4 max-w-lg text-center\">כל הכבוד! בזכות התמקדות במטרות, השלמתם את כל השלבים!</p>\n                    <button onClick={() => { setCurrentLevel(0); setGameState('intro'); }} className=\"mt-6 bg-brand-teal font-bold py-3 px-6 rounded-lg text-xl\">שחק שוב</button>\n                </div>\n            );\n            case 'gameOver': return (\n                <div className={baseClasses}>\n                    <h3 className=\"text-4xl font-bold text-red-500\">המשחק נגמר</h3>\n                    <p className=\"text-xl mt-4 max-w-lg text-center\">לא נורא, נסו שוב! לפעמים צריך כמה נסיונות כדי להצליח.</p>\n                    <button onClick={() => startLevel(currentLevel)} className=\"mt-6 bg-brand-magenta font-bold py-3 px-6 rounded-lg text-xl\">נסה שוב (שלב {currentLevel + 1})</button>\n                </div>\n            );\n            default: return null;\n        }\n    };\n\n    return (\n        <ModuleView title={title} onBack={onBack}>\n            <div className=\"bg-white/40 p-2 rounded-2xl\">\n                <div className=\"relative w-full aspect-[2/1.5] max-w-[800px] mx-auto\">\n                    <canvas ref={canvasRef} width=\"800\" height=\"600\" className=\"w-full h-full bg-blue-100 rounded-lg\"></canvas>\n                    {renderOverlay()}\n                </div>\n            </div>\n        </ModuleView>\n    );\n};\n\nexport default SmallDecisionsModule;","import React, { useState, useEffect } from 'react';\nimport Header from './components/Header';\nimport ModuleCard from './components/ModuleCard';\nimport { Module } from './types';\nimport BudgetModule from './components/modules/BudgetModule';\nimport SalaryModule from './components/modules/SalaryModule';\nimport RightsModule from './components/modules/RightsModule';\nimport InterestModule from './components/modules/InterestModule';\nimport OverdraftModule from './components/modules/OverdraftModule';\nimport ExpensesModule from './components/modules/ExpensesModule';\nimport ResearchModule from './components/modules/ResearchModule';\nimport FinalExam from './components/FinalExam';\nimport LinksModule from './components/modules/LinksModule';\n// FIX: SelfEmployedModule now has a default export.\nimport SelfEmployedModule from './components/modules/SelfEmployedModule';\nimport LandingPage from './components/LandingPage';\nimport PlaceholderModule from './components/PlaceholderModule';\nimport MainLandingPage from './components/MainLandingPage';\nimport InstructorsPage from './components/InstructorsPage';\nimport ParentsPage from './components/ParentsPage';\nimport LoginPage from './components/LoginPage';\nimport StoryOfMoneyModule from './components/modules/StoryOfMoneyModule';\nimport MoneyAndMeModule from './components/modules/MoneyAndMeModule';\nimport HowMuchCostModule from './components/modules/HowMuchCostModule';\nimport MonopoliesModule from './components/modules/MonopoliesModule';\nimport SmartConsumerismModule from './components/modules/SmartConsumerismModule';\nimport RelationshipsMoneyModule from './components/modules/RelationshipsMoneyModule';\nimport HowToEarnModule from './components/modules/HowToEarnModule';\nimport TimeManagementModule from './components/modules/TimeManagementModule';\nimport PublicSpeakingModule from './components/modules/PublicSpeakingModule';\nimport BuildBusinessModule from './components/modules/BuildBusinessModule';\nimport HatsarModelModule from './components/modules/HatsarModelModule';\nimport FutureManagersChallengeModule from './components/modules/FutureManagersChallengeModule';\nimport { BudgetIcon, SalaryIcon, InterestIcon, OverdraftIcon, ExpensesIcon, ResearchIcon, LockIcon, TrophyIcon, RightsIcon, LinksIcon, SelfEmployedIcon, TimeIcon, PodiumIcon, BusinessIcon, PiggyBankIcon, HeartIcon, CoinIcon, GlobeIcon, StarIcon, StoreIcon } from './components/icons/Icons';\nimport WhereMoneyComesFromModule from './components/modules/kisonim/WhereMoneyComesFromModule';\nimport NeedsVsWantsModule from './components/modules/kisonim/NeedsVsWantsModule';\nimport SavingsAdventureModule from './components/modules/kisonim/SavingsAdventureModule';\nimport MagicStoreModule from './components/modules/kisonim/MagicStoreModule';\nimport JarBankModule from './components/modules/kisonim/JarBankModule';\nimport WorldTourModule from './components/modules/kisonim/WorldTourModule';\nimport AdSecretsModule from './components/modules/kisonim/AdSecretsModule';\nimport EarningMissionsModule from './components/modules/kisonim/EarningMissionsModule';\nimport ColorfulMarketModule from './components/modules/kisonim/ColorfulMarketModule';\nimport CoinsVsBillsModule from './components/modules/kisonim/CoinsVsBillsModule';\nimport PowerOfGivingModule from './components/modules/kisonim/PowerOfGivingModule';\nimport SmallDecisionsModule from './components/modules/kisonim/SmallDecisionsModule';\n\n// --- Colorful Icons for Kisonim Program ---\nconst KisonimSalaryIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"a\" x1=\"32\" x2=\"32\" y1=\"8\" y2=\"56\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#01b2cf\" offset=\"0\"/><stop stopColor=\"#00b1a6\" offset=\"1\"/></linearGradient></defs><rect width=\"48\" height=\"48\" x=\"8\" y=\"8\" fill=\"url(#a)\" rx=\"6\" ry=\"6\"/><path fill=\"#fff\" d=\"M24 20h16v4H24zM24 28h16v4H24zM24 36h10v4H24z\"/><path fill=\"#fff\" d=\"M40 40a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm-2 5h-2v2h2v-2zm2-1h-2v-2h2v2z\"/></svg> );\nconst KisonimHeartIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"b\" x1=\"32\" x2=\"32\" y1=\"12\" y2=\"55\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#f9a8d4\" offset=\"0\"/><stop stopColor=\"#d52963\" offset=\"1\"/></linearGradient></defs><path fill=\"url(#b)\" d=\"M32 55.8l-3-2.7C14.2 39.5 6 32.3 6 23.8A11.8 11.8 0 0 1 17.8 12c3.5 0 6.8 1.6 9 4.2l5.2 5.2.2-.2c2.2-2.6 5.5-4.2 9-4.2A11.8 11.8 0 0 1 58 23.8c0 8.5-8.2 15.7-23 29.3z\"/><path fill=\"#fff\" fillOpacity=\".3\" d=\"M19 21a3 3 0 0 1 3-3 3.5 3.5 0 0 1 3.5 3.5c0 2-2 3.5-3.5 4.5s-3 .5-3-1z\"/></svg> );\nconst KisonimPiggyBankIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"c\" x1=\"34\" x2=\"34\" y1=\"18\" y2=\"50\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#fb7185\" offset=\"0\"/><stop stopColor=\"#d52963\" offset=\"1\"/></linearGradient><radialGradient id=\"d\" cx=\"0\" cy=\"0\" r=\"1\" gradientTransform=\"matrix(0 30 -22.5 0 32 24)\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#ffc107\" offset=\"0\"/><stop stopColor=\"#ff8f00\" offset=\"1\"/></radialGradient></defs><rect width=\"48\" height=\"32\" x=\"8\" y=\"18\" fill=\"url(#c)\" rx=\"16\" ry=\"16\"/><circle cx=\"48\" cy=\"26\" r=\"5\" fill=\"#f472b6\"/><rect width=\"4\" height=\"10\" x=\"18\" y=\"46\" fill=\"#be185d\" rx=\"2\" ry=\"2\"/><rect width=\"4\" height=\"10\" x=\"42\" y=\"46\" fill=\"#be185d\" rx=\"2\" ry=\"2\"/><path d=\"M12 28a8 8 0 0 1 8-8\" fill=\"none\" stroke=\"#be185d\" strokeWidth=\"4\"/><circle cx=\"32\" cy=\"24\" r=\"15\" fill=\"url(#d)\"/><path fill=\"#fff\" d=\"M32 15c-3.3 0-6 4-6 9s2.7 9 6 9 6-4 6-9-2.7-9-6-9zm0 15a3 3 0 0 1-3-3v-6a3 3 0 0 1 6 0v6a3 3 0 0 1-3 3z\"/></svg> );\nconst KisonimStoreIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#01b2cf\" d=\"M56 58H8a4 4 0 0 1-4-4V24h56v30a4 4 0 0 1-4 4z\"/><path fill=\"#fff\" d=\"M60 24H4l-4-10h64z\"/><path d=\"M60 14l-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3-1.1 3-1.1-3L4 14\" fill=\"#d52963\"/><rect width=\"40\" height=\"18\" x=\"12\" y=\"28\" fill=\"#81d4fa\" rx=\"2\" ry=\"2\"/><rect width=\"10\" height=\"30\" x=\"27\" y=\"28\" fill=\"#e0f2fe\" rx=\"1\" ry=\"1\"/><circle cx=\"24\" cy=\"50\" r=\"2\" fill=\"#d52963\"/><circle cx=\"40\" cy=\"50\" r=\"2\" fill=\"#d52963\"/></svg> );\nconst KisonimBudgetIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#00b1a6\" d=\"M32 8a24 24 0 0 0 0 48V8z\"/><path fill=\"#d52963\" d=\"M32 8a24 24 0 0 0-17 41l17-17V8z\"/><path fill=\"#01b2cf\" d=\"M32 32v24a24 24 0 0 0 17-7z\"/><circle cx=\"32\" cy=\"32\" r=\"8\" fill=\"#fff\"/></svg> );\nconst KisonimGlobeIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"e\" x1=\"32\" x2=\"32\" y1=\"6\" y2=\"58\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#81d4fa\" offset=\"0\"/><stop stopColor=\"#01b2cf\" offset=\"1\"/></linearGradient></defs><circle cx=\"32\" cy=\"32\" r=\"26\" fill=\"url(#e)\"/><path fill=\"#a5d6a7\" d=\"M42 18a10 10 0 0 0-10-10c-5.5 0-10 4.5-10 10a12 12 0 0 0 12 12c8 0 12-8 12-12zm-2 18c-4 4-10 6-16 4-6-2-8-8-6-14s8-8 14-6 8 8 6 14z\"/><path fill=\"#fff\" fillOpacity=\".5\" d=\"M22 28a10 10 0 0 1 10-10c1.5 0 3 .3 4.3.9A12 12 0 0 0 22 28z\"/></svg> );\nconst KisonimResearchIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"f\" x1=\"28\" x2=\"28\" y1=\"10\" y2=\"46\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#01b2cf\" offset=\"0\"/><stop stopColor=\"#d52963\" offset=\"1\"/></linearGradient></defs><circle cx=\"28\" cy=\"28\" r=\"18\" fill=\"url(#f)\"/><circle cx=\"28\" cy=\"28\" r=\"12\" fill=\"#fff\"/><path d=\"M40 40l14 14\" stroke=\"#1b2550\" strokeWidth=\"8\" strokeLinecap=\"round\"/><path fill=\"#fff\" fillOpacity=\".3\" d=\"M28 16a12 12 0 0 0-8.5 3.5 12 12 0 0 0 17 8.5 12 12 0 0 0-8.5-12z\"/></svg> );\nconst KisonimStarIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"g\" x1=\"32\" x2=\"32\" y1=\"2\" y2=\"62\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#ffca28\" offset=\"0\"/><stop stopColor=\"#ff8f00\" offset=\"1\"/></linearGradient></defs><path fill=\"url(#g)\" d=\"M32 2l-7.5 22.8H2l19.5 14L14 62l18-14 18 14-7.5-23.2L62 24.8H40z\"/><path fill=\"#fff\" fillOpacity=\".3\" d=\"M32 2v34l-11.2 7.7 2.1-12.5-9-6.5h11.6z\"/></svg> );\nconst KisonimExpensesIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"h\" x1=\"32\" x2=\"32\" y1=\"12\" y2=\"36\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#81d4fa\" offset=\"0\"/><stop stopColor=\"#01b2cf\" offset=\"1\"/></linearGradient></defs><circle cx=\"18\" cy=\"52\" r=\"5\" fill=\"#1b2550\"/><circle cx=\"46\" cy=\"52\" r=\"5\" fill=\"#1b2550\"/><path d=\"M10 12h50l-8 24H18z\" fill=\"url(#h)\"/><path d=\"M14 16h40l-6 18H20z\" fill=\"#e0f7fa\"/><circle cx=\"22\" cy=\"25\" r=\"3\" fill=\"#d52963\"/><circle cx=\"32\" cy=\"25\" r=\"3\" fill=\"#ffc107\"/><circle cx=\"42\" cy=\"25\" r=\"3\" fill=\"#4caf50\"/><path d=\"M14 40h34\" stroke=\"#1b2550\" strokeWidth=\"4\" strokeLinecap=\"round\"/></svg> );\nconst KisonimCoinIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><radialGradient id=\"i\" cx=\"0\" cy=\"0\" r=\"1\" gradientTransform=\"matrix(0 20 -20 0 32 38)\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#e0e0e0\" offset=\"0\"/><stop stopColor=\"#9e9e9e\" offset=\"1\"/></radialGradient><radialGradient id=\"j\" cx=\"0\" cy=\"0\" r=\"1\" gradientTransform=\"matrix(0 20 -20 0 32 26)\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#ffecb3\" offset=\"0\"/><stop stopColor=\"#ffc107\" offset=\"1\"/></radialGradient></defs><circle cx=\"32\" cy=\"38\" r=\"20\" fill=\"url(#i)\"/><path d=\"M32 29a9 9 0 0 0 0 18\" fill=\"none\" stroke=\"#fff\" strokeWidth=\"2\"/><circle cx=\"32\" cy=\"26\" r=\"20\" fill=\"url(#j)\"/><path fill=\"#c77700\" d=\"M32 17c-4 0-7 3-7 5s1 4 3 5v-3a2 2 0 1 1 4 0v3c2-1 3-3 3-5s-3-5-3-5zm-2 11h4v2h-4z\"/></svg> );\nconst KisonimPodiumIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"#ffecb3\" d=\"M24 22c-5 0-8 4-8 8s3 8 8 8c4 0 7-3 8-6h-8v-4h12c0-5-4-6-8-6z\"/><path fill=\"#d52963\" d=\"M50 38a12 12 0 0 1-12-12c0-5 3-9 7-11-5-1-10 2-10 8 0 7 6 12 13 12a13 13 0 0 0 2-1z\"/><path fill=\"#f4a2b3\" d=\"M22 22h-4v20h4z\"/><path fill=\"#81d4fa\" d=\"M42 22h4v20h-4z\"/></svg> );\nconst KisonimBusinessIcon: React.FC<{ className?: string }> = ({ className }) => ( <svg className={className} viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\"><defs><radialGradient id=\"k\" cx=\"0\" cy=\"0\" r=\"1\" gradientTransform=\"matrix(0 40 -32 0 32 32)\" gradientUnits=\"userSpaceOnUse\"><stop stopColor=\"#fff\" offset=\".5\"/><stop stopColor=\"#ffc107\" offset=\"1\"/></radialGradient></defs><path d=\"M32 58C19.8 58 10 48.2 10 36s9.8-22 22-22 22 9.8 22 22-9.8 22-22 22z\" fill=\"#ffc107\"/><path d=\"M32 26V10\" stroke=\"#ffc107\" strokeWidth=\"8\" strokeLinecap=\"round\"/><circle cx=\"32\" cy=\"32\" r=\"20\" fill=\"url(#k)\"/><path d=\"M24 10h16\" stroke=\"#ffc107\" strokeWidth=\"8\" strokeLinecap=\"round\"/></svg> );\n\n\nconst hachamBakisModules: Module[] = [\n  {\n    id: 'budget',\n    title: 'ניהול תקציב ראשון',\n    description: 'בנו תקציב חודשי מאוזן באמצעות משימות אינטראקטיביות, ולמדו לנתח את ההוצאות שלכם. בסיום, הפיקו דו\"ח PDF מסכם.',\n    icon: BudgetIcon,\n    component: BudgetModule,\n    completionGoal: 'השלמת כל סעיפי ההוצאה הנדרשים והפקת דו\"ח.'\n  },\n  {\n    id: 'salary',\n    title: 'פענוח תלוש שכר',\n    description: 'גלו מה מסתתר בתלוש השכר שלכם! לחצו על כל רכיב בתלוש אינטראקטיבי כדי לקבל הסבר, ובחנו את הידע שלכם.',\n    icon: SalaryIcon,\n    component: SalaryModule,\n    completionGoal: 'יש להשיג ציון של 80% ומעלה בבוחן המסכם.'\n  },\n  {\n    id: 'rights',\n    title: 'זכויות עובדים',\n    description: 'הפכו ל\"מגני זכויות\"! פתרו \"תיקים\" משפטיים מהחיים האמיתיים, עזרו לדמויות לקבל את מה שמגיע להן, ולמדו על זכויותיכם בעבודה.',\n    icon: RightsIcon,\n    component: RightsModule,\n    completionGoal: 'יש לפתור נכון לפחות 8 מתוך 10 תיקים.'\n  },\n  {\n    id: 'selfEmployed',\n    title: 'שכירים ועצמאיים',\n    description: 'גלו את ההבדלים בין שכיר לעצמאי דרך משחקי מיון, בחנו תרחישים עסקיים, נתחו הוצאות של עסק, ובחנו את עצמכם עם מודל SWOT.',\n    icon: SelfEmployedIcon,\n    component: SelfEmployedModule,\n    completionGoal: 'השלמת כל חמשת הפרקים במודול.'\n  },\n  {\n    id: 'links',\n    title: 'מסמכים וקישורים שימושיים',\n    description: 'מאגר קישורים לאתרים, מחשבונים וכלים פיננסיים שיעזרו לכם להתנהל נכון עם הכסף שלכם. כולל בוחן קצר.',\n    icon: LinksIcon,\n    component: LinksModule,\n  },\n  {\n    id: 'interest',\n    title: 'חיסכון והשקעות',\n    description: 'צאו ל\"הרפתקה אל העושר\"! למדו מהי השקעה, גלו את כוחה של ריבית דריבית, התנסו בסימולטור מניות, ובחנו את הידע שלכם.',\n    icon: InterestIcon,\n    component: InterestModule,\n    completionGoal: 'יש להשיג ציון של 80% ומעלה בבוחן הידע.'\n  },\n  {\n    id: 'overdraft',\n    title: 'הסכנה שבמינוס (אוברדראפט)',\n    description: 'גלו מהו מינוס ואיך הוא תופח בעזרת סימולטור אינטראקטיבי. שאלו את היועץ הפיננסי שאלות ובחנו את הידע שלכם.',\n    icon: OverdraftIcon,\n    component: OverdraftModule,\n    completionGoal: 'יש להשיג ציון של 80% ומעלה בבוחן המסכם.'\n  },\n  {\n    id: 'expenses',\n    title: 'איך מנהלים הוצאות?',\n    description: 'התמודדו עם \"אתגר מיון ההוצאות\"! למדו על סוגי הוצאות ומודל חצ\"ר בחמישה שלבים, שחקו וסווגו הוצאות, והשתמשו בסורק המחירים.',\n    icon: ExpensesIcon,\n    component: ExpensesModule,\n    completionGoal: 'השלמת שני משחקי המיון בהצלחה.'\n  },\n  {\n    id: 'research',\n    title: 'משימת למידת חקר',\n    description: 'הפכו לבלשים פיננסיים! הבינו מהי אינפלציה, איך היא משפיעה על הכסף שלכם, ותרגלו חקר כלכלי עצמאי ברשת.',\n    icon: ResearchIcon,\n    component: ResearchModule,\n    completionGoal: 'יש להשיג ציון של 80% ומעלה בבוחן הידע.'\n  },\n];\n\nconst maBakisModules: Module[] = [\n  {\n    id: 'story-of-money',\n    title: 'סיפורו של כסף',\n    description: 'גלו איך הכל התחיל! נצא למסע בזמן ונלמד על המצאת הכסף, סחר חליפין, ואיך הוא התפתח והפך למה שאנחנו מכירים היום.',\n    icon: SalaryIcon,\n    component: StoryOfMoneyModule,\n    completionGoal: 'השלמת בוחן הידע בהצלחה.',\n  },\n  {\n    id: 'money-and-me',\n    title: 'הכסף ואני',\n    description: 'בואו נכיר את מערכת היחסים האישית שלכם עם כסף. נלמד להציב מטרות, לתכנן תקציב, להבין מהו מינוס ואיך אפשר להרוויח את דמי הכיס הראשונים.',\n    icon: BudgetIcon,\n    component: MoneyAndMeModule,\n    completionGoal: 'השלמת בוחן הידע בהצלחה.',\n  },\n  {\n    id: 'how-much-cost',\n    title: 'כמה זה עולה לי?',\n    description: 'הצטרפו לחווית קניות וירטואלית! נלמד לקבל החלטות כלכליות חכמות, להתמודד עם פיתויים, ונבין איך המחירים נקבעים בחנויות.',\n    icon: ExpensesIcon,\n    component: HowMuchCostModule,\n    completionGoal: 'השלמת בוחן הידע בהצלחה.',\n  },\n  {\n    id: 'hatsar-model',\n    title: 'מחשבון מודל החצ״ר',\n    description: 'יחידת תרגול אינטראקטיבית לקבלת החלטות קנייה לפי סדר עדיפויות: חייב, צריך, רוצה.',\n    icon: StarIcon,\n    component: HatsarModelModule,\n    completionGoal: 'השלמת סימולציית קבלת החלטה אחת לפחות.',\n  },\n  {\n    id: 'future-managers-5000',\n    title: 'מנהלי העתיד: אתגר ה-5,000',\n    description: 'לוח בקרה כיתתי לתרגול ניהול תקציב קבוצתי, חקר מחירים, ועמידה מול בלת״מים לאורך החודש.',\n    icon: StoreIcon,\n    component: FutureManagersChallengeModule,\n    completionGoal: 'יש להשלים הזנת כל 5 הקטגוריות עבור צוות אחד לפחות.',\n  },\n  {\n    id: 'monopolies',\n    title: 'מונופולים בישראל',\n    description: 'מי שולט בשוק? נגלה מהו מונופול, איך הוא משפיע על המחירים שכולנו משלמים, ונלמד לזהות את השחקנים הגדולים במשק.',\n    icon: SelfEmployedIcon,\n    component: MonopoliesModule,\n    completionGoal: 'השלמת חידון המונופולים בהצלחה.',\n  },\n  {\n    id: 'smart-consumerism',\n    title: 'צרכנות נבונה',\n    description: 'אל תהיו פראיירים! במודול זה נלמד להיות צרכנים חכמים: נשווה מחירים, נזהה מבצעים משתלמים, ונבין איך לקנות יותר בפחות.',\n    icon: ResearchIcon,\n    component: SmartConsumerismModule,\n    completionGoal: 'השלמת כל חמשת הפרקים.',\n  },\n  {\n    id: 'relationships-money',\n    title: 'מערכות יחסים וכסף',\n    description: 'כסף הוא לא רק מספרים. נחקור איך כסף משפיע על מערכות היחסים שלנו עם חברים ומשפחה, ונרכוש כלים לתקשורת פתוחה ובריאה.',\n    icon: RightsIcon,\n    component: RelationshipsMoneyModule,\n    completionGoal: 'השלמת כל שלושת הפרקים.',\n  },\n  {\n    id: 'how-to-earn',\n    title: 'איך להרוויח כסף?',\n    description: 'רוצים להגדיל את דמי הכיס? גלו את החוזקות שלכם, קבלו רעיונות לעסקים קטנים, והתנסו בהתמודדות עם הלקוח הראשון שלכם.',\n    icon: InterestIcon,\n    component: HowToEarnModule,\n    completionGoal: 'השלמת בוחן הידע.',\n  },\n  {\n    id: 'time-management',\n    title: 'ניהול זמן (זמן=כסף)',\n    description: 'למדו טכניקות לניהול זמן חכם, קבעו סדרי עדיפויות, והבינו את הקשר בין זמן לכסף דרך משחקים וסימולציות.',\n    icon: TimeIcon,\n    component: TimeManagementModule,\n    completionGoal: 'השלמת בוחן הסיום.',\n  },\n  {\n    id: 'public-speaking',\n    title: 'עמידה מול קהל',\n    description: 'הביטחון לדבר מול אנשים הוא כלי להצלחה. נתרגל עמידה מול קהל, נלמד איך לשכנע, ונבין איך זה קשור ליכולת שלנו \"למכור\" רעיונות.',\n    icon: PodiumIcon,\n    component: PublicSpeakingModule,\n    completionGoal: 'השלמת מחוון ההצלחה.',\n  },\n  {\n    id: 'build-business',\n    title: 'איך בונים עסק?',\n    description: 'חלמתם פעם להקים עסק? נצא למסע השראה בעולם היזמות, נלמד איך לזהות הזדמנויות ולהפוך רעיון למציאות.',\n    icon: BusinessIcon,\n    component: BuildBusinessModule,\n    completionGoal: 'השלמת התוכנית העסקית.',\n  },\n  {\n    id: 'useful-docs',\n    title: 'מסמכים שימושיים',\n    description: 'כל המסמכים והקישורים שאתם צריכים במקום אחד. מטפסים חשובים ועד לאתרים שימושיים שיעזרו לכם להתנהל בעולם הפיננסי.',\n    icon: LinksIcon,\n    component: LinksModule,\n  },\n];\n\nconst kisonimModules: Module[] = [\n  {\n    id: 'where-money-comes-from',\n    title: 'מאיפה בא הכסף?',\n    description: 'נצא להרפתקה ונבין איך מבוגרים \"משיגים\" כסף. נשחק במשחק סימולציה בו כל אחד בוחר מקצוע ומקבל \"משכורת\" ראשונה.',\n    icon: KisonimSalaryIcon,\n    component: WhereMoneyComesFromModule,\n    completionGoal: 'יש להתאים את כל הכלים לבעלי המקצוע.',\n  },\n  {\n    id: 'needs-vs-wants',\n    title: 'משחק צרכים ורצונות',\n    description: 'מה חייבים ומה סתם רוצים? נשחק במשחק מיון צבעוני ונלמד להבדיל בין דברים שאנחנו באמת צריכים לדברים שפשוט כיף לקבל.',\n    icon: KisonimHeartIcon,\n    component: NeedsVsWantsModule,\n    completionGoal: 'יש לסיים את משחק המיון בהצלחה.',\n  },\n  {\n    id: 'savings-adventure',\n    title: 'הרפתקת החיסכון',\n    description: 'עזרו לסנאי המתוק לאסוף מטבעות זהב! נלמד לחסוך כסף למטרה גדולה וכיפית, כמו צעצוע חדש או טיול בפארק.',\n    icon: KisonimPiggyBankIcon,\n    component: SavingsAdventureModule,\n    completionGoal: 'יש לאסוף את כל 10 הבלוטים.',\n  },\n  {\n    id: 'magic-store',\n    title: 'חנות המכולת הקסומה',\n    description: 'יש לכם רשימת קניות ותקציב מוגבל. האם תצליחו לקנות את כל מה שצריך מבלי לבזבז יותר מדי? משחק סימולציה מהנה.',\n    icon: KisonimStoreIcon,\n    component: MagicStoreModule,\n    completionGoal: 'יש להשלים את הקנייה בהצלחה.',\n  },\n  {\n    id: 'jar-bank',\n    title: 'בנק הצנצנות',\n    description: 'נלמד לחלק את דמי הכיס שלנו לשלוש צנצנות קסומות: בזבוזים, חיסכון ונתינה. דרך פשוטה לנהל את הכסף הראשון שלנו.',\n    icon: KisonimBudgetIcon,\n    component: JarBankModule,\n    completionGoal: 'יש לנצח במשחק איקס עיגול.',\n  },\n  {\n    id: 'world-tour',\n    title: 'מסע עולמי: מטבעות וארצות',\n    description: 'בואו נכיר את הכסף של מדינות אחרות! נגלה איך נראים הדולר, האירו והיין, ונלמד על התרבויות שמאחוריהם.',\n    icon: KisonimGlobeIcon,\n    component: WorldTourModule,\n    completionGoal: 'יש להתאים את כל המטבעות למדינות.',\n  },\n  {\n    id: 'ad-secrets',\n    title: 'סודות הפרסומות',\n    description: 'למה אנחנו פתאום רוצים את הצעצוע שראינו בטלוויזיה? נגלה את הטריקים של הפרסומות ונלמד איך לקבל החלטות בעצמנו.',\n    icon: KisonimResearchIcon,\n    component: AdSecretsModule,\n    completionGoal: 'יש לגלות את כל 4 סודות הפרסום.',\n  },\n  {\n    id: 'earning-missions',\n    title: 'משימות להרוויח כסף',\n    description: 'נצא למשימות מיוחדות בבית ובסביבה (כמו סידור החדר או עזרה בגינה) ונבין איך עבודה שווה כסף.',\n    icon: KisonimStarIcon,\n    component: EarningMissionsModule,\n    completionGoal: 'יש להשלים 10 משימות.',\n  },\n  {\n    id: 'colorful-market',\n    title: 'השוק הצבעוני',\n    description: 'בואו נקים שוק! כל ילד יקבל דוכן למכור ולקנות מוצרים. נלמד על מחירים, משא ומתן, ואיך להיות מוכרים וקונים חכמים.',\n    icon: KisonimExpensesIcon,\n    component: ColorfulMarketModule,\n    completionGoal: 'יש להשלים 3 סיבובי מכירה.',\n  },\n  {\n    id: 'coins-vs-bills',\n    title: 'מטבעות או שטרות?',\n    description: 'כמה שווה כל מטבע? וכמה כל שטר? נשחק במשחק זיכרון ובתרגילים כיפיים כדי להכיר את הכסף שלנו מקרוב.',\n    icon: KisonimCoinIcon,\n    component: CoinsVsBillsModule,\n    completionGoal: 'יש להשלים את כל סבבי ההתאמה.',\n  },\n  {\n    id: 'power-of-giving',\n    title: 'כוחה של נתינה',\n    description: 'כסף יכול גם לעשות טוב לאחרים! נלמד על חשיבות התרומה והעזרה, ונחשוב יחד איך אנחנו יכולים לעזור לקהילה שלנו.',\n    icon: KisonimPodiumIcon,\n    component: PowerOfGivingModule,\n    completionGoal: 'יש לבצע בחירה אחת.',\n  },\n  {\n    id: 'small-decisions',\n    title: 'סיפורי החלטות',\n    description: 'דרך סיפורים אינטראקטיביים נראה איך החלטה קטנה היום (כמו לקנות ממתק או לחסוך) יכולה להשפיע על המחר שלנו.',\n    icon: KisonimBusinessIcon,\n    component: SmallDecisionsModule,\n    completionGoal: 'יש להגיע לסוף הסיפור.',\n  },\n];\n\nconst programModules: Record<string, Module[]> = {\n  'hacham-bakis': hachamBakisModules,\n  'ma-bakis': maBakisModules,\n  'kisonim': kisonimModules,\n};\n\ntype AppState = 'user_selection' | 'student_login' | 'instructor_login' | 'parent_login' | 'program_selection' | 'instructors_page' | 'parents_page';\n\nconst App: React.FC = () => {\n  const [appState, setAppState] = useState<AppState>('user_selection');\n  const [selectedModule, setSelectedModule] = useState<Module | null>(null);\n  const [visitedModules, setVisitedModules] = useState<Set<string>>(new Set());\n  const [selectedProgram, setSelectedProgram] = useState<string | null>(null);\n\n  useEffect(() => {\n    const storedVisited = localStorage.getItem('visitedModules');\n    if (storedVisited) {\n      setVisitedModules(new Set(JSON.parse(storedVisited)));\n    }\n  }, []);\n\n  const handleSelectProgram = (programId: string) => {\n    setSelectedProgram(programId);\n  };\n  \n  const handleSelectModule = (module: Module) => {\n    setSelectedModule(module);\n  };\n\n  const handleBackToUserSelection = () => {\n    setAppState('user_selection');\n    setSelectedProgram(null);\n  };\n  \n  const handleBackToProgramSelection = () => {\n    setSelectedProgram(null);\n    setAppState('program_selection');\n  }\n\n  const handleStudentLogin = (grade?: string) => {\n    if (!grade) {\n        setAppState('program_selection');\n        setSelectedProgram(null); // Ensure no program is pre-selected\n        return;\n    }\n\n    let programId = '';\n    const highSchool = ['ט', 'י', 'י\"א', 'י\"ב'];\n    const middleSchool = ['ה', 'ו', 'ז', 'ח'];\n    const elementarySchool = ['א', 'ב', 'ג', 'ד'];\n\n    if (highSchool.includes(grade)) {\n        programId = 'hacham-bakis';\n    } else if (middleSchool.includes(grade)) {\n        programId = 'ma-bakis';\n    } else if (elementarySchool.includes(grade)) {\n        programId = 'kisonim';\n    }\n\n    if (programId) {\n        setSelectedProgram(programId);\n        // Fall through to render the module grid directly\n    } else {\n        alert('אנא בחר כיתה חוקית.');\n    }\n  };\n\n  const handleBackFromModule = () => {\n    setSelectedModule(null);\n  };\n\n  const handleModuleComplete = (moduleId: string) => {\n    setVisitedModules(prev => {\n      const newVisited = new Set(prev);\n      newVisited.add(moduleId);\n      localStorage.setItem('visitedModules', JSON.stringify(Array.from(newVisited)));\n      return newVisited;\n    });\n  };\n\n  const renderContent = () => {\n    // If a program is selected, show its modules\n    if (selectedProgram) {\n         const currentProgramModules = programModules[selectedProgram] || [];\n         const requiredModules = currentProgramModules.filter(m => m.completionGoal);\n         \n\n         if (selectedModule) {\n            const ModuleComponent = selectedModule.component;\n            return (\n                <ModuleComponent \n                onBack={handleBackFromModule} \n                title={selectedModule.title}\n                onComplete={() => handleModuleComplete(selectedModule.id)}\n                />\n            );\n         }\n\n        const completedRequiredCount = requiredModules.filter(m => visitedModules.has(m.id)).length;\n        const progress = requiredModules.length > 0 ? (completedRequiredCount / requiredModules.length) * 100 : 0;\n        const canTakeExam = progress >= 80;\n\n\n        return (\n            <>\n                <Header />\n                <button \n                  onClick={handleBackToProgramSelection}\n                  className=\"mb-8 w-full sm:w-auto bg-brand-magenta hover:bg-pink-700 text-white font-bold py-2.5 sm:py-3 px-5 sm:px-8 text-base sm:text-2xl rounded-full flex items-center justify-center transition-colors duration-300\"\n                >\n                   <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 ml-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H15a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n                    </svg>\n                  חזרה לבחירת תוכנית\n                </button>\n                <main className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 ${selectedProgram === 'kisonim' ? 'kisonim-grid' : ''}`}>\n                  {currentProgramModules.map(module => (\n                    <ModuleCard\n                      key={module.id}\n                      title={module.title}\n                      description={module.description}\n                      icon={module.icon}\n                      onClick={() => handleSelectModule(module)}\n                      isVisited={visitedModules.has(module.id)}\n                      completionGoal={module.completionGoal}\n                    />\n                  ))}\n                   <div className=\"md:col-span-2 lg:col-span-3\">\n                        {requiredModules.length > 0 && (\n                            <div className=\"mb-4 bg-white/60 p-4 rounded-2xl shadow-lg\">\n                                <h4 className=\"font-bold text-2xl text-center mb-2\">התקדמות לקראת בוחן הסיום</h4>\n                                <div className=\"w-full bg-gray-200 rounded-full h-8 border-2 border-white/50\">\n                                    <div \n                                        className=\"bg-brand-teal h-full rounded-full flex items-center justify-center text-white font-bold text-xl transition-all duration-500\"\n                                        style={{ width: `${progress}%` }}\n                                    >\n                                        {Math.round(progress)}%\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                       \n                       {(selectedProgram === 'hacham-bakis' || selectedProgram === 'ma-bakis' || selectedProgram === 'kisonim') && (\n                           <button\n                            onClick={() => handleSelectModule({ id: 'final-exam', title: 'בוחן סיום', description: '', icon: TrophyIcon, component: FinalExam })}\n                            disabled={!canTakeExam}\n                            className={`w-full p-4 md:p-6 rounded-3xl text-white font-bold text-lg sm:text-3xl transition-all duration-300 flex items-center justify-center gap-2 sm:gap-4 ${!canTakeExam ? 'bg-gray-400 cursor-not-allowed' : 'bg-brand-magenta hover:bg-pink-700 transform hover:-translate-y-1'}`}\n                          >\n                            <TrophyIcon className=\"w-8 h-8\"/>\n                            <span>\n                                {canTakeExam ? \"כל הכבוד! אפשר לגשת לבוחן הסיום\" : \"עליכם להשלים 80% מהנושאים כדי לגשת לבוחן\"}\n                            </span>\n                            {!canTakeExam && <LockIcon className=\"w-8 h-8\"/>}\n                          </button>\n                       )}\n                  </div>\n                </main>\n            </>\n        );\n    }\n    \n    // Router for initial states\n    switch(appState) {\n        case 'user_selection':\n            return (\n                <MainLandingPage \n                    onSelectStudents={() => setAppState('student_login')}\n                    onSelectInstructors={() => setAppState('instructor_login')}\n                    onSelectParents={() => setAppState('parent_login')}\n                />\n            );\n        case 'student_login':\n            return (\n                <LoginPage\n                    userType=\"תלמידים\"\n                    description=\"ברוכים הבאים! בחרו את כיתתכם כדי שניקח אתכם לתוכנית הלמידה המתאימה לכם, או היכנסו כאורחים כדי לבחור תוכנית בעצמכם.\"\n                    icon={RightsIcon}\n                    onLogin={handleStudentLogin}\n                    onBack={handleBackToUserSelection}\n                    showGradeSelector={true}\n                />\n            );\n        case 'instructor_login':\n            return (\n                <LoginPage\n                    userType=\"מדריכים\"\n                    description=\"כאן תוכלו למצוא מערכי שיעור, עזרים, סרטונים ולעקוב אחר התקדמות הקבוצות שלכם.\"\n                    icon={PodiumIcon}\n                    onLogin={() => setAppState('instructors_page')}\n                    onBack={handleBackToUserSelection}\n                />\n            );\n        case 'parent_login':\n             return (\n                <LoginPage\n                    userType=\"הורים\"\n                    description=\"עקבו אחר תהליך הלמידה של ילדכם וקבלו כלים ועזרים להמשך החינוך הפיננסי בבית.\"\n                    icon={HeartIcon}\n                    onLogin={() => setAppState('parents_page')}\n                    onBack={handleBackToUserSelection}\n                />\n            );\n        case 'program_selection':\n             return (\n                <LandingPage \n                    onSelectProgram={handleSelectProgram} \n                    onBack={handleBackToUserSelection}\n                />\n            );\n        case 'instructors_page':\n            return <InstructorsPage onBack={handleBackToUserSelection} />;\n        case 'parents_page':\n            return <ParentsPage onBack={handleBackToUserSelection} />;\n        default:\n             return (\n                <MainLandingPage \n                    onSelectStudents={() => setAppState('student_login')}\n                    onSelectInstructors={() => setAppState('instructor_login')}\n                    onSelectParents={() => setAppState('parent_login')}\n                />\n            );\n    }\n  };\n  \n  return (\n    <div className=\"container mx-auto px-3 sm:px-4 py-4 sm:py-8\">\n        {renderContent()}\n    </div>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\n// Warn if API key is missing, but still render the app\nif (!process.env.API_KEY) {\n  console.warn(\n    '[smartkis] GEMINI_API_KEY is not set. AI-powered features will not work.\\n' +\n    'Create a .env file with GEMINI_API_KEY=your_key to enable them.'\n  );\n}\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error('Could not find root element to mount to');\n}\n\nconst root = ReactDOM.createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"],"names":["Header","jsxs","jsx","ModuleCard","title","description","Icon","onClick","isVisited","completionGoal","ModuleView","onBack","children","characters","initialExpenses","calculateIncomeTax","salary","characterName","tax","brackets","processedSalary","bracket","previousBracketLimit","taxableAmountInBracket","CREDIT_POINT_VALUE","creditPoints","taxCredit","finalTax","salaryDeductions","incomeTax","bituachLeumi","masBriut","lowerBracketLimit","upperBracketLimit","lowerPartAmount","upperPartAmount","pension","COLORS","categoryLinks","placeholders","termExplanations","categoryExplanations","Tooltip","content","UnforeseenEventModal","onClose","onResult","style","events","shuffledEvents","setShuffledEvents","useState","flippedIndex","setFlippedIndex","useEffect","handleCardClick","index","selectedEvent","event","CarQuestionnaireModal","step","setStep","answers","setAnswers","results","setResults","questions","handleAnswer","qIndex","answer","newAnswers","priceResult","typeResult","reliabilityResult","yearResult","consumptionResult","Fragment","opt","RentQuestionnaireModal","sizeResult","locationTypeResult","featuresResult","SupermarketModal","onSelect","supermarkets","s","ClothingStoreModal","stores","subscriptionOptions","SubscriptionsModal","onSave","initialSelected","setInitialSelected","currentOptions","setCurrentOptions","selected","setSelected","newSubName","setNewSubName","newSubPrice","setNewSubPrice","handleToggle","name","newSelected","item","handleSave","total","sum","sub","handleAddSubscription","newSub","prev","canSave","e","LicenseFeeExplanationModal","FuelCostExplanationModal","ExplanationModal","CarPurchaseModal","onPurchaseComplete","details","setDetails","model","adLink","year","km","fuelConsumption","hand","licensePlate","price","payments","setField","field","value","validationError","setValidationError","kmWarning","setKmWarning","priceWarning","setPriceWarning","monthlyPayment","setMonthlyPayment","getEstimatedPrice","yearNum","kmNum","age","avgKmPerYear","priceNum","estimatedPrice","years","annualInterestRate","totalInterest","totalCost","allFieldsFilled","handleConfirmPurchase","paymentNote","note","renderField","label","placeholder","setter","type","warning","v","InsuranceExplanationModal","slideIndex","setSlideIndex","slides","currentSlide","CarMaintenanceCalculatorModal","cost","setCost","drivingScale","setDrivingScale","result","setResult","handleCalculate","costNum","annualCost","monthlyCost","handleConfirm","CarMaintenanceExplanationModal","EntertainmentSimulatorModal","items","setItems","handleItemChange","id","handleAddItem","newItem","noteParts","AccountsCalculatorModal","handleAnswerChange","question","peopleNum","baseElectricity","baseWater","baseGas","baseMunicipal","monthlyTotal","monthlyPerPerson","breakdown","questionSet","q","avatarOptions","CreateCharacterModal","onCreate","setName","setSalary","setDescription","avatar","setAvatar","handleCreate","salaryNum","RentPurchaseModal","netIncome","city","size","rooms","floor","rent","setWarning","rentNum","baseNote","finalNote","AddCustomExpenseModal","onAdd","amount","setAmount","isYearly","setIsYearly","val","SummaryReportForPdf","character","totalUserExpenses","balance","allExpenses","deductions","userExpenses","ShareReportModal","isOpen","onDownload","onShare","onCopyLink","isProcessing","isCopied","canShare","ArrowIcon","className","BudgetModule","onComplete","rowRefs","useRef","activeModal","setActiveModal","modalPosition","setModalPosition","selectedCharacter","setSelectedCharacter","expenses","setExpenses","savingsPercentage","setSavingsPercentage","reportGenerated","setReportGenerated","isShareModalOpen","setIsShareModalOpen","setIsProcessing","setIsCopied","reportDataForPdf","setReportDataForPdf","reportRef","shareButtonRef","shareModalStyle","setShareModalStyle","setFuelConsumption","carDetails","setCarDetails","FUEL_PRICE_PER_LITER","insuranceInputString","setInsuranceInputString","clothingInputString","setClothingInputString","carPurchaseDetails","setCarPurchaseDetails","rentDetails","setRentDetails","accountsAnswers","setAccountsAnswers","entertainmentItems","setEntertainmentItems","selectedSubscriptions","setSelectedSubscriptions","maintenanceCostInput","setMaintenanceCostInput","handleOpenShareModal","rect","generatePdfDocument","element","canvas","imgData","pdf","pdfWidth","pdfHeight","imgProps","ratio","imgFinalWidth","imgFinalHeight","x","y","handleDownload","handleShare","blob","shareData","error","handleCopyLink","dataUri","insuranceItem","_a","clothingItem","_b","openModal","itemId","itemIdentifier","rowEl","ref","positionStyle","category","openExplanationModal","closeModal","handleAddCustomExpense","monthlyAmount","useMemo","totalDeductions","deductionExpenses","chartData","areAllExpensesFilled","requiredCategories","c","savingsAmount","newNote","prevExpenses","consumption","newAmount","monthlyDistance","litersNeeded","fuelItem","feesByGroup","priceGroupKey","feesForGroup","vehicleAge","ageIndex","finalFee","monthlyFee","handleSelectCharacter","handleExpenseChange","handleNoteChange","handleUnforeseenResult","unforeseenItem","updateBudgetFromModal","handleSaveSubscriptions","totalAmount","selectedNames","subsItem","handlePurchaseComplete","handleSaveMaintenance","maintenanceItem","handleSaveAccounts","char","rentItem","el","annual","monthly","noteWithoutAmount","noteText","hasLink","isReadOnly","mainNote","linkUrl","ResponsiveContainer","PieChart","Pie","percent","entry","Cell","RechartsTooltip","Legend","BudgetIcon","SalaryIcon","InterestIcon","OverdraftIcon","ExpensesIcon","ResearchIcon","RightsIcon","LinksIcon","SelfEmployedIcon","TimeIcon","PodiumIcon","BusinessIcon","LockIcon","TrophyIcon","PiggyBankIcon","HeartIcon","StarIcon","StoreIcon","BookOpenIcon","paySlipData","quizQuestions","CheckIcon","CrossIcon","InfoIcon","text","explanation","PaymentsTable","DeductionsTable","InfoRow","term","SalaryModule","quizState","setQuizState","currentQuestionIndex","setCurrentQuestionIndex","score","setScore","selectedAnswer","setSelectedAnswer","feedback","setFeedback","correctAnswer","handleNextQuestion","restartQuiz","renderQuiz","isCompleted","resultMessage","isCorrect","isSelected","buttonClass","FileTextIcon","ScaleIcon","LogOutIcon","ShieldCheckIcon","CheckCircleIcon","XCircleIcon","steps","GettingHiredChapter","WorkplaceRightsChapter","rights","right","EndingEmploymentChapter","dilemmas","RightsDefendersGame","onGameComplete","currentDilemmaIndex","setCurrentDilemmaIndex","gameState","setGameState","currentDilemma","a","handleAnswerSelect","option","handleNext","handleRestart","d","answerRecord","RightsModule","currentStep","setCurrentStep","renderStepContent","React","generateStockData","startDate","endDate","startPrice","volatility","trend","data","currentDate","finalDate","currentPrice","day","changePercent","changeAmount","stockConfigs","generatedStockData","symbol","params","stockData","WhatIsInvestment","initialItems","itemsToSort","setItemsToSort","i","assignments","setAssignments","handleDragStart","itemName","handleDrop","targetCategory","investmentItems","spendingItems","InvestmentTypes","types","getRiskStyles","risk","CompoundInterestCalculator","principal","setPrincipal","rate","setRate","setYears","monthlyContribution","setMonthlyContribution","calculationResults","compoundInterestTotal","finalValue","totalInvested","totalGains","investedPercentage","gainsPercentage","LineChart","CartesianGrid","XAxis","YAxis","Line","InvestmentSimulator","investmentAmount","setInvestmentAmount","selectedStock","setSelectedStock","setStartDate","setEndDate","stockHebrewNames","availableStocks","minDate","maxDate","handleSimulation","stockHistory","startEntry","endEntry","profit","profitPercentage","KnowledgeQuiz","current","setCurrent","answerState","setAnswerState","finished","setFinished","prizeLevels","handleSelect","stateClass","level","InterestModule","UserIcon","CalculatorIcon","IntroductionStep","CharacterChallengeStep","INCOME","totalExpenses","initialBalance","removedExpenses","setRemovedExpenses","handleToggleExpense","expense","currentTotal","re","currentBalance","exp","isRemoved","OverdraftSimulator","setBalance","interest","setInterest","months","setMonths","monthlyChange","setMonthlyChange","totalInterestPaid","interestForMonth","finalBalance","goalReachedMonth","QuizStep","OverdraftModule","apiKey","ai","GoogleGenAI","ensureAI","getCostOfLivingInfo","prompt","getClientSimulationResponse","businessIdea","chatHistory","historyString","msg","response","Type","RichPiggyBankIcon","RichShoppingBagIcon","FoundationIcon","ChecklistIcon","GiftIcon","hatzarInitialItems","ExpensesModule","droppedItems","setDroppedItems","game1Score","setGame1Score","hatzarItems","setHatzarItems","hatzarDroppedItems","setHatzarDroppedItems","game2Score","setGame2Score","searchTerm","setSearchTerm","aiAnswer","setAiAnswer","isLoading","setIsLoading","game1Completed","game2Completed","f","handleDragOver","handleHatzarDrop","undropItem","itemToUnsort","newDropped","undropHatzarItem","handleSearch","resetGames","itemsToSort1","hatzarItemsToSort","VideoCameraIcon","CheckBadgeIcon","MagnifyingGlassIcon","Quiz","onQuizSuccess","currentQuestion","setCurrentQuestion","selectedOption","setSelectedOption","quizFinished","setQuizFinished","nextQuestion","Step1","Step2","Step3","ResearchModule","quizCompleted","setQuizCompleted","handleQuizSuccess","allQuestions","MC_Question","questionData","onAnswered","Matching_Question","terms","p","definitions","selectedTerm","setSelectedTerm","matches","setMatches","submitted","setSubmitted","handleTermSelect","handleDefinitionSelect","definition","handleSubmit","correctMatches","pair","def","Categorization_Question","unassignedItems","setUnassignedItems","allCorrect","cat","FinalExam","examState","setExamState","userName","setUserName","setQuestions","answerSubmitted","setAnswerSubmitted","startQuiz","renderCurrentQuestion","renderContent","linkCategories","options","finalScore","getCategoryStyles","color","LinkCard","desc","url","DocumentCard","LinksModule","activeTab","setActiveTab","showQuiz","setShowQuiz","styles","link","DifferencesStep","SortingGameStep","gameFinished","SelfEmployedTypes","onQuizComplete","scenarios","scenarioId","scenario","bgColor","RestaurantExercise","menu","selectedDish","setSelectedDish","dishData","totalCosts","netProfit","SwotPractice","categories","unassigned","setUnassigned","correctCount","icon","colors","SelfEmployedModule","completedSteps","setCompletedSteps","handleStepCompletion","stepIndex","newCompleted","colorSchemes","ProgramCard","audience","topics","isComingSoon","scheme","cardClasses","topic","programs","LandingPage","onSelectProgram","UserTypeCard","MainLandingPage","onSelectStudents","onSelectInstructors","onSelectParents","ActionCard","InstructorsPage","GuideSection","FinancialParentGuide","iconBgClass","titleClass","descriptionClass","ParentsPage","view","setView","LoginPage","userType","onLogin","showGradeSelector","selectedGrade","setSelectedGrade","grades","handleGuestLogin","g","BarterIntroduction","BarterGame","traders","startItem","goalItem","inventory","setInventory","selectedItem","setSelectedItem","message","setMessage","hasWon","handleTrade","trader","t","MazeGame","canvasRef","ctx","cellSize","maze","player","coins","draw","handleKeyDown","newX","newY","MoneyEvolution","timeline","StoryOfMoneyModule","FeelingsStep","feelings","selectedFeelings","setSelectedFeelings","toggleFeeling","feeling","GoalSettingStep","goal","setGoal","monthsToGoal","commonGoals","handleGoalSelect","EarningMoneyStep","waysToEarn","way","GOAL_SCORE","MotorcycleGame","lives","setLives","gameOverReason","setGameOverReason","playerRef","platformsRef","collectiblesRef","floatingTextsRef","particlesRef","cameraYRef","highestPlatformY","cloudsRef","keysRef","startGame","isFullReset","initialPlatforms","drawMotorcycle","GRAVITY","MOVE_FORCE","JUMP_FORCE","DOUBLE_JUMP_FORCE","FRICTION","MAX_VX","handleKeyUp","animationFrameId","gameLoop","platform","isPositive","angle","speed","reason","l","skyGradient","cloud","parallaxY","ft","_","OverdraftStep","MoneyAndMeModule","overdraftGameCompleted","setOverdraftGameCompleted","allItems","shoppingList","BUDGET","ShoppingChallenge","cart","setCart","budget","setBudget","specialOffer","setSpecialOffer","offerCountdown","setOfferCountdown","cartTotal","offerTimer","wantItems","randomOffer","countdownTimer","addToCart","removeFromCart","itemToRemove","inCart","CheckoutStep","allListItemsBought","cartItem","needs","wants","SummaryStep","tips","tip","HowMuchCostModule","restartModule","handleSetStep","MonopolyGame","round","setRound","boughtItem","setBoughtItem","takeover","setTakeover","competitiveStores","monopolyStore","handleBuy","handleNextRound","store","ExamplesStep","examples","ex","AuthorityStep","MillionaireQuiz","companyLogos","MonopoliesModule","SpotTheTrickGame","tricksQuiz","PriceComparisonChallenge","products","guesses","setGuesses","bestValue","b","handleGuess","KnowYourRightsStep","r","MemoryGame","cardItems","generateShuffledCards","cards","setCards","flippedIndices","setFlippedIndices","matchedNames","setMatchedNames","isChecking","setIsChecking","firstIndex","secondIndex","isGameFinished","card","isFlipped","SmartConsumerismModule","trickGameCompleted","setTrickGameCompleted","MoneyPersonalityQuiz","power","counts","dominantPower","QuizResult","info","BOARD_SIZE","INITIAL_SPEED","MIN_SPEED","SPEED_INCREMENT","FinancialSnakeGame","snake","setSnake","food","setFood","direction","setDirection","setSpeed","moneyCollected","setMoneyCollected","dilemmasAnswered","setDilemmasAnswered","specialCollectible","setSpecialCollectible","isDilemmaVisible","setIsDilemmaVisible","setCurrentDilemma","dilemmaFeedback","setDilemmaFeedback","usedDilemmaIds","setUsedDilemmaIds","directionRef","gameInterval","prevSnake","newSnake","head","newFoodPos","pauseAndShowDilemma","newSpecialPos","dx","dy","resetGame","available","next","handleDilemmaAnswer","closeDilemmaAndResume","renderGameBoard","isSnake","isHead","isFood","isSpecial","CommunicationPractice","RelationshipsMoneyModule","quizResult","setQuizResult","SuperpowerQuiz","IdeaMarket","superpower","onIdeaSelected","idea","ClientChat","onChatComplete","messages","setMessages","userInput","setUserInput","feedbackHistory","setFeedbackHistory","chatEnded","setChatEnded","messagesEndRef","scrollToBottom","handleSend","newMessages","aiResponse","m","fb","AdCreator","adInfo","setAdInfo","logoUrl","setLogoUrl","logoLoading","setLogoLoading","logoError","setLogoError","handleInputChange","handleGenerateLogo","base64ImageBytes","HowToEarnModule","userSuperpower","setUserSuperpower","userBusinessIdea","setUserBusinessIdea","isChatCompleted","setIsChatCompleted","handleQuizComplete","handleIdeaSelected","handleChatComplete","stepData","hourlyRate","setHourlyRate","hoursSpent","setHoursSpent","opportunityCost","EisenhowerMatrixStep","quadrants","initialTasks","tasks","setTasks","assignedTasks","setAssignedTasks","taskName","task","EnergyMeterStep","energy","setEnergy","completedTasks","setCompletedTasks","handleTaskClick","newEnergy","energyColor","DayInLifeStep","distractions","TOTAL_HOURS","setTimeline","distraction","setDistraction","hourIndex","h","newTimeline","handleDistraction","accept","j","calculateResults","happiness","uniqueTasks","typedTask","timer","TimeManagementModule","modelItems","ModelStep","activeItem","setActiveItem","PitchChallengeStep","onStartPitch","RubricStep","onRubricComplete","ratings","setRatings","handleRatingChange","isComplete","averageScore","ConclusionStep","PublicSpeakingModule","InspirationStep","ProblemSolverStep","problems","flipped","setFlipped","IdeaGeneratorStep","onPlanComplete","audiences","generatedAudience","setGeneratedAudience","generatedTopic","setGeneratedTopic","plan","setPlan","isGenerated","setIsGenerated","generateIdea","isPlanComplete","BuildBusinessModule","planCompleted","setPlanCompleted","HatsarModelModule","hatsarStep","setHatsarStep","hatsarData","setHatsarData","setIsCompleted","handleStart","handleFinish","getHatsarResult","q1","q2","priority","askFirstQuestion","askSecondQuestion","INITIAL_BUDGET","CATEGORIES","GROUP_TASKS","RANDOM_EVENTS","allCategoryIds","FutureManagersChallengeModule","groups","setGroups","activeCategoryId","setActiveCategoryId","selectedGroup","setSelectedGroup","inputValue","setInputValue","eventMessage","setEventMessage","calculateTotalExpenses","group","updateBudget","groupId","catId","numericAmount","finalAmount","newExpenses","triggerEvent","groupName","hasCompletedAnyGroup","categoryId","jobs","tools","GAME_WIDTH","TOOL_WIDTH","shuffleArray","array","shuffled","WhereMoneyComesFromModule","fallingTool","setFallingTool","gameQueue","setGameQueue","spawnTool","queue","nextJob","toolIcon","shuffledJobs","prevTool","correctJob","nextQueue","job","GOAL","BasketballHoop","NeedsVsWantsModule","extended","currentItemIndex","setCurrentItemIndex","animation","setAnimation","hoopPositions","setHoopPositions","gameWon","setGameWon","gameAreaRef","needsHoopRef","wantsHoopRef","itemContainerRef","currentItem","moveHoops","gameWidth","hoopWidth","newNeedsX","newNeedsDir","newWantsX","newWantsDir","handleHoopClick","hoopRef","gameAreaRect","hoopRect","itemRect","itemInitialX","itemInitialY","targetX","targetY","newScore","newIndex","prevItems","itemStyle","GOAL_AMOUNT","SQUIRREL_WIDTH","Squirrel","Acorn","Stone","AcornSack","count","fillPercentage","SavingsAdventureModule","savedCoins","setSavedCoins","fallingObject","setFallingObject","squirrelX","setSquirrelX","highScore","setHighScore","goalMessageShown","setGoalMessageShown","animations","setAnimations","storedHighScore","spawnObject","prevX","prevObject","newId","anim","storeItems","AnimatedWallet","initialBudget","thicknessScale","ShoppingCart","MagicStoreModule","isFinished","setIsFinished","gameStarted","setGameStarted","finishShopping","missingItems","restart","JarBankModule","board","setBoard","turn","setTurn","winner","setWinner","showQuestion","setShowQuestion","checkWinner","currentBoard","lines","line","cell","handleCellClick","randomQuestion","newBoard","gameWinner","computerMove","emptyCells","move","countries","WorldTourModule","fact","setFact","currentCountry","handleCountryClick","countryId","country","tricks","AdSecretsModule","special","setSpecial","foundTricks","setFoundTricks","generatePosition","currentSnake","newPos","interval","ate","trickToShow","restartGame","missions","EarningMissionsModule","totalEarnings","setTotalEarnings","activeMissions","setActiveMissions","gameTimer","showRandomMissions","shuffledHoles","hole1","hole2","shuffledMissions","mission1","mission2","initialTimeout","handleMissionClick","missionIndex","mission","activeMissionData","LemonadeStand","advertising","CustomSlider","min","max","onChange","labels","IntroScreen","onStart","SetupScreen","settings","setters","onStartDay","weather","dayInfo","ResultsScreen","onNext","animatedCustomers","setAnimatedCustomers","FinalScreen","totalProfit","onRestart","ColorfulMarketModule","setTotalProfit","dayResults","setDayResults","setPrice","quality","setQuality","supply","setSupply","setAdvertising","setWeather","calculateDayResult","currentDay","actualPrice","costPerCup","potentialCustomers","actualCustomers","costs","earnings","handleNextDay","lastResult","rounds","cashDrawerMoney","Coin","Bill","CoinsVsBillsModule","currentRound","setCurrentRound","selectedChangeItems","setSelectedChangeItems","roundData","requiredChange","currentChangeTotal","handleMoneyClick","handleUndo","giveChange","PowerOfGivingModule","choiceMade","setChoiceMade","handleChoice","levels","SmallDecisionsModule","activeStory","setActiveStory","currentLevel","setCurrentLevel","paddleRef","ballRef","bricksRef","powerUpsRef","livesRef","BRICK_WIDTH","BRICK_HEIGHT","stories","createBricks","newBricks","totalBricks","numStoryBricks","storyCounter","isStory","startLevel","levelIndex","pauseAndShowStory","storyId","storyIndex","handleStoryChoice","consequence","ball","hitPoint","brick","remainingGoalBricks","renderOverlay","baseClasses","KisonimSalaryIcon","KisonimHeartIcon","KisonimPiggyBankIcon","KisonimStoreIcon","KisonimBudgetIcon","KisonimGlobeIcon","KisonimResearchIcon","KisonimStarIcon","KisonimExpensesIcon","KisonimCoinIcon","KisonimPodiumIcon","KisonimBusinessIcon","hachamBakisModules","maBakisModules","kisonimModules","programModules","App","appState","setAppState","selectedModule","setSelectedModule","visitedModules","setVisitedModules","selectedProgram","setSelectedProgram","storedVisited","handleSelectProgram","programId","handleSelectModule","module","handleBackToUserSelection","handleBackToProgramSelection","handleStudentLogin","grade","highSchool","middleSchool","elementarySchool","handleBackFromModule","handleModuleComplete","moduleId","newVisited","currentProgramModules","requiredModules","ModuleComponent","completedRequiredCount","progress","canTakeExam","rootElement","root","ReactDOM"],"mappings":"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"}